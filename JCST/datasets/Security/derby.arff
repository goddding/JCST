@relation 'DerbyBug'

@attribute Text string
@attribute class-att {0,1}

@data

' Network Server Protocol error when select fails and  order by  is specified    Reporting for Army  filed on derby dev list If  when using the Network Server  one tries to execute a select statement that fails because of an SQL exception  ex  divide by zero   and if an  order by  clause is specified as part of the select  the server will throw a distributed protocol exception  instead of the appropriate error Repro  using the  ij  utility ij gt  connect  jdbc derby net   localhost      myDB user u password p   ij gt  create table t   i int  j int    rows inserted updated deletedij gt  insert into t  values         row inserted updated deleted        Without an  order by  it s fine                     gt   Attempt to divide by zero    which is fine ij gt  select  fn mod i j   from t              ERROR        DB  SQL error  SQLCODE      SQLSTATE         SQLERRMC               With an order by  it dies   ij gt  select  fn mod i j   from t  order by   ERROR        Execution failed due to a distribution protocol error that caused deallocation of the conversation  A DRDA Data Stream Syntax Error was detected  Reason   x  NOTES The problem is in the DRDAConnThread java file   processCommands       method  in the  case CodePoint OPNQRY  block of code  In the case of an SQL exception  there s a call to  writer clearBuffer    that is used to ensure that only an OPNQFLRM is sent back to the client  not the OPNQRYRM and or QRYDSC that may have been written to buffer before the OPNQFLRM  That call to  clearBuffer  has to be replaced with something smarter  so that instead of doing a full clear  which causes the problem shown above   it only backs out the buffer writes that it has made since beginning the  case CodePoint OPNQRY  block      ',0
'NPE when trying to create a database at a directory that is not allowed    Opening this bug on behalf of Daniel Debrunner                                                              This bug occurs in embedded Derby and Derby Network Server  In Derby Network Server  it might be best for a security exception to be thrown when trying to create a database at a disallowed directory  SQLSTATE        This bug can be reproduced in IJ like so  if your  D  drive is an inaccessible disk  e g  your CD ROM ij gt  connect  jdbc derby d  wombat  create true  ERROR XJ     Failed to create database  d  wombat     ',0
'Make LOCKS as non reserved keyword in Derby since it is not a reserved keyword in the SQL standards    Since LOCKS is not a reserved keyword in SQL standards  Derby should not make LOCKS as reserved keyword    ',0
'NPE when creating a trigger on a table and default schema doesn t exist     BACKGROUND When connecting to a Derby db with a user id and password  the default schema is USER  For example  if I connect with ij gt  connect  jdbc derby myDB user someUser password somePwd  then the default schema is  SOMEUSER  PROBLEM It turns out that if a table t  exists in a non default schema and the default schema  in this case   SOMEUSER   doesn t exist yet  because no objects have been created in that schema   then attempts to create a trigger on t  using its qualified name will lead to a null pointer exception in the Derby engine REPRO In ij         Create database with default schema  SOMEUSER  ij gt  connect  jdbc derby myDB create true user someUser password somePwd          Create table t  in a non default schema  in this case  call it  ITKO  ij gt  create table itko t   i int    rows inserted updated deleted        Now schema ITKO exists  and T  exists in schema ITKO  but default schema SOMEUSER does NOT exist  because we haven t created any objects in that schema yet         So now we try to create a trigger in the ITKO  i e  the non default  schema   ij gt  create trigger trig  after update on itko t  for each row mode db sql select   from sys systables ERROR XJ     Java exception     java lang NullPointerException  A look at the derby log file shows the stack trace given below  In a word  it looks like the  compilation schema  field of SYS SYSTRIGGERS isn t getting set  and so it ends up being null  That causes the NPE in subsequent processing   java lang NullPointerException at org apache derby impl sql catalog SYSSTATEMENTSRowFactory makeSYSSTATEMENTSrow SYSSTATEMENTSRowFactory java      at org apache derby impl sql catalog DataDictionaryImpl addSPSDescriptor DataDictionaryImpl java       at org apache derby impl sql execute CreateTriggerConstantAction createSPS CreateTriggerConstantAction java      at org apache derby impl sql execute CreateTriggerConstantAction executeConstantAction CreateTriggerConstantAction java      at org apache derby impl sql execute MiscResultSet open MiscResultSet java     at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java       ',0
'RunSuite summary rounds incorrectly    Example output from RunSuite in the report file    Tests Run     Pass      tests passed     Fail    tests failed A single failure should not lead to    fail and      pass Should round down on pass percentage and round up on fail percentage    ',0
'dblook displays message keys instead of their associated text    Using Derby version                      when I execute java org apache derby tools dblookinstead of getting the usage message  I get CSLOOK UsageSimilarly  when using dblook to generate database schema  the output text contains keys such as the one above  instead of their associated text  e g         CSLOOK Timestamp   lt                         gt         CSLOOK DBName   lt sample gt         CSLOOK DBUrl   lt jdbc derby sample gt         appendLogs  false                                                              CSLOOK SchemasHeader                                                      CREATE SCHEMA  SAMP                                                                CSLOOK TablesHeader                                                      CREATE TABLE  SAMP   IN TRAY    RECEIVED  TIMESTAMP   SOURCE  CHAR      SUBJECT  CHAR       NOTE TEXT  VARCHAR           ',0
'Lock not being released properly  possibly related to occurence of lock escalation    In the following scenario   lt code snippet gt  String sel    select   from t  FOR UPDATE of i    PreparedStatement ps    conn prepareStatement  sel   int val        ps  setMaxRows val   ResultSet rs   ps  executeQuery    String ins    Update t  set i    WHERE CURRENT OF   rs getCursorName     PreparedStatement ps    conn prepareStatement ins   ps  setInt   iteration   while rs next      ps  executeUpdate          print lock table information System out println  Lock Table before commit transaction    printLockTable conn   conn commit    lt end code snippet gt Running the above transaction twice causes a lock timeout the second time It seems like locks are not being released properly on the table even after the transaction commits and the connection is closed  Also  this condition seems to happen only when lock escalation to table lock occurs  By increasing lock escalation threshold to prevent lock escalation and with only row level locking  the locks are released properly I printed out the locks information and see a U row level lock on the table   and also a table level lock as a result of lock escalation  After commit  and resultset being closed  the U row level lock is not released  Thus in the second iteration of the test  the unreleased U row level lock causes a lock timeout to happen  In case of the second iteration of the test  the lock table shows the previous U row lock with a null transaction id  This is not right  The transactions are running at the default isolation level   read committed  By default  the lock escalation threshold is set to     http   incubator apache org derby manuals tuning perf   html IDX   I will be attaching the program for reproduction  To reproduce the problem with less number of rows in the table  please run the program with the following derby properties set derby locks deadlockTrace truederby locks escalationThreshold       ',0
'Suite jdk   is skipped incorrectly with J SE        Since J SE     is a super set of JDK      and JDK    tests should run in J SE      ',0
'Derby incorrectly rounds double values down during insert into NUMERIC    When inserting a double value into a field defined as NUMERIC a b  using PreparedStatement setDouble    Derby may incorrectly round the number down  For example  a NUMERIC      field with a double        ends up with a value of      in the database  This works fine in Oracle and other databases The problem occurs because double cannot represent      exactly  so the actual value is              SQLDecimal setCoreValue uses BigDecimal double  which constructs a BigDecimal of              and then SQLDecimal setWidth uses value setScale desiredScale  BigDecimal ROUND DOWN   Note that BigDecimal javadoc recommends that the double constructor be avoided for this reason One fix appears to be to change SQLDecimal setCoreValue double  to avoid using the double constructor of BigDecimal  Using Double toString   and BigDecimal String  looks as if it would work as expected  because Double toString   has  special rounding abilities  and converts             back to         ',0
'Aliased Columns not recognized after  group by    order by  combination    I ve been doing work to try and integrate Derby with the Mondrian ROLAP engine  which has uncovered a bug in Derby when a query involves column aliasing  a group by clause  and an order by clause For example  Mondrian will generate the following query select STORE STORE COUNTRY as c   STORE STORE STATE as c   STORE STORE CITY as c   STORE STORE NAME as c   STORE STORE TYPE as c   STORE STORE MANAGER as c   STORE STORE SQFT as c   STORE GROCERY SQFT as c   STORE FROZEN SQFT as c   STORE MEAT SQFT as c   STORE COFFEE BAR as c    STORE STORE STREET ADDRESS as c   from STORE as STORE group by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAME  STORE STORE TYPE  STORE STORE MANAGER  STORE STORE SQFT  STORE GROCERY SQFT  STORE FROZEN SQFT  STORE MEAT SQFT  STORE COFFEE BAR  STORE STORE STREET ADDRESS order by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAMEwhich should be valid SQL  I have tested this query outside of the Mondrian environment and still receive the same error which is  Column  STORE STORE COUNTRY  is not in any table in the FROM list or it appears within a join specification and is outside the scope of the join specification or it appears in a HAVING clause and is not in the GROUP BY list SQL State    x  Error Code       However  if I remove any one of the three elements  aliasing  group by  order by  or if the order by uses the aliased names  the query works  It is only the combination of all   elements that is causing a problem      ie  all of the following queries work correctly     select STORE STORE COUNTRY   STORE STORE STATE   STORE STORE CITY   STORE STORE NAME   STORE STORE TYPE   STORE STORE MANAGER   STORE STORE SQFT   STORE GROCERY SQFT   STORE FROZEN SQFT   STORE MEAT SQFT   STORE COFFEE BAR   STORE STORE STREET ADDRESS from STORE as STORE group by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAME  STORE STORE TYPE  STORE STORE MANAGER  STORE STORE SQFT  STORE GROCERY SQFT  STORE FROZEN SQFT  STORE MEAT SQFT  STORE COFFEE BAR  STORE STORE STREET ADDRESS order by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAMEselect STORE STORE COUNTRY as c   STORE STORE STATE as c   STORE STORE CITY as c   STORE STORE NAME as c   STORE STORE TYPE as c   STORE STORE MANAGER as c   STORE STORE SQFT as c   STORE GROCERY SQFT as c   STORE FROZEN SQFT as c   STORE MEAT SQFT as c   STORE COFFEE BAR as c    STORE STORE STREET ADDRESS as c   from STORE as STORE group by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAME  STORE STORE TYPE  STORE STORE MANAGER  STORE STORE SQFT  STORE GROCERY SQFT  STORE FROZEN SQFT  STORE MEAT SQFT  STORE COFFEE BAR  STORE STORE STREET ADDRESSselect STORE STORE COUNTRY as c   STORE STORE STATE as c   STORE STORE CITY as c   STORE STORE NAME as c   STORE STORE TYPE as c   STORE STORE MANAGER as c   STORE STORE SQFT as c   STORE GROCERY SQFT as c   STORE FROZEN SQFT as c   STORE MEAT SQFT as c   STORE COFFEE BAR as c    STORE STORE STREET ADDRESS as c   from STORE as STORE order by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAMEselect STORE STORE COUNTRY as c   STORE STORE STATE as c   STORE STORE CITY as c   STORE STORE NAME as c   STORE STORE TYPE as c   STORE STORE MANAGER as c   STORE STORE SQFT as c   STORE GROCERY SQFT as c   STORE FROZEN SQFT as c   STORE MEAT SQFT as c   STORE COFFEE BAR as c    STORE STORE STREET ADDRESS as c   from STORE as STORE group by STORE STORE COUNTRY  STORE STORE STATE  STORE STORE CITY  STORE STORE NAME  STORE STORE TYPE  STORE STORE MANAGER  STORE STORE SQFT  STORE GROCERY SQFT  STORE FROZEN SQFT  STORE MEAT SQFT  STORE COFFEE BAR  STORE STORE STREET ADDRESS order by c  c  c  c    ',0
'Network Server Gives NPE if SQLException has null arguments    e g  for ERROR XBM H     Network server  Network Server throws an NPE because one of the arguments of the SQLException is null  It shouldn t do so To reproduce try to create a database in the root directory on Linux  Do not run in security manager  The trace below came from an extra     in the url in NSinSameJVM javaThe issues are    Network Server throws an NPE because one of the arguments of the SQLException is null in this code  It shouldn t do so    arguments are variable part of a message Object   args   ce getArguments    for  int i      args    null  amp  amp  i  lt  args length  i    sqlerrmc    args     i      toString     separator    This exception seems to have null arguments which doesn t seem right  ERROR XBM H  Directory  NSinSameJVMTestDB cannot be created ERROR XBM H  Directory  NSinSameJVMTestDB cannot be created  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl services monitor PersistentServiceImpl   run PersistentServiceImpl java      at java security AccessController doPrivileged Native Method  at org apache derby impl services monitor PersistentServiceImpl createServiceRoot PersistentServiceImpl java      at org apache derby impl services monitor BaseMonitor bootService BaseMonitor java       at org apache derby impl services monitor BaseMonitor createPersistentService BaseMonitor java       at org apache derby iapi services monitor Monitor createPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection createDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc Driver    connect Driver    java      at org apache derby impl drda Database makeConnection Database java      at org apache derby impl drda DRDAConnThread getConnFromDatabaseName DRDAConnThread java       at org apache derby impl drda DRDAConnThread verifyUserIdPassword DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseSECCHK DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseDRDAConnection DRDAConnThread java       at org apache derby impl drda DRDAConnThread exchangeServerAttributes DRDAConnThread java      at org apache derby impl drda DRDAConnThread sessionInitialState DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java     Cleanup action completed                        GMT Thread     DRDAConnThread     derby daemons       DATABASE    NSinSameJVMTestDB    DRDAID         Failed to create database   NSinSameJVMTestDB   see the next exception for details                         GMT Thread     DRDAConnThread     derby daemons       DATABASE    NSinSameJVMTestDB    DRDAID         Directory  NSinSameJVMTestDB cannot be created                         GMT Thread     DRDAConnThread     derby daemons       DATABASE    NSinSameJVMTestDB    DRDAID   NF       A FB                          Failed to create database   NSinSameJVMTestDB   see the next exception for details                         GMT Thread     DRDAConnThread     derby daemons       DATABASE    NSinSameJVMTestDB    DRDAID   NF       A FB                          nullnulljava lang NullPointerException at org apache derby impl drda DRDAConnThread writeSQLCAGRP DRDAConnThread java       at org apache derby impl drda DRDAConnThread writeSQLCARD DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseDRDAConnection DRDAConnThread java       at org apache derby impl drda DRDAConnThread exchangeServerAttributes DRDAConnThread java      at org apache derby impl drda DRDAConnThread sessionInitialState DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java     nulljava lang NullPointerException at org apache derby impl drda DRDAConnThread writeSQLCAGRP DRDAConnThread java       at org apache derby impl drda DRDAConnThread writeSQLCARD DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseDRDAConnection DRDAConnThread java       at org apache derby impl drda DRDAConnThread exchangeServerAttributes DRDAConnThread java      at org apache derby impl drda DRDAConnThread sessionInitialState DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java        ',0
'Derby should throw a truncation error or warning when CASTing a parameter constant to char or char for bit datatypes and the data is too large for the datatype     Derby doesn t throw a truncation exception warning when data is too large during casting of constants or parameters to character string or bit string data types  Following is ij example for constants which is too big for the datatype it is getting cast toij gt  values  cast   hello  as char       hel  row selectedij gt  values  cast  X       as char    for bit data        row selectedFollowing code snippet is when using parameters through a JDBC program s executeUpdate  create table ct  c CLOB    K        the following Formatters just loads cData with        c  characters String cData   org apache derbyTesting functionTests util Formatters repeatChar  c            notice that   in the preared statement below is bound to length       pSt   con prepareStatement  insert into ct values  cast    as varchar             pSt setString    cData     Derby doesn t throw an exception at ps execute time for       characters into       parameter  It silently truncates it to       pSt execute      ',0
'Bad Eclipse plugin version specification    In the plugin xml of the Derby Eclipse plugin  the version specification reads                      which Eclipse complains about as being illegal  In consequence  the plugin is not loaded The Eclipse docs have the following to say about the version specification   Plug in version format is major minor service qualifier  Stripping the              whatever that is anyway  solves the problem    ',0
'For the concurrency of ResultSet  Network Server should not send the concurrency of Statement     I am working on getting updatable resulset functionality to work under Network Server  One issue that I found is Network Server sends the concurrency of the Statement object when it really needs to send the concurrency of the Resultset  This was ok in the past because CONCUR READ ONLY was the only concurreny supported by Derby  But  now with the support of CONCUR UPDATABLE  it is possible that the concurrency of ResultSet might not be same as the Statement object  Hence  Network Server should send the concurrency of the ResultSet object if that is what the protocol calls for The fix for this is localized in java drda org apache derby impl drda DRDAConnThread java    ',0
'setNull does not work with java sql Types TIMESTAMP    Calling setNull x java sql Types TIMESTAMP  throws an exception with the following message   x is the column number Message is    An attempt was made to get a data value of type  TIMESTAMP  from a data value of type  null      ',0
'Parameter names required in CREATE FUNCTION    A statement like create function s  f   char     integer  returns int language java parameter style java external name  myclass mymethod fails with the message ERROR   X    Syntax error  Encountered  char  at line    column   However create function s  f   p  char     p  integer  returns int language java parameter style java external name  myclass mymethod is accepted The Derby documentation  at http   incubator apache org derby manuals reference sqlj   html CREATE PROCEDURE Statement   the SQL     standard  and DB  all agree that the parameter name is optional    ',0
'List of jar files in tools java incorrect in BUILDING txt    Section   of BUILDING txt describes how to obtain JDK      JDK      JDBC     extensions  JCE  OSGI  But then it says you should have the following jars   derby source  tools java javacc jar  derby source  tools java jakarta oro       jar  derby source  tools java jce      jar  derby source  tools java jdbc    stdext jar  derby source  tools java jta      B classes zip  derby source  tools java servlet jar  derby source  tools java osgi jarActually  what you have is the following empty jargeronimo spec jta      B rc  jargeronimo spec servlet     rc  jarjakarta oro       jarjavacc jarjce      jarjdbc    stdext jarosgi jarI am providing a patch with this correction    ',0
'isFirst   returns true when relative x  goes beyond result set    Bizarre error  Not sure if this is a JDBC  Derby  or Java issue An opened result set has   records  A call to relative    while on row   should result in isAfterLast true  and isFirst  isBeforeFirst  and IsLast set to false  However  the result is isAfterLast True and isFirst True ij connect  IsAfter create true  create table x  a char      insert into x values                 quit import java sql    public class ErrIsFirst   public static void main String argv    throws SQLException   Connection conn   null  Statement s   null  ResultSet rs   null  String DerbyDriver    org apache derby jdbc EmbeddedDriver   String returnValue  try   Class forName DerbyDriver  newInstance      catch  Exception NoDriver    System out println  Derby driver not found      DerbyDriver   NoDriver printStackTrace    System exit       try   conn   DriverManager getConnection  jdbc derby IsAfter    s   conn createStatement ResultSet TYPE SCROLL INSENSITIVE ResultSet CONCUR READ ONLY   rs   s executeQuery   SELECT A FROM X    rs next       First Record returnValue   rs getString  A    System out println  Value   returnValue   rs relative     System out println  isFirst     rs isFirst       isLast     rs isLast       isAfterLast     rs isAfterLast     returnValue   rs getString  A    System out println  Value   returnValue   rs relative      returnValue   rs getString  A    System out println  Value   returnValue   rs relative      System out println  isFirst     rs isFirst       isLast     rs isLast       isAfterLast     rs isAfterLast     returnValue   rs getString  A    System out println  Value   returnValue   rs close    s close      catch  SQLException se    String SQLState   se getSQLState    String SQLMessage   se getMessage    System out println  Error     SQLState   System out println SQLMessage       The results on my system are Value  isFirst false isLast false isAfterLast falseValue  Value  isFirst true isLast false isAfterLast trueError        Invalid cursor state   no current row If you eliminate the first println call to isFirst   you get the following  correct  results Value  Value  Value  isFirst false isLast false isAfterLast trueError        Invalid cursor state   no current row Okay  so where did we go wrong    ',0
'setNull x JDBCType DATE  does not work when batching is turned on    Trying to execute batch on which setNull x DATE  was called gives the following exception SQL Exception  An attempt was made to get a data value of type  DATE  from a data value of type  null   at org apache derby impl jdbc Util newEmbedSQLException Util java  at org apache derby impl jdbc Util newEmbedSQLException Util java  at org apache derby impl jdbc Util generateCsSQLException Util java  at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java  at org apache derby impl jdbc ConnectionChild newSQLException ConnectionChild java  at org apache derby impl jdbc EmbedPreparedStatement dataTypeConversion EmbedPreparedStatement java  at org apache derby impl jdbc EmbedPreparedStatement setObject EmbedPreparedStatement java  at org apache derby iapi types DataType setInto DataType java  at org apache derby impl jdbc EmbedPreparedStatement executeBatchElement EmbedPreparedStatement java  at org apache derby impl jdbc EmbedStatement executeBatch EmbedStatement java  at net sf hibernate impl BatchingBatcher doExecuteBatch BatchingBatcher java    DATE column is nullable in db schema  so it should pass there ok  I believe the problem is in org apache derby iapi types SQLDate  which does not implement setInto method  so DataType setInto method is executed  calling setObject x null   setObject thinks this is JDBC spec violation and fails on exception Problem exists in both          and            ',0
'Column names on ResultSet updateXXX and getXXX methods are handled incorrectly    Sections        and                  of JDBC     spec sayColumn names supplied to getter      updater      methods are case insensitive  If a select listcontains the same column more than once  the first instance of the column will bereturned      updated      Derby returns or updates the last column in the select list  not the first  With the attached Java class I seePRE UPDATE     POST UPDATE     POST UPDATE getXXX name AB     ab      ',0
' Schema already exists  when creating a table    When running a multithreaded program where several threads in parallell create tables in a schema that is not explicitly created  one often get the following exception ERROR X Y    Schema  TESTSCHEMA  already exists  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql catalog DataDictionaryImpl duplicateDescriptorException DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl addDescriptorNow DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl addDescriptor DataDictionaryImpl java       at org apache derby impl sql execute CreateSchemaConstantAction executeConstantAction CreateSchemaConstantAction java      at org apache derby impl sql execute DDLConstantAction getSchemaDescriptorForCreate Unknown Source  at org apache derby impl sql execute CreateTableConstantAction executeConstantAction CreateTableConstantAction java      at org apache derby impl sql execute MiscResultSet open MiscResultSet java     at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at derbytest Main CreateTable run Main java     at java lang Thread run Thread java     A program that reproduces this bug will be attached    ',0
'Testharness  testEncryptionAlgorithm property is not being picked up correctly for some encryption suites    It looks like the encryption properties   testEncryptionAlgorithm DESede CBC NoPadding is not being picked up for the encryption run of stress multi test  But the test uses a database with the default encryption algorithm   DES CBC NoPadding   ',1
'Builds fail during splitmessages step if path contains spaces    If the path to the Derby source files contains a space  for example  opt My Local Drive derbysource  then the build will fail at the splitmessages step with the following error       java      Exception in thread  main  java lang StringIndexOutOfBoundsException  String index out of range          java      at java lang String substring String java            java      at org apache derbyBuild splitmessages main splitmessages java    splitmessages should be improved to handle spaces in the path to the message files    ',0
'test tools dblook test java fails if run in a directory having   derby    in its path    SYMPTOM  The test  tools dblook test  will fail  The diff looks similar to this      Start  dblook test jdk         derbyall derbytools                            d     lt  java io FileNotFoundException   lt filePath gt Test Failed  End  dblook test jdk         derbyall derbytools                            cf mail thread http   mail archives apache org mod mbox db derby dev        mbox   c               GB    ac   fr    y net  eANALYSIS  The problem lies with the sedfunctionality in the test harness  which delete certain lines beforecomparing with the master file Sed java in the harness removes lines containing derby  in the path viz  deleteLines addElement    derby     lt     gt              deleteLines addElement    derby             so if your tests are running in a directory containing this pattern  aline too much is deleted from dblook test tmp  thereby giving acomparison failure like you describe I don t know the reason for this deletion yet  so I can t say how tofix it  but the work around is obvious  Run test in a directory whosename does not contain this pattern   ',0
'testing README htm property descriptions  testSpecialProps wrongly named  useprocess omitted    In section      in    testing README htm  the property  TestSpecialFlags is described for specifying additional properties to RunTest  I could notfind any evidence of this in RunTest or elsewhere  However  the property testSpecialPropsis supported by RunTest java  I found this to work  This propertyalso has a syntax for specifying more than one property using a    delimiter between properties  i e  testSpecialProps  lt prop   gt   lt value   gt         lt prop n gt   lt value n gt Also I noticed the property  useprocess   default true  for controllingwhether RunTest runs the test in a separate vm or a thread in currentvm isn t documented in README htm  I suggest it be included  sinceit s potentially useful for debugging tests  I could include it in thepatch for derby      I don t think anybody committed it yet  or file anew JIRA issue Looking at RunTest reveals that unit tests are not  yet  runnable with useprocess false   though    ',0
'SYS SYSCOLUMN problem with  GENERATED BY DEFAULT  column w  Network Server    When connected to the Derby Network Server  if one has a table with a column defined as  GENERATED BY DEFAULT  and then one tries to select the  COLUMNDEFAULT  field from SYS SYSCOLUMNS  the result is an NPE in the server code that leads to connection deallocation I don t know if this is a problem with the  GENERATED BY DEFAULT  feature or if it s a problem with Network Server  more investigation is required To reproduce  use ij to connect to a database using Network Server  and then ij gt  create table t   i int generated by default as identity    rows inserted updated deletedij gt  select columndefault from sys syscolumns COLUMNDEFAULT                                                                                                                                nulljava lang NullPointerException at org apache derby impl drda DRDAConnThread writeFdocaVal DRDAConnThread java       at org apache derby impl drda DRDAConnThread writeFDODTA DRDAConnThread java       at org apache derby impl drda DRDAConnThread writeQRYDTA DRDAConnThread java       at org apache derby impl drda DRDAConnThread processCommands DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java     agentThread     DRDAConnThread     main     ERROR        Execution failed due to a distribution protocol error that caused deallocation of the conversation  A DRDA Data Stream Syntax Error was detected  Reason   x    ',0
'Remove resultSetHoldability property from ClientDataSource    ClientDataSource  through ClientBaseDataSource  implements a Java Bean property resultSetHoldability which is not documented in the functional spec at http   incubator apache org derby papers DerbyClientSpec htmlJDBC provides standard ways to set the holdability of ResultSets  so a non standard separate mechanism is not required  The property and associated code needs to be removed    ',0
'AES encryption test fails on Solaris       The store aes sql test on Solaris    produces the following diff report      Start  aes jdk                                    del lt  ERROR XJ     Java exception   Wrong keysize  must be equal to          or      java security InvalidParameterException     a    gt  ERROR XJ     Java exception   AES key length must be           or     bits  java security InvalidParameterException  Test Failed  End  aes jdk                                    The cause of this problem is that on most OSs  the java security InvalidParameterException thrown by the JVM when an invalid encryption key length is requested contains a message with the following text  Wrong keysize  must be equal to          or    while on Solaris    the message contained in the exception has been changed to  AES key length must be           or     bitsThe reason for this is most likely that a different encryption library is included in Solaris    comparedto the other OSs  either as part of the JVM or as a native library The problem occurs on Solaris    running on both x   and Sparc processors  It occurs both with jdk     and jdk        ',1
'Many files do not have correct svn properties    There are two problems with svn properties in Derby    A number of non binary files do not have the svn eol style native property set  Some of these currently has CRLF  Windows style  line terminators  Example dt       atum    local DERBY d rby      file   plugins eclipse org apache derby ui src org apache derby ui popup actions RemoveDerbyNature java  plugins eclipse org apache derby ui src org apache derby ui popup actions RemoveDerbyNature java  ASCII C program text  with CRLF line terminatorsdt       atum    local DERBY d rby      svn proplist  v   plugins eclipse org apache derby ui src org apache derby ui popup actions RemoveDerbyNature javawhereas others have LF Unix style   Example dt       atum    local DERBY d rby      file   plugins eclipse org apache derby ui src org apache derby ui actions SysInfoAction java  plugins eclipse org apache derby ui src org apache derby ui actions SysInfoAction java  ASCII C program textdt       atum    local DERBY d rby      svn proplist  v   plugins eclipse org apache derby ui src org apache derby ui actions SysInfoAction javaSome of the files that don t have this property do instead have a property called  snv eol style   I m guessing this is a typo Example dt       atum    local DERBY d rby      svn proplist  v java testing org apache derbyTesting unitTests crypto T CipherOFB javaProperties on  java testing org apache derbyTesting unitTests crypto T CipherOFB java   snv eol style   native   A seemingly arbitrary collection of files have the svn executable property set  To my knowledge  the only files in the Derby respository that should have this property are the   ksh and perhaps the   bat scripts   I don t know if Windows cares about this property when the file has the  bat suffix   Currently none of the   ksh scripts have this property  but a number of java source files  not all  have it   If there is some reason to have this property on other files  it should at least be done consistently throughout the repository  Example dt       atum    local DERBY d rby      svn proplist  v java drda org apache derby drda NetworkServerControl javaProperties on  java drda org apache derby drda NetworkServerControl java   svn executable   svn eol style   nativedt       atum    local DERBY d rby      svn proplist  v java testing org apache derbyTesting unitTests crypto T CipherOFB javaProperties on  java testing org apache derbyTesting unitTests crypto T CipherOFB java   snv eol style   nativeIf I understand correctly it is not possible to create a patchfile that contains property changes  so I guess a committer will have to do this  I m willing to create a script file containing all the svn commands that must be run  as a  pseudo patch     ',0
'Network client XA should only keep XA state for transaction branch association  to track whether to send commit in autocommit mode   All other state and state related decisions should be deferred to the server     Network client XA should only keep XA state for transaction branch association  to track whether to send commit in autocommit mode  All other state and state related decisions should be defered to the server The client tries to track XA state to make decisions based on current XA state  Most of this state handling was removed with DERBY     but it still was not being handled properly  This is evidenced by multiple failures in xaSimplePostive that now that it gets past DERBY     This fix will have the client track only branch association as outlined in the XA  specification  Table      State Table for Transaction Branch Association  The client will track onlyXA TO NOT ASSOCIATEDXA T  ASSOCIATEDAssociation Suspended  T   will map to XA TO NOT ASSOCIATED for the client s pupurposes The client commit in autocommit mode only for XA TO NOT ASSOCIATED    ',0
'example html file for the SimpleApp does not describe the arguments accepted by the program    The SimpleApp java demo program supplied with Derby currently accepts two arguments and will soon  see JIRA entry  DERBY      accept a third that allows the application to run as a client to Network Server  Only  embedded  is documented in the   DERBY INSTALL  demo simple example html file  The others should be added  The current undocumented argument is  jccjdbcclient    will use the JCC client driver to access Network ServerThe new argument might be  derbyclient    will use the Net client driver to access Network ServerThis brief description of the program using the derby client might help in this update To use the SimpleApp in client mode only the directory containing the SimpleApp and the netclient jar file are needed in the CLASSPATH  By passing in  derbyclient  as an argument the program will load the client driver rather than start the Derby engine  The parseArguments   method  line      changes two key strings  The variables  driver  and  protocol  are set to the client driver values  With these new definitions the go   method loads the client driver at line    and creates the client URL at lines        With the variables expanded these lines will look like this line     Class forName  org apache derby jdbc ClientDriver  line        conn   DriverManager getConnection  jdbc derby   localhost           derbyDB create true   props   As in the embedded example the connection will create the database if it does not exist and boot derbyDB if it has not already been loaded by the Network Server  Note that the application is well behaved and does not shutdown the database when operating as a client    ',0
'setByte   with executeBatch causes hang with client if mapping is invalid  e g  setByte to DATE    setByte   followed by an addBatch   and then an executeBatch causes a hang May apply to any setXXX call that will result in any invalid conversion  possibly only those conversions handled by the client See the test jdbcapi parameterMapping  look for this bug number in the code  to see the cases disabled when running with the client    ',0
'It is desirable to have IDENTITY VAL LOCAL   function return last recent user specified value or system generated value for BY DEFAULT identity columns     Derby was recently enhanced to support BY DEFAULT identity column  While the behavior of this feature is not documented yet  I think  it is desirable for IDENTITY VAL LOCAL   function  that is used to retrieve last single statement insert value for identity column  to return user specified value for the default column For GENERATED ALWAYS identity columns  this issue doesn t apply  since users can t provide a value  But for GENERATED BY DEFAULT identity columns  users can optionally specify a value  IDENTITY VAL LOCAL   function should return this value  Derby currently doesn t support this behavior ij gt  create table tauto   i int generated by default as identity  j int  k int    rows inserted updated deletedij gt  insert into tauto  j k  values         row inserted updated deletedij gt  values identity val local                                      row selectedij gt  insert into tauto  j k  values         row inserted updated deletedij gt  values identity val local                                      row selectedij gt  insert into tauto values           row inserted updated deletedij gt  values identity val local                                      lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt               This needs be      row selectedij gt  select   from tauto I  J  K                                                          rows selected   ',0
'Unknown page format  error  while doing recovery after a  a crash while doing  in place compress     Crash was done manually when compress was almost in the end  Log trace before the crash DEBUG LogTrace OUTPUT  Write log record  tranId       instant               length    BeginXact null transactionStatus  DEBUG LogTrace OUTPUT  Write log record  tranId       instant               length    Page Operation  Page   Container          pageVersion        CompressSpaceOperation  newHighestPage     num pages truncated       to Page   Container         DEBUG LogTrace OUTPUT  Flush log to        DEBUG LogTrace OUTPUT  Write log record  tranId Null instant               length    Checksum Operation algorithm     value           data length       DEBUG LogTrace OUTPUT  Begin log sync   DEBUG LogTrace OUTPUT  end log sync DEBUG LogTrace OUTPUT  Flush log to        DEBUG LogTrace OUTPUT  Begin log sync   DEBUG LogTrace OUTPUT  end log sync DEBUG LogTrace OUTPUT  Write log record  tranId       instant          length    EndXact null Committed   transactionStatus   Committed       C  suresht databases gt java  Dij protocol jdbc derby  org apache derby tools ijij version     ij gt  call SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP     T                IJ ERROR  Unable to establish connectionij gt  connect  jdbc derby wombat  ERROR XJ     Failed to start database  wombat   see the next exception for details ERROR XSDB   Unknown page format at page Page     Container         ij gt What was done on the DB    rm  rf wombat  ijC  suresht databases gt rem set DERBY INSTALL C  suresht databases gt java  Dij protocol jdbc derby  org apache derby tools ijij version     ij gt  Terminate batch job  Y N    C  ijC  suresht databases gt rem set DERBY INSTALL C  suresht databases gt java  Dij protocol jdbc derby  org apache derby tools ijij version     ij gt  connect  jdbc derby wombat create true  ij gt  create table t  a int      rows inserted updated deletedij gt  insert into t  values       row inserted updated deletedij gt  insert into t  select a     from t     row inserted updated deletedij gt  insert into t  select a     from t     rows inserted updated deletedij gt  insert into t  select a     from t     rows inserted updated deletedij gt  insert into t  select a     from t     rows inserted updated deletedij gt  insert into t  select a     from t      rows inserted updated deletedij gt  insert into t  select a     from t      rows inserted updated deletedij gt  insert into t  select a     from t      rows inserted updated deletedij gt  insert into t  select a     from t       rows inserted updated deletedij gt  insert into t  select a     from t       rows inserted updated deletedij gt  insert into t  select a     from t       rows inserted updated deletedij gt  insert into t  select a     from t        rows inserted updated deletedij gt  insert into t  select a     from t        rows inserted updated deletedij gt  insert into t  select a     from t        rows inserted updated deletedij gt  insert into t  select a     from t        rows inserted updated deletedij gt  insert into t  select a     from t         rows inserted updated deletedij gt  insert into t  select a     from t         rows inserted updated deletedij gt  insert into t  select a     from t         rows inserted updated deletedij gt  insert into t  select a     from t          rows inserted updated deletedij gt  insert into t  select a     from t          rows inserted updated deletedij gt  commit  ij gt  delete from t          rows inserted updated deletedij gt  select   from new org apache derby diag SpaceTable  T     ERROR   X    Syntax error  Encountered   lt EOF gt   at line    column    ij gt  select   from new org apache derby diag SpaceTable  T    t  CONGLOMERATENAMEISIND amp NUMALLOCATEDPAGES NUMFREEPAGES NUMUNFILLEDPAGES PAGESIZE ESTIMSPACESAVING                                                                                                                                                                                                                                       T                           row selectedij gt  select NUMALLOCATEDPAGES from new org apache derby diag SpaceTable  T    t  NUMALLOCATEDPAGES                       row selectedij gt  select NUMAFREEPAGES from new org apache derby diag SpaceTable  T    t  ERROR   X    Column  NUMAFREEPAGES  is either not in any table in the FROM listor appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  NUMAFREEPAGES  is not a column in the target table ij gt  select NUMFREEPAGES from new org apache derby diag SpaceTable  T    t  NUMFREEPAGES                          row selectedij gt  call SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP     T                  rows inserted updated deletedij gt  select NUMFREEPAGES from new org apache derby diag SpaceTable  T    t  NUMFREEPAGES                       row selectedij gt  select   from new org apache derby diag SpaceTable  T    t  CONGLOMERATENAMEISIND amp NUMALLOCATEDPAGES NUMFREEPAGES NUMUNFILLEDPAGES PAGESIZE ESTIMSPACESAVING                                                                                                                                                                                                                                       T                row selectedij gt   CTerminate batch job  Y N    C  ij  gt   ijC  suresht databases gt rem set DERBY INSTALL C  suresht databases gt java  Dij protocol jdbc derby  org apache derby tools ijij version     ij gt  connect  jdbc derby wombat  ij gt  select   from t   A             rows selectedij gt  insert into t  values       row inserted updated deletedij gt  insert into t  select   from t     row inserted updated deletedij gt  insert into t  select   from t     rows inserted updated deletedij gt  insert into t  select   from t     rows inserted updated deletedij gt  insert into t  select a   from t     rows inserted updated deletedij gt  insert into t  select a   from t      rows inserted updated deletedij gt  insert into t  select a   from t      rows inserted updated deletedij gt  insert into t  select a   from t      rows inserted updated deletedij gt  insert into t  select a   from t       rows inserted updated deletedij gt  insert into t  select a   from t       rows inserted updated deletedij gt  insert into t  select a   from t       rows inserted updated deletedij gt  insert into t  select a   from t        rows inserted updated deletedij gt  insert into t  select a   from t        rows inserted updated deletedij gt  insert into t  select a   from t        rows inserted updated deletedij gt  insert into t  select a   from t        rows inserted updated deletedij gt  insert into t  select a   from t         rows inserted updated deletedij gt  insert into t  select a   from t         rows inserted updated deletedij gt  insert into t  select a   from t         rows inserted updated deletedij gt  delete from t          rows inserted updated deletedij gt  select   from new org apache derby diag SpaceTable  T    t  CONGLOMERATENAMEISIND amp NUMALLOCATEDPAGES NUMFREEPAGES NUMUNFILLEDPAGES PAGESIZE ESTIMSPACESAVING                                                                                                                                                                                                                                       T                        row selectedij gt  call SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP     T                  rows inserted updated deletedij gt  Terminate batch job  Y N    C  ijC  suresht databases gt rem set DERBY INSTALL C  suresht databases gt java  Dij protocol jdbc derby  org apache derby tools ijij version     ij gt  call SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP     T                IJ ERROR  Unable to establish connectionij gt  connect  jdbc derby wombat  ERROR XJ     Failed to start database  wombat   see the next exception for details ERROR XSDB   Unknown page format at page Page     Container         ij gt Stacks  pageVersion        Change page allocation status of     to   undo    instant             logEnd             logIn at    available  DEBUG LogTrace OUTPUT  scanned         Page Operation  Page     Container          pageVersion       Invalidate Page   it has been deallocated instant             logEnd             logIn at    available               BEGIN SHUTDOWN ERROR STACK              ERROR XSLA   Cannot redo operation Page Operation  Page     Container          pageVersion       Invalidate Page   it has been deallocated in the log  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw log FileLogger redo FileLogger java       at org apache derby impl store raw log LogToFile recover LogToFile java      at org apache derby impl store raw RawStore boot RawStore java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl store access RAMAccessManager boot RAMAccessManager java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl db BasicDatabase bootStore BasicDatabase java      at org apache derby impl db BasicDatabase boot BasicDatabase java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor bootService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startProviderService BaseMonitor java       at org apache derby impl services monitor BaseMonitor findProviderAndStartService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby iapi services monitor Monitor startPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derby impl tools ij ij dynamicConnection ij java      at org apache derby impl tools ij ij ConnectStatement ij java      at org apache derby impl tools ij ij ijStatement ij java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java                  begin nested exception  level                ERROR XSDB   Unknown page format at page Page     Container          at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw data CachedPage changeInstanceTo CachedPage java      at org apache derby impl store raw data CachedPage setIdentity CachedPage java      at org apache derby impl services cache CachedItem takeOnIdentity CachedItem java      at org apache derby impl services cache Clock addEntry Clock java      at org apache derby impl services cache Clock find Clock java      at org apache derby impl store raw data FileContainer getAnyPage FileContainer java       at org apache derby impl store raw data BaseContainer getAnyPage BaseContainer java      at org apache derby impl store raw data BaseContainerHandle getAnyPage BaseContainerHandle java      at org apache derby impl store raw data PageBasicOperation findpage PageBasicOperation java      at org apache derby impl store raw data PageBasicOperation needsRedo PageBasicOperation java      at org apache derby impl store raw log FileLogger redo FileLogger java       at org apache derby impl store raw log LogToFile recover LogToFile java      at org apache derby impl store raw RawStore boot RawStore java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl store access RAMAccessManager boot RAMAccessManager java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl db BasicDatabase bootStore BasicDatabase java      at org apache derby impl db BasicDatabase boot BasicDatabase java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor bootService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startProviderService BaseMonitor java       at org apache derby impl services monitor BaseMonitor findProviderAndStartService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby iapi services monitor Monitor startPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derby impl tools ij ij dynamicConnection ij java      at org apache derby impl tools ij ij ConnectStatement ij java      at org apache derby impl tools ij ij ijStatement ij java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java                  end nested exception  level                              begin nested exception  level                ERROR XBM U  No class was registered for identifier    at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl services monitor BaseMonitor classFromIdentifier BaseMonitor java      at org apache derby impl services monitor BaseMonitor newInstanceFromIdentifier BaseMonitor java      at org apache derby iapi services monitor Monitor newInstanceFromIdentifier Monitor java      at org apache derby impl store raw data CachedPage changeInstanceTo CachedPage java      at org apache derby impl store raw data CachedPage setIdentity CachedPage java      at org apache derby impl services cache CachedItem takeOnIdentity CachedItem java      at org apache derby impl services cache Clock addEntry Clock java      at org apache derby impl services cache Clock find Clock java      More  at org apache derby impl store raw data FileContainer getAnyPage FileContainer java       at org apache derby impl store raw data BaseContainer getAnyPage BaseContainer java      at org apache derby impl store raw data BaseContainerHandle getAnyPage BaseContainerHandle java      at org apache derby impl store raw data PageBasicOperation findpage PageBasicOperation java      at org apache derby impl store raw data PageBasicOperation needsRedo PageBasicOperation java      at org apache derby impl store raw log FileLogger redo FileLogger java       at org apache derby impl store raw log LogToFile recover LogToFile java      at org apache derby impl store raw RawStore boot RawStore java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl store access RAMAccessManager boot RAMAccessManager java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl db BasicDatabase bootStore BasicDatabase java      at org apache derby impl db BasicDatabase boot BasicDatabase java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor bootService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startProviderService BaseMonitor java       at org apache derby impl services monitor BaseMonitor findProviderAndStartService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby iapi services monitor Monitor startPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derby impl tools ij ij dynamicConnection ij java      at org apache derby impl tools ij ij ConnectStatement ij java      at org apache derby impl tools ij ij ijStatement ij java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java                  end nested exception  level                 More    ',0
'Specification of incomplete server properties on command line causes NPE with NetworkServerControl when starting the server     When using the command line to start the Network Server  there a couple of cases where if a property is specified on the command line but no value is given  ex    Dderby drda maxThreads  instead of   Dderby drda maxThreads      a Null Pointer Exception will result  when the correct behavior should be to use some kind of default For example  gt  java  Dderby drda maxThreads org apache derby drda NetworkServerControl start  p     java lang NullPointerException at org apache derby impl drda NetworkServerControlImpl localizeMessage NetworkServerControlImpl java  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessageWork NetworkServerControlImpl java  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessage NetworkServerControlImpl java  at org apache derby impl drda NetworkServerControlImpl getIntPropVal NetworkServerControlImpl java  at org apache derby impl drda NetworkServerControlImpl getPropertyInfo NetworkServerControlImpl java  at org apache derby impl drda NetworkServerControlImpl  lt init gt  NetworkServerControlImpl java  at org apache derby drda NetworkServerControl main NetworkServerControl java Note that even though we see this NPE  it appears that the server still starts up  although the startup may not be complete  subsequent attempts to connect might lead to errors like  Invalid reply from network server  Insufficient data    For other properties  this will just result in the default value being used  which is the correct behavior  For example  gt  java  Dderby drda host org apache derby drda NetworkServerControl start  p     Server is ready to accept connections on port         ',0
'servlet Back to Main Page link points to csnet instead of derbynet    The link at the top of the servlet java drda org apache derby drda NetServlet java links to csnet  because of the static String SERVLET ADDRESS   However  the servlet address is now derbynet    ',0
'SimpleNetworkClientSample java network server example has an error which causes it to fail    The file SimpleNetworkClientSample java under the demo nserverdemo has an error which preventsit from completing successfully The one line that is a problem is this  private static final String DERBY CLIENT URL   jdbc derby   localhost    NETWORKSERVER PORT   NSSampledb create true  The one line fix is this  private static final String DERBY CLIENT URL   jdbc derby   localhost    NETWORKSERVER PORT     DBNAME  create true     ',0
'With Network Server Database hangs after some time with many connections executing prepareStatement      Rajesh found this issue in running Network Server system tests for the      release candidateWhile running the Network Server system test with     clients  the Network Server and all the clients hangs after some time  A Ctrl   on the Network Server shows that upto     threads waiting on the PreparedStatements to compile and comes from the embedded engine  The following is the stack trace from the java dump  XMTHREADINFO  DRDAConnThread       TID     C     sys thread t   C      state CW  native ID     ABB   prio   XESTACKTRACE at java lang Object wait Native Method  XESTACKTRACE at java lang Object wait Object java Compiled Code   XESTACKTRACE at org apache derby impl sql GenericStatement prepMinion GenericStatement java Compiled Code   XESTACKTRACE at org apache derby impl sql GenericStatement prepare GenericStatement java  XESTACKTRACE at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java  XESTACKTRACE at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java  XESTACKTRACE at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java  XESTACKTRACE at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java  XESTACKTRACE at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java  XESTACKTRACE at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java  XESTACKTRACE at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java  XESTACKTRACE at sun reflect GeneratedMethodAccessor  invoke Unknown Source  XESTACKTRACE at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   XESTACKTRACE at java lang reflect Method invoke Method java Compiled Code   XESTACKTRACE at org apache derby impl drda DRDAStatement prepareStatementJDBC  DRDAStatement java  XESTACKTRACE at org apache derby impl drda DRDAStatement prepare DRDAStatement java  XESTACKTRACE at org apache derby impl drda DRDAStatement explicitPrepare DRDAStatement java Compiled Code   XESTACKTRACE at org apache derby impl drda DRDAConnThread parsePRPSQLSTT DRDAConnThread java Compiled Code   XESTACKTRACE at org apache derby impl drda DRDAConnThread processCommands DRDAConnThread java Compiled Code   XESTACKTRACE at org apache derby impl drda DRDAConnThread run DRDAConnThread java    ',0
'Disable creating indexes on long varchar for bit data  Long varchar column doesn t allow creating indexes already     I guess I did not articulate my reasons for suggesting removal of index support for  long varchar for bit data  completely     Long varchar types are not comparable    If they are not comparable  it should not be possible to use them in GROUP BY  ORDER BY or allow regular B Tree indexes     Also  long varchar types tend to be long in size and hence the regular B Tree mechanism is not a suitable way to index them  Dan also mentioned they become ineffective for keys longer than half a page size It should not be possible to create an index on  long varchar for bit data  datatypes  Derby currently doesn t allow creating indexes on  long varchar  datatypes and the same should apply for it s bit data equivalent too ij gt  create table longchar   i int  c long varchar    rows inserted updated deletedij gt  create index longIdx on longchar c  ERROR X X    Columns of type  LONG VARCHAR  may not be used in CREATE INDEX  ORDER BY  GROUP BY  UNION  INTERSECT  EXCEPT or DISTINCT statements because comparisons are not supported for that type ij gt  create table longcharBitData   i int  c long varchar for bit data    rows inserted updated deletedij gt  create index longIdx on longcharBitData c    rows inserted updated deletedDerby also seems to allow GROUP BY and or ORDER BY on LONG VARCHAR FOR BIT DATA types  I believe this is incorrect too select c from longcharBitData group by c C                                                                                                                                  rows selectedij gt  select c from longcharBitData group by c order by c C                                                                                                                                  rows selected   ',0
'Client DataSource should not require user property to be set    ClientDataSource should not require user to be set  It should default to user APP as described in http   incubator apache org derby docs adminguide cadminappsclient htmlThis all seems to work ok for for DriverManager connections but fails for ClientDataSource run the attached repro   java DataSourceNoUserembedded no userid passwordclient userid password setclient no passwordclient no userid no passwordorg apache derby client am SqlException  null userid not supported at org apache derby client net NetConnection checkUser NetConnection java      at org apache derby client net NetConnection flowConnect NetConnection java      at org apache derby client net NetConnection initialize NetConnection java      at org apache derby client net NetConnection  lt init gt  NetConnection java      at org apache derby jdbc ClientDataSource getConnection ClientDataSource java      at org apache derby jdbc ClientDataSource getConnection ClientDataSource java      at DataSourceNoUser main DataSourceNoUser java       ',0
'sysinfo with  cp client option should not print error saying DB  jar file and driver class are missing    If you run java org apache derby tools sysinfo  cp client SimpleApp classyou getFOUND IN CLASS PATH  Derby Client libraries  derbyclient jar  user specified class  SimpleApp NOT FOUND IN CLASS PATH  Derby Client libraries  db jcc jar   com ibm db  jcc DB Driver not found  The  NOT FOUND IN CLASSPATH  output is confusing and invalid because we re testing the network client  not the DB  JCC client    ',0
'Queryplan for a query using SESSION schema view is incorrectly put in statement cache  This could cause incorrect plan getting executed later if a temp  table is created with that name     See DERBY     for some discussion related this issue  I suspect this is because of statement caching  Derby doesn t seem to recognise we have a temporary table that just overloaded an existing physical table  It would have been good to avoid permanent tables views synonyms in SESSION schema  Not sure what we should do now about this  though  ij gt  create view session st  as select   from t    rows inserted updated deleted ij gt  select   from session st   I  J  K                                           NULL       NULL       NULL       NULL   rows selected ij gt  select   from t  I  J  K                                           NULL       NULL       NULL       NULL   rows selected ij gt  declare global temporary table st  c   int  c   int  on commit preserve rows  not logged    rows inserted updated deleted ij gt  select   from session st   I  J  K                                           NULL       NULL       NULL       NULL   rows selected ij gt  select   from session st    lt      This statement has an extra space between FROM and session st  C    C                             rows selected   ',0
'Passing the return of  a RETURN NULL ON NULL INPUT function to another function call throws linkage error     Error in ij  RN RADIANS is a function declared as returns null on null input ij gt  VALUES CAST  CALL COS RN RADIANS        AS DECIMAL       ERROR XBCM   Java linkage error thrown during load of generated class org apache derby exe ace       x    x e  x a  xffff      e    ERROR XJ     Java exception    class  org apache derby exe ace       x    x e  x a  xffff      e     method  e  signature    Ljava lang Object Expecting to find double on stack  java lang VerifyError  extract from derby log                        GMT Thread     main   main      Wrote class org apache derby exe ace       x    x e  x a  xffff      e    to file C      work svn pb trunk systest out functions ace       x    x e  x a  xffff      e    class  Please provide support with the file and the following exception information  java lang VerifyError   class  org apache derby exe ace       x    x e  x a  xffff      e     method  e  signature    Ljava lang Object Expecting to find double on stackI will add a test case to lang functions sql commented with this bug number  Test casesthat fail will be commented out    ',0
'Error message  X X    has incorrect property name  db j database classpath instead of derby database classpath    Example output is in the test lang dcl sql  extracted here ERROR X X    Cannot drop jar file   EMC   MAIL APP   because its on your db j database classpath   EMC   MAIL APP   Also the its should be it s  it is  Might also make sense to change drop to remove  as the procedure is called remove jar    ',0
'SecurityException or LinkageException thrown during loading a class from a database jar incorrectly shuts the engine down     In addiing test cases to lang dcl test for signed jar files stored in the database I found that if a jar is installed with a tampered class the resulting SecurityException shuts Derby down  Most likely the same would be true for an invalid class hacked into the jar    ',1
'DatabaseMetaData getColumns   fails on iSeries JDK     with verfier error on generated class     Analysis shows that                                                                       The problem is occurring starting at offset      in method e    There is an invokeinterface to method setWidth int  int  boolean  of class VariableSizeDataValue  This invoke returns a value of class DataValueDescriptor  That value is in turn stored in field e    at offset      in method e    The problem is that field e    is a NumberDataValue  and DataValueDescriptor is not a valid subclass of NumberDataValue  Thus the store is not allowed                                                                       Looking at the generated setWidth   calls I see one in BinaryOperatorNode where the return  DataValueDescriptor  is not cast to the type of the field it is stored in    ',0
'Result set holdability defined inside stored procedures is ignored by server client    Assume I have a Java stored procedure that returns one or more result sets  and the holdability of those result sets is specified as part of the createStatement   method within the procedure definition  see below for an example  If I execute this procedure against Derby embedded  the holdability of each result set matches that of the statement specific holdability that is defined within the stored procedure  However  if I run the procedure against the Network Server using the Derby client  the holdability of all result sets is the same  and it is based on the holdability of the statement that executed the procedure  i e  the statement specific holdability that is defined within the procedure is ignored Ex  If I create a stored procedure that corresponds to the following method public static void p  ResultSet   rs   ResultSet   rs   ResultSet   rs   throws Exception  Connection conn   DriverManager getConnection   jdbc default connection    Statement st    conn createStatement  ResultSet TYPE FORWARD ONLY  ResultSet CONCUR READ ONLY  ResultSet HOLD CURSORS OVER COMMIT   rs       st  executeQuery  select   from testtable     Statement st    conn createStatement  ResultSet TYPE FORWARD ONLY  ResultSet CONCUR READ ONLY  ResultSet CLOSE CURSORS AT COMMIT   rs       st  executeQuery  select   from testtable     Statement st    conn createStatement  ResultSet TYPE FORWARD ONLY  ResultSet CONCUR READ ONLY  ResultSet HOLD CURSORS OVER COMMIT   rs       st  executeQuery  select   from testtable     return    Then with Derby embedded  if I have a JDBC Statement that executes a call to this procedure  rs  and rs  will behave with HOLD CURSORS holdability and rs  will behave with CLOSE CURSORS holdability  and that will be the case regardless of the holdability on the Statement that executed the call  That seems correct to me But if I do the same thing with Network Server  all of the result sets  rs   rs   and rs   will have the same holdability as the JDBC Statement that executed the call  It doesn t matter what the holdabilities used within the procedure definition are  they will all be over ridden by the holdability of the Statement that made the call    ',0
'SELECT DISTINCT returns duplicates when selecting from subselects    When one performs a select distinct on a table generated by a subselect  there sometimes are duplicates in the result  The following example shows the problem ij gt  CREATE TABLE names  id INT PRIMARY KEY  name VARCHAR        rows inserted updated deletedij gt  INSERT INTO names  id  name  VALUES      Anna         Ben         Carl         Carl         Ben         Anna     rows inserted updated deletedij gt  SELECT DISTINCT name  FROM  SELECT name  id FROM names  AS n NAME           Anna Ben Carl Carl Ben Anna Six names are returned  although only three names should have been returned When the result is explicitly sorted  using ORDER BY  or the id column is removed from the subselect  the query returns three names as expected ij gt  SELECT DISTINCT name  FROM  SELECT name  id FROM names  AS n ORDER BY name NAME           Anna Ben Carl   rows selectedij gt  SELECT DISTINCT name  FROM  SELECT name FROM names  AS n NAME           Anna Ben Carl   rows selected   ',0
'getAsciiStreamshould replace non ASCII characters with  x f       to match embedded    When calling Clob getAsciiStream or ResultSet getAsciiStream if the column type is a character type or a CLOB  then any out of range character  to the ASCII set  needs to be replaced by  x f       question mark   ASCII is defined as   bit characters  thus Unicode Characters in the range  x     to  x  ff are mapped to ASCII characters  x   to  xff  and Unicode characters in the range  x     to  xffff are mapped to  x fBy code inspection client code in org apache derby client am ResultSetembedded in org apache derby impl jdbc ReaderToAscii   ',0
'Incorrect insane build on windows platform    I ve found that Derby will not build sane properly for me  I have isolated it to here   lt target name  evaluate sane  gt   lt condition property  generate sane  gt   lt equals arg     sane   arg   true   gt   lt  condition gt   lt  target gt The scope of the generate sane property is limited to this target  only tested in a Windows XP environment   ergo it will always be an insane build  Patch to follow shortly    ',0
'ClientDriver ignores Properties object in connect String url  Properties connectionProperties  method    In contrast to EmbeddedDriver  a connection attribute create true is not recognized when presented as a property in a Properties object  As a workaround I append the attributes from the Properties object to the url string before invoking the connect   method  then a new database is created and a connection is established Next code fragment illustrates the bug and the workaround  private static final ClientDriver clientDriver   new ClientDriver    private Connection getClientConnection String database  Properties connectionProperties  throws SQLException   try   System out println  Try to connect with properties    String connectionURL    jdbc derby                      database  System out println  connectionURL      connectionURL   Connection rv   clientDriver connect connectionURL  connectionProperties   System out println  Connection      rv   return rv    catch  SQLException e    System out println  Try to connect with URL attributes    StringBuffer sb   new StringBuffer    for  Enumeration enu   connectionProperties propertyNames    enu  hasMoreElements     String key    String  enu nextElement    sb append       sb append key   sb append       sb append connectionProperties getProperty key          String connectionURL    jdbc derby                      database   sb toString    System out println  connectionURL      connectionURL   Connection rv   clientDriver connect connectionURL  connectionProperties   System out println  Connection      rv   System out  println              seems a bug  Properties argument in ClientDriver connect String  Properties  has not been used    return rv        ',0
'The current build properties for the Derby Help Plug in for Eclipse does not work for creating a deployable plug in    While updating the information for the web site about the Derby plug ins I revised the instructions on how to create zip files for the plug ins  The current build properties file for the help plug in did not work to create a deployable plug in  without manual intervention  The attached patch for the build properties file for the help plug in should replace the existing one  which allows users to select Export  gt  gt  Deployable plug ins and fragments and then create a zip file which is suitable for deployment svn stat output M plugins eclipse org apache derby plugin doc build propertiesTests I built a new doc zip file using the new build properties file  unzipped it to another eclipse install in the ECLIPSE HOME directory and made sure all of the files for the help were in the correct location and accessible I d appreciate it if someone could commit this Thanks Susan   ',0
'Loading databases from jars in the classpath is broken  databases cannot be found     In converting an old Cloudscape test to ensure changes made for DERBY     would not break loading from classes stored in the database when the database itself is in a jar  I discovered that a database cannot be found that is in a jar on the classpath Discovered the reason is the StoreFactory implementation for classpath always prepends a leading foward slash to the database name  but this is incorrect  e g  db  to  db    This causes the database not to be found when the classloader is URLClassLoader as the correct path for the service properties file is db  services properties  not  db  services properties Will add converted test  lang dbjar sql    ',0
'Read only databases fail to boot after soft upgrade  Raises error message     XD   Container was opened in read only mode     Attempting to boot a database that is created using Derby      fail in soft upgrade mode in Derby      or in trunk         Boot fails with Error   XD   Container was opened in read only mode After debugging the problem a little  it seems soft upgrade code attempts do change a database property value and since the database is read only  the error is raised  Here is what I tried ij gt  connect  jdbc derby jar  t   jar t  db  ERROR XJ     Failed to start database  jar  t   jar t  db   see the next exception for details ERROR   XD   Container was opened in read only mode Here is the stack trace ERROR   XD   Container was opened in read only mode  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw data BaseContainer use BaseContainer java      at org apache derby impl store raw data BaseContainerHandle useContainer BaseContainerHandle java      at org apache derby impl store raw data BaseDataFileFactory openContainer BaseDataFileFactory java      at org apache derby impl store raw data BaseDataFileFactory openContainer BaseDataFileFactory java      at org apache derby impl store raw xact Xact openContainer Xact java       at org apache derby impl store access conglomerate OpenConglomerate init OpenConglomerate java      at org apache derby impl store access heap Heap openScan Heap java      at org apache derby impl store access RAMTransaction openScan RAMTransaction java      at org apache derby impl store access RAMTransaction openScan RAMTransaction java       at org apache derby impl store access PropertyConglomerate openScan PropertyConglomerate java      at org apache derby impl store access PropertyConglomerate saveProperty PropertyConglomerate java      at org apache derby impl store access PropertyConglomerate setProperty PropertyConglomerate java      at org apache derby impl store access RAMTransaction setProperty RAMTransaction java       at org apache derby impl sql catalog DD Version applySafeChanges DD Version java      at org apache derby impl sql catalog DD Version upgradeIfNeeded DD Version java      at org apache derby impl sql catalog DataDictionaryImpl loadDictionaryTables DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl boot DataDictionaryImpl java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl sql conn GenericLanguageConnectionFactory bootDataDictionary GenericLanguageConnectionFactory java      at org apache derby impl sql conn GenericLanguageConnectionFactory boot GenericLanguageConnectionFactory java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl db BasicDatabase boot BasicDatabase java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor bootService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startProviderService BaseMonitor java       at org apache derby impl services monitor BaseMonitor findProviderAndStartServiceBaseMonitor java       at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby iapi services monitor Monitor startPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derby impl tools ij ij dynamicConnection ij java      at org apache derby impl tools ij ij ConnectStatement ij java      at org apache derby impl tools ij ij ijStatement ij java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java    ij gt    ',0
'Dynamic parameter should be allowed to be the operand of unary operator      Derby throws exception   X    The     operator is not allowed to take a   parameter as an operand      A simple test program which uses dynamic parameter for unary operator     fails with an exception  Following is the snippet of the code ps   con prepareStatement  select   from t  where c           ps setInt       rs   ps executeQuery   The prepareStatement call fails with following exceptionSQLSTATE   X    ERROR   X    The     operator is not allowed to take a   parameter as an operand    ',0
'Using derby language logStatementText true can mask certain exceptions and lead to incorrect behavior in some cases    Using derby language logStatementText true can mask certain exceptions and lead to incorrect behavior I observed this with tests using streams  where if valid  expected  exceptions are raised when DVD getString   is called  the exception gets eaten up when this property is set  See   in GenericParameter toString  try return value getString    catch  StandardException se  return  unexpected exception from getString         se     in GenericPreparedStatement execute    where pvs toString   is called for the parameters         Reproduction  Run the test jdbcapi resultsetStream java   with derby language logStatementText true and expected error exceptions wont be thrown for the error cases  I looked at the tests that use streams   only the store streamingColumn java uses derby language logStatementText true  I ll file another bug to resolve this test    ',0
'SYSCS UTIL SYSCS INPLACE COMPRESS TABLE fails on  very  large tables    SYSCS UTIL SYSCS INPLACE COMPRESS TABLE fails with one of the following error messages when applied to a very large table   gt  GB  Log operation null encounters error writing itself out to the log stream  this could be caused by an errant log operation or internal log buffer full due to excessively large log operation  SQLSTATE  XJ     Java exception     java io IOException  orThe exception  java lang ArrayIndexOutOfBoundsException  was thrown while evaluating an expression  SQLSTATE  XJ     Java exception     java lang ArrayIndexOutOfBoundsException  In either case  no entry is written to the console log or to derby log    ',0
'Make the client driver connection URL work when spaces are in the URL     At present  if I want to connect to a database on a Derby server which has a space in the path  there is no way to do it This can be done with the embedded driver  and for consistency it would be good if it worked for the client driver in the same fashion    ',0
'sysinfo incorrectly requires permission on Derby jar files    Running the test derbynet sysinfo java requires this permission in derby tests policy  in order to read the jar files permission java io FilePermission    csinfo codedir          read But according to the Java security specs  Note  code can always read a file from the same directory it s in  or a subdirectory of that directory   it does not need explicit permission to do so  Probably means a privileged block is required when accessing the contents of the jar files in sysinfo   ',1
'Derby monitor accesses two system properties without using a privileged block when built sane true    When built with sane true and testing with the jars these permissions are required to be granted all the way up the stack  currently this means for the tests granting them to the network server jar  permission java util PropertyPermission  derby monitor verbose    read   permission java util PropertyPermission  derby debug      read  The engine contains code to read system properties using privileged blocks  this should be used by the monitor    ',1
'create trigger fails with null pointer exception    When i create a brand new database  and execute the following statements all in one transaction or each of them in their own transaction  then it fails at trigger creation with null pointer exception  if i exclude the schema names from statement  then it runs fine   If S  is ommited from every statement then it runs fine   Once the version without the schema names run fine  i can run the version that has schema names  fine also  create schema S  create table S  PRODUCT  PRODUCT ID VARCHAR      unique not null  VERSION BIGINT   create table S  CATEGORY  CAT ID VARCHAR       NAME varchar      not null  VERSION BIGINT   create table S  PROD IN CAT  CAT ID VARCHAR      not null  PRODUCT ID VARCHAR      not null  VERSION BIGINT   create trigger S  product v after update of version on S  productreferencing new as nfor each rowmode db sql update S  prod in cat set version   n version where S  prod in cat product id n product id java lang NullPointerException at org apache derby impl sql catalog SYSSTATEMENTSRowFactory makeSYSSTATEMENTSrow Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl addSPSDescriptor Unknown Source  at org apache derby impl sql execute CreateTriggerConstantAction createSPS Unknown Source  at org apache derby impl sql execute CreateTriggerConstantAction executeConstantAction Unknown Source Stopping progress indicator for  Executing SQL at org apache derby impl sql execute MiscResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source    ',0
'Subquery materialization can cause stack overflow    A performance optimization in subquery processing can cause a stack overflow The optimization materializes a subquery ResultSet in memory where it thinks the rows will fit in memory  The materialization is done as a set of nested unions of constant rows  UnionResultSets and RowResultSets   If there are a lot of rows this can cause a stack overflow when fetching a row The obvious fix is to make it use an iterative technique rather than a recursive one for storing and returning the rows  See the method BaseActivation materializeResultSetIfPossible   in the language execution code There are some other issues with this performance optimization that should be looked at    The optimization can backfire  making the query run much slower  For example  in the query  select   from one row table where column  not in  select column  from million row table reading million row table into memory is an expensive operation  If there is an index on million row table column   the query should return a result very quickly despite the large size of million row table by doing a single probe into million row table via the index Since in memory materialization can be an expensive operation  the decision about whether to do it should be made based on query optimizer cost estimates  See SubqueryNode generateExpression      It may not be wise to cache partial query results in memory at all  Although this can help performance in some cases  it also chews up memory  This is different from a limited size cache with a backing store  like what the store uses for page caching   The language has no way to limit the total amount of memory used in this type of processing  Note that hash joins originally used in memory hash tables with no backing store  and that a backing store was added later    The implementation of this optimization has some problems  The decision to materialize the subquery results in memory is made during code generation   all such decisions should be made during the compilation phase  It s not clear to me why materializeResultSetIfPossible   is in BaseActivation   I would expect the of materialization to be done by a type of ResultSet  not by a method in BaseActivation  Also  this method calls getMaxMemoryPerTable   in the OptimizerFactory   nothing in the execution code should refer to anything in the compilation code  perhaps getMaxMemoryPerTable   should be moved somewhere else     ',0
'Network driver setTransactionIsolation   causes a commit  but does not complete it locally    When autocommit is set to false  a call to setTransactionIsolation using client driver does not end the transaction when the method exits  When a close   is called on the conection  it throws an exception Running the code below  conn setAutoCommit false   conn setTransactionIsolation Connection TRANSACTION READ COMMITTED   try  conn close     catch SQLException se   System out println  Got exception when closing the connection    se printStackTrace     with client driver gives Got exception when closing the connectionorg apache derby client am SqlException  java sql Connection close   requested while a transaction is in progress on the connection The transaction remains active  and the connection cannot be closed with embedded driver  it works okay and does not throw any exception    ',0
'getImportedKeys returns duplicate rows in some cases    I have a database with a large number of tables  I get duplicate rows when I call DatabaseMetaData getImportedKeys for a particular table  However  if I create the same table with same number of foreign keys in another database  which has fewer number of tables   then getImportedKeys returns me the correct number of rows  This error seems to happen only when the database has a large number of tables  I will attach a repro for this shortly    ',0
'SecurityException with accessDeclaredMembers on DatabaseMetaData getTables     The code to determine the size of a class is using getDeclaredMembers which requires the permission accessDeclaredMembers  Ideally should not require to grant this permission to derby jar  Need to see whichclass s size was being calculated  The code is not in a priv block which would require granting the permission all the way up the stack Maybe if the class s declared memebrs can not be accessed and the value can not be pre calculkated then some estimate could be made   using public fields   java security AccessControlException  Access denied  java lang RuntimePermission accessDeclaredMembers  at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at com ibm ws security core SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkMemberAccess SecurityManager java       at java lang Class checkMemberAccess Class java      at java lang Class getDeclaredFields Class java      at org apache derby iapi services cache ClassSize getSizeCoefficients Unknown Source  at org apache derby iapi services cache ClassSize estimateBase Unknown Source  at org apache derby iapi store access BackingStoreHashtable  lt clinit gt  Unknown Source  at java lang J VMInternals initializeImpl Native Method  at java lang J VMInternals initialize J VMInternals java      at org apache derby impl sql execute HashTableResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openRight Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute SortResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeQuery Unknown Source  at org apache derby impl jdbc EmbedDatabaseMetaData getTables Unknown Source    ',1
'during crash recovery of a drop table  on case insensitive files systems derby may delete wrong file    Sometimes during redo the system will incorrectly remove the file associatedwith a table  The bug requires the following conditions to reproduce    The OS filesystem must be case insensitive such that a request to delete a file named C     dat would also remove c     dat  This is true in windows default file systems  not true in unix linux filesystems that I am aware of    The system must be shutdown not in a clean manner  such that a subsequent access of the database causes a REDO recovery action of a drop table statement  This means that a drop table statement must have happened since the last checkpoint in the log file  Examples of things that cause checkpoints are  o clean shutdown from ij using the  exit  command o clean shutdown of database using the  shutdown true  url o calling the checkpoint system procedure o generating enough log activity to cause a regularly scheduled checkpoint    If the conglomerate number of the above described drop table is TABLE    then for a problem to occur there must also exist in the database a table such that it s HEX TABLE      TABLE     Either TABLE   must not be accessed during REDO prior to the REDO operation of the drop of TABLE   or there must be enough other table references during the REDO phase to push the caching of of the open of TABLE   out of cache If all of the above conditions are met then during REDO the system willincorrectly delete TABLE   while trying to redo the drop of TABLE    lt p gt I will be adding the following test to reproduce the problem    create     tables  need enough tables to insure that conglomerate number       c    dat  and       c     dat  exist    checkpoint the database so that create does not happen during REDO   drop table with conglomerate number       mapping to c    dat  It looks it up in the catalog in case conglomerate number assignment changes for some reason    exit the database without a clean shudown  this is the default for test suites which run multiple tests in a single db   no clean shutdown is done  Since we only do a single drop since the last checkpoint  test will cause the drop during the subsequent REDO    run next test program dropcrash   which will cause redo of the drop  At this point the bug will cause file c     dat to be incorrectly deleted and thus accesses to conglomerate      will throw container does not exist errors    check the consistency of the database which will find the container does not exist error    ',0
'Build time processing of  metadata properties  file handles slashes incorrectly     As found and described by Mamta here http   www nabble com  Derby     Optimizer overrides and metadata properties files t       htmlDuring the ant build process  Derby s metadata properties file is modified by the ODBCMetadataGenerator class and that class treats backslashes that occur in the metadata properties file incorrectly  More specifically  it treats every backslash as the end of a line and thus will translate things likeFROM   DERBY PROPERTIES joinOrder FIXED n  intoFROM   DERBY PROPERTIES joinOrder FIXED   n   in other words  escaped characters like   n  are handled incorrectly      ',0
'In ij  executing a prepared statement with numeric decimal parameter fails with NullPointerException in J ME CDC FP    NPE is thrown in ij when executing prepared statement which  has numeric decimal parameters does not return any result setRepro for this problem is the test lang cast sql  This test currently fails in CDC FP The following lines in the test throw NPE execute q   using  values            execute q   using  values            where q   is  prepare q   as  insert into t   num  values cast   as numeric        and q   is  prepare q   as  insert into t   dc  values cast   as decimal        The stack trace for failure is java lang NullPointerException at org apache derby impl tools ij util DisplayMulti util java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    This happens in the following code  Since the above prepared statements do not return result sets  call to getMetaData   will return null  But in the code  no check is done to see if getMetaData   returns null before calling getColumnType                                                                                                                                                                                                            In J ME there is no object that represents    a DECIMAL value  By default use String to    pass values around  but for integral types    first convert to a integral type from the DECIMAL    because strings like     are not convertible to    an integral type  switch  ps getMetaData   getColumnType c     case Types BIGINT  ps setLong c  rs getLong c    break  case Types INTEGER  case Types SMALLINT  case Types TINYINT  ps setInt c  rs getInt c    break  default  ps setString c rs getString c    break                                                                                                                                                                                                              ',0
'Add tests for error codes for severe exceptions    Add tests to test error codes for disconnect exceptions and other severe errors for client and embedded drivers    ',0
'NullPointerException or ClassCastException if UPDATE or DELETE is performed on a diagnostic VTI    UPDATE and DELETE statements on read only vtis will hit NullPointerException in insane mode  and ClassCastException in sane mode ij gt  delete from new org apache derby diag TransactionTable   ERROR XJ     Java exception     java lang NullPointerException  While these statements make no sense  a more graceful error should be returned  especially as in insane mode this causes the engine to shutdown  Code already exists to detect this situation but is not being called Found through adding negative tests for DERBY       ',0
'Network client  deleteRow   makes getter methods return nulls for the following rows     On the network driver  the ResultSet deleteRow   method causes the getXXX   methods in the following rows to return null values  It should be possible to use the getXXX methods after positioning the cursor in the next row  It also has this side effect on other result sets if these are created with the same prepared statement The repro case is uploaded as an attachment  testDeleteRow java Output of the report case List all rowsRow     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row      Testing   List all rows and delete first rowRow     Testing  Row deleted Row     nullRow     nullRow     nullRow     nullRow     nullRow     nullRow     nullRow     nullRow     nullList all rowsRow     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row     Testing  Row      Testing      ',0
'Unable to create databases whose name containg Chinese characters through the client driver    Trying to create a database with the following URL  note the Chinese character in the database name  jdbc derby   localhost       u e   create truethrows the following exception       lt     Exception in thread  main  org apache derby client am SqlException  Unicode string can t convert to Ebcdic string at org apache derby client net EbcdicCcsidManager convertFromUCS  Unknown Source  at org apache derby client net Request writeScalarPaddedString Unknown Source  at org apache derby client net NetConnectionRequest buildRDBNAM Unknown Source  at org apache derby client net NetConnectionRequest buildACCSEC Unknown Source  at org apache derby client net NetConnectionRequest writeAccessSecurity Unknown Source  at org apache derby client net NetConnection writeServerAttributesAndKeyExchange Unknown Source  at org apache derby client net NetConnection flowServerAttributesAndKeyExchange Unknown Source  at org apache derby client net NetConnection flowUSRIDONLconnect Unknown Source  at org apache derby client net NetConnection flowConnect Unknown Source  at org apache derby client net NetConnection  lt init gt  Unknown Source  at org apache derby jdbc ClientDriver connect Unknown Source  at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at jdbctest Main main Main java          lt     It s possible  however  to create databases using the embedded driver  using an URL like jdbc derby  u e   create trueTested with both          and          with the same result Complete code to reproduce the bug       lt     public static void main String   args  throws Exception   Class forName  org apache derby jdbc ClientDriver    Connection conn   DriverManager getConnection  jdbc derby   localhost       u e   create true          lt        ',0
'Problem setting sanity state to false by using  ant  Dsane false     Problem report from Kathey Marsden There seems to be some sort of problem with the sanity state After ant clobber  rm  rf jars  rm  rf snapshot no apparent problematicfiles  ant  Dsane false snapshot seemed to sometimes build the jars tothe sane jar directory and yield the following error           delete      Deleting directory D  svn opensource      javadoc sourcedir      mkdir      Created dir  D  svn opensource      snapshotBUILD FAILEDD  svn opensource      build xml      D  svn opensource      jars insane not found A reliable workaround was to runant insanebefore ant  Dsane false snapshot    ',0
'cursor closed as a sideeffect of closing another cursor with the same name on another connection    I was writing some tests for the Scrollable updatable ResultSet feature  and found some tests failing with ERROR XCL    Cursor  SQLCUR   is closed  Verify that autocommit is OFF in ResultSet updateRow    The test does the following    set up a connection  and run a query which selects one tuple   update the tuple using updateXXX and updateRow   rollback the transaction and close the connectionThen  repeat the process  however this time use a different string in the query  This time updateRow   may fail with the error above  The problem has been reproduced on forward only  updatable resultsets Workaround It does not seem to fail if Ia  set another cursorname on the statement object b  use the same query string I will attach the program to reproduce the problem  Below is the output     lt   gt db derby          bin lib gt  java  cp  home ak       devel derbytesting derbytest build classes  derby jar derbytest CursorIsClosedIssue       Tuple         Tuple  ERROR XCL    Cursor  SQLCUR   is closed  Verify that autocommit is OFF  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql execute CurrentOfResultSet getCursor Unknown Source  at org apache derby impl sql execute CurrentOfResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute NormalizeResultSet openCore Unknown Source  at org apache derby impl sql execute UpdateResultSet setup Unknown Source  at org apache derby impl sql execute UpdateResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedResultSet updateRow Unknown Source  at derbytest CursorIsClosedIssue runTest CursorIsClosedIssue java     at derbytest CursorIsClosedIssue main CursorIsClosedIssue java        ',0
'Incorrect documentation for  NetworkServerControl logConnections boolean      The documentation for  NetworkServerControl logConnections boolean   states that Derby logs both connections and disconnections  As of          and  all  earlier releases  this is not true  The documentation should be corrected to avoid confusing users The thought of adding logging of disconnections has also been posted on derby dev Byran Pendleton identified the following documentation with the incorrect description http   db apache org derby javadoc publishedapi org apache derby drda NetworkServerControl htmlhttp   db apache org derby docs      adminguide radminconfigdb jdrdalogconnections htmlhttp   db apache org derby docs      manuals admin hubprnt   htmlhttp   db apache org derby docs      adminguide tadminlogfile htmlShould we fix this in       If yes  please update fix versions for this issue    ',0
'LDAP user authentication fails under a security manager    Running the test jdbcapi secureUsers  sql with a security manager results in  gt  ERROR        Connection refused   javax naming CommunicationException  noSuchMachine          Root exception is java security AccessControlException  access denied  java net SocketPermission noSuchMachine resolve      Adding this permission to the policy file has no effect  which means a priv block is required around the LDAP call permission java net SocketPermission  noSuchMachine    resolve     ',1
'Intermittent failure of store readlocks sql    The store readlocks sql test in derbyall fails intermittently with the following diff      Start  readlocks jdk         storeall storemore                             a      gt  APP  UserTran ROW     S  A         GRANT ACTIVE Test Failed  End  readlocks jdk         storeall storemore                            i e  it looks like there is an extra lock in the printed lock table    ',0
'add mechanism for specifying policy file for individual function tests    It would be nice to be able to specify a test specific policy file This should get handled similar to existing properties  i e  get specified in a test app properties file  or  for a suite  in the suite properties file   The file should then be copied into the correct place Note  that the  old  functionTests harness  as opposed to junit tests  includes a check for a property called  serverPolicyFile   in harness jvm java   The name is a left over from when the policy file was only used for by network server  and should be renamed   derbyTestPolicyFile  for instance  It is not used anywhere at present  and not specific to network server  It would be nice if this could be expanded  or  if not used  removed The default policy file used is the derby tests policy file under functionTests util Also  currently  the property can only be used with RunTest   for further traction  it should probably get passed on through RunSuite RunList Once confirmed to be working  the property should get documented in  lt trunk gt  java testing README htm    ',0
'Remove use of String byte    and String byte    int  int  constructors in testing leading to non portable behaviour    These constructors use the Java default platform encoding to convert the bytes to a String  this typically leads to bugs on platforms with different encodings Replace with code using fixed conversion  or alternative mechanisms  If the call is required its use should be commented as to why it is required org apache derbyTesting functionTests tests jdbcapi blobclob BLOBorg apache derbyTesting functionTests tests jdbcapi resultsetorg apache derbyTesting functionTests tests lang coalesceTestsorg apache derbyTesting functionTests tests store streamingColumnI generated this list using the Java search in eclipse for references to the constructorsString byte   String byte   int int   no occurrences in java testing    ',0
'big decimal error diff in derbyall lang procedure test run in the DerbyNetClient   jdk    specific    derby all regression test failure in the following test  Most recently it failed in the      derby build  It also failed on       It ran fine on       Havenot had time to narrow down further  Did note that there is a separate master for this test   but no jdk    specific masters that I could see      Start  procedure jdk         DerbyNetClient derbynetmats derbynetmats                            del lt  EXPECTED SQL Exception  BigDecimal conversion exception      converters      Overflow occurred during numeric data type conversion of           See attached Throwable    a    gt  EXPECTED SQL Exception  BigDecimal conversion exception      converters      Overflow occurred during numeric data type conversion of           See attached Throwable  Caused by exception class org apache derby client am ConversionException       converters      Overflow occurred during numeric data type conversion of             del lt  EXPECTED SQL Exception  Invalid argument  parameter index   is not an OUT or INOUT parameter    a    gt  EXPECTED SQL Exception  XN    S                    del lt  EXPECTED SQL Exception  BigDecimal conversion exception      converters      Overflow occurred during numeric data type conversion of            See attached Throwable    a    gt  EXPECTED SQL Exception  BigDecimal conversion exception      converters      Overflow occurred during numeric data type conversion of            See attached Throwable  Caused by exception class org apache derby client am ConversionException       converters      Overflow occurred during numeric data type conversion of          Test Failed  End  procedure jdk         DerbyNetClient derbynetmats derbynetmats                           ',0
'NullPointerException at ResultSet close   time for simple query using UNION and INTERSECT    If I set  derby language logQueryPlan  to true and then attempt to execute the following simple query using UNION and INTERSECT  Derby will return the correct results and then  after returning the results  will throw a NullPointerException  This error also occurs for      To reproduce  gt  java  Dderby language logQueryPlan true org apache derby tools ijand then do create table t   i int  create table t   j int  create table t   a int  ij gt  select i from t  union  select j from t  intersect select a from t                 rows selectedERROR XJ     Java exception     java lang NullPointerException  If I add data  the query will return the correct results  but then throw the NPE insert into t  values               insert into t  values                insert into t  values         ij gt  select i from t  union  select j from t  intersect select a from t                      rows selectedERROR XJ     Java exception     java lang NullPointerException  The embedded and client stack traces are shown below  Both suggest that the problem occurs during the close of the result set         Embedded        java lang NullPointerException at org apache derby impl sql execute rts RealUnionResultSetStatistics getStatementExecutionPlanText RealUnionResultSetStatistics java      at org apache derby impl sql execute rts RealSortStatistics getStatementExecutionPlanText RealSortStatistics java      at org apache derby impl sql execute rts RunTimeStatisticsImpl getStatementExecutionPlanText RunTimeStatisticsImpl java      at org apache derby impl sql execute BasicNoPutResultSetImpl finishAndRTS BasicNoPutResultSetImpl java      at org apache derby impl sql execute SortResultSet finish SortResultSet java      at org apache derby impl jdbc EmbedResultSet close EmbedResultSet java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil DisplayResults JDBCDisplayUtil java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java            Client        ERROR  no SQLState   actual code point       does not match expected code point      java sql SQLException  actual code point       does not match expected code point       at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am ResultSet close ResultSet java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil DisplayResults JDBCDisplayUtil java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java    Caused by  org apache derby client am DisconnectException  actual code point       does not match expected code point       at org apache derby client net Reply zThrowSyntaxError Reply java       at org apache derby client net Reply parseLengthAndMatchCodePoint Reply java       at org apache derby client net NetConnectionReply parseSQLCARD NetConnectionReply java       at org apache derby client net NetConnectionReply parseRDBCMMreply NetConnectionReply java      at org apache derby client net NetConnectionReply readLocalCommit NetConnectionReply java      at org apache derby client net ConnectionReply readLocalCommit ConnectionReply java     at org apache derby client net NetConnection readLocalCommit  NetConnection java       at org apache derby client am Connection readCommit Connection java      at org apache derby client am Connection readAutoCommit Connection java      at org apache derby client am ResultSet readAutoCommitIfNotAutoCommitted ResultSet java      at org apache derby client am ResultSet readCloseAndAutoCommit ResultSet java      at org apache derby client am ResultSet flowCloseAndAutoCommitIfNotAutoCommitted ResultSet java      at org apache derby client am ResultSet closeX ResultSet java      at org apache derby client am ResultSet close ResultSet java     ERROR XJ     DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerException     XX      XJ    Ujava sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerException     XX     XJ    U at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am ResultSet close ResultSet java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil DisplayResults JDBCDisplayUtil java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java       ',0
'Error       can include  XX RESOLVE XX  which should be removed    In some cases  error       can come up as follows  A truncation error was encountered trying to shrink CHAR    FOR BIT DATA  XX RESOLVE XX  to length    This message makes it appear as if there is a column called XX RESOLVE XX  however  this string is coming out of SQLBinary java It should be removed from the message Other references for this string are in the masters for updatableResultSet out  and in the test lang concateTests java  referring to DERBY      So  running updatableResultSet will generate the message The stack trace I saw  at org apache derby iapi error StandardException newException StandardException java      at org apache derby iapi types SQLBinary checkHostVariable SQLBinary java      at org apache derby exe ac        x    x d  xbdfcxffff c  fb      e   Unknown Source  at org apache derby impl services reflect DirectCall invoke ReflectGeneratedClass java      at org apache derby impl sql execute RowResultSet getNextRowCore RowResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore  NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java        ',0
'DatabaseMetadata method supportsResultSetConcurrency returns wrong result on network client    The DatabaseMetaData method supportsResultSetConcurrency erroneouslyreturns false on the network client for all arguments combination  cfthe attached repro program  The embedded client returns correctresults  viz the output org apache derby jdbc ClientDriver SupportsResultSetConcurrency  TYPE FORWARD ONLY CONCUR READ ONLY  falseSupportsResultSetConcurrency  TYPE FORWARD ONLY CONCUR UPDATABLE  falseSupportsResultSetConcurrency  TYPE SCROLL INSENSITIVE CONCUR READ ONLY  falseSupportsResultSetConcurrency  TYPE SCROLL INSENSITIVE CONCUR UPDATABLE  falseSupportsResultSetConcurrency  TYPE SCROLL SENSITIVE CONCUR READ ONLY  falseSupportsResultSetConcurrency  TYPE SCROLL SENSITIVE CONCUR UPDATABLE  falseorg apache derby jdbc EmbeddedDriver SupportsResultSetConcurrency  TYPE FORWARD ONLY CONCUR READ ONLY  trueSupportsResultSetConcurrency  TYPE FORWARD ONLY CONCUR UPDATABLE  trueSupportsResultSetConcurrency  TYPE SCROLL INSENSITIVE CONCUR READ ONLY  trueSupportsResultSetConcurrency  TYPE SCROLL INSENSITIVE CONCUR UPDATABLE  falseSupportsResultSetConcurrency  TYPE SCROLL SENSITIVE CONCUR READ ONLY  falseSupportsResultSetConcurrency  TYPE SCROLL SENSITIVE CONCUR UPDATABLE  falsePresumably  this is wrong in released versions as well    ',0
'creating a preparedStatement outside of a Global tran using a ClientXADatasource  will result in an  SqlException  Cannot set holdability   if the statement  is used in a Global transaction    creating a preparedStatement outside of a Global tran using an xa datasource will result in an exception if the statement is used in a Global  i e  xa transaction    DERBY     and DERBY   may be relevant to this issue User noted    setting the holdability on the connection to CLOSE CURSORS AT COMMIT doesn t seem to be taken affect  since the problem is observed to happen even if I set the the holdability to CLOSE CURSORS AT COMMIT before creating the statement   maybe another bug    setting the holdability to close cursor at commit on the PS when creating it  doesn t seem to be affecting the outcome  this  not sure its even honored  maybe another bug Test case is below import java sql Connection import java sql PreparedStatement import java sql ResultSet import java sql SQLException import java sql Statement import javax sql XAConnection import javax transaction xa XAException import javax transaction xa XAResource import javax transaction xa Xid import com ibm db  jcc DB Xid class CursorHoldProblem  public static PreparedStatement pstmt   null  public static void main  String args    throws Exception   org apache derby jdbc ClientXADataSource ds   new  org apache derby jdbc ClientXADataSource    System out println  getting connection    ds setDatabaseName  sample      ds setTraceFile  trace out    ds setConnectionAttributes  create true    conn    ds getConnection   System out println conn  getMetaData   getDatabaseProductVersion     PreparedStatement ps    null  try   System out println  creating table    ps    conn  prepareStatement  CREATE TABLE TAB  COL  INT NOT NULL     ps  executeUpdate    System out println  done creating table    conn  commit       catch  SQLException x    System out println   table already exists    conn  commit      XAConnection pc    ds getXAConnection    XAResource xar    pc  getXAResource    Xid xid    createXid      Connection conn   pc  getConnection    System out println  get Holidability returning      conn getHoldability     conn setHoldability ResultSet CLOSE CURSORS AT COMMIT         gt  setting this has no affect  doSelect conn       xar  start xid   XAResource TMNOFLAGS   doSomeWork  conn       doSelect conn       xar  end xid   XAResource TMSUCCESS   int prp    xar  prepare xid    System out println  prp  is      prp    if  prp     XAResource XA OK  xar  commit xid   false     private static void doSomeWork  Connection conn  int deptno  throws SQLException    Statement stmt   conn createStatement    int cnt   stmt executeUpdate  INSERT INTO tab  VALUES      deptno         System out println  No of rows Affected     cnt   stmt close    stmt   null    private static void doSelect Connection conn  int deptno  throws SQLException    if  pstmt    null  pstmt   conn prepareStatement  select   from tab     ResultSet rset    pstmt executeQuery    while  rset  next      System out println     gt       rset  getString      break       static Xid createXid int bids  throws XAException   byte   gid   new byte     gid       byte     byte   bid   new byte     bid       byte  bids  byte   gtrid   new byte      byte   bqual   new byte      System arraycopy gid     gtrid         System arraycopy bid     bqual         Xid xid   new DB Xid  x      gtrid  bqual   return xid        ',0
'tests derbynet csPrepStmt and prepStmt use mechanisms that are not portable over encodings    With zOS  with the classic    bit jvm  the tests derbynet csPrepStmt and prepStmt java fail because the insert with setAsciiStream of a byte array obtained from a new String getBytes    and or the retrieval of that inserted value  is not ok  No error is returned  but the select shows no value This is the section in the test csPrepStmt                   ps setString      column  string    byte   c  ba   new String  column  vcstring   getBytes    int len   c  ba length  ps setAsciiStream     new ByteArrayInputStream c  ba   len  and the value is retrieved using an ResultSet getString                                del lt  got row                                   column  string  column  vcstring column  lvcstring           abcdef                         abcdef                   abcdef         xxxxxxFILTERED TIMESTAMPxxxxx                   a   gt  got row                                   column  string  column  lvcstring           abcdef                         abcdef                   abcdef         xxxxxxFILTERED TIMESTAMPxxxxx                                      i e  the string  column  vcstring  is not in the database This needs to be replaced by a encoding neutral  eg  fixed encoding  mechanism and the tests derbynet prepStmt java and csPrepStmt java need to be checked for other non portable code    ',0
'unit daemonService unit fails intermittently   ran out of time      Signature                   Diff file unit unit daemonService diff             Start  daemonService jdk         unit unit                          del lt          Unit Test T DaemonService finished  add gt  ran out of time gt  Shutting down due to unit test failure  gt  Exit due to time bombTest Failed  End  daemonService jdk         unit unit                            http   www multinet no  solberg public Apache Derby Limited testSummary        html      SunOS      i  pc i           ',0
'store access sql fails   incorrect index     ij gt          should only be   distinct row in this table since space used by the         index should be the same before and after select count distinct a  from spaceused  Signature                   Diff file derbyall encryptionAll storemats storemats access diff             Start  access jdk         storemats storemats                             del lt        a     gt    Test Failed  End  access jdk         storemats storemats                            http   www multinet no  solberg public Apache Derby Limited testSummary        html      SunOS      sun u sparc        ',0
'tests jdbcapi SURTest junit and jdbcapi SURQueryMixTest junit run twice in derbynetclientmats    The tests SURTest junit and SURQueryMixTest junit both appear in derbynetclientmats runall as well as in jdbcapi runall  So it unnecessarily runs twice  because jdbcapi is already included in the suites in derbynetclientmats properties  It should be removed from derbynetclientmats runall    ',0
'Optimizer can return incorrect  best cost  estimates with nested subqueries  which leads to generation of sub optimal plans     When optimizing a query that has nested subqueries in it  it s possible that the optimizer for the subqueries will return cost estimates that are lower than what they were actually calculated to be  The result is that the outer query can pick an access plan that is sub optimal Filing this jira issue based on the thread       OPTIMIZER      OptimizerImpl  best plans  for subqueries   from derby dev  Description that follows is pasted from that email http   article gmane org gmane comp apache db derby devel      Following example of what I saw when tracing through the code demonstrates the problem select x  j  x  b from  select distinct i j from t   x    select distinct a b from t   x where x  i   x  a During optimization of this query we will create three instancesof OptimizerImpl  OI    For  select x  j  x  b from x   x  where x  i   x  a  OI    For  select distinct i j from t   OI    For  select distinct a b from t  Query ran against a clean codeline when T  had   row and T  had                 Top level call is made to the optimize   method of the outermost SelectNode  which creates OI            OI    picks join order  X   X   and calls X  optimizeIt           X   creates OI   and makes calls to optimize it          OI    picks join order  T   and calls T  optimizeIt           T   returns a cost of             OI    saves    as new best cost and tells T  to save it          X   calls OI   getOptimizedCost    which returns     X  then returns    to OI            OI    calls X  optimizeIt           X   creates OI   and makes calls to optimize it          OI    picks join order  T   and calls T  optimizeIt           T   returns a cost of                OI    saves       as new best cost and tells T  to save it          X   calls OI   getOptimizedCost    which returns        X  then returns       to OI            OI    saves                    as new best cost and tells X  to save    and X  to save                OI    picks join order  X   X   and calls X  optimizeIt           X   fetches OI   and makes calls to optimize it          OI    picks join order  T   and calls T  optimizeIt           T   returns a cost of                OI    saves       as new best cost and tells T  to save it          X   calls OI   getOptimizedCost    which returns        X  then returns       to OI            OI    calls X  optimizeIt           X   fetches OI   and makes calls to optimize it          OI    picks join order  T   and calls T  optimizeIt           T   returns a cost of   MILLION           OI    rejects new cost    mil  gt      and does nothing          X   calls OI   getOptimizedCost    which returns     X  then returns    to OI     this seems WRONG          OI    saves                    as new best cost and tells X  to save       and X  to save    So in the end  the outer most OptimizerImpl chooses join order  X   X   because it thought the cost of this join order was only        which is better than        However  the actual cost of the join order was really estimated at   million  so the outer OptimizerImpl chose  and will generate  a plan that  according to the estimates  was  hugely  sub optimal    ',0
'Embedded ResultSet getStatement   does not return the Statement object that created it  for a connection returned from EmbeddedXADataSource    May also be the case for connections obtained from EmbeddedConnectionPoolDataSource ResultSet getStatement   is returning the undetlying  physical  java sql Statement object  not the brokered object Bug as applications can then get at the underlying  physical  connection and thus continue to use a connection that may have been assigned to someone else  Causes FAIL messages in thenew jdbcapi XATest  real checks should be added in checkDataSource to ensure all the possibleconnection objects are checked    ',0
'new test lang ShutdownDatabase java fails with j ME    The new test lang ShutdownDatabase java fails with  java lang NoClassDefFoundError  java sql DriverThe test needs to be rewritten to take advantage of the TestUtil methods for getting a connection from a datasource or using a driver  similar to e g  lang closed java The stack trace is like so java lang NoClassDefFoundError  java sql Driver at java lang ClassLoader defineClassImpl Native Method  at java lang ClassLoader defineClass ClassLoader java      at java security SecureClassLoader defineClass SecureClassLoader java      at java net URLClassLoader findClassImpl URLClassLoader java       at java net URLClassLoader   run URLClassLoader java      at java security AccessController doPrivileged AccessController java      at java net URLClassLoader findClass URLClassLoader java      at com ibm oti vm URLSystemClassLoader findClass URLSystemClassLoader java     at java lang ClassLoader loadClass ClassLoader java      at com ibm oti vm URLSystemClassLoader loadClass URLSystemClassLoader java     at java lang ClassLoader loadClass ClassLoader java      at java lang Class forNameImpl Native Method  at java lang Class forName Class java      at org apache derby impl tools ij util loadDriver util java      at org apache derby impl tools ij util startJBMS util java      at org apache derby impl tools ij util startJBMS util java      at org apache derby impl tools ij util startJBMS util java      at org apache derbyTesting functionTests tests lang ShutdownDatabase openConnectionToNewDatabase ShutdownDatabase java      at org apache derbyTesting functionTests tests lang ShutdownDatabase testOnlyTransactionWasCommited ShutdownDatabase java      at org apache derbyTesting functionTests tests lang ShutdownDatabase testShutDownWithCommitedTransaction ShutdownDatabase java      at org apache derbyTesting functionTests tests lang ShutdownDatabase main ShutdownDatabase java       ',0
'forupdate sql   holdCursorIJ sql   etc are failing when run with      client againest trunk    derbynetclientmats derbynetmats derbynetmats fail lang forupdate sql derbynetclientmats derbynetmats derbynetmats fail lang holdCursorIJ sql derbynetclientmats derbynetmats derbynetmats fail store holdCursorJDBC   sql derbynetclientmats derbynetmats derbynetmats fail jdbcapi LOBTest java derbynetclientmats derbynetmats derbynetmats fail jdbcapi blobclob BLOB java derbynetclientmats derbynetmats derbynetmats fail jdbcapi parameterMapping java derbynetclientmats derbynetmats derbynetmats fail jdbcapi setTransactionIsolation java derbynetclientmats derbynetmats derbynetmats fail jdbcapi metadataJdbc   java derbynetclientmats derbynetmats derbynetmats fail jdbcapi connectionJdbc   javaSample diff       Start  forupdate jdk         DerbyNetClient derbynetmats derbynetmats                           del lt  ERROR   X    Syntax error  Encountered   lt EOF gt   at line    column      a   gt  ERROR   X    Syntax error  Encountered   lt EOF gt   at line    column       del lt  ERROR  no SQLState   Invalid cursor name  C   in the Update Delete statement   a   gt  ERROR   X    Cursor  SQL CURLH   C   not found  Verify that autocommit is OFF     del lt  ERROR  no SQLState   Invalid cursor name  C   in the Update Delete statement    a    gt  ERROR   X    Cursor  SQL CURLH   C   not found  Verify that autocommit is OFF     del lt  ERROR  no SQLState   Invalid cursor name  C   in the Update Delete statement    a    gt  ERROR   X    Cursor  SQL CURLH   C   not found  Verify that autocommit is OFF     del lt  ERROR   X    Syntax error  Encountered     at line    column       a    gt  ERROR   X    Syntax error  Encountered     at line    column    Test Failed  End  forupdate jdk         DerbyNetClient derbynetmats derbynetmats        ',0
'JVMInfo is duplicated in derbyclient jar    The JVMInfo class is included twice in derbyclient jar  asorg apache derby iapi services info JVMInfo andorg apache derby shared common info JVMInfo  The only one of themactually used by the client code is the one found inorg apache derby shared common info org apache derby iapi services info JVMInfo is also included inderby jar  so one could run into problems if the classpath containsderbyclient jar and derby jar with different versions    ',0
'test jdbcapi checkDataSource   and savepointJdbc   XA fail with remote server with security exceptions    The  tmp from the jdbcapi checkDataSource   java is                       START XA HOLDABILITY TESTERROR  no SQLState   java security PrivilegedActionException   Error opening socket to server localhost on port      with message   Connection refusedCompleted checkDataSource                        The  tmp from the jdbcapi savepointJdbc   XA java is                                      FAIL         unexpected exceptionSQLSTATE null  java sql SQLException  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   Connection refused at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client ClientPooledConnection  lt init gt  ClientPooledConnection java      at org apache derby client ClientXAConnection  lt init gt  ClientXAConnection java     at org apache derby jdbc ClientXADataSource getXAConnection ClientXADataSource java     at org apache derby jdbc ClientXADataSource getXAConnection ClientXADataSource java     at org apache derbyTesting functionTests tests jdbcapi savepointJdbc   XA main savepointJdbc   XA java    Caused by  org apache derby client am DisconnectException  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   Connection refused at org apache derby client net NetAgent  lt init gt  NetAgent java      at org apache derby client net NetConnection newAgent  NetConnection java      at org apache derby client am Connection initConnection Connection java      at org apache derby client am Connection  lt init gt  Connection java      at org apache derby client net NetConnection  lt init gt  NetConnection java      at org apache derby client net NetXAConnection  lt init gt  NetXAConnection java     at org apache derby client ClientPooledConnection  lt init gt  ClientPooledConnection java           more                                ',0
'Security AccessControlException in client under SecurityManager when trying to connect using EUSRIDPWD security mechanism    When using EUSRIDPWD security mechanism  the JCE provider is added and since this is not in a privileged block  an accesscontrol exception is raised when trying to connect using EUSRIDPWD security mechanism  when client is run under security manager Enabled test  T   in testSecMec java  gt  T   jdbc derby   xxxFILTERED HOSTNAMExxx xxxFILTEREDPORTxxx wombat user neelima password lee securityMechanism     EXCEPTION Unexpected throwable caught java security AccessControlException  access denied  java security SecurityPermission insertProvider SunJCE    ',1
'Delete cascade causes NULL values inserted into table when after delete Trigger fires    When an after delete trigger which inserts into a table is created on a table that has a foreign key that references a primary key and uses the on delete cascade constraint  nulls are inserted into the table by the trigger The SQL below shows that the cascade delete works correctly ij gt  CREATE TABLE TABLE    X INT PRIMARY KEY     rows inserted updated deletedij gt  CREATE TABLE TABLE  DELETIONS   X INT     rows inserted updated deletedij gt  CREATE TABLE TABLE    Y INT  CONSTRAINT Y AND X FOREIGN KEY Y  REFERENCES TABLE  X  ON DELETE CASCADE    rows inserted updated deletedij gt  CREATE TABLE TABLE  DELETIONS   Y INT     rows inserted updated deletedij gt  INSERT INTO TABLE  VALUES       row inserted updated deletedij gt  INSERT INTO TABLE  VALUES       row inserted updated deletedij gt  INSERT INTO TABLE  VALUES       row inserted updated deletedij gt  INSERT INTO TABLE  VALUES       row inserted updated deletedij gt  select   from table  X               rows selectedij gt  select   from table  Y               rows selectedij gt  DELETE FROM TABLE    rows inserted updated deletedij gt  select   from table  X             rows selectedij gt  select   from table  Y             rows selectedNow insert the rows again  create the triggers  delete the rows from the primary key table  verify the cascade delete worked and observe the values in the tables used by the triggers ij gt  INSERT INTO TABLE  VALUES      row inserted updated deletedij gt  INSERT INTO TABLE  VALUES      row inserted updated deletedij gt  INSERT INTO TABLE  VALUES      row inserted updated deletedij gt  INSERT INTO TABLE  VALUES      row inserted updated deletedij gt  CREATE TRIGGER TRIGGER  AFTER DELETE ON TABLE  REFERENCING OLD AS OLD ROW FOR EACH ROW MODE DB SQL INSERT INTO TABLE  DELETIONS VALUES  OLD ROW X    rows inserted updated deletedij gt  CREATE TRIGGER TRIGGER  AFTER DELETE ON TABLE  REFERENCING OLD AS OLD ROW FOR EACH ROW MODE DB SQL INSERT INTO TABLE  DELETIONS VALUES  OLD ROW Y    rows inserted updated deletedij gt  DELETE FROM TABLE    rows inserted updated deletedij gt  select   from TABLE  X             rows selectedij gt  select   from TABLE  Y             rows selectedij gt  SELECT   FROM TABLE  DELETIONS X               rows selectedij gt  SELECT   FROM TABLE  DELETIONS Y           NULLNULLThe TABLE  DELETIONS table contains NULLs instead of the correct values which should be   and      ',0
'Misleading wrong error message while dropping a view    while dropping a view which does not really exist on a database   the error message thrown by ij says ERROR X X    Table  VIEW     does not exist  It looks like we should make the error message to say that  Table View  does not exist  instead of  table  Look at other messages that are shared for both Table and View    ',0
'Derby fails inserting a join into a table with a generated column    I ve been having a problem inserting the result of a join into a table with a generated column  If I rephrase the join clause into a where clause  the problem goes away  And it only seems to happen if the target table has a generated column  Unfortunately  the join that I want to do in my application is pretty complex so I don t think I can rephrase it  But here s a very simplified example of what I m talking about ij version     ij gt  connect  jdbc derby test create true  ij gt  create table source  source id int not null primary key    rows inserted updated deletedij gt  insert into source values     insert into source values     insert into source values     insert into source values     insert into source values     insert into source values     insert into source values     insert into source values     insert into source values     insert into source values       row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt    row inserted updated deletedij gt  create table dest  dest id int not null primary key generated always as identity source id   int not null source id   int not null    rows inserted updated deletedij gt  select s  source id  s  source idfrom source as s join source as s on       SOURCE ID  SOURCE ID                                                                                                                                                                                                                                                                                                                                                                                                                                           rows selectedij gt  insert into dest  source id    source id   select s  source id  s  source idfrom source as s join source as s on       ERROR XJ     Java exception     java lang NullPointerException  ij gt derby log                                                                                         GMT Booting Derby version The Apache Software Foundation   Apache Derby                        instance c      d      d  c                  on database directory D  Documents and Settings        My Documents testDatabase Class Loader started   derby database classpath                           GMT Thread     main   main       XID          SESSIONID        DATABASE   test    DRDAID   null   Cleanup action starting                        GMT Thread     main   main       XID          SESSIONID        DATABASE   test    DRDAID   null   Failed Statement is  insert into dest  source id    source id   select s  source id  s  source idfrom source as s join source as s on      java lang NullPointerExceptionat org apache derby impl sql compile ResultColumnList remapColumnReferencesToExpressions Unknown Source at org apache derby impl sql compile JoinNode flatten Unknown Source at org apache derby impl sql compile FromList flattenFromTables Unknown Source at org apache derby impl sql compile SelectNode preprocess Unknown Source at org apache derby impl sql compile SingleChildResultSetNode preprocess Unknown Source at org apache derby impl sql compile DMLStatementNode optimize Unknown Source at org apache derby impl sql compile DMLModStatementNode optimize Unknown Source at org apache derby impl sql GenericStatement prepMinion Unknown Source at org apache derby impl sql GenericStatement prepare Unknown Source at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source at org apache derby impl jdbc EmbedStatement execute Unknown Source at org apache derby impl jdbc EmbedStatement execute Unknown Source at org apache derby impl tools ij ij executeImmediate Unknown Source at org apache derby impl tools ij utilMain doCatch Unknown Source at org apache derby impl tools ij utilMain go Unknown Source at org apache derby impl tools ij Main go Unknown Source at org apache derby impl tools ij Main mainCore Unknown Source at org apache derby impl tools ij Main   main Unknown Source at org apache derby tools ij main Unknown Source Cleanup action completed                        GMT Shutting down instance c      d      d  c                                                                                     ',0
'Test harness does not pass jvm flags properly if there are more than   property in jvm flags    To run Derby tests with EMMA for Code coverage  there is a need to set up emma flag  Djvmflags  Demma verbosity level silent  This is basically to enable EMMA not to print out any messages to avoid having any diffs  This all works fine when running Derby tests with EMMA for jdk     jdk    jdk    etc because there is no other jvm flag that is passed while calling RunSuite Command  Now  while running tests with j me cdc foundation  another value needs to be passed as jvmflag which is Djvmflags  Dij dataSource org apache derby jdbc EmbeddedSimpleDataSource  I tried to combine values for both jvm flags as following  but it did not work properly     Djvmflags   Demma verbosity level silent  Dij dataSource org apache derby jdbc EmbeddedSimpleDataSource During this run  the value that was further passed while running one test was Djvmflags    Demma verbosity level silent  As you can notice it took jvm flag as   Demma verbosity level silent     Djvmflags   Demma verbosity level silent  Dij dataSource org apache derby jdbc EmbeddedSimpleDataSource During this run  the value that was further passed while running one test was Djvmflags    Demma verbosity level silent  As you can notice it took jvm flag as   Demma verbosity level silent From the above it looks like test harness needs to be changed so that it can parse multiple values for jvm flags properly    ',0
'ResultSet getHoldabilty will return incorrect value when the ResultSet is obtained from a procedure call    EmbedResultSet   getHoldability returns the holdability of the statement returned by ResultSet getStatement   When a ResultSet is created by a procedure call  its holdability may not match the holdability of the Statement that called the procedure  which is probably what ResultSet getStatement   should return This may not be exposed as a bug yet  but I think this method should be directly obtaining the holdability of the ResultSet using the Activation getResultSetHoldability   method  rather than through a Statement  Seems a safer approach    ',0
'For existing databases JDBC metadata queries do not get updated properly  between maintenance versions     The JDBC DatabaseMetaData queries are stored as stored prepared statements in the database  If a bug is fixed for any of the metadata calls it can require that these queries be changed  Currently existing databases will not get updated properly if a bug is fixed  Ideally the metadata queries should match the derby version that is running  That way we avoid situations where the query is not compatible with the Derby version running To confirm I     created a database with            Made a metadata change in my          client    Connected to the          database with          and saw that there was no change to the stored prepared statements in SYS SYSSTATEMENTSI also confirmed that a database created with          does not get changed when reverting to          Below this line is some history and reference that might be helful to someone fixing this issue                                                                                                                                                 In discussing DERBY      the subject of the metadata stored prepared statements came up The general questions are     Why do we use stored prepared statements for metadata queries      What issues might there be related to upgrade downgrade with the metadata stored prepared statements     How do we address potential upgrade downgrade issues GENERAL HISTORY  Cloudscape   x had stored prepared statements  a way to store precompiledstatements in the database  This is no longer exposed externally  Metadata stored prepared statements were a performance optimization thatpredated the statement cache  In the past  this performance optimization has been of particular importanceto gui database browsers that execute all the metadata methods on connection to the database  This would still probably be an issue with embedded even with the statement cache  All stored prepared statements get recompiled on the first connection to thedatabase if the version changes UPGRADE HISTORY In Cloudscape      the metadata stored prepared statements have traditionallybeen a source of trouble for even minor version changes as queries change or they refer to methods stored procedures that may or may not exist in the target version and cannot recompile or execute   The solution to the problem in Cloudscape v       was to automaticallyalways call DD Version dropJDBCMetadataSPSes   whenever the version changed up or down in upgradeIfNeeded    The workaround before this change to do this automatically was to call thismethod manually  CALL Factory getDatabaseOfConnection    dropAllJDBCMetaDataSPSes  HOW DERBY WORKS TODAY  In Derby we now only call dropJDBCMetadataSPSes   on fullUpgrade and it hasbeen this way since contribution  I think the problems of upgrade downgrade for metadata stored preparedstatements may exist in Derby  I don t know a workaround to drop the metadata stored prepared statements ifwe need to deliver a bug fix or how the ugprade downgrade is handled currently  I seem to recall some special handling in Derby for soft upgrade for optimizer directives  but don t know the details RECENT DISCUSSIONS In discussing DERBY      the subject of the metadata stored prepared statements came up The general questions are     Why do we use stored prepared statements for metadata queries      What issues might there be related to upgrade downgrade with the metadata stored prepared statements     How do we address potential upgrade downgrade issues MY QUESTIONSAnyone know when why the dropJDBCMetadataSPSes   on all version changes was removed between Cloudcape        and contribution  How do we deliver bug fixes for metadata queries or handle changes in the metadata queries in Derby    ',0
'transaction logs files requried for recovery are getting deleted when backup and checkpointas are running in parallel                                                                                             GMT  Booting Derby version The Apache Software Foundation   Apache Derby            alpha        instance c      d      fa a bf             a on database directory E  ',0
'client gives SqlException for test callable java and parameterMapping java on zOS    On zOS  the tests callable java and parameterMapping java failed with networkserver and the derby client  The failure did not occur with the db jcc jar  The stack trace was as follows org apache derby client am SqlException   V V       D F    F            at org apache derby client am Statement completeExecute Statement java       at org apache derby client net NetStatementReply parseEXCSQLSTTreply NetStatementReply java      at org apache derby client net NetStatementReply readExecuteCall NetStatementReply java     at org apache derby client net StatementReply readExecuteCall StatementReply java     at org apache derby client net NetStatement readExecuteCall  NetStatement java      at org apache derby client am Statement readExecuteCall Statement java       at org apache derby client am PreparedStatement flowExecute PreparedStatement java       at org apache derby client am CallableStatement executeX CallableStatement java      at org apache derby client am CallableStatement execute CallableStatement java      at org apache derbyTesting functionTests tests derbynet callable main Unknown Source In callable java  it s this part of the test that caused the failure                                            System out println  return value is      cs getInt      cs close       stmt execute  DROP FUNCTION method        different parameter types  also method overload stmt execute  CREATE PROCEDURE method P      IN P  SMALLINT  IN P  INT  IN P  BIGINT  IN P  REAL       IN P  DOUBLE  IN P  DECIMAL       IN P  DATE  IN P  TIME  IN P  TIMESTAMP  IN P   VARCHAR     FOR BIT DATA       OUT O  SMALLINT  OUT O  INT  OUT O  BIGINT  OUT O  REAL       OUT O  DOUBLE  OUT O  DECIMAL       OUT O  DATE  OUT O  TIME  OUT O  TIMESTAMP  OUT O   VARCHAR     FOR BIT DATA            EXTERNAL NAME  org apache derbyTesting functionTests tests derbynet callable method        NO SQL LANGUAGE JAVA PARAMETER STYLE JAVA    cs   conn prepareCall  call method P                                                                cs setShort     short      cs setInt        cs setLong        cs setFloat     float        cs setDouble          cs setBigDecimal    new BigDecimal            cs setDate    Date valueOf                 cs setTime    Time valueOf               cs setTimestamp    Timestamp valueOf                                    byte   ba   new byte             ba                 ba                 cs setBytes     ba   int n       cs registerOutParameter  n    java sql Types SMALLINT   cs registerOutParameter  n    java sql Types INTEGER   cs registerOutParameter  n    java sql Types BIGINT   cs registerOutParameter  n    java sql Types REAL   cs registerOutParameter  n    java sql Types DOUBLE   cs registerOutParameter  n    java sql Types DECIMAL   cs registerOutParameter  n    java sql Types DATE   cs registerOutParameter  n    java sql Types TIME   cs registerOutParameter  n    java sql Types TIMESTAMP   cs registerOutParameter  n     java sql Types VARBINARY   cs execute                     I found in derby log a reference to error          S        i e  syntax error on parameter   of SYSIBM SQLCAMESSAGE  yes  this is from last year                                                         GMT Thread     DRDAConnThread     main       XID          SESSIONID        DATABASE   wombat    DRDAID   NF       G C                          End compiling prepared statement  call method P                                                              End prepared statement                        GMT Thread     DRDAConnThread     main       XID          SESSIONID        DATABASE   wombat    DRDAID   NF       G C                          Begin compiling prepared statement  call SYSIBM SQLCAMESSAGE                                   End prepared statement                        GMT Thread     DRDAConnThread     main       XID          SESSIONID        DATABASE   wombat    DRDAID   NF       G C                          End compiling prepared statement  call SYSIBM SQLCAMESSAGE                                   End prepared statement                        GMT Thread     DRDAConnThread     main       XID          SESSIONID        DATABASE   wombat    DRDAID   NF       G C                          Executing prepared statement  call SYSIBM SQLCAMESSAGE                                   End prepared statement with    parameters begin parameter         end parameter begin parameter         end parameter begin parameter      V V       D F    F           end parameter begin parameter                               end parameter begin parameter        end parameter begin parameter        end parameter begin parameter        end parameter begin parameter        end parameter begin parameter        end parameter begin parameter         end parameter beginparameter                                         end parameter begin parameter      V V       D  end parameter begin parameter      null  end parameter beginparameter      en  end parameter begin parameter      null  end parameter begin                         ',0
'jdbc  TestDbMetaData java fails because of changes in SQLException text    jdbc  TestDbMetaData java fails with the following diff                  Diff file jdbc  DerbyNetClient jdbc  TestDbMetaData diff             Start  TestDbMetaData jdk      beta  DerbyNetClient jdbc  jdbc                            del lt  SQLSTATE  A     java sql SQLException   A    S               getClientInfoProperties      del lt  Caused by  org apache derby client am SqlException   A    S               getClientInfoProperties     a      gt  SQLSTATE  A     java sql SQLException  Feature not implemented  getClientInfoProperties     gt  Caused by  org apache derby client am SqlException  Feature not implemented  getClientInfoProperties       del lt  SQLSTATE  A     java sql SQLException   A    S               getSchemas  String  String    del lt  Caused by  org apache derby client am SqlException   A    S               getSchemas  String  String   a      gt  SQLSTATE  A     java sql SQLException  Feature not implemented  getSchemas  String  String   gt  Caused by  org apache derby client am SqlException  Feature not implemented  getSchemas  String  String  Test Failed  End  TestDbMetaData jdk      beta  DerbyNetClient jdbc  jdbc                              http   www multinet no  solberg public Apache DerbyJDK   testlog JDK  Jvm   SunOS      i  pc i           jdbc  diff txt The failure is caused by changes in MessageUtil which have modified the exception message    ',0
'compatibility tests fail with security related errors     A   few  cases                  Begin  serverVM     serverTrunk clientVM     clientTrunkException in thread  main  java lang NoClassDefFoundError  javax crypto IllegalBlockSizeException             End  serverVM     serverTrunk clientVM     clientTrunk                     Begin  serverVM     server         clientVM     clientDB JCCcom ibm db  jcc c SqlException  java net ConnectException   Error opening socket to server localhost on port      with message   Connection refused at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite main CompatibilitySuite java     Exception in thread  main  java lang Exception  Error lookup up server info  java net ConnectException   Error opening socket to server localhost on port      with message   Connection refused             End  serverVM     server         clientVM     clientDB JCC                     Begin  serverVM     server         clientVM     clientDerby        org apache derby client am DisconnectException  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   nullException in thread  main  java lang Exception  Error lookup up server info  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   null             End  serverVM     server         clientVM     clientDerby                             Begin  serverVM     server         clientVM     clientDerby        org apache derby client am DisconnectException  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   nullException in thread  main  java lang Exception  Error lookup up server info  java security PrivilegedActionException   Error opening socket to server localhost on port      with message   null             End  serverVM     server         clientVM     clientDerby                             Begin  serverVM     server         clientVM     clientTrunkException in thread  main  java lang NoClassDefFoundError  javax crypto IllegalBlockSizeException             End  serverVM     server         clientVM     clientTrunk                     Begin  serverVM     server         clientVM     clientDB JCCcom ibm db  jcc c SqlException  java net ConnectException   Error opening socket to server localhost on port      with message   Connection refused at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite main CompatibilitySuite java     Exception in thread  main  java lang Exception  Error lookup up server info  java net ConnectException   Error opening socket to server localhost on port      with message   Connection refused             End  serverVM     server         clientVM     clientDB JCC    See e g http   www multinet no  solberg public Apache Derby testlog SunOS      i  pc i           compatibility diff txt inhttp   www multinet no  solberg public Apache Derby Limited testSummary        htmlhttp   www multinet no  solberg public Apache DerbyJDK   testlog JDK  Jvm   SunOS      i  pc i           compatibility diff txt inhttp   www multinet no  solberg public Apache DerbyJDK   Limited testSummary current htmlFirst occurence in svn                                 CET     Changes in http   www multinet no  solberg public Apache Derby UpdateInfo        txt   ',1
'Truncation Error with Concat    Consider the tableCREATE TABLE CUSTOMER TABLE   ID VARCHAR      PRIMARY KEY NOT NULL  NAMEZ VARCHAR        COUNTRY VARCHAR       Sql PreparedStatement ps   conn prepateStatement   SELECT   FROM CUSTOMER TABLE WHERE NAMEZ   VARCHAR   CAST    AS VARCHAR             CAST    AS VARCHAR               ps setString     Alan E     ps setString     Frechette   ps executeQuery  Error  A truncation error was encountered trying to shrink VARCHAR  Alan E  Frechette  to length     getErrorCode    getSQLState        Please note that The query executes ok against DB  database The query executes ok if the total length of both the parameters bound is less than     That is as follows   Total length of parameters bound   len  Alan E  Fre        ps setString     Alan E      ps setString     Fre    The error occurs both with embedded and network mode of derby Omitting the casts as follows also gives the same error query  SELECT   FROM CUSTOMER TABLE WHERE NAMEZ   VARCHAR   Frechette         error  SQLState         A truncation error was encountered trying to shrink VARCHAR  FrechetteAlan E    to length     Using parameter markers for both the variables without cast like as follows results in error query  SELECT   FROM CUSTOMER TABLE WHERE NAMEZ          error  SQLState    X    It is not allowed for both operands of      to be   parameters   Using parameter markers for only one variables without cast like as follows results in error query  SELECT   FROM CUSTOMER TABLE WHERE NAMEZ    Frechette       error SQLState         Comparisons between  VARCHAR  and  LONG VARCHAR  are not supported    It works to cast to VARCHAR        but not VARCHAR       or larger  Regardless of length  if it fails  the magic number is always       ',0
'With client PooledConnection getConnection   does not reset holdability and isolation state properly    I found this issue when working on DERBY      which was filed for the isolation not getting reset for XAConnections I found that this was a generic issue for PooledConnections and also that holdability was also wrong The fix proposed for DERBY      should also fix this issue  That bug has the repro for the isolation state issueFor holdability  this code passes for embedded but fails for client     Test holdability  ConnectionPoolDataSource ds   TestUtil getConnectionPoolDataSource p   pc    ds getPooledConnection    testPooledConnHoldability  PooledConnection   pc    pc  close        param string  param pc     private static void testPooledConnHoldability String string  PooledConnection pc    throws SQLException Unknown macro    System out println  quot n  Test holdability state   quot    Connection conn   pc  getConnection    conn setHoldability ResultSet CLOSE CURSORS AT COMMIT      reset the connection and see if the holdability gets reset conn   pc  getConnection    int holdability   conn getHoldability    if  holdability    ResultSet HOLD CURSORS OVER COMMIT    System out println  FAIL  Holdability not reset on get Connection      else   System out println  PASS  Holdability reset on getConnection      conn close        ',0
'Failures in sysinfo and sysinfo withproperties induced by classpath wiring    If you wire your classpath together out of the compiled classtree and the checked in jars  you get the following error in the sysinfo and sysinfo withproperties tests  You don t see this error if you run against the built Derby jar files   d   lt  Unable to analyze class path  access denied  java util PropertyPermission java class path read   d   lt  Unable to analyze class path  access denied  java util PropertyPermission java class path read   d   lt  Unable to analyze class path  access denied  java util PropertyPermission java class path read Test Failed    ',0
'derbynet testSecMec java fails with Sun JDK        derbynet testSecMec java fails with Sun JDK      lt  SECMEC EUSRIDPWD EXCEPTION testSecurityMechanism   Security exception encountered  see next exception for details  gt  SECMEC EUSRIDPWD EXCEPTION testSecurityMechanism   Security exception encountered  see next exception for details  Caused by exception class java security NoSuchProviderException  null     and so forth Does not fail with      so probably just a master update    ',0
'PreparedStatement executeUpdate throws a XJ  C exception in a global transaction if the statement is HOLD CURSORS OVER COMMIT    SQLSTATE XJ  C   Cannot set holdability ResultSet HOLD CURSORS OVER COMMIT for a global transaction Exception is thrown in client  in embedded the statement executes successfully Since HOLD CURSORS OVER COMMIT only applies to ResultSets and executeUpdate states it only succeeds if the statementdoes not generate ResultSets  then this combination should succeed Probably related to the fact that in embedded an execute   call on the same PreparedStatement will thrown a XJ  C exceptionWorkaround is to prepare the statement explicitly with CLOSE CURSORS AT COMMIT    ',0
'NullPointerException in network server with LDAP authentication    While trying to fix DERBY      I tried to set up Derby s network server to use LDAP authentication  but I ran into something that looks like a bug  but could just as well be my own configuration mistake  I would appreciate any help in figuring this out    The problem is a NullPointerException in the Network Server when it tries to initialize the LDAP authentication service  The attached derby log shows the exception and its stacktrace  The attached derby properties is what I put in the derby home directory I m seeing this problem in the trunk as well as my own build of the      branch and the          release build available from the Derby web site    http   db apache org derby releases release          cgi  The problem is cause by the setInitDirContextEnv method in JNDIAuthenticationSchemeBase receiving a null dbProps argument  which it obviously doesn t expect  Adding a check for a null dbProps argument and returning immediately after creating the initDirContextEnv object fixes the NullPointerException and makes LDAP authentication work for me  This is a reasonable enough robustness fix and shouldn t have any negative impact  but if the source of the problem is that JNDIAuthenticationSchemeBase should never receive that null pointer in the first place  more patching is needed  I m not sure about this  so I m leaving it up to the experts to decide this       ',1
'defragment of inplace compress pass for described dataset is not freeing up empty pages     For the following script defragment pass is not freeing up the free pages drop table t  create table t   i integer primary key  j integer  c char       insert into t  values         a   insert into t   select t  i      t  j      t  c from t   insert into t   select t  i      t  j      t  c from t   insert into t   select t  i      t  j      t  c from t   insert into t   select t  i      t  j      t  c from t   insert into t   select t  i       t  j       t  c from t   insert into t   select t  i       t  j       t  c from t   insert into t   select t  i       t  j       t  c from t   insert into t   select t  i        t  j        t  c from t   insert into t   select t  i        t  j        t  c from t   insert into t   select t  i        t  j        t  c from t   delete from t  where i  lt      select cast conglomeratename as char      as tabname  isindex  cast numallocatedpages as int  as alloc  numfreepages  cast numunfilledpages as int  as unfilled  pagesize  estimspacesavingfrom new org apache derby diag SpaceTable  T    t order by conglomeratename CALL SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP    T             select cast conglomeratename as char      as tabname  isindex  cast numallocatedpages as int  as alloc  numfreepages  cast numunfilledpages as int  as unfilled  pagesize  estimspacesavingfrom new org apache derby diag SpaceTable  T    t order by conglomeratename select cast conglomeratename as char      as tabname  isindex  cast numallocatedpages as int  as alloc  numfreepages  cast numunfilledpages as int  as unfilled  pagesize  estimspacesavingfrom new org apache derby diag SpaceTable  T    t order by conglomeratename Here is example output from a run on the trunk ij gt  drop table t    rows inserted updated deletedij gt  create table t   i integer primary key  j integer  c char         rows inserted updated deletedij gt  insert into t  values         a     row inserted updated deletedij gt  insert into t   select t  i      t  j      t  c from t     row inserted updated deletedij gt  insert into t   select t  i      t  j      t  c from t     rows inserted updated deletedij gt  insert into t   select t  i      t  j      t  c from t     rows inserted updated deletedij gt  insert into t   select t  i      t  j      t  c from t     rows inserted updated deletedij gt  insert into t   select t  i       t  j       t  c from t      rows inserted updated deletedij gt  insert into t   select t  i       t  j       t  c from t      rows inserted updated deletedij gt  insert into t   select t  i       t  j       t  c from t      rows inserted updated deletedij gt  insert into t   select t  i        t  j        t  c from t       rows inserted updated deletedij gt  insert into t   select t  i        t  j        t  c from t       rows inserted updated deletedij gt  insert into t   select t  i        t  j        t  c from t       rows inserted updated deletedij gt  delete from t  where i  lt          rows inserted updated deletedij gt  select cast conglomeratename as char      as tabname  isindex  cast numallocatedpages as int  as alloc  numfreepages  cast numunfilledpages as int  as unfilled  pagesize  estimspacesavingfrom new org apache derby diag SpaceTable  T    t order by conglomeratename TABNAME  ISIND amp  ALLOC  NUMFREEPAGES  UNFILLED  PAGESIZE  ESTIMSPACESAVING                                                                                                 SQL                             T                             rows selectedij gt  CALL SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  APP    T               rows inserted updated deletedij gt  select cast conglomeratename as char      as tabname  isindex  cast numallocatedpages as int  as alloc  numfreepages  cast numunfilledpages as int  as unfilled  pagesize  estimspacesavingfrom new org apache derby diag SpaceTable  T    t order by conglomeratename TABNAME  ISIND amp  ALLOC  NUMFREEPAGES  UNFILLED  PAGESIZE  ESTIMSPACESAVING                                                                                                 SQL                             T                         rows selectedij gt    ',0
'Network Server reports wrong product name when logging connections to derby log    The Derby Network Server is symptomatic of dissociative identity disorder when derby drda logConnections true  At startup and shutdown the network server correctly recognizes itself as  Apache Derby   When logging connections  however  it thinks it is  Cloudscape   See the following derby log for an example         derby log START                 Apache Derby Network Server            alpha started and ready to accept connections on port      at                         GMTConnection number                                                                                            GMT  Booting Derby version The Apache Software Foundation   Apache Derby            alpha             instance c      d    a    c e bf           c on database directory  export home tmp test testDBDatabase Class Loader started   derby database classpath                           GMT Thread     DRDAConnThread     main       DATABASE   testDB    DRDAID         Cloudscape Network Server connected to database testDB create true        derby log END                 To reproduce  do the following    Start the network server with the property derby drda logConnections set to true  An example follows bash        java  Dderby drda logConnections true  jar   DERBY CURRENT  derbyrun jar NetworkServerControl startApache Derby Network Server            alpha started and ready to accept connections on port      at                         GMTConnection number       Use the client driver to connect to the server  An example follows  using IJ  bash        java  jar   DERBY CURRENT  derbyrun jar ijij version     ij gt  connect  jdbc derby   localhost      testDB create true  ij gt  exit    ',0
'Derby Server and Administration Guide   Servlet interface   Running page    In this page is written    You can use the running page to stop the server and turn logging and tracing on or off  boot or shut down databases I installed the servlet in Tomcat  and I can t see any option to boot or shut down databases in this page    Test the connection   If you choose this option  the Test connection page is displayed  I also can t see any option to test connection in this page    Stop the application server The option is  Press the button to stop the Network server   and not the application server I m using           Derby Information         JRE   JDBC  J SE         JDBC          org apache derby info DBMS properties                               org apache derby info net properties                         I don t know if my servlet s version is old  but those things are written in the manual for the version I m using I m sending a diff file to adjust this page to what appears in the servlet I m using    ',0
'jdbcapi checkDataSource java and jdbcapi checkDataSource   java hang intermittently with client    The tests checkDataSource java and checkDataSource   java hang intermittently especially with jdk     Attached is the test run output and traces when the server is started separately    Enable checkDataSource   java by taking it out of functionTests suites DerbyNetClient exclude    Run the test with client java  Dij exceptionTrace true  Dkeepfiles true  Dframework DerbyNetClient org apache derbyTesting functionTests harness RunTest jdbcapi checkDataSource   javaAttachements  testfiles after hang zip   Test directory  traces on hang txt   Server side traces obtained by starting the server separately before running the test I wish I had time to work on this right now as I would really like to see this valuable test in the suite  but hopefully someone else will pick it up    ',0
'LIKE does not match empty strings when used with a prepared statement    LIKE should give true for two   length strings  See SQL      Ch     General Rules   c i The query SELECT   FROM t WHERE v like   appears to give me all rows where v is an emptystring  as expected But a prepared statementSELECT   FROM t WHERE v like    with setString       always returns an empty result set  See attached repro for the full example    ',0
'Assert failure in BasePage shiftUp   when running store onlineBackupTest  sql    I saw this error when I ran derbyall                  Diff file derbyall storeall storemore onlineBackupTest  diff             Start  onlineBackupTest  jdk         storeall storemore                           del lt  ij CONNECTION   gt  select   from ctest    del lt  ID  NAME    del lt                                                                                                                                                 del lt     derby backup compress test  amp    del lt     derby backup compress test  amp    del lt       derby backup compress test  amp    del lt       derby backup compress test  amp    del lt       derby backup compress test  amp    del lt       derby backup compress test  amp    del lt       derby backup compress test  amp    del lt  ij CONNECTION   gt  insert into ctest values        restore was successfil       del lt    row inserted updated deleted   del lt  ij CONNECTION   gt     add gt  org apache derby shared common sanity AssertFailure  ASSERT FAILED shiftUp failed  low must be between   and recordCount  low        recordCount     gt  ERROR XJ     Failed to start database  wombat   see the next exception for details  gt  ERROR XJ     Java exception   ASSERT FAILED shiftUp failed  low must be between   and recordCount  low        recordCount      org apache derby shared common sanity AssertFailure   gt  ij gt  select   from ctest  gt  IJ ERROR  Unable to establish connection gt  ij gt  insert into ctest values        restore was successfil     gt  IJ ERROR  Unable to establish connection gt  ij gt  Test Failed  End  onlineBackupTest  jdk         storeall storemore                            The test usually succeeds  but I managed to reproduce the failure by running this loop in the shell touch onlineBackupTest  passwhile    f onlineBackupTest  pass    do rm onlineBackupTest  pass java org apache derbyTesting functionTests harness RunTest store onlineBackupTest  sqldone   ',0
'Old clients with new server return wrong database metadata values for some methods    With an old client                  accessing a new        server some metadata calls will return the wrong value for both the JCC andthe Derby clients  deletesAreDetected TYPE SCROLL INSENSITIVE    gt  true updatedAreDetected TYPE SCROLL INSENSITIVE    gt  true ownDeletesAreVisible TYPE SCROLL INSENSITIVE    gt  true ownUpdatesAreVisible TYPE SCROLL INSENSITIVE    gt  trueThis happens because these values were changed for the      withthe addition of updatable scrollable insensitive result sets  DERBY      combined with a weakness in the way the client and the server cooperates to answer these metadata calls Presently  when the client application invokes these methods  theresults will be returned by the server without regard to the identityof the client  i e  the   tuple  JCC or Derby client  client version  The values to be returned for the methods in question are based solelyon the values found in the file metadata net properties  which is partof the server In general  some database metadata is dependent on the combination ofthe capabilities in the client and the server and the returned valuesshould reflect this  which in general implies negotiating  down  tovalues which are correct for the actual combination of client andserver    ',0
'XAConnection uses NetConnection as underlying physical connection for JDBC  Java        When running under DerbyNetClient  using Derby network server  using Java      XAConnection getConnection   returns a NetConnection instance instead of NetConnection   instance for the underlying  physical connection   This causes AbstractMethod errors for calls in LogicalConnection    not yet committed   PooledConnection does the correct thing according to the test that revealed this problem The XAConnection was obtained by using TestUtil getXADataSource   getXAConnection    The underlying connection object was then obtained with XAConnection getConnection   A new ConnectionTest is on the way as part of DERBY       It will be submitted committed  but not enabled until this bug is fixed    ',0
'Client  Attempted deleteRow or updateRow while on insert row gives wrong error message    This fragment from deleteRowX shows the problem  gt  if  isOnInsertRow     gt  throw new SqlException agent  logWriter    gt  new MessageId SQLState CURSOR NOT POSITIONED ON INSERT ROW    gt   It should be the opposite  the problem is that the cursor is on theinsert row  not that it isn t These is a similar error in updateRowX The client master files for updatableResultSet show the problem  sothe masters are wrong  too  gt  Negative Test    a   run updateRow on insertRow gt  SQL State  XJ    gt  Got expected exception  This method cannot be invoked while the cursor is not on the insert row or if the concurrency of this  ResultSet object is CONCUR READ ONLY    ',0
'Network Server does not shutdown the databases it has booted when started and shutdown from the command line    If network server is started and shutdown from the comand line t does not shutdown the database  This can is evidenced by the fact that the db lck file remains after the following steps java org apache derby drda NetworkServerControl start  amp  lt some database access gt java org apache derby drda NetworkServerControl shutdown There is much discussion about the correct behavior of NetworkServer in this regard related to embedded server scenarios in DERBY     but it seems clear in this case the databases should be shutdown    ',0
'Resolve test failures with JCC       The following tests fail when run with JCC     driver derbynetmats derbynetmats fail jdbcapi resultset javaderbynetmats derbynetmats fail jdbcapi LOBTest javaderbynetmats derbynetmats fail jdbcapi parameterMapping javaderbynetmats derbynetmats fail derbynet testSecMec java  fails with Sun JDKs only    ',0
'Tests jdbcapi HoldabilityTest junit  jdbcapi UpdateXXXTest junit jdbcapi SURTest junit fail on wctme    foundation               regression test run of derbyall shows the following test failure with wctme    foundation  derbyall derbyall fail jdbcapi HoldabilityTest junitderbyall derbyall fail jdbcapi UpdateXXXTest junitderbyall derbyall fail jdbcapi SURTest junitDiff is a CNFE with ConnectionPoolDataSource                  Diff file derbyall jdbcapi HoldabilityTest diff             Start  HoldabilityTest jdkJ ME Foundation Specification v    derbyall jdbcapi                          add gt  Exception in thread  main  java lang NoClassDefFoundError  javax sql ConnectionPoolDataSourceTest Failed  End  HoldabilityTest jdkJ ME Foundation Specification v    derbyall jdbcapi                            My guess is these tests need to excluded from running in this environment  Can someone please confirm  Thanks    ',0
'Differences between client and embedded when invoking stored procedures using Statement executeUpdate      When invoking a stored procedure using Statement executeUpdate    theclient driver and the embedded driver behave differently If the stored procedure does not return any result set  the embeddeddriver returns    whereas the client returns    If the stored procedure returns one or more result sets  the embeddeddriver returns     whereas the client fails with an exception    ',0
'Test lang procedure java fails with ibm    jvm    lang procedure java fails on IBM    jvm on linux machine  I spoke to Manjula who filed DERBY      that this is related to that issue and is a JVM bug  The JVM team has been notified  Please note  I have marked this as a Regression Test Failure although this test has not passed with IBM     JVM atleast in our nightly regression test runs  so it is not a regression of the product  diff                  Diff file derbyall derbylang procedure diff             Start  procedure jdk      derbyall derbylang                             del lt  testImplicitClose    PASSED     add gt  testImplicitClose    FAILED  no exception thrown Test Failed  End  procedure jdk      derbyall derbylang                            here is machine info                    Java Information                   Java Version       Java Vendor  IBM CorporationJava home   local  cloudtst dev src ibm   jreJava classpath   local  cloudtst dev src jars insane derby jar  local  cloudtst dev src jars insane derbytools jar  local  cloudtst dev src jars insane derbynet jar  local  cloudtst dev src jars insane derbyclient jar  local  cloudtst dev src jars insane derbyTesting jar  local  cloudtst dev src jcc db jcc jar  local  cloudtst dev src jcc db jcc license c jar  local  cloudtst dev src jars insane derbyTesting jar  local  cloudtst dev src tools java jakarta oro       jar  local  cloudtst dev src tools java junit jar  local  cloudtst dev src jars insane derbyLocale de DE jar  local  cloudtst dev src jars insane derbyLocale es jar  local  cloudtst dev src jars insane derbyLocale fr jar  local  cloudtst dev src jars insane derbyLocale it jar  local  cloudtst dev src jars insane derbyLocale ja JP jar  local  cloudtst dev src jars insane derbyLocale ko KR jar  local  cloudtst dev src jars insane derbyLocale pt BR jar  local  cloudtst dev src jars insane derbyLocale zh CN jar  local  cloudtst dev src jars insane derbyLocale zh TW jar  local  cloudtst dev src jars insane derbyrun jar OS name  LinuxOS architecture  x  OS version              bigsmpJava user name  cloudtstJava user home   u cloudtstJava user dir   local  cloudtst dev src NightlyBuildResults            ibm   derbyalljava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  J SE       JDBC          local  cloudtst dev src jars insane derby jar               alpha                 local  cloudtst dev src jars insane derbytools jar               alpha                 local  cloudtst dev src jars insane derbynet jar               alpha                 local  cloudtst dev src jars insane derbyclient jar               alpha                 local  cloudtst dev src jcc db jcc jar                      local  cloudtst dev src jcc db jcc license c jar                                                                         ',0
'Missing resets of isOnInsertRow state in net client when navigating away via other than ResultSet next    Please see the enclosed repro program When attempting the deleteRow  it will fail with SQL state        nocurrent row   since the first   call doesn t properly reset theIsOnInsertRow  state  By inspection of    am ResultSet java I foundthe other positioning calls beside next and moveToCurrentRow to sufferthe same problem    ',0
'Need to remove old copyright notice    An IBM copyright is in these files derby code trunk tools jar copyright txtderby code branches      tools jar copyright txtderby code branches      tools jar copyright txt svn log  shows it was part of the original code contribution         I think this was just missed in the copyright cleanup There also exists reference to CPL injava drda org apache derby impl drda EbcdicCcsidManager java      http   www ibm com developerworks oss CPLv    htmMore references java engine org apache derby database Database java         lt I gt IBM Corp  reserves the right to change  rename  orjava engine org apache derby database UserUtility java      IBM Corp  reserves the right java engine org apache derby iapi db ConnectionInfo java         lt i gt IBM Corp  reserves the right to change  rename or remove this class orjava engine org apache derby iapi db ConsistencyChecker java         lt I gt IBM Corp  reserves the right to change  rename  orjava engine org apache derby iapi db Factory java         lt I gt IBM Corp  reserves the right to change  rename  orjava engine org apache derby iapi db PropertyInfo java         lt I gt IBM Corp  reserves the right to change  rename  orjava engine org apache derby iapi db TriggerExecutionContext java         lt I gt IBM Corp  reserves the right to change  rename  orjava engine org apache derby impl sql compile AggregateDefinition java         lt I gt  IBM Corp  reserves the right to change  rename  orjava engine org apache derby vti VTICosting java         lt I gt IBM Corp reserves the right to change  rename  orjava engine org apache derby vti VTIEnvironment java         lt I gt IBM Corp  reserves the right to change  rename  or   ',0
'Isolation level of local connection does not get reset after exiting a global transaction if the isolation level was changed using SQL    If we update the isolation level using SQL instead of JDBC and then join resume a global transaction  on ending the transaction  the isolation level of the local connection is not restored  The problem seems to be in EmbedXAResource  So it happens with both embedded and client driver  Client driver internally uses SQL to set the transaction isolation  So the problem is more likely to be hit with the client  I will attach a repro and a draft patch with more details    ',0
'Identity column can be  created with wrong and very large start with value with   J RE       IBM Windows    build pwi  dev           SR    with JIT on    Using the following JRE with JIT on an identity column may be created with a wrong and very large START WITH value  When the problem occurs it affects not only the table being created  but also other tables that were created in previous transactions For example attempting to create      tables with identity columns the    th table creation changes the start with value in sys syscolumns to                   for ALL     tables  Attempts to insert into any of the tables cause SQL Exception  A truncation error was encountered trying to shrink     to length      This program will create up to      tables until the problem occursNote  The problem does not occur with  Xnojit  JIT OFF  The problem  when it occurs  changes not only the table beingcreated but all previous tables created  See output below  Every thing was fine up until mytable    and then all the tables got changed to start with                    Problem occurs with autocommit on off  The problem occurs after the create table but before thecommit  If the non identity columns are removed the problem does notreproduce import java sql DatabaseMetaData import java sql ResultSet import java sql SQLException import java sql Statement import java sql DriverManager public class BadStartWith  public static void main  String args    throws Exception    testBadStartWith          After some number of table creations with JIT turned on  the START WITH value for the table being created and all the ones already created gets mysteriously changed with pwi  dev           SR     throws Exception    public static void testBadStartWith   throws Exception   Class forName  org apache derby jdbc EmbeddedDriver   newInstance    Connection conn   DriverManager getConnection  jdbc derby wombat create true    conn setAutoCommit false   Statement stmt   null  DatabaseMetaData md   conn getMetaData     System out println md getDatabaseProductVersion     System out println md getDatabaseProductName     System out println md getDriverName     dropAllAppTables conn   System out println  Create tables until we get a wrong Start with value    stmt   conn createStatement       numBadStartWith will be changed if any columns get a bad start with value  int numBadStartWith       try      create      tables  Break out if we get a table that has a bad    start with value  for  int i       i  lt         amp  amp   numBadStartWith        i      String tableName    APP MYTABLE    i  String createTableSQL    CREATE TABLE     tableName      ROLEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY  START WITH    INCREMENT BY     INSTANCEID INTEGER  STATUS INTEGER  LOGICAL STATE INTEGER  LSTATE TSTAMP TIMESTAMP  UPDT TSTAMP TIMESTAMP  TSTAMP TIMESTAMP  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR       CLALEVEL  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR         stmt executeUpdate createTableSQL   System out println createTableSQL   System out println  Check before commit    numBadStartWith   checkBadStartWithCols conn     conn commit    System out println  Check after commit    numBadStartWith   checkBadStartWithCols conn     if  numBadStartWith  gt     break      catch  SQLException se    se printStackTrace      if  numBadStartWith       System out println  PASS  All      tables created without problems    stmt close    conn rollback    conn close         Check that all tables in App do not have a an autoincrementstart value greater tan maxautoincrementstart  param conn  param maxautoincrementstart Maximum expected autoincrementstart value  return number of columns with bad autoincrementstart value    private static int checkBadStartWithCols Connection conn  int maxautoincrementstart  throws Exception   Statement stmt   conn createStatement    ResultSet rs  stmt executeQuery  select count autoincrementstart  from sys syscolumns c  sys systables t  sys sysschemas s WHERE t schemaid   s schemaid and s schemaname    APP  and autoincrementstart  gt      maxautoincrementstart   rs next    int numBadStartWith   rs getInt     System out println numBadStartWith     columns have bad START WITH VALUE    rs close    if  numBadStartWith  gt       rs  stmt executeQuery  select tablename  columnname  autoincrementstart from sys syscolumns c  sys systables t  sys sysschemas s WHERE t schemaid   s schemaid and s schemaname    APP  and autoincrementstart  gt    ORDER BY tablename    while  rs next      System out println  Unexpected start value      rs getLong        on column     rs getString            rs getString                return numBadStartWith        Drop all tables in schema APP  param conn  throws SQLException    private static void dropAllAppTables Connection conn  throws SQLException   Statement stmt    conn createStatement    Statement stmt    conn createStatement    System out println  Drop all tables in APP schema    ResultSet rs   stmt  executeQuery  SELECT tablename from sys systables t  sys sysschemas s where t schemaid   s schemaid and s schemaname    APP     while  rs next      String tableName   rs getString     try   stmt  executeUpdate  DROP TABLE     tableName     catch  SQLException se    System out println  Error dropping table     tableName   se printStackTrace    continue        Relevant output  java BadStartWith         alphaApache DerbyApache Derby Embedded JDBC DriverDrop all tables in APP schemaCreate tables until we get a wrong Start with valueCREATE TABLE APP MYTABLE   ROLEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY  START WITH    INCREMENT BY     INSTANCEID INTEGER  STATUS INTEGER  LOGICAL STATE INTEGER  LSTATE TSTAMP TIMESTAMP  UPDT TSTAMP TIMESTAMP  TSTAMP TIMESTAMP  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR       CLALEVEL  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR      Check before commit  columns have bad START WITH VALUECheck after commit  columns have bad START WITH VALUE     snip MYTABLE      MYTABLE        CREATE TABLE APP MYTABLE     ROLEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY  START WITH    INCREMENT BY     INSTANCEID INTEGER  STATUS INTEGER  LOGICAL STATE INTEGER  LSTATE TSTAMP TIMESTAMP UPDT TSTAMP TIMESTAMP  TSTAMP TIMESTAMP  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR       CLALEVEL  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR      Check before commit  columns have bad START WITH VALUECheck after commit  columns have bad START WITH VALUECREATE TABLE APP MYTABLE     ROLEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY  START WITH    INCREMENT BY     INSTANCEID INTEGER  STATUS INTEGER  LOGICAL STATE INTEGER  LSTATE TSTAMP TIMESTAMP UPDT TSTAMP TIMESTAMP  TSTAMP TIMESTAMP  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR       CLALEVEL  CLALEVEL  CLALEVEL  CLALEVEL ID VARCHAR      Check before commit    columns have bad START WITH VALUEUnexpected start value                    on column MYTABLE  ROLEID Unexpected start value                    on column MYTABLE  ROLEID Unexpected start value                    on column MYTABLE   ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE    ROLEID Unexpected start value                    on column MYTABLE   ROLEID Unexpected start value                    on column MYTABLE    ROLEID      snip the rest of the tables have unexpected START WITH value too        ',0
'lang forupdate sql fails with derbyclient in the      branch    Derby      branch                           Start  forupdate jdk         DerbyNetClient derbynetmats derbynetmats                            del lt  SQL CURLH   C    a    gt  SQL CURLH   C     del lt  SQL CURLH   C    a    gt  SQL CURLH   C Test Failed  End  forupdate jdk         DerbyNetClient derbynetmats derbynetmats                           ',0
'ClientDriver ResultSetMetaData isAutoIncrement column  always returns false    With ClientDriver  resultSet getMetaData   isAutoIncrement column  always returns false  EmbeddedDriver correctly returns the true value  true or false The following code demonstrates the problem                                                                                    import java sql Connection import java sql DriverManager import java sql ResultSet import java sql ResultSetMetaData import java sql SQLException import java sql Statement import org apache derby jdbc ClientDriver import org apache derby jdbc EmbeddedDriver public class TestAutoIncrement   private static final String URL EMBEDDED    jdbc derby EmbeddedTestBase    private static final String URL CLIENT    jdbc derby   localhost      ClientTestBase    public TestAutoIncrement     super      public static void main String   args  throws SQLException   System out println new ClientDriver   getClass   getName       registered    System out println new EmbeddedDriver   getClass   getName       registered    new TestAutoIncrement   test      private void test   throws SQLException   if  test URL EMBEDDED     test URL CLIENT     System out println  Embedded and client driver behave differently for isAutoIncrement         else   System out println  Embedded and client driver behave the same for isAutoIncrement           private boolean test String url  throws SQLException   boolean ai   false  Connection connection   DriverManager getConnection url    create true     Statement statement   connection createStatement    statement  execute  CREATE TABLE TEST TABEL       ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY  START WITH    INCREMENT BY         VALUE INTEGER NOT NULL  PRIMARY KEY  ID      statement execute  INSERT INTO TEST TABEL  VALUE  VALUES       ResultSet resultSet   statement  executeQuery  SELECT   FROM TEST TABEL    ResultSetMetaData meta   resultSet getMetaData    ai   meta isAutoIncrement     System out println  For     url         meta getColumnName        isAutoIncrement      ai   connection close    try   DriverManager getConnection url    shutdown true       catch  SQLException e    System out println e getMessage       return ai                                                                                       The output I receive from the above program is org apache derby jdbc ClientDriver registeredorg apache derby jdbc EmbeddedDriver registeredFor jdbc derby EmbeddedTestBase  ID isAutoIncrement  trueDatabase  EmbeddedTestBase  shutdown For jdbc derby   localhost      ClientTestBase  ID isAutoIncrement  falseDERBY SQL error  SQLCODE      SQLSTATE         SQLERRMC  Database  ClientTestBase  shutdown Embedded and client driver behave differently for isAutoIncrement                                                                                      Ouput from sysinfo                    Java Information                   Java Version          Java Vendor  Sun Microsystems Inc Java home  C  Program Files Java jre        Java classpath    C  PROGRA   JMF      E lib sound jar C  PROGRA   JMF      E lib jmf jar C  PROGRA   JMF      E lib C  WINDOWS java classes C  WorkSpace PB     bin C  WorkSpace Filipe bin C  Documents and Settings Piet My Documents Resources Jars ImgrRdr    jar C  Documents and Settings Piet My Documents Resources Jars lucene       jar C  Documents and Settings Piet My Documents Resources Jars Multivalent         jar C  Workspace Stick bin OS name  Windows XPOS architecture  x  OS version     Java user name  PietJava user home  C  Documents and Settings PietJava user dir  C  StickFolderjava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  J SE       JDBC          org apache derby info DBMS properties                               org apache derby info tools properties                               org apache derby info net properties                               org apache derby info dnc properties                                                                                                 Locale Information                  Current Locale    Nederlands Nederland      nl NL      Found support for locale       de DE      version                     Found support for locale       es      version                     Found support for locale       fr      version                     Found support for locale       it      version                     Found support for locale       ja JP      version                     Found support for locale       ko KR      version                     Found support for locale       pt BR      version                     Found support for locale       zh CN      version                     Found support for locale       zh TW      version                                                                              ',0
'Class Path manifest entry for derby jar is missing from the          snapshot    The class path manifest entry should include all the supported locales  It is missing from the snapshot I see this entry when I build the jar files myself Class Path  derbyLocale de DE jar derbyLocale es jar derbyLocale fr ja r derbyLocale it jar derbyLocale ja JP jar derbyLocale ko KR jar derb yLocale pt BR jar derbyLocale zh CN jar derbyLocale zh TW jar   ',0
'Interface changes introduced in Mustang build       Build    of Mustang introduced changes to the Connection interface that were not compatible with the existing Derby implementions  createArray   was renamed createArrayOf   and setClientInfoProperties   now throws SQLClientInfoException  rather than ClientInfoException   The result of this is that it is not possible to build Derby with build       ',0
'Wrong results with query using LIKE and ESCAPE clause that includes           and        After the fix for DERBY      was checked in  I m noticing that the following query now returns different results  Prior to the fix for DERBY      the query returned   rows  now it doesn t return any rows create table escTable  c  char      insert into escTable values      a   insert into escTable values     b   insert into escTable values    c   insert into escTable values   d   insert into escTable values      e   select c  from escTable where c  like               ESCAPE     Before DERBY       the SELECT returned C              a   e  rows selectedNow it returns C             rows selectedBrief inspection of the query and data suggest to me that these new results  i e  no rows  are wrong  and that Derby should in fact return   rows  Based on comments in DERBY       I m creating a new Jira issue for the regression since it has been checked into the      maintenance branch  I ve set the priority to  Critical  since this could potentially delay a        release  I e  I don t think we d want to release        knowing that we have a wrong results regression  But if anyone thinks that s not the correct priority  feel free to speak up Other option  of course  is to back out the change for DERBY      in      and then lower the priority accordingly  Input feedback comments would be appreciated    ',0
'Message id J     CONN RESTORE FROM  does not have a matching message text    This is used by engine org apache derby jdbc Driver    Uncovered by the test i  n MessageBundleTest jav   ',0
'Typo in link to Simple Example from frameworks readme html    There is a small typo in frameworks readme html The link  see the simple example  links to     demo programs simple example htmlbut it should link to     demo simple example htmlbecause there is no  programs  folder in the  demo  subtree I m attaching a patch for review    ',0
'setEmbeddedCP ksh and setNetworkCleitn ksh does not work or gives wrong error message    setEmbeddedCP ksh  and setNetworkClient ksh  gives the following message if neither DERBY HOME nor DERBY INSTALL is set  echo    DERBY HOME or   DERBY INSTALL not set  Please set one of these variables  echo  to the location of your Derby installation  but the scripts do not work if only DERBY HOME is set   ',0
'Using  Djvmflags option causes NoClassDefFoundError    When starting tests with the  Djvmflags option  the harness  RunList class  places    around the argument to  Djvmflags when executing the java launcher to start a new jvm  This is  at least by suns java launcher  interpreted as a Class and not as a command line option  because of the     Because of this I get a NoClassDefFoundError I believe this is a problem that happens only when using Suns java launcher    ',0
'Correct instructions in demo html file demo simple example html    In file demo simple example html  under section  Next run the SimpleApp demo in Derby client mode    step   java org apache derby tools sysinfo  cp client SimpleApp class  gives the following error Exception in thread  main  java lang NoClassDefFoundError  org apache derby tools sysinfoThe above error is given because step   instructs to set path as following export CLASSPATH     DERBY INSTALL  lib derbyclient jarNow as neither derby jar or derbytool jar is been added to the above classpath  sysinfo file not found Step   should instruct to set up path as following export CLASSPATH     DERBY INSTALL  lib derbyclient jar   DERBY INSTALL  lib derby jar   ',0
'EmbeddedDriver does not implement PreparedStatement setNull int  int  String     The embedded driver throws Util notImplemented   when PreparedStatement setNull int  int  String  is called  The javadoc says that       if      the parameter does not have a user defined or REF type  the given typeName is ignored   The client driver correctly ignores typeName and forwards the call to setNull int  int   Embedded should be changed to match the client    ',0
'test run exits for  foundation run because unloadEmbeddedDriver uses driverManager  which isn t available     The wctme    foundation runs have been exiting out for a while  We only run this environment weekly and were under the impression there was a time out  But I ran the suite  capturing the output in a file  and the last part of the run shows the problem is with unloadEmbeddedDriver Now do RunListException in thread  main  java lang NoClassDefFoundError  java sql DriverManager at org apache derbyTesting functionTests harness RunList unloadEmbeddedDriver RunList java       at org apache derbyTesting functionTests harness RunList runSuites RunList java      at org apache derbyTesting functionTests harness RunList  lt init gt  RunList java      at org apache derbyTesting functionTests harness RunSuite getSuitesList RunSuite java      at org apache derbyTesting functionTests harness RunSuite main RunSuite java     UnloadEmbeddedDriver was put in to allow running with useprocess false and autoload of the driver  so it s needed  But maybe we can add an appropriate if condition so it doesn t try to do this with foundation    ',0
' SQLBinary readFromStream  can enter endless loop    Under certain circumstances  the method  SQLBinary readFromStream  can enter an endless loop while reading the stream  The following must be true for the bug to occur   There must be more data in the stream than what can fit into the initial buffer     K   The method  available  of the stream returns   Since the default return value for  InputStream available  is    and the method reading the stream can be used for data types CHAR FOR BIT DATA  VARCHAR FOR BIT DATA and LONG VARCHAR FOR BIT DATA  the bug should be fixed  The maximum length is       bytes The method will also be used by SQLBlob  but it may be better to introduce a new streaming method for it  since the current implementation has memory problems for large data  materializes the whole stream   A separate issue should will be created for this The symptom for this bug is a hang when calling one of the execute methods of Prepared  or CallableStatement and maybe also certain set methods in ResultSet The visibility of this bug is very low  but the impact is severe critical  When the JDBC   length less streaming overloads are added  DERBY        visibility might increase    ',0
'The Eclipse plug in distributions  UI and Core zip files  do not contain the Apache license  copyright or notice files    The Apache Derby Core and Apache Derby UI plug ins do not contain the appropriate Apache Software Foundation license files in their zip distributions  derby core plugin        zip  derby ui plugin       zip I m not sure exactly which files are required  LICENSE  COPYRIGHT and NOTICE  but the zip filesshould contain some or all of these files    ',0
'Unexpected behavior on self privilege revocation    When revoking the owner s own privilege against the table he have created  Derby executes the revocation successfullybut the owner is able to select from the table later as if though the REVOKE statement has no effect  More importantly  I was expecting a SQLException with the appropriate SQLSTATE to be thrown when the owner attempts to revoke privilege from himself  i e  ij gt  connect  jdbc derby authtest  user  yip  as conn  ij gt  create table t   c  int    rows inserted updated deletedij gt  insert into t  values         rows inserted updated deletedij gt  revoke select on t  from yip   rows inserted updated deletedij gt  select   from t  C                 rows selectedHere is the sysinfo                    Java Information                   Java Version          Java Vendor  Sun Microsystems Inc Java home  C  jdk    jreJava classpath  derby jar derbytools jar  OS name  Windows XPOS architecture  x  OS version     Java user name  yipJava user home  C  Documents and Settings AdministratorJava user dir  C  derby trunk jars sanejava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  J SE         JDBC         C  derby trunk jars sane derby jar               alpha                C  derby trunk jars sane derbytools jar               alpha                                                                                   Locale Information                  Current Locale    English United States      en US      Found support for locale       de DE      version           alpha           Found support for locale       es      version           alpha           Found support for locale       fr      version           alpha           Found support for locale       it      version           alpha           Found support for locale       ja JP      version           alpha           Found support for locale       ko KR      version           alpha           Found support for locale       pt BR      version           alpha           Found support for locale       zh CN      version           alpha           Found support for locale       zh TW      version           alpha                                                                    ',1
'Make test jdbc  TestPreparedStatement run under the security manager    See trunk java testing org apache derbyTesting functionTests tests jdbc  TestPreparedStatement app properties which says  test fails trying to read blob content filesOther tests succesfully read files so it must be possible to enable this test under the security manager Maybe the files need to be marked as support files and copied into the extin extout extinout foldersto use the existing permissions in the test policy files    ',1
'derbynet testProtocol java fails with security manager enabled    The tinderbox test started failing after revision        which enabled security manager for derbynet testProtocol java  See http   www multinet no  solberg public Apache TinderBox Derby testlog SunOS      i  pc i           derbyall diff txtException in thread  main  java security AccessControlException  access denied  java net SocketPermission                connect resolve  at java security AccessControlContext checkPermission AccessControlContext java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkConnect SecurityManager java       at java net Socket connect Socket java      at java net Socket connect Socket java      at java net Socket  lt init gt  Socket java      at java net Socket  lt init gt  Socket java      at org apache derby impl drda TestProto getConnection Unknown Source  at org apache derby impl drda TestProto  lt init gt  Unknown Source  at org apache derbyTesting functionTests tests derbynet testProtocol executeFile Unknown Source  at org apache derbyTesting functionTests tests derbynet testProtocol main Unknown Source    ',1
'Derby JDBC     driver returns   for JDBC driver major version    For      the DatabaseMetaData getJDBCMajorVersion   is returning     for the Derby JDBC     driver  It should return    This is easily reproduced by running a simple test to obtain a connection and output the value Database product  Apache DerbyDatabase version           alphaDriver name  Apache Derby Embedded JDBC DriverDriver version           alphaJDBC driver major version   JDBC driver minor version   Test code org apache derby jdbc EmbeddedConnectionPoolDataSource   ds   new org apache derby jdbc EmbeddedConnectionPoolDataSource     ds setDatabaseName  C   drivers  derby  databasesJDBC  DB    ds setUser  dbuser     ds setPassword  dbpwd     PooledConnection pooledConn   ds getPooledConnection    Connection conn   pooledConn getConnection    System out println  Database product      conn getMetaData   getDatabaseProductName     System out println  Database version      conn getMetaData   getDatabaseProductVersion     System out println  Driver name      conn getMetaData   getDriverName     System out println  Driver version      conn getMetaData   getDriverVersion     System out println  JDBC driver major version      conn getMetaData   getJDBCMajorVersion     System out println  JDBC driver minor version      conn getMetaData   getJDBCMinorVersion    Relevant Derby Embedded code in EmbedDatabaseMetaData is  JDBC       Retrieves the major JDBC version number for this driver     return JDBC version major number    public int getJDBCMajorVersion     return     and client code in org apache derby client am DatabaseMetaData public int getJDBCMajorVersion   throws SQLException   checkForClosedConnection    return     I am not sure if this should be JVM dependent or if it should always return   regardless of the JVM version    ',0
'NullPointerException in UPDATE with COALESCE and subquery    The following statements generate a NullPointerException CREATE TABLE t   i INTEGER  CREATE TABLE t   i INTEGER  UPDATE t  SET i   COALESCE   SELECT i FROM t  WHERE t  i t  i      Any further SQL statements generate an internal error in RawStore  e g  SELECT   FROM t     ',0
'Link  Getting Started      and  Apache Derby Server       in demo html needs to be linked to actual documents instead of manuals page    The links  Getting Started with Apache Derby  and  Apache Derby Server and Administration Guide  in file https   svn apache org repos asf db derby code trunk java demo demo html needs to be linked to actual documents as following Getting Started with Apache Derby to  http   db apache org derby docs dev getstart getstartderby pdf Apache Derby Server and Administration Guide to  http   db apache org derby docs dev adminguide derbyadmin pdf  Right now the links are linked to  http   db apache org derby manuals index html Also  once the dev release is committed  for example committed to        the links needs to be changed so that  dev  is replaced with actual release number    ',0
'Network server fails with DRDAProtocolException if a BLOB with size            is streamed from client    When executing a program which inserts a BLOB of size  GB    the Network server fails with DRDAProtocolException  This happens before it starts handling the actual LOB data java org apache derby drda NetworkServerControl startApache Derby Network Server            alpha started and ready to accept connections on port      at                         GMTExecution failed because of a Distributed Protocol Error  DRDA Proto SYNTAXRM  CODPNT arg      Error Code Value   corg apache derby impl drda DRDAProtocolException at org apache derby impl drda DRDAConnThread throwSyntaxrm DRDAConnThread java      at org apache derby impl drda DDMReader readLengthAndCodePoint DDMReader java      at org apache derby impl drda DDMReader getCodePoint DDMReader java      at org apache derby impl drda DRDAConnThread parseSQLDTA work DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseSQLDTA DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseEXCSQLSTTobjects DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseEXCSQLSTT DRDAConnThread java       at org apache derby impl drda DRDAConnThread processCommands DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java     nullorg apache derby impl drda DRDAProtocolException at org apache derby impl drda DRDAConnThread throwSyntaxrm DRDAConnThread java      at org apache derby impl drda DDMReader readLengthAndCodePoint DDMReader java      at org apache derby impl drda DDMReader getCodePoint DDMReader java      at org apache derby impl drda DRDAConnThread parseSQLDTA work DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseSQLDTA DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseEXCSQLSTTobjects DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseEXCSQLSTT DRDAConnThread java       at org apache derby impl drda DRDAConnThread processCommands DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java        ',0
'Scripts in frameworks direcotry needs to be revisted to set up CLASSPATH properly    Need to revisit scripts in directory frameworks embedded bin and frameworks NetworkServer bin for setting up CLASSPATH properly  The current problem is as following If user already has a CLASSPATH set on their system  the CLASSPATH is not set again within the script  Therefore  there are no derby classes in the CLASSPATH which results in java command failing as it can not find the derby class it is calling  Basically  to make the scripts work  user has to either issue command  set CLASSPATH   or have derby jar files be appended to their system CLASSPATH before running any frameworks batch script In ksh scripts  there is same problem except that the user has to issue command  export CLASSPATH   or have derby jar files be appended to their system CLASSPATH only once as whatever CLASSPATH is set up by scripts is not visible once the script is done So I am proposing the following solution so that frameworks scripts work properly without interfering with system classpath or without any setup from user In batch scripts                           Before line  call   DERBY INSTALL   frameworks embedded bin setEmbeddedCP bat   save the current classpath as follows set SAVED CLASSPATH  CLASSPATH    Replace the following lines  if Unable to render embedded object  File   quot  CLASSPATH  quot     not found  call   DERBY INSTALL   frameworks embedded bin setEmbeddedCP bat if   CLASSPATH         call   DERBY INSTALL   frameworks embedded bin setEmbeddedCP batwithcall   DERBY INSTALL   frameworks embedded bin setEmbeddedCP batNote  I have given the above as example only  The name of script that is getting called may be different    At the end of script  reset the CLASSPATH to system CLASSPATH as follows set CLASSPATH  SAVED CLASSPATH In korn scripts                        In ksh script  even though system classpath is only modified within the script and is not effective once script exits  to be consistent with batch scripts  do the following    Before line      DERBY HOME  frameworks embedded bin setEmbeddedCP ksh  save the current classpath as follows export SAVED CLASSPATH  CLASSPATH   Replace the following lines    z   CLASSPATH     amp  amp        DERBY HOME  frameworks embedded bin setEmbeddedCP ksh with    DERBY HOME  frameworks embedded bin setEmbeddedCP kshNote  I have given the above as example only  The name of script that is getting called may be different    At the end of script  reset the CLASSPATH to system CLASSPATH as follows export CLASSPATH  SAVED CLASSPATH   ',0
'test harness evaluates j      jvm  a k a wctme     as isJDBC   does enthousiastic sed ing    The wctme    run shows failures like so      Start  iepnegativetests jdk      subset       derbyall derbytools                           del lt  ERROR        The exception  java sql SQLException  Table View  IEP NOTABLE  does not exist   was thrown while evaluating an expression   a   gt  ERROR        The exception  SQL Exception  Table View  IEP NOTABLE  does not exist   was thrown while evaluating an expression        It seems to me this is because it evaluates the major minor version       as isJDBC  in functionTests harness RunTest java   JavaVersionHolder jvh   getProperties sp   boolean isJDBC    jvh atLeast         and is gets passed on to Sed java The following tests fail with this jvm because of this lang compressTable sqllang nestedCommit sqllang releaseCompileLocks sqltools iepnegativetests sqltools importExportThruIJ sqltools ieptests sqljdbcapi statementJdbc   javai  n iepnegativetests ES sqlstore streamingColumn javastore TransactionTable sqllang procedureInTrigger sqlIt seems to me we need an if   jvmName startsWith  j     or some such around the isJDBC  assignment    ',0
'derbyrunjartest hangs with wctme      always uses j      hangs with  foundation    derbyrunjartest hangs with wctme    I am not sure what the hook up is but if I do this j   jcl max  Xbootclasspath p c  wctme    ive lib jclMax classes zip c  wctme    ive lib charconv zip c  wctme    ive lib database enabler jar  jar c  derbyt svn  trunk jars sane derbyrun jar ij   helpI get successfully Usage  java org apache derby tools ij       p propertyfile        ca connectionAttributePropertyFile       inputfile     Also  when looking at the code of this test  it forces the jvm class to be used to be j     whenever the jvm as set in RunTest starts with J   However  wctme    is j     and this also prevents running with foundation  assuming that s supported     ',0
'new j  canons required canons need to be removed to catch up to changes to             There are some newer failures with wctme     amp  wsdd    that are just due to canon maintenance  lang aggregate sql   needs a new j     and j     canon lang ejbql sql   j     canon can be removed  there is no j     canon  lang distinct sql   needs new j     canon nist dml    sql   j     canon can be removed lang procedureInTrigger sql   needs a j     canon note  this last test also suffers from DERBY         ',0
'Test harness overrides heap size settings when starting Network Server    Test specific heap size settings can be passed to the test harness using the jvmflags system property  for example in a  lt testname gt  app properties file or at the command line when starting a test  e g   Djvmflags  Xms  m  Xmx  m  The test harness almost always overrides such settings when starting a new Network Server using the org apache derbyTesting functionTests harness NetServer class of the test harness  Currently  if either  ms or  Xms is missing from the jvmflags  NetServer start   adds  ms          Also  if either  mx or  Xmx is missing from the jvmflags  NetServer start   adds  ms          This has been the case since SVN revision         July          Earlier revisions did not override the heap settings unless the newer  Xms or  Xmx flags were used instead of the  ms and  mx flags  A patch for DERBY      attempted  among other things  to make the harness recognize the newer flags as well as the older flags  but the resulting behavior is  most likely  not as intended  If a test is run in either the DerbyNet framework or the DerbyNetClient framework  the test specific JVM flags should  probably  be used for the Network Server JVM as well as the test JVM  Currently  even if non default heap size flags are passed to the harness  the server JVM will ignore these settings since the harness adds  ms and or  mx flags after all other heap flags  The exception is if both new and old versions of heap flags are passed to the harness  e g jvmflags  ms  m  Xms  m  mx   m  Xmx   mHere is the code causing this behaviour if  setJvmFlags  amp  amp    jvmflags indexOf   ms              jvmflags indexOf   Xms               only setMs if no starting memory was given jvm setMs                    ms  mif  setJvmFlags  amp  amp    jvmflags indexOf   mx              jvmflags indexOf   Xmx               only setMx if no max memory was given jvm setMx                    mx  m   ',0
'Lots of jdk    regression test failures with diffs because of  SQL Exception instead of java sql SQLException    jdk   derbyall derbyall     failures derbyall derbyall fail lang compressTable sql derbyall derbyall fail lang nestedCommit sql derbyall derbyall fail lang outparams java derbyall derbyall fail lang procedure java derbyall derbyall fail lang procedureInTrigger sql derbyall derbyall fail tools importExportThruIJ sql derbyall derbyall fail tools ieptests sql derbyall derbyall fail tools iepnegativetests sql derbyall derbyall fail jdbcapi statementJdbc   java derbyall derbyall fail jdbcapi statementJdbc   java derbyall derbyall fail jdbcapi parameterMapping java derbyall derbyall fail i  n iepnegativetests ES sql derbyall derbynetclientmats derbynetclientmats fail jdbc  ClosedObjectTest junit derbyall derbynetclientmats derbynetclientmats fail jdbc  UnsupportedVetter junit derbyall derbynetclientmats derbynetclientmats fail jdbc  VerifySignatures junit derbyall encryptionAll encryption fail stress stress multi derbyall encryptionAll storemats fail store streamingColumn java derbyall storeall storeall fail store TransactionTable sql derbyall storeall storemats fail store streamingColumn java   ',0
'Sysinfo in       shows multiple entries if the derby jars reside in a directory with spaces in its name    For the Derby jars residing in C  Documents and Settings Administrator TEMP DIR lib  the sysinfo shows           Derby Information         JRE   JDBC  J SE       JDBC         C  Documents   and   Settings Administrator TEMP   DIR lib derby jar               alpha                C  Documents   and   Settings Administrator TEMP   DIR lib derbytools jar               alpha                C  Documents   and   Settings Administrator TEMP   DIR lib derbynet jar               alpha                C  Documents   and   Settings Administrator TEMP   DIR lib derbyclient jar               alpha                C  Documents and Settings Administrator TEMP DIR lib derby jar               alpha                C  Documents and Settings Administrator TEMP DIR lib derbynet jar               alpha                C  Documents and Settings Administrator TEMP DIR lib derbyclient jar               alpha                C  Documents and Settings Administrator TEMP DIR lib derbytools jar               alpha                C  Documents   and   Settings Administrator TEMP   DIR lib db jcc jar                     C  Documents and Settings Administrator TEMP DIR lib db jcc license c jar                                                                      This is a regression from      where the same sysinfo shows           Derby Information         JRE   JDBC  J SE       JDBC         C  Documents and Settings Administrator TEMP DIR lib derby jar                              C  Documents and Settings Administrator TEMP DIR lib derbynet jar                              C  Documents and Settings Administrator TEMP DIR lib derbyclient jar                              C  Documents and Settings Administrator TEMP DIR lib derbytools jar                              C  Documents and Settings Administrator TEMP DIR lib db jcc jar                     C  Documents and Settings Administrator TEMP DIR lib db jcc license c jar                                                                         ',0
'Trigger action statement is not recompile when there is a change that would affect it     A trigger action statement  such as an INSERT statement is not recompiled when there is some DDL change on the underlying table  such as a CREATE INDEX In the example below a unique index is added to the table  t   inserted into by the trigger s action statement  When the tirgger fires it does not raise any error  should raise a unique constraint violated error  and does not insert the value into the index  A select from t  does not show the additional rows in t  as it is performing an index scan  once the index is dropped the rows appear to the select ij version     ij gt  connect  jdbc derby cs create true  ij gt  create table t  i int    rows inserted updated deletedij gt  create table t   i int    rows inserted updated deletedij gt  create trigger tt after insert on t for each statement mode db sqlinsert into t  values     rows inserted updated deletedij gt  insert into t values     row inserted updated deletedij gt  select   from t  I              row selectedij gt  create unique index tu on t    rows inserted updated deletedij gt  insert into t values     row inserted updated deletedij gt  select   from t  I              row selectedij gt  insert into t values     row inserted updated deletedij gt  select   from t  I              row selectedij gt  drop index tu   rows inserted updated deletedij gt  select   from t  I                rows selected   ',0
'NetConnection   references an engine class  org apache derby impl jdbc Util    NetConnection   java contains this    import org apache derby impl jdbc Util     public boolean isValid int timeout  throws SQLException      Validate that the timeout has a legal value if  timeout  lt       throw Util generateCsSQLException SQLState INVALID API PARAMETER  new Integer timeout    timeout    java sql Connection isValid        This was added as part of DERBY       This should be changed to use the client s method of throwing exceptions    ',0
'NPE when inserting values to a table that has a column declared as generated by default as identity    The following scenario triggers a NullPointerException in statement compilation ij gt  create table t   c  int  c  int generated by default as identity    rows inserted updated deletedij gt  insert into t   c   values default     ERROR XJ     Java exception     java lang NullPointerException  Stacktrace from derby log Database Class Loader started   derby database classpath                           GMT Thread     main   main       XID          SESSIONID        DATABASE   wombat    DRDAID   null   Cleanup action starting                        GMT Thread     main   main       XID          SESSIONID        DATABASE   wombat    DRDAID   null   Failed Statement is  insert into t   c   values default    java lang NullPointerException at org apache derby impl sql compile ResultColumnList generateCore ResultColumnList java       at org apache derby impl sql compile ResultColumnList generate ResultColumnList java      at org apache derby impl sql compile RowResultSetNode generate RowResultSetNode java      at org apache derby impl sql compile UnionNode generate UnionNode java      at org apache derby impl sql compile ProjectRestrictNode generateMinion ProjectRestrictNode java       at org apache derby impl sql compile ProjectRestrictNode generate ProjectRestrictNode java       at org apache derby impl sql compile NormalizeResultSetNode generate NormalizeResultSetNode java      at org apache derby impl sql compile InsertNode generate InsertNode java      at org apache derby impl sql compile StatementNode generate StatementNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java      at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java    sysinfo                    Java Information                   Java Version          Java Vendor  Sun Microsystems Inc Java home  C  jdk    jreJava classpath  classes  OS name  Windows XPOS architecture  x  OS version     Java user name  yipJava user home  C  Documents and Settings AdministratorJava user dir  C  derby trunkjava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  J SE         JDBC         C  derby trunk classes               alpha                                                                              Locale Information                  Current Locale    English United States      en US      Found support for locale       de DE      version           alpha      Found support for locale       es      version           alpha      Found support for locale       fr      version           alpha      Found support for locale       it      version           alpha      Found support for locale       ja JP      version           alpha      Found support for locale       ko KR      version           alpha      Found support for locale       pt BR      version           alpha      Found support for locale       zh CN      version           alpha      Found support for locale       zh TW      version           alpha                                                               ',0
'Create index on large tables fails with too many open files   FileNotFoundException     Create index fails on a table with   million rows during sort with too many open files errorThis error was first seen when running against a tpcc like test  The test creates the tables  inserts data and then creates the indexes  amp  adds constraints Customer table has    million rows in this case  The below error is thrown on create index  ij gt  create index customer last on customer c w id  c d id  c last  ERROR XSDF   Exception during creation of file  home cloudtst SinglePerf testruns scripts dbtpcc tmp T              tmp for containerERROR XJ     Java exception    home cloudtst SinglePerf testruns scripts dbtpcc tmp T              tmp  Too many open files   java io FileNotFoundException  ij   ',0
'Regression  wrong results   Join predicate can be ignored for left most child in a chain of nested unions     If Derby chooses to do a join between two FromTables and the right table is a chain of UNIONs  then the optimizer may choose to push the join predicate  if provided  down into the UNION and to both children of every UNION in the chain  But if the predicate cannot be pushed to the children of any of the UNIONs  except the top level one  the predicate can end up being ignored altogether with respect to that UNION s children  The result is that query execution can return rows that do not satisfy the predicate This is a regression introduced in          and thus it affects        and       I came across this while tracing through code for DERBY         ',0
'ConsistencyToken hashCode   is not thread safe    If ConsistencyToken hashCode   is run concurrently by different threads  some of the threads may see a partial result instead of the correct hash code  This is not a problem in the current code since all calls to that method are synchronized on a higher level  but it would be good to fix in case the method will be used differently in the future    ',0
'jdbcapi blobclob BLOB java fails under DerbyNet framework with JCC        With JCC      the jdbcapi blobclob BLOB java fails  The diff did not show anything alarming  so I am guessing itmay be a master update  The test passed fine with DerbyClient     Start  blobclob BLOB jdk         DerbyNet derbynetmats jdbcapi                           a        gt  EXPECTED SQLSTATE         Invalid character string format for type INTEGER  gt  end clobTest   gt  START  clobTest  gt  EXPECTED SQLSTATE null   Invalid position   or length   gt  EXPECTED SQLSTATE null   Invalid position   or length     gt  EXPECTED SQLSTATE null   Invalid position   or length    gt  EXPECTED SQLSTATE null   Invalid position   or length   gt  FAIL         unexpected exception java lang StringIndexOutOfBoundsException  String index out of range           d    lt  EXPECTED SQLSTATE         Invalid character string format for type INTEGER  lt  end clobTest   lt  START  clobTest  lt  EXPECTED SQLSTATE null   Invalid position   or length   lt  EXPECTED SQLSTATE null   Invalid position   or length     lt  EXPECTED SQLSTATE null   Invalid position   or length    lt  EXPECTED SQLSTATE null   Invalid position   or length   lt  FAIL         unexpected exception java lang StringIndexOutOfBoundsException  String index out of range       a        gt  blobTest   finished gt  START  blobTest  gt  EXPECTED SQLSTATE null   Invalid position   or length   gt  EXPECTED SQLSTATE null   Invalid position   or length     gt  EXPECTED SQLSTATE null   Invalid position   or length    gt  EXPECTED SQLSTATE null   Invalid position   or length   gt  FAIL         unexpected exception java lang NegativeArraySizeException       d    lt  blobTest   finished lt  START  blobTest  lt  EXPECTED SQLSTATE null   Invalid position   or length   lt  EXPECTED SQLSTATE null   Invalid position   or length     lt  EXPECTED SQLSTATE null   Invalid position   or length    lt  EXPECTED SQLSTATE null   Invalid position   or length   lt  FAIL         unexpected exception java lang NegativeArraySizeException    del lt  com ibm db  jcc c SqlException  Operation  CREATE TRIGGER  cannot be performed on object  TESTBLOB  because there is an open ResultSet dependent on that object    a    gt  com ibm db  jcc a SqlException  Operation  CREATE TRIGGER  cannot be performed on object  TESTBLOB  because there is an open ResultSet dependent on that object Test Failed  End  blobclob BLOB jdk         DerbyNet derbynetmats jdbcapi                           ',0
'Client driver does not use the query timeout value set using Statement setQueryTimeout   for subsequent executions using the same statement object    I will attach a repro with more details    ',0
'derbynet testProperties java hangs    The testProperties execCmd   is used to fork a JVM and not handle itsstreams  This will cause problems  as indicated by the javadoc for Process  The parent process uses these streams to feed input to and get outputfrom the subprocess  Because some native platforms only provide limitedbuffer size for standard input and output streams  failure to promptlywrite the input stream or read the output stream of the subprocess maycause the subprocess to block  and even deadlock    ',0
'testSecMec java fails with JCC     and JCC        After the checkin for DERBY     testSecMec fails with JCC     and      My hope was to just wait until the masters were normalized with the conversion of this test to Junit  but I think that work has been deferred for a bit so I will look at the current test I have had a problem with this test on my machine for sometime with DERBY      like symptoms with all jvms and even with derbyclient  I need to investigate that or run on another machine to resolve this issue    ',0
'huge single insert statements fail with JVM error due to size of generated method    ERROR XBCM   Java linkage error thrown during load of generated class org apache derby exe ace       x   dx c  xe   x        be    ERROR XJ     Java exception   Invalid method Code length       in class file org apache derby exe ace       x   dx c  xe   x        be     java lang ClassFormatError  The above occurred when doing an insert statement using the mutiple row syntax  INSERT INTO foo       VALUES                   for huge amounts of input data  I was able to insert     rows at once  but it balked at      Workaround  chunk one huge insert into several merely big inserts before sending them to Derby    ',0
'Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail     In Derby SQL authorization mode  invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL from a trigger should fail but in the following test  it successfully executed the trigger action  Attaching repro patch for trunk i e  ij gt  connect  triggerProcSQLAuth create true  user  APP  as app WARNING   J    SQL authorization is being used without first enabling authentication ij gt          setup the environment        table used in the procedurescreate table t   i int primary key  b char        rows inserted updated deletedij gt  insert into t  values      XYZ     row inserted updated deletedij gt  insert into t  values      XYZ     row inserted updated deletedij gt          table used in this testcreate table t   x integer  y integer    rows inserted updated deletedij gt  create procedure grant select proc    parameter style java dynamic result sets   language java  contains sql external name  org apache derbyTesting functionTests util ProcedureTest grantSelect    rows inserted updated deletedij gt  create procedure revoke select proc    parameter style java dynamic result sets   language java  contains sql external name  org apache derbyTesting functionTests util ProcedureTest revokeSelect    rows inserted updated deletedij gt          testscreate trigger grant select trig AFTER delete on t   for each STATEMENT mode db sql call grant select proc     rows inserted updated deletedij gt          should faildelete from t  where i       row inserted updated deletedij gt          check delete failedselect   from t  I  B                               XYZ   row selectedij gt          check if there are rows in sys systableperms  should be  select count from SYS SYSTABLEPERMS                  row selectedij gt  drop trigger grant select trig   rows inserted updated deletedij gt  create trigger revoke select trig AFTER delete on t   for each STATEMENT mode db sql call revoke select proc     rows inserted updated deletedij gt          should faildelete from t  where i       row inserted updated deletedij gt          check delete failedselect   from t  I  B                              rows selectedij gt          check if there are rows in sys systableperms  should be  select count from SYS SYSTABLEPERMS                  row selectedij gt  drop trigger revoke select trig   rows inserted updated deletedij gt                     Java Information                   Java Version          Java Vendor  Sun Microsystems Inc Java home  C  Program Files Java j re        Java classpath  derby jar derbytools jarOS name  Windows XPOS architecture  x  OS version     Java user name  YipJava user home  C  Documents and Settings YipJava user dir  C  work  derby trunk jars sanejava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  J SE         JDBC         C  work  derby trunk jars sane derby jar               alpha          M      C  work  derby trunk jars sane derbytools jar               alpha          M                                                                         Locale Information                  Current Locale    English United States      en US      Found support for locale       de DE      version           alpha          M Found support for locale       es      version           alpha          M Found support for locale       fr      version           alpha          M Found support for locale       it      version           alpha          M Found support for locale       ja JP      version           alpha          M Found support for locale       ko KR      version           alpha          M Found support for locale       pt BR      version           alpha          M Found support for locale       zh CN      version           alpha          M Found support for locale       zh TW      version           alpha          M                                                          ',1
'Manifest file doesn t contain OSGi attributes    With osgi jar in tools java   ant buildjars  does not add the OSGi attributes to derby jar s manifest  Instead  a file named   manifest file  is created in the root of the source tree  This file contains what should have been in the manifest  for instance Manifest Version     Ant Version  Apache Ant      Created By  diablo          b    Sun Microsystems Inc  Bundle Activator  org apache derby osgi EmbeddedActivatorDynamicImport Package   Export Package  org apache derby authentication org apache derby datab ase org apache derby io org apache derby jdbc org apache derby vtiThis seems to be caused by build xml containing a reference to    manifest file   at a location where manifest file is not bound to a value  The attached patch  manifest diff  fixes the issue by replacing    manifest file   with    derby jar dir  lists smf mf     ',0
'The language and store systems treat a JVM error such as OutOfMemoryError differently leading to the raw store protocol violation errors    Don t have the exact details  but remember noticing it a while ago  I think the store transaction context closes the transaction on such an error  while the language conneciton context just rollsback the transaction or the statement  I think the best and consistent approach would be to close the connection    ',0
'derbynet testSecMec java fails with NullPointerException  intermittent failure     http   www multinet no  solberg public Apache TinderBox Derby testlog SunOS      i  pc i           derbyall diff txt                 Diff file derbyall derbynetclientmats DerbyNetClient derbynetmats derbynetmats testSecMec diff             Start  testSecMec jdk         DerbyNetClient derbynetmats derbynetmats                          a      gt  java sql SQLException  No current connection  gt  Exception in thread  DRDAConnThread     java lang NullPointerExceptionTest Failed  End  testSecMec jdk         DerbyNetClient derbynetmats derbynetmats                            Detailed log Test USRSSBPWD with BUILTIN   derby drda securityMechanism nullTurning ON Derby BUILTIN authenticationUSRSSBPWD  T    jdbc derby   localhost       wombat user neelima password lee shutdown true securityMechanism     EXCEPTION DERBY SQL error  SQLCODE      SQLSTATE         SQLERRMC  Database  wombat  shutdown java sql SQLException  No current connection  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util noCurrentConnection Unknown Source  at org apache derby impl jdbc EmbedConnection checkIfClosed Unknown Source  at org apache derby impl jdbc EmbedConnection setupContextStack Unknown Source  at org apache derby impl jdbc EmbedConnection rollback Unknown Source  at org apache derby impl drda Database close Unknown Source  at org apache derby impl drda Session close Unknown Source  at org apache derby impl drda DRDAConnThread closeSession Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Exception in thread  DRDAConnThread     java lang NullPointerException at java lang Throwable printStackTrace Throwable java      at org apache derby impl drda DRDAProtocolException  lt init gt  Unknown Source  at org apache derby impl drda DRDAProtocolException newAgentError Unknown Source  at org apache derby impl drda DRDAConnThread sendUnexpectedException Unknown Source  at org apache derby impl drda DRDAConnThread closeSession Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source    ',0
'derbynet testSecMec java fails with ShutdownException in DerbyNetClient framework    During          beta testing this test failed with org apache derby iapi services context ShutdownException on   of   platforms running Solaris zones Platform  sparc zone    derbynetclientmats derbynetmats DerbyNetClient derbynetmats testSecMec diffPlatform  sparc zone    derbynetclientmats derbynetmats DerbyNetClient derbynetmats testSecMec diff derbyall derbynetclientmats DerbyNetClient derbynetmats derbynetmats testSecMec diffThe test did not fail on other platforms  which may indicate timing sensitivity  tests are run concurrently in   zones    global    local  on one single machine   Here is one of the diffs  from platform  sparc zone                     Diff file derbynetclientmats derbynetmats DerbyNetClient derbynetmats testSecMec diff             Start  testSecMec jdk      rc DerbyNetClient derbynetmats derbynetmats                           a        gt  java sql SQLException  Java exception     org apache derby iapi services context ShutdownException   gt         more                                               gt  Testing with derby drda securityMechanism INVALID VALUE gt  EXPECTED EXCEPTION DRDA InvalidValue U Invalid value  INVALID VALUE  for derby drda securityMechanism        d    lt  Testing with derby drda securityMechanism INVALID VALUE lt  EXPECTED EXCEPTION DRDA InvalidValue U Invalid value  INVALID VALUE  for derby drda securityMechanism  lt       Test Failed  End  testSecMec jdk      rc DerbyNetClient derbynetmats derbynetmats                            The failure occurred in the DerbyNetClient framework when shutting down the database for the second  and last  time in the method testUSRSSBPWD with BUILTIN    This test method was added August          DERBY      Attatching derby log from the failure in derbynetclientmats derbynetmats on sparc zone     ',0
'XMLSERIALIZE operator doesn t follow SQL XML spec in some areas when serializing a sequence     The SQL XML specification dictates that  when serializing a sequence of XML items  the XMLSERIALIZE operator must first  normalize  the sequence based on the rules defined here  http   www w  org TR xslt xquery serialization  serdmThe current Derby implementation doesn t perform such normalization  which leads to two ways in which the results of an XMLSERIALIZE operator may not agree with the required behavior     Sequences of atomic values will not have spaces between  but the space is required as part of step   of the normalization rules at the above link     Derby will allow serialization of a sequence even if it has a top level Attribute node in it  but the rules of normalization dictate that an error should be thrown instead  step    Both of these behaviors can be seen with the following query values xmlserialize  xmlquery   ageinfo     passing by ref xmlparse  document   lt ageinfo age      birthdate               gt   preserve whitespace   empty on empty   as char      Derby will currently return the following result from this statement                                                                This result does not abide by SQL XML specification because a  Derby allowed serialization of a sequence having a top level attribute node  actually  the sequence had two   and b  the atomic values produced from the attributes were displayed without a space between them The correct behavior for the above example is to return a serialization error caused by the presence of an Attribute node in the sequence If the example was rewritten as  say  xmlquery   ageinfo     passing by ref  xmlquery  fn data  ageinfo      passing by refthen the attribute nodes are no longer present  we only have their atomic values  which is allowed  Thus the correct result should then be                                                                 Note  though  that Xalan doesn t appear to support the  fn data  function  so this rewritten query won t actually work  I tried using Xalan s built in string function  as follows  xmlquery   ageinfo     passing by ref  xmlquery  string  ageinfo      passing by refbut Xalan only returns the first attribute in that case  it doesn t return the second one  So part of this Jira issue is probably going to involve figuring out how to allow a user to retrieve a sequence of attribute values  as opposed to attribute nodes  using Xalan and still abide by the SQL XML rules    ',0
'remote server testing with      snapshot showed   failures    I ran derbynetclientmats between two IPV  machines with the      snapshot and finally got to look at the results   There were   failures    of those because of other tests leaving stuff behind   tests complained about junit classes not being found    one of those was checkDataSource     tests seemed to have trouble connecting   those might be the more interesting ones Will do further analysis   amp  create test cleanup patches The failing tests and some comments suite derbynetclientmats with ibm     amp  IPV  machines using  DhostName   i e  remote server test  and build           alpha           derbynetclientmats derbynetclientmats fail jdbcapi checkDataSource java    fails because of an error accessing junit  Not sure why  junit is in client classpath   and it s not even a junit test  Stack trace not helpful   points to client am  which makes little no sense  derbynetclientmats derbynetmats derbynetmats fail derbynet testconnection java    no connectionderbynetclientmats derbynetmats derbynetmats fail derbynet testij java    no connectionderbynetclientmats derbynetmats derbynetmats fail jdbcapi metadata java extra tables views  JIRA      Y derbynetclientmats derbynetmats derbynetmats fail jdbcapi odbc metadata java dittoderbynetclientmats derbynetmats derbynetmats fail lang syscat sql dittoderbynetclientmats derbynetmats derbynetmats fail jdbcapi ProcedureTest junit junit not available  derbynetclientmats derbynetmats derbynetmats fail jdbcapi checkDataSource   java Table View  Y  already exists    ',1
'ERROR   Z    XML syntax error  missing keyword s    AS     Misleading text    create table t  i int  x xml  select xmlserialize from t ERROR   Z    XML syntax error  missing keyword s    AS  This is not an  XML Syntax error   it s a syntax in the SQL language  No need to have a special error messgae here  wouldn t the error be caught by regular parsing    ',0
'Embedded ResultSet getTimestamp on a TIME column returns a java sql Timestamp with a date portion that can be incorrect     The date portion of the java sql Timestamp from a TIME column is intended to be the current date but instead can be any date value  based upon the last getXXX call that required a Java Calendar object    ',0
'Client s ResultSet getTime   on a SQL TIMESTAMP column loses the sub second resolution and always has a milli second value of zero     In embedded the java sql Time object returned from ResultSet getTime   for a SQL TIMESTAMP object has its millisecond value for the time portion equal to that for the java sql Timestamp value In client the millisecond time value for such a value is always set to zero Note a Derby SQL TIME value has by definition resolution of only a second so its millisecond value is always zero but java sql Time is not a direct mapping to the SQL Type  it s a JDBC type  so when converting from a SQL TIMESTAMPit should retain the precision The new test lang TimeHandlingTest has this assert code that shows the problem  one of its calls will be commented outwith a comment with this bug number  private void assertTimeEqual Time tv  Timestamp tsv    cal clear    cal setTime tv   int hour   cal get Calendar HOUR OF DAY   int min   cal get Calendar MINUTE   int sec   cal get Calendar SECOND   int ms   cal get Calendar MILLISECOND      Check the time portion is set to the same as tv cal clear    cal setTime tsv   assertEquals hour  cal get Calendar HOUR OF DAY    assertEquals min  cal get Calendar MINUTE    assertEquals sec  cal get Calendar SECOND    assertEquals ms  cal get Calendar MILLISECOND     lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  lt  FAILS HERE     ',0
'Access rule violations should use a SQL state starting with      according to the SQL standard     The SQL standard says that SQL State      is for  syntax error or accessrule violation   section       There is a question of what JDBC     exception should be thrown for a access rule violation JDBC     maps      to SQLSyntaxErrorException which seems wrong for an access rule Message thread http   mail archives apache org mod mbox db derby dev        mbox   c     A           apache org  e   ',0
'lang procedureInTrigger sql fails with wctme    foundation with CNFE  java sql DriverManager and other exceptions     Test failed with      jars          alpha             I am attaching the report file from the test run wctme    derbyall report txt   Please see this file for the diff  This test was added as part of DERBY     and checkin   r          ',0
'sysinfo test fails with  access denied  java util PropertyPermission java class path read   when derbyclient jar is first in classpath    Seen on Linux and Solaris  with Sun JVM               when derbyclient jar is first in classpath                  Diff file derbyall derbynetmats DerbyNet derbynetmats sysinfo diff             Start  sysinfo jdk         DerbyNet derbynetmats derbynetmats                          a   gt  Unable to analyze class path  access denied  java util PropertyPermission java class path read      d   lt  Current Locale    English United States      en US       lt  Found support for locale       de DE      lt  Found support for locale       es      lt  Found support for locale       fr      lt  Found support for locale       it      lt  Found support for locale       ja JP      lt  Found support for locale       ko KR      lt  Found support for locale       pt BR      lt  Found support for locale       zh CN      lt  Found support for locale       zh TW       a   gt  Unable to analyze class path  access denied  java util PropertyPermission java class path read      d   lt  Current Locale    English United States      en US       lt  Found support for locale       de DE      lt  Found support for locale       es      lt  Found support for locale       fr      lt  Found support for locale       it      lt  Found support for locale       ja JP      lt  Found support for locale       ko KR      lt  Found support for locale       pt BR      lt  Found support for locale       zh CN      lt  Found support for locale       zh TW       a   gt  Unable to analyze class path  access denied  java util PropertyPermission java class path read      d   lt  Current Locale    English United States      en US       lt  Found support for locale       de DE      lt  Found support for locale       es      lt  Found support for locale       fr      lt  Found support for locale       it      lt  Found support for locale       ja JP      lt  Found support for locale       ko KR      lt  Found support for locale       pt BR      lt  Found support for locale       zh CN      lt  Found support for locale       zh TW     Test Failed  End  sysinfo jdk         DerbyNet derbynetmats derbynetmats                           ',1
'Correct message SQL State       to reflect that is being revoked    user  and update the Ref Manual    the SQL State        Privilege not revoked from       should be changed to  Privilege notrevoked from user      Once changed in the code  the Ref Manual file rrefexcept       dita needs to be updated as well    ',0
'jdbcapi blobclob BLOB java fails with JCC drivers    Test fails with JCC versions          and      Sample diff  lt  FAIL  Caught exception java lang NegativeArraySizeException   a    gt  FAIL  Caught exception java lang NegativeArraySizeException    ',0
'Tests lang grantRevokeDDL sql and lang grantRevokeDDL  sql fails on IBM WCTME     Foundation  jdkJ ME Foundation Specification v        The diff for grantRevokeDDL sql is big  hence attaching  For lang grantRevokeDDL  sql the diff is as follows                  Diff file derbyall derbylang grantRevokeDDL  diff             Start  grantRevokeDDL  jdkJ ME Foundation Specification v    derbyall derbylang                         a  gt  java lang reflect InvocationTargetException  java lang NullPointerException   del lt  ERROR  Failed with SQLSTATE        a    gt  ERROR  Failed with SQLSTATE XJ       del lt  ERROR  Failed with SQLSTATE         a    gt  ERROR  Failed with SQLSTATE XJ       del lt  ERROR  Failed with SQLSTATE         a    gt  ERROR  Failed with SQLSTATE XJ       del lt    row inserted updated deleted   a        gt  ERROR  Failed with SQLSTATE       gt  ERROR  Failed with SQLSTATE XJ       del lt    rows selected   a        gt     XYZ  gt    row selected   a        gt  ERROR  Failed with SQLSTATE       gt  ij USER   gt  set connection user   gt  ij USER   gt  create trigger revoke select trig AFTER delete on t   gt  for each STATEMENT mode db sql call revoke select proc     gt    rows inserted updated deleted gt  ij USER   gt          should fail gt  delete from t  where i      gt  ERROR  Failed with SQLSTATE       gt  ERROR  Failed with SQLSTATE XJ    gt  ij USER   gt          check delete failed gt  select   from t  where i            d    lt     XYZ  lt    row selected lt  ij USER   gt  set connection user   lt  ij USER   gt  create trigger revoke select trig AFTER delete on t   lt  for each STATEMENT mode db sql call revoke select proc     lt    rows inserted updated deleted lt  ij USER   gt          should fail lt  delete from t  where i      lt  ERROR  Failed with SQLSTATE       lt  ERROR  Failed with SQLSTATE       lt  ij USER   gt          check delete failed lt  select   from t  where i      lt  I  B  lt                                a        gt  ERROR  Failed with SQLSTATE       gt  ij USER   gt  set connection user   gt  ij USER   gt  create trigger revoke select trig AFTER delete on t   gt  for each STATEMENT mode db sql call revoke select proc     gt    rows inserted updated deleted gt  ij USER   gt          should fail gt  delete from t  where i      gt  ERROR  Failed with SQLSTATE       gt  ERROR  Failed with SQLSTATE XJ    gt  ij USER   gt          check delete failed gt  select   from t  where i            d    lt     XYZ  lt    row selected lt  ij USER   gt  set connection user   lt  ij USER   gt  create trigger revoke select trig AFTER delete on t   lt  for each STATEMENT mode db sql call revoke select proc     lt    rows inserted updated deleted lt  ij USER   gt          should fail lt  delete from t  where i      lt  ERROR  Failed with SQLSTATE       lt  ERROR  Failed with SQLSTATE       lt  ij USER   gt          check delete failed lt  select   from t  where i      lt  I  B  lt                                a        gt  ERROR  Failed with SQLSTATE       gt  ij USER   gt  set connection user   gt  ij USER   gt  create trigger revoke select trig AFTER delete on t   gt  for each STATEMENT mode db sql call revoke select proc     gt    rows inserted updated deleted gt  ij USER   gt          should fail gt  delete from t  where i      gt  ERROR  Failed with SQLSTATE       gt  ERROR  Failed with SQLSTATE XJ    gt  ij USER   gt          check delete failed gt  select   from t  where i            d    lt     XYZ  lt    row selected lt  ij USER   gt  set connection user   lt  ij USER   gt  create trigger revoke select trig AFTER delete on t   lt  for each STATEMENT mode db sql call revoke select proc     lt    rows inserted updated deleted lt  ij USER   gt          should fail lt  delete from t  where i      lt  ERROR  Failed with SQLSTATE       lt  ERROR  Failed with SQLSTATE       lt  ij USER   gt          check delete failed lt  select   from t  where i      lt  I  B  lt                                a        gt  ERROR  Failed with SQLSTATE       gt  ij USER   gt  set connection user   gt  ij USER   gt  create trigger revoke select trig AFTER delete on t   gt  for each STATEMENT mode db sql call revoke select proc     gt    rows inserted updated deleted gt  ij USER   gt          ok gt  delete from t  where i      gt  ERROR  Failed with SQLSTATE       gt  ERROR  Failed with SQLSTATE XJ    gt  ij USER   gt          check delete  gt  select   from t  where i         del lt     XYZ    a    gt     XYZ    a        gt  ij USER   gt  drop trigger revoke select trig  gt    rows inserted updated deleted gt  ij USER   gt  set connection user   gt  ij USER   gt          should fail gt  select   from user  t  where i      gt  ERROR  Failed with SQLSTATE             d    lt  ij USER   gt  create trigger revoke select trig AFTER delete on t   lt  for each STATEMENT mode db sql call revoke select proc     lt    rows inserted updated deleted lt  ij USER   gt          ok lt  delete from t  where i      lt    row inserted updated deleted lt  ij USER   gt          check delete  lt  select   from t  where i      lt  I  B  lt                              lt    rows selected lt  ij USER   gt  drop trigger revoke select trig  lt    rows inserted updated deleted lt  ij USER   gt  set connection user   lt  ij USER   gt          should fail lt  select   from user  t  where i      lt  ERROR  Failed with SQLSTATE       lt  ij USER   gt  set connection user  Test Failed  End  grantRevokeDDL  jdkJ ME Foundation Specification v    derbyall derbylang                           ',1
'Assert failure in sane mode for queries that used to work in             Derby      gives a database and a small program called  ViewerInit  that prepares a bunch of large queries involving nested subqueries  unions  and join predicates  The actual bug described in DERBY      is an NPE  and that s what the patch for DERBY      addresses However  once the NPEs are fixed  some of the queries in that same program now fail with ASSERT failures when running in SANE mode  this Jira issue is for addressing those assert failures While this does constitute a regression  I don t know yet what the root cause of the problem is  so I hesitate to make it a      blocker  hence urgency is  Normal   I m still investigating the queries to try to track down where the problem is  but all I ve been able to deduce so far is that a  the assertion occurs for a scoped predicate and thus the pushing of join predicates into UNIONs is somehow involved  and b  in INSANE mode the query compiles without problem and appears  based on some early and very incomplete testing  to execute without problem  But more investigation is required to determine if the execution results are actually correct  and to understand more about why the assertion is being thrown I m marking the fixin as          for now since I don t enough to make this a blocker for         Hopefully more info will be forthcoming      ',0
'largeDataTests LobLimits master needs update for new exception names     lt  EXPECTED SQL Exception   XJ     Java exception   Input stream did not have exact amount of data as the requested length   java io IOException    a   gt  EXPECTED SQL Exception   XJ     Java exception   Input stream did not have exact amount of data as the requested length   org apache derby iapi services io DerbyIOException    moreSee http   www multinet no  solberg public Apache LargeData testlog SunOS      i  pc i           largeData diff txt   ',0
'The source distribution for          rc  includes derby log files    The db derby          src release candidate built on         includes derby log files  db derby          src derby log db derby          src java demo toursdb derby logFile sizes    ls  l derby log rw rw r    jta jta        Sep          derby log   ls  l java demo toursdb derby log rw rr    jta jta     Sep          java demo toursdb derby logIf the release candidates need to be rebuilt  it would be good to remove those derby log files  but it doesn t harm anything to have them in there  just consumes a little space  The db derby          lib and db derby          bin distributions don t have these files    ',0
'error       C     refers to non existent codepoint secktn   needs correcting    error       C    Network protocol exception  secktn was not returned  The connection has been terminated This is NET SECTKN NOT RETURNED in org apache derby drda client net NetConnection javaI searched in the drda specs but I could not find SECKTN  but I did find SECTKN So   I think the error message should get changed to SECTKN The same non existent codepoint seems to be referred to in  XN    U secktn was not returned This affects the following  English messages  properties file s  Brazilian messages  properties file s  documentation for SQLStates I didn t find any masters with this It should probably go into         although it s not important enough to hold up a release  Targeting for        for now Myrna   ',0
'SQLSTATE   X   occurs when qualifying a column with a synonym in ORDER BY clause    SQLSTATE   X   occurs when qualifying a column with a synonym in ORDER BY clause  where the synonym was declared in a different schema ij version     ij gt  connect  jdbc derby wombat create true  ij gt  create schema test    rows inserted updated deletedij gt  create schema test    rows inserted updated deletedij gt  create table test  testtable id bigint not null    rows inserted updated deletedij gt  create synonym test  testtable for test  testtable   rows inserted updated deletedij gt  set schema test    rows inserted updated deletedij gt  select testtable id from testtable ID                       rows selectedij gt  set schema test    rows inserted updated deletedij gt  select testtable id from testtable ID                       rows selectedij gt  select testtable id from testtable order by testtable id ERROR   X     TESTTABLE  is not an exposed table name in the scope in which it appears ij gt    ',0
'         source distribution is missing many files and includes some files that it should not     The source distribution is missing the top level bin and maven directories  as well as BUILDING txt  README  index html  and published api overview html  Also  the tools directory is missing release build xml In addition  tools testing derby contains a complete set of the Derby      jars  these should be removed from the  src distribution    ',0
'The scripts under the  bin of the distribution does not have the executable permission    The scripts under the  bin directory of the distribution does not have the execute permission  Here is the dir listing rw rr    rajeshk RD                       dblookrw rr    rajeshk RD                       dblook batrw rr    rajeshk RD                       derby common batrw rr    rajeshk RD                       derby common shrw rr    rajeshk RD                       ijrw rr    rajeshk RD                       ij bat    The issue was raised in the list earlierhttp   www nabble com Questions on the scripts in  bin  directory of Derby install p        htmlbut looks it is not fully resolved    ',1
'ALTER TABLE DROP COLUMN needs to update GRANTed column privileges    When ALTER TABLE DROP COLUMN is used to drop a column from a table  it needs to update the GRANTed column privileges on that table The following behaviors need to be provided  DROP COLUMN needs to automatically revoke any privileges which have been granted on this column Privileges which have been granted on other columns in this table need to be adjusted due to changed column position numbersWhen this problem is fixed  the following additional cleanup steps should occur  The check that disables DROP COLUMN in sqlAuthorization mode needs to be removed There is a comment in AlterTableConstantAction that needs to be revised The tests in lang altertableDropColumn sql should be moved into altertable sql altertableDropColumn sql and altertableDropColumn out should be deletedSearch for this JIRA issue number in the code to find the relevant places to change    ',1
'readme html under frameworks does not mention about Derby client and some minor typos in example html    The readme html file under frameworks mentions about the JCC driver but nothing about the Derbyclient Also under the demo programs simple example html some minor issues typos Under the section  Next run the SimpleApp demo in Derby client mode   step   on classpath mentions NOT FOUND IN CLASS PATH  Derby Client libraries  db jcc jar   com ibm db  jcc DB Driver not found  The above show JCC info instead of Derby Client   ',0
'Routine parameter names displayed by dblook are not escaped     After using this SQL to create a function with a delimited parameter nameCREATE FUNCTION FRED   paramOne  INTEGER  RETURNS INTEGERLANGUAGE JAVA PARAMETER STYLE JAVA EXTERNAL NAME  fred foo  dblook will output a CREATE FUNCTION statement with the parameter name without quotes CREATE FUNCTION  APP   FRED   paramOne INTEGER  RETURNS INTEGERLANGUAGE JAVA PARAMETER STYLE JAVAREADS SQL DATA CALLED ON NULL INPUTEXTERNAL NAME  fred foo  Using the output from dblook to re create the function will result in a function with a different parameter name    ',0
'Junit tests that require SQL authorization mode should use a different database to the default one     Since databases are re used in the JUnit world having a single database for the two modes does not work Not sure if there are any tests that need this yet  SQLAuthorizationPropTest actually tests setting the property so it really needs its own database  I think     ',0
'Misleading stack traces for exceptions raised by the JDBC     embedded driver    When the embedded driver raises an SQLException  its stack trace alwayssays it is created in SQLExceptionFactory   wrapArgsForTransportAcrossDRDA   This is not correct At some point  SQLExceptionFactory   getSQLException   set the stack traceof the SQLException to the stack trace of the non SQLException that causedit  if there were one  This was probably done to mimic the behaviour ofEmbedSQLException  which overrides printStackTrace   to achieve thesame  Later  code was added to ferry arguments over DRDA  This code createda dummy exception which the old code interpreted as a non SQLExceptionwhose stack trace should be used for the main exception  Therefore  allexceptions now have the same stack trace as the dummy exception created inwrapArgsForTransportAcrossDRDA   I think the best solution is not to set the stack trace explicitly  noteven when the SQLException is caused by a non SQLException EmbedSQLException overrides printStackTrace   because throwables in Java    didn t have initCause   getCause    so it was the only way to preservethe original stack trace  Since the SQLExceptions in JDBC     haveinitCause   getCause    there is no reason why the JDBC  driver shouldmimic EmbedSQLException s workaround for not having these methods    ',0
'NullPointerException with LTRIM  RTRIM and   argument SUBSTR   call in GROUP BY clause     The following query  which fails with a syntax error in         because functions are not allowed in a GROUP BY expression for       fails with a NullPointerException in      and in the codeline        create table dt  vc varchar       insert into dt values                                 select substr vc     from dt group by substr vc      Result  on trunk  is java lang NullPointerException at org apache derby impl sql compile TernaryOperatorNode isEquivalent TernaryOperatorNode java      at org apache derby impl sql compile GroupByList findGroupingColumn GroupByList java      at org apache derby impl sql compile VerifyAggregateExpressionsVisitor skipChildren VerifyAggregateExpressionsVisitor java      at org apache derby impl sql compile TernaryOperatorNode accept TernaryOperatorNode java      at org apache derby impl sql compile ResultColumn accept ResultColumn java       at org apache derby impl sql compile QueryTreeNodeVector accept QueryTreeNodeVector java      at org apache derby impl sql compile SelectNode bindExpressions SelectNode java      at org apache derby impl sql compile FromSubquery bindExpressions FromSubquery java      at org apache derby impl sql compile FromList bindExpressions FromList java      at org apache derby impl sql compile SelectNode bindExpressions SelectNode java      at org apache derby impl sql compile DMLStatementNode bindExpressions DMLStatementNode java      at org apache derby impl sql compile DMLStatementNode bind DMLStatementNode java      at org apache derby impl sql compile CursorNode bind CursorNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java      at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java        ',0
'ArrayIndexOutOfBoundsException for COALESCE with aggregate functions    The following statements produce an ArrayIndexOutOfBoundsException CREATE TABLE t    f  INTEGER  SELECT COALESCE MAX f      FROM t  Workaround  VALUES COALESCE   SELECT MAX f   FROM t       Stack trace                                                                                         GMT  Booting Derby version The Apache Software Foundation   Apache Derby                        instance c      d    e    f  faa         f   on database directory C  temp sys temp Derby TestErr dbDatabase Class Loader started   derby database classpath                           GMT Thread     main   main       XID          SESSIONID        DATABASE   c  temp sys temp Derby TestErr db    DRDAID   null   Cleanup action starting                        GMT Thread     main   main       XID          SESSIONID        DATABASE   c  temp sys temp Derby TestErr db    DRDAID   null   Failed Statement is  SELECT COALESCE MAX f      FROM t java lang ArrayIndexOutOfBoundsException     at org apache derby impl services bytecode BCMethod popStack Unknown Source  at org apache derby impl services bytecode BCMethod callMethod Unknown Source  at org apache derby impl sql compile ResultColumnList generateCore Unknown Source  at org apache derby impl sql compile ProjectRestrictNode generateMinion Unknown Source  at org apache derby impl sql compile ProjectRestrictNode generate Unknown Source  at org apache derby impl sql compile ScrollInsensitiveResultSetNode generate Unknown Source  at org apache derby impl sql compile CursorNode generate Unknown Source  at org apache derby impl sql compile StatementNode generate Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source    ',0
'NullPointerException in CREATE VIEW     VALUES NULL     The following statement produces a NullPointerException  CREATE VIEW v   f   AS VALUES NULL Stack trace                                                                                         GMT  Booting Derby version The Apache Software Foundation   Apache Derby                        instance c      d    e    b    f         f   on database directory C  temp sys temp Derby TestErr dbDatabase Class Loader started   derby database classpath                           GMT Thread     main   main       XID          SESSIONID        DATABASE   c  temp sys temp Derby TestErr db    DRDAID   null   Cleanup action starting                        GMT Thread     main   main       XID          SESSIONID        DATABASE   c  temp sys temp Derby TestErr db    DRDAID   null   Failed Statement is  CREATE VIEW v   f   AS VALUES NULLjava lang NullPointerException at org apache derby impl sql catalog SYSCOLUMNSRowFactory makeRow Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl addDescriptorArray Unknown Source  at org apache derby impl sql execute CreateViewConstantAction executeConstantAction Unknown Source  at org apache derby impl sql execute MiscResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source    ',0
'jdbcapi LobStreamsTest runs only in client  not embedded  but its suite   method gives no reason why     It s essential to document why such decisions were made  makes life easier for subsequent deveopers as they try to understand the code and why it is not being used to test embedded    ',0
'Setting a login timeout in client driver can lead to query timeout    Setting the login timeout by using DriverManager setLoginTimeout intseconds  also affects the amount of time the client driver is waitingfor a query to finish  For instance  setting the login timeout to   seconds will result in any queries taking more than    seconds to failwith the following exception Exception thrown  java sql SQLException  A communications error has been detected  Read timed out java sql SQLException  A communications error has been detected  Read timed out  at org apache derby client am SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am Statement executeQuery Statement java      at LoginTimeout main LoginTimeout java    Caused by  org apache derby client am DisconnectException  A communications error has been detected  Read timed out  at org apache derby client net NetAgent throwCommunicationsFailure NetAgent java      at org apache derby client net Reply fill Reply java      at org apache derby client net Reply ensureALayerDataInBuffer Reply java      at org apache derby client net Reply readDssHeader Reply java      at org apache derby client net Reply startSameIdChainParse Reply java       at org apache derby client net NetStatementReply readPrepareDescribeOutput NetStatementReply java     at org apache derby client net StatementReply readPrepareDescribeOutput StatementReply java     at org apache derby client net NetStatement readPrepareDescribeOutput  NetStatement java      at org apache derby client am Statement readPrepareDescribeOutput Statement java       at org apache derby client am Statement flowExecute Statement java       at org apache derby client am Statement executeQueryX Statement java      at org apache derby client am Statement executeQuery Statement java            moreCaused by  java net SocketTimeoutException  Read timed out at java net SocketInputStream socketRead  Native Method  at java net SocketInputStream read SocketInputStream java      at org apache derby client net Reply fill Reply java             more   ',0
' set schema sys  followed by  show tables  does not show tables in sys schema    If you create a new database in IJ  followed by  set schema sys  and then  show tables   ij shows no tables in the schema  This is because ij s show tables command only shows system tables if a schema is provided    ',0
'Setting derby database classpath to contain installed jars causes the database to be unbootable when a Securitymanager is installed     If the jars are sucessfully installed  without a security manager see DERBY      and the class path set then subsequent boots with a security manager fail with a SecurityException due to trying to install a class loader Related to DERBY     but not the same    ',1
'TestDataSourceFactory doesn t work correctly outside the old harness    TestDataSourceFactory uses TestUtil to create DataSource  ConnectionPoolDataSource and XADataSource objects  TestUtil needs to run in the old harness in order to detect which framework it is running under  so it will create embedded data sources for all JUnit tests that are run outside the old harness    ',0
'LangScripts JUnit test fails in views sql    LangScripts JUnit test fails in views sqlThere was   failure    views org apache derbyTesting functionTests tests lang LangScripts  junit framework ComparisonFailure  Output at line     expected  lt    T   because VIEW  SV             is dependent on th    gt  but was  lt    T   because VIEW  SV             is dependent on th    gt  at org apache derbyTesting functionTests util CanonTestCase compareCanon CanonTestCase java      at org apache derbyTesting functionTests util ScriptTestCase runTest ScriptTestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    FAILURES   Tests run        Failures     Errors   Some observations If org apache derbyTesting functionTests tests lang LangScripts is used to run views sql as a single test  then it ran smoothly without a problem  Time       OK    test But if views sql is run as part of a suite  then the ordering diff occurs    ',0
'JDBC assertRowInResultSet compares the wrong value if using trimmed strings and a SMALLINT column exists     There is a bug in assertRowInResultSet where a path through the loop does not set the variable obj This leads to it being compared with the previous value Using locally scoped variables within the loop would have most likely caught this bug at development time Then the compiler sees that obj has one uninitialzed path through the code and throws an error    ',0
'NullPointerException when two threads load sort factory concurrently                 ERROR      pool   thread        history helpers HistoryDataAccessHelper   failed to read measurements  filter    fromTime Mon Nov             MSK       toTime Mon Nov             MSK         properties       value  org springframework jdbc UncategorizedSQLException  PreparedStatementCallback  uncategorized SQLException for SQL      SELECT COUNT DISTINCT sshis measurement time  FROM sshis property measurement sshis INNER JOIN sstmp filter   filtertbl ON sshis property id   filtertbl property id WHERE sshis measurement time  gt     AND sshis measurement time  lt          SQL state      XJ          error code              Java exception    java lang NullPointerException    nested exception isorg apache derby impl jdbc EmbedSQLException  Java exception     java lang NullPointerException  java lang NullPointerException at java util Hashtable put Unknown Source  at org apache derby impl store access RAMAccessManager registerAccessMethod Unknown Source  at org apache derby impl store access RAMAccessManager findMethodFactoryByImpl Unknown Source  at org apache derby impl store access RAMTransaction createSort UnknownSource  at org apache derby impl sql execute DistinctScalarAggregateResultSet loadSorter Unknown Source  at org apache derby impl sql execute DistinctScalarAggregateResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeQuery Unknown Source  at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForObject JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForObject JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForInt JdbcTemplate java      at com meshnetics wsn ctrl dispatcher services history helpers MeasurementsSaveGetHelper getMeasurements MeasurementsSaveGetHelper java     at com meshnetics wsn ctrl dispatcher services history helpers HistoryDataAccessHelper   doInTransaction HistoryDataAccessHelper java      at com meshnetics wsn ctrl dispatcher services history helpers HistoryDataAccessHelper   doInTransaction HistoryDataAccessHelper java      at org springframework transaction support TransactionTemplate execute TransactionTemplate java      at com meshnetics wsn ctrl dispatcher services history helpers HistoryDataAccessHelper getMeasurements HistoryDataAccessHelper java      at com meshnetics wsn ctrl dispatcher services history asyncread MeasurementsReadTask executeTask MeasurementsReadTask java      at com meshnetics wsn ctrl dispatcher services history asyncread MeasurementsReadTask run MeasurementsReadTask java     at java util concurrent Executors RunnableAdapter call Unknown Source  at java util concurrent FutureTask Sync innerRun Unknown Source  at java util concurrent FutureTask run Unknown Source  at java util concurrent ThreadPoolExecutor Worker runTask Unknown Source  at java util concurrent ThreadPoolExecutor Worker run Unknown Source  at java lang Thread run Unknown Source    ',0
'store BootAllTest junit fails on wctme    foundation  on         Fails on       wctme    foundation                 Diff file derbyall storeall storemore BootAllTest diff             Start  BootAllTest jdkJ ME Foundation Specification v    storeall storemore                          add gt   E gt  There was   error  gt     testSettingBootAllPropertyWithHomePropertySet org apache derbyTesting functionTests tests store BootAllTest java lang NoClassDefFoundError  java sql DriverManager gt  FAILURES    gt  Tests run     Failures     Errors   Test Failed  End  BootAllTest jdkJ ME Foundation Specification v    storeall storemore                           ',0
'After a Lexical Error due to syntax error      even a simple create table does not work  on the same connection     connect  jdbc derby wombat create true  create table t  a int    create table  t   a int            this should fail  create table foo  a int     YEAR   int            but this should not fail  But failingcreate table t    b int    FYI   java org apache derby tools ijij version     ij gt  run  weird  sql  ij gt  connect  jdbc derby wombat create true  ij gt  create table t  a int      rows inserted updated deletedij gt  create table  t   a int      rows inserted updated deletedij gt          this should fail create table foo  a int     YEAR   int    ERROR   X    Lexical error at line    column     Encountered           after     ij gt          but this should not fail  But failingcreate table t    b int    ERROR   X    Syntax error  Encountered    at line    column    ij gt    ',0
'Test files missing svn eol style    The following files don t have the svn eol style property functionTests harness ibm   javafunctionTests tests i  n MessageBundleTest javafunctionTests tests store LogDeviceTest javafunctionTests tests storetests st derby     sqlfunctionTests tests tools IJRunScriptTest javajunit SystemPropertyTestSetup java   ',0
'Intermittent failure in lang compressTable sql    lang compressTable sql has failed a number of times in the nightly regression tests  The diffs vary slightly http   dbtg thresher com derby test trunk   jvm    testing testlog Linux          ELsmp x      x             derbylang diff txthttp   dbtg thresher com derby test trunk   jvm    testing testlog CYGWIN NT     i    unknown        derbyall diff txt                 Diff file derbylang derbylang compressTable diff             Start  compressTable jdk         derbylang derbylang                             del lt  T            a     gt  T        Test Failed  End  compressTable jdk         derbylang derbylang                            http   dbtg thresher com derby test trunk   jvm    testing testlog CYGWIN NT     i    unknown        derbyall diff txt                 Diff file derbyall derbylang compressTable diff             Start  compressTable jdk         derbyall derbylang                             del lt  T            a     gt  T        Test Failed  End  compressTable jdk         derbyall derbylang                           ',0
'suites All falls over with foundation after revision         java lang NoClassFoundError  javax xml parsers DocumentBuilderFactory    When attempting to run  lt j binpath gt  j   jcl foun    Dderby system home  lt testhome gt   DderbyTesting serverhost localhost  DderbyTesting clienthost localhost  DderbyTesting codeclasses file   lt classesdir gt    DderbyTesting junit file   unused  DderbyTesting antjunit file   unused  Djava security policy file   lt classesdir gt  org apache derbyTesting functionTests util derby tests policy  Xbootclasspath a  lt j libpath gt  jdbc jar  cp  lt classesdir gt  junit jar junit textui TestRunner org apache derbyTesting functionTests suites All The textui TestRunner keels over with the following error Failed to invoke suite   java lang NoClassDefFoundError  javax xml parsers DocumentBuilderFactoryThis happens after  but not before revision           ',0
'message XSDB  and   Y   have references to db j    trunk messages xml shows two messages that incorrectly refer to db j   Y   Aggregator class         for aggregate         on type     does not implement com ibm db j aggregates Aggregator  There is now no class Aggregator in Derby  This message is generated from the class  org apache derby impl sql compile AggregateNode java  private void checkAggregatorClassName String className  throws StandardException   className   verifyClassExist className  false   if   classInspector assignableTo className   org apache derby iapi sql execute ExecAggregator      throw StandardException newException  SQLState LANG BAD AGGREGATOR CLASS   className  aggregateName  operand getTypeId   getSQLTypeName        The original in Cloudscape had a reference to an Aggregator class  the if looked like this  if   classInspector assignableTo className   com ibm db j aggregates Aggregator    amp  amp   classInspector assignableTo   className   com ibm db j protocol Database Language Execution ExecAggregator      throw StandardException newException SQLState LANG BAD AGGREGATOR CLASS        Maybe the message now needs to mention org apache derby iapi sql execute ExecAggregator But  I think maybe this message cannot be obtained unless someone introduces a bug within the Derby code  I think the reference to another internal class should be removed  Or maybe the text of Cloudscape message   Y   can be used    Y   LANG BAD AGGREGATOR CLASS  Aggregator class         for aggregate         on type     is inaccessable or does not exist  XSDB  D DATA MULTIPLE JBMS FORCE LOCK   WARNING  Derby  instance      is attempting to boot the database     even though Derby  instance      may still be active  Only one instance of Derby should boot a database at a time  Severe and non recoverable corruption can result if   instances of Derby boot on the same database at the same time  The db j database forceDatabaseLock true property has been set  so the database will not boot until the db lck is no longer present  Normally this file is removed when the first instance of Derby to boot on the database exits  but it may be left behind in some shutdowns  It will be necessary to remove the file by hand in that case  It is important to verify that no other VM is accessing the database before deleting the db lck file by hand  John Embretsen commented on this in DERBY      https   issues apache org jira browse DERBY      action         Indicating that not only should the message refer to derby database forceDatabaseLock  but the replacement of parameters is not happening either  But I can not find a place where this message is generated  so maybe it can just be removed    ',0
'Trigger recompilation problem when trigger action has its table not qualified with a schema    Trigger recompilation problem when trigger action has its table not qualified with a schema SPSs in SYS SYSSTATEMENTS get invalidated for recompilation when sqlj install jar  sqlj remove jar  sqlj replace jar are called  or when a database upgrade is performed  The problem arises when the trigger action statement does not qualify the table with an explicit schema name  During recompilation it uses the default schema instead of using the original schema that was persisted in SYS SYSSTATEMENTS causing an exception to occur  e g  C  derby trunk gt java  classpath classes   org apache derby tools ijij version     ij gt  connect  jdbc derby wombat create true  ij gt  create table app t   i int  j int    rows inserted updated deletedij gt  insert into app t  values          row inserted updated deleted        notice trigger action s update statement did not qualify table t  with a schema nameij gt  create trigger app tr  after update of i on app t  update t  set j       rows inserted updated deletedij gt  update app t  set i i     row inserted updated deletedij gt  select   from app t  I  J                             row selected        this action invalidates the SPS and mark for recompilationij gt  call sqlj install jar  c  derby procs Procs jar    APP Procs        rows inserted updated deletedij gt  disconnect ij gt  connect  jdbc derby wombat  user  user           recompilation occurs but uses  USER   as the schema to compile instead of  APP   resulting in errorij gt  update app t  set i i   ERROR   Y    Schema  USER   does not existij gt    ',0
'Nested triggers not working properly after maximum trigger count exception is thrown    After the maximum allowed nested trigger exception is thrown  subsequent statement that result in nested trigger execution may result in the same error again even though it does not exceed the limit of nested triggers     e g  C  derby trunk gt java  classpath classes   org apache derby tools ijij version     ij gt  connect  jdbc derby wombat create true  ij gt  create table t   i int    rows inserted updated deletedij gt  insert into t  values         rows inserted updated deletedij gt  create trigger tr  after update on t  for each row update t  set i i     rows inserted updated deleted        force the  maximum depth of nested triggers  error to occurij gt  update t  set i i   ERROR        Maximum depth of nested triggers was exceeded ij gt  drop trigger tr    rows inserted updated deletedij gt  create trigger tr  after update on t  referencing old as oldt for each row update t  set i i   where oldt i     rows inserted updated deleted        this should have executed successfully instead of throwing the same error again ij gt  update t  set i i   ERROR        Maximum depth of nested triggers was exceeded ij gt  disconnect ij gt  connect  jdbc derby wombat  ij gt  select   from t  I                rows selected        ok after reconnection  it looks like the trigger execution context TEC  may not have been cleanup properly in the previous connectionij gt  update t  set i i     rows inserted updated deletedij gt  select   from t  I                rows selectedij gt    ',0
'DROP PROCEDURE depends on SET SCHEMA    This is possibly related to Bug https   issues apache org jira browse DERBY      Use ij to execute the following statements CREATE SCHEMA datamgmt CREATE PROCEDURE datamgmt exit   IN value INTEGER   MODIFIES SQL DATA PARAMETER STYLE JAVA LANGUAGE JAVA EXTERNAL NAME  java lang System exit  DROP PROCEDURE datamgmt exit DROP SCHEMA datamgmt RESTRICT Then execute exactly the same lines once again  Then statement  DROP PROCEDURE datamgmt exit  yields ERROR   X    PROCEDURE  EXIT  does not exist However  if the DROP works if a default schema  SET SCHEMA  is used instead of the prefixed schemaName  That is  the following lines can be executed more than once in a row CREATE SCHEMA datamgmt CREATE PROCEDURE datamgmt exit   IN value INTEGER   MODIFIES SQL DATA PARAMETER STYLE JAVA LANGUAGE JAVA EXTERNAL NAME  java lang System exit  SET SCHEMA datamgmt DROP PROCEDURE exit DROP SCHEMA datamgmt RESTRICT Therefore  SET SCHEMA can be used as a workaround  hence minor importance    ',0
'Uncommitted transactions executed throught XAResource will held locks after the application terminates  or crashes during the transaction      Using this piece of code derby will not release a table lock of  dummy  table  String query    insert into dummy  field   values       Integer toString value          XAConnection xaConnection   createXAConnection  jdbc derby   localhost      TestDB            XAResource xaResource   xaConnection getXAResource    conn   xaConnection getConnection    Xid xid   createXid value    xaResource setTransactionTimeout      xaResource start xid  XAResource TMNOFLAGS   Statement statement   conn createStatement    statement execute query       terminate the client application    this will not release any locks System exit       ',0
' show indexes in SCHEMANAME  does not work with the client driver    The ij command  show indexes in SCHEMANAME  does not work at all with the client driver It does work with the embedded driver Sample output from ij ij gt  connect  jdbc derby   localhost myDB create true  ij gt  create table test  id int primary key    rows inserted updated deletedij gt  show indexes in app ERROR XJ     Table name can not be nullij gt  show indexes from test TABLE NAME  COLUMN NAME  NON U amp  TYPE ASC amp  CARDINA amp  PAGES                                                                            TEST  ID        A  NULL  NULL  row selectedij gt  show indexes from app test TABLE NAME  COLUMN NAME  NON U amp  TYPE ASC amp  CARDINA amp  PAGES                                                                            TEST  ID        A  NULL  NULL  row selectedij gt Using delimited table and or schema names does not work  but I think this is according to documentation I e  ij gt  show indexes from  TEST  ERROR   X    Syntax error  Encountered  show  at line    column   ij gt  show indexes from  APP  test ERROR   X    Syntax error  Encountered  show  at line    column   ij gt  show indexes from  APP   TEST  ERROR   X    Syntax error  Encountered  show  at line    column   ij gt    ',0
'compatibilitytest fails after DERBY      change     Client server compatibility testing with JVM     is not relevant on trunk      following DERBY     See e g  http   dbtg thresher com derby test tinderbox trunk   jvm    testing Limited testSummary        htmlhttp   dbtg thresher com derby test trunk   jvm    testing Limited testSummary        html   ',0
'Assert during log file switch  log file position exceeded max log file size    When running simple tpc b like transactions against a embedded Derby based on a SANE build of trunk the following assertion occurs for the background thread and all user threads  org apache derby shared common sanity AssertFailure  ASSERT FAILED log file position exceeded max log file sizeThis seems to occur during a switch to a new log file derby log contains the following call stack for the background thread Exception trace  org apache derby shared common sanity AssertFailure  ASSERT FAILED log file position exceeded max log file size at org apache derby shared common sanity SanityManager ASSERT SanityManager java      at org apache derby impl store raw log LogCounter makeLogInstantAsLong LogCounter java      at org apache derby impl store raw log LogToFile switchLogFile LogToFile java       at org apache derby impl store raw log LogToFile appendLogRecord LogToFile java       at org apache derby impl store raw log FileLogger logAndDo FileLogger java      at org apache derby impl store raw xact Xact logAndDo Xact java       at org apache derby impl store raw log LogToFile checkpointWithTran LogToFile java       at org apache derby impl store raw log LogToFile checkpoint LogToFile java       at org apache derby impl store raw RawStore checkpoint RawStore java      at org apache derby impl store raw log LogToFile performWork LogToFile java       at org apache derby impl services daemon BasicDaemon serviceClient BasicDaemon java      at org apache derby impl services daemon BasicDaemon work BasicDaemon java      at org apache derby impl services daemon BasicDaemon run BasicDaemon java      at java lang Thread run Thread java                             GMT Thread     derby rawStoreDaemon   derby daemons      Cleanup action startingorg apache derby shared common sanity AssertFailure  ASSERT FAILED log file position exceeded max log file size at org apache derby shared common sanity SanityManager ASSERT SanityManager java      at org apache derby impl store raw log LogCounter makeLogInstantAsLong LogCounter java      at org apache derby impl store raw log LogToFile switchLogFile LogToFile java       at org apache derby impl store raw log LogToFile appendLogRecord LogToFile java       at org apache derby impl store raw log FileLogger logAndDo FileLogger java      at org apache derby impl store raw xact Xact logAndDo Xact java       at org apache derby impl store raw log LogToFile checkpointWithTran LogToFile java       at org apache derby impl store raw log LogToFile checkpoint LogToFile java       at org apache derby impl store raw RawStore checkpoint RawStore java      at org apache derby impl store raw log LogToFile performWork LogToFile java       at org apache derby impl services daemon BasicDaemon serviceClient BasicDaemon java      at org apache derby impl services daemon BasicDaemon work BasicDaemon java      at org apache derby impl services daemon BasicDaemon run BasicDaemon java      at java lang Thread run Thread java     Cleanup action completedFor my user threads the call stack is similar Database Class Loader started   derby database classpath                           GMT Thread     Thread      main       XID               SESSIONID         DATABASE    export home tmp derby db    DRDAID   null   Cleanup action starting                        GMT Thread     Thread      main       XID               SESSIONID         DATABASE    export home tmp derby db    DRDAID   null   Failed Statement is  UPDATE accounts SET abal   abal     WHERE aid     AND bid    org apache derby shared common sanity AssertFailure  ASSERT FAILED log file position exceeded max log file size at org apache derby shared common sanity SanityManager ASSERT SanityManager java      at org apache derby impl store raw log LogCounter makeLogInstantAsLong LogCounter java      at org apache derby impl store raw log LogToFile switchLogFile LogToFile java       at org apache derby impl store raw log LogToFile appendLogRecord LogToFile java       at org apache derby impl store raw log FileLogger logAndDo FileLogger java      at org apache derby impl store raw xact Xact logAndDo Xact java       at org apache derby impl store raw data LoggableActions doAction LoggableActions java      at org apache derby impl store raw data LoggableActions actionUpdate LoggableActions java     at org apache derby impl store raw data StoredPage doUpdateAtSlot StoredPage java       at org apache derby impl store raw data BasePage updateAtSlot BasePage java       at org apache derby impl store access conglomerate GenericConglomerateController replace GenericConglomerateController java      at org apache derby impl sql execute RowChangerImpl updateRow RowChangerImpl java      at org apache derby impl sql execute UpdateResultSet collectAffectedRows UpdateResultSet java      at org apache derby impl sql execute UpdateResultSet open UpdateResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at com sun derby perf clients tpcb DBConnection performTransaction DBConnection java      at com sun derby perf clients tpcb Client run Client java     After this it seems like no user threads are able to connect to the database  not surpricing  This happend using a SANE build and I am unsure by just looking at the assertion in the code whether this situation would have been fatal also if I had been using an INSANE build    ',1
'DatabaseMetaData getTypeInfo   does not list supported Derby SQL types correctly     These types are returned but not supported by Derby LONG NVARCHARNATIONAL CHARNATIONAL CHAR VARYINGThe XML type is supported by Derby but not returned    ',0
'DatabaseMetaData getTypeInfo returns incorrect MAXIMUM SCALE value for DECIMAL and NUMERIC types    Maximum scale is returned as       but maximum scale for numerics is       ',0
'bad logic in jvm guessWSHome   in old test harness affects j  runs    Running derbyall using either wcmte    foundation or weme    results in the following stack trace Exception in thread  main  java lang StringIndexOutOfBoundsException at java lang String substring String java       at org apache derbyTesting functionTests harness jvm guessWSHome jvm java      at org apache derbyTesting functionTests harness jvm getSecurityProps jvm java      at org apache derbyTesting functionTests harness jvm setSecurityProps jvm java      at org apache derbyTesting functionTests harness RunTest buildTestCommand RunTest java       at org apache derbyTesting functionTests harness RunTest testRun RunTest java      at org apache derbyTesting functionTests harness RunTest main RunTest java     I think this code was not reached until various security related changes recently  but the code is just bad I think this code was used at one point to attempt to kick off another jvm to run a server with  but that is now defunct Rather than try to make the code work  or try to clean it up  I d rather spend time converting tests to the junit framework  so I will just fix this up so we don t hit the error The bad code is   wshome   jhome substring   jhome indexOf sep    jre     wshome   wshome substring   wshome lastIndexOf sep   If the jhome   System getProperty  java home    does not contain  jre   we will get    as the  nd parameter in jhome substring  and thus cause the ArrayIndexOutOfBounds I propose to fix this piece of code as follows  int havejre jhome indexOf sep    jre    if  havejre  gt       wshome   jhome substring   jhome indexOf sep    jre     wshome   wshome substring   wshome lastIndexOf sep      else wshome   jhome substring   jhome lastIndexOf sep      ',1
'Missing sql script    org apache derbyTesting functionTests tests lang altertableDropColumn sql     Seen since svn r                           CET First occurence in http   dbtg thresher com derby test tinderbox trunk   jvm    testing Limited testSummary        html  Also in http   dbtg thresher com derby test Daily jvm    testing Limited testSummary        html  all platforms except windows    derbyall derbyall fail txt shows                                           derbyall derbyall derbylang fail lang altertableDropColumn sql derbyall derbyall diff txt does not show a diff butderbyall sum shows                                 Start  altertable jdk      derbyall derbylang                         End  altertable jdk      derbyall derbylang                        Could not locate lang altertableDropColumn sqlException in thread  main  java io FileNotFoundException   org apache derbyTesting functionTests tests lang altertableDropColumn sql at org apache derbyTesting functionTests harness RunTest setDirectories RunTest java      at org apache derbyTesting functionTests harness RunTest main RunTest java         On windows I found that derbyall sum contained                                                                       Start  altertable jdk         derbyall derbylang                         End  altertable jdk         derbyall derbylang                        Could not locate lang altertableDropColumn sqlException in thread  main  java io IOException  The filename  directory name  or volume label syntax is incorrect at java io WinNTFileSystem canonicalize  Native Method  at java io Win  FileSystem canonicalize Win  FileSystem java      at java io File getCanonicalPath File java      at org apache derbyTesting functionTests harness RunTest addToListFile RunTest java       at org apache derbyTesting functionTests harness RunTest addToFailures RunTest java       at org apache derbyTesting functionTests harness RunTest setDirectories RunTest java      at org apache derbyTesting functionTests harness RunTest main RunTest java        ',0
'compatibility testScript xml should include        in the server client combinations    Add SERVER          and CLIENT          in the combinations to be tested    ',0
'org apache derbyTesting functionTests suites All is extremely CPU intensive since  svn           Run org apache derbyTesting functionTests suites All http   www nabble com org apache derbyTesting functionTests suites All is extremely CPU intensive    tf        htmlSee e g  http   dbtg thresher com derby test tinderbox trunk   jvm    testing Limited testSummary        htmlhttp   dbtg thresher com derby test trunk   jvm    testing Limited testSummary        htmlThese logs also include thread dumps    ',0
'Accessing a BLOB column twice in an INSERT trigger leads to errors in the value on disk    Either the BLOB is stored with the incorrect value or the value on disk does not match the stored length on disk and an exception is raised  The BLOB was supplied as a stream value See this with the new TriggersTest  The text fixture will have a comment with this bug number showing how to reproduce the problem    ',0
'Use of XML values in the action statement of a trigger throw exceptions     A trigger like  where V  V  and V  are columns of type XML will thrown an exception when fired CREATE TRIGGER AIS AFTER INSERT ON T MAIN  REFERENCING NEW TABLE AS N FOR EACH STATEMENT  INSERT INTO T ACTION STATEMENT A  V   ID  V    SELECT  I   V  ID  V FROM NERROR        The exception  java sql SQLException  An attempt was made to get a data value of type  java lang Object  from a data value of type  XML    was thrown while evaluating an expression Most likely because triggers are implementing using VTIs and hence JDBC ResultSets and XML is not supported through JDBC yet TriggerTest shows this issue  see the comment with the bug number to reproduce    ',0
'ORDER BY with expression with distinct in the select list returns incorrect result    When distinct is in the select list and the query has order by with expression  the resultset produced contains an additional column  ij gt  create table t   c  int  c  varchar       rows inserted updated deletedij gt  insert into t  values     a       b       c     rows inserted updated deletedselect distinct c   c  from t  order by c  C   C                          a   b   c  rows selectedij gt  select distinct c   c  from t  order by c    C   C      lt      returns   columns  incorrect result returned                                     a      b      c     rows selected   ',0
'Unable to perform select query using DISTINCT on a read only database    It is not possible to perform queries using DISTINCT on a read only database packaged in a zip file  This generates the following error ERROR   XD   Container was opened in read only mode   at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store raw data BaseContainer use Unknown Source  at org apache derby impl store raw data BaseContainerHandle useContainer Unknown Source  at org apache derby impl store raw data BaseDataFileFactory openContainer Unknown Source  at org apache derby impl store raw data BaseDataFileFactory openContainer Unknown Source  at org apache derby impl store raw xact Xact openContainer Unknown Source  at org apache derby impl store raw data BaseDataFileFactory addContainer Unknown Source  at org apache derby impl store raw xact Xact addContainer Unknown Source  at org apache derby impl store access heap Heap create Unknown Source  at org apache derby impl store access heap HeapConglomerateFactory createConglomerate Unknown Source  at org apache derby impl store access RAMTransaction createConglomerate Unknown Source  at org apache derby iapi store access DiskHashtable  lt init gt  Unknown Source  at org apache derby iapi store access BackingStoreHashtable spillToDisk Unknown Source  at org apache derby iapi store access BackingStoreHashtable add row to hash table Unknown Source  at org apache derby iapi store access BackingStoreHashtable put Unknown Source  at org apache derby impl store access btree BTreeForwardScan fetchRows Unknown Source  at org apache derby impl store access btree BTreeScan fetchSet Unknown Source  at org apache derby impl store access BackingStoreHashTableFromScan  lt init gt  Unknown Source  at org apache derby impl store access RAMTransaction createBackingStoreHashtableFromScan Unknown Source  at org apache derby impl sql execute HashScanResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeQuery Unknown Source  at DerbyTest main DerbyTest java    The problem can be reproduced using the attached java program and the following database file http   ftp  bigcat unimaas nl  thomas kelder derbytest testdb zip Both the  derby storage tempDirectory  and  derby stream error file  properties are set to writable locations  as advised in the help file Also see derby user mailing list thread  http   article gmane org gmane comp apache db derby user      This appears to be a bug  possibly a regression  When I converted yourDB to     everything worked fine even when I did NOT set the propertiesfor tempDirectory and error file  hmmm     When I switched to using the     or      jars and accessed the very same database the   XD  ERRORhappened    Stanley Bradbury    ',0
'Modify compatibility testScript xml to not run embedded jvm    case any more   not valid after r          After svn r       DERBY      Remove some uses of java  compile classpath that do not require code changes   the  compatibility test  for embedded jvm    should be removed ERROR XBM    Startup failed due to missing functionality for org apache derby iapi types DataValueFactory  Please ensure your classpath includes the correct Derby software compatibility diff                                                                               Start  embedded VM    java sql SQLException  Failed to start database  compatDB   see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc EmbedConnection newSQLException Unknown Source  at org apache derby iapi error StandardException newException Unknown Source Exception in thread  main  java lang Exception  Error lookup up server info  Failed to start database  compatDB   see the next exception for details              End  embedded VM        compatibility embedded VM                                                  VM Version      Driver org apache derby jdbc AutoloadedDriver Version       java sql SQLException  Failed to start database  compatDB   see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc EmbedConnection newSQLException Unknown Source  at org apache derby impl jdbc EmbedConnection bootDatabase Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc AutoloadedDriver connect Unknown Source  at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting functionTests util DerbyJUnitTest getConnection DerbyJUnitTest java      at org apache derbyTesting functionTests util DerbyJUnitTest getConnection DerbyJUnitTest java      at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite findServer CompatibilitySuite java      at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite main CompatibilitySuite java     ERROR XBM    Startup failed due to missing functionality for org apache derby iapi types DataValueFactory  Please ensure your classpath includes the correct Derby software  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby iapi services monitor Monitor missingImplementation Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor startModule Unknown Source  at org apache derby iapi services monitor Monitor bootServiceModule Unknown Source  at org apache derby impl db BasicDatabase boot Unknown Source  at org apache derby impl services monitor BaseMonitor boot Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor bootService Unknown Source  at org apache derby impl services monitor BaseMonitor startProviderService Unknown Source  at org apache derby impl services monitor BaseMonitor findProviderAndStartService Unknown Source  at org apache derby impl services monitor BaseMonitor startPersistentService Unknown Source  at org apache derby iapi services monitor Monitor startPersistentService Unknown Source  at org apache derby impl jdbc EmbedConnection bootDatabase Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc AutoloadedDriver connect Unknown Source  at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting functionTests util DerbyJUnitTest getConnection DerbyJUnitTest java      at org apache derbyTesting functionTests util DerbyJUnitTest getConnection DerbyJUnitTest java      at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite findServer CompatibilitySuite java      at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite main CompatibilitySuite java     Exception in thread  main  java lang Exception  Error lookup up server info  Failed to start database  compatDB   see the next exception for details  at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite findServer CompatibilitySuite java      at org apache derbyTesting functionTests tests junitTests compatibility CompatibilitySuite main CompatibilitySuite java        ',0
'EXISTS may return the wrong value for sub queries involving set operations    It seems like EXISTS on a SELECT returning zero rows returns false  asexpected   but EXISTS on INTERSECT of two disjunct sets returns true e g EXISTS  values   intersect values    Yip Ng wrote on derby dev I believe its probably got to do with the EXISTS subquery transformingthe original RCL toa TRUE boolean value for the INTERSECT  So during row comparison atexecution timefor INTERSECT processing since true    true thus intersects   so itwill always return  BAD   Likewise select   from   values  OK    as T where exists  values   except values    This supposedly should return  OK  but because of the booleantransformation mentionedabove for EXISTS subquery  it will return no rows for EXCEPTprocessing    ',0
'Setting a default value for a VARCHAR column fails when column contains data    I m seeing a problem updating the default value for a VARCHAR column when the column already contains data  I m  using alter table TABLE NAME alter column COL NAME DEFAULT  new value and with some VARCHAR columns I get an error like this Invalid character string format for type long   nested exception is java sql SQLException  Invalid character string format for type long Caused by  ERROR        Invalid character string format for type long  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby iapi types SQLChar getLong Unknown Source  at org apache derby impl sql execute AlterTableConstantAction getColumnMax Unknown Source  at org apache derby impl sql execute AlterTableConstantAction modifyColumnDefault Unknown Source  at org apache derby impl sql execute AlterTableConstantAction execGuts Unknown Source  at org apache derby impl sql execute AlterTableConstantAction executeConstantAction Unknown Source  at org apache derby impl sql execute MiscResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source This only happens on VARCHAR columns containing data  Columns that are entirely NULL update fine  This was discussed on users mailing list http   www nabble com problem with ALTER COLUMN DEFAULT on VARCHAR column tf        htmland the conclusion was that it is related to this statement being run internally as part of the updata process SELECT MAX COL NAME  FROM TABLE NAME As reported in that discussion  bash     b  java org apache derby tools ijij version     ij gt  connect  jdbc derby brydb  ij gt  create table t  a varchar        rows inserted updated deletedij gt  alter table t alter column a default  my val    rows inserted updated deletedij gt  insert into t  a  values   hi     row inserted updated deletedij gt  alter table t alter column a default  another val  ERROR        Invalid character string format for type long    ',0
'ParameterMappingTest fails due to ArrayIndexOutOfBoundsException  executing a procedure    The test ParameterMappingTest fails due to a connection reset error during tearDown  Commenting out the teardown actions I see that the real cause of the connection reset is an ArrayIndexOutOfBoundsException executing a callable statement  I have not narrowed it down more than this  Currently the test runs only for embedded  It should be reenabled for client once this bug is fixed  Below is the stack trace java lang ArrayIndexOutOfBoundsException at java lang System arraycopy Native Method  at org apache derby client net Reply shiftBuffer Reply java      at org apache derby client net Reply ensureSpaceInBufferForFill Reply java      at org apache derby client net Reply fill Reply java      at org apache derby client net Reply ensureALayerDataInBuffer Reply java Compiled Code   at org apache derby client net Reply readDssHeader Reply java      at org apache derby client net Reply peekCodePoint Reply java       at org apache derby client net NetStatementReply parseEXCSQLSTTreply NetStatementReply java      at org apache derby client net NetStatementReply readExecuteCall NetStatementReply java      at org apache derby client net StatementReply readExecuteCall StatementReply java     at org apache derby client net NetStatement readExecuteCall  NetStatement java      at org apache derby client am Statement readExecuteCall Statement java       at org apache derby client am PreparedStatement flowExecute PreparedStatement java       at org apache derby client am PreparedStatement executeX PreparedStatement java       at org apache derby client am PreparedStatement execute PreparedStatement java       at org apache derbyTesting functionTests tests jdbcapi ParameterMappingTest testParameterMapping ParameterMappingTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org eclipse jdt internal junit runner junit  JUnit TestReference run JUnit TestReference java      at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java        ',0
'XAResource end does not set the XA transaction state correctly when the XAException is thrown    As the comments in DERBY      show when calling the XAResource end the XAException may be thrown even when the transaction was successfully disassociated from the connection but the transaction was marked as rollback only  The code at the end of XAResource end function does not handle this correctly  It either throws an XAException or sets the connection state to XA T  NOT ASSOCIATED  The corresponding code from NetXAResource end method is if  rc    XAResource XA OK    throwXAException rc  false    else   conn  setXAState Connection XA T  NOT ASSOCIATED       ',0
'Clob Position returning wrong value when operating on Reader       ',0
'File stream is left open when an exception occurs while setting up a character stream for data export     The JUnit test tools ImportExportTest java has been failing since it was first contributed with the following error ImportExportTest embeddedjunit framework AssertionFailedError  extinout T  datat org apache derbyTesting junit DropDatabaseSetup removeDir DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup access     DropDatabaseSetup java    at org apache derbyTesting junit DropDatabaseSetup   run DropDatabaseSetup java    at java security AccessController doPrivileged  Native Method at java security AccessController doPrivileged AccessController java     at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java    at org apache derbyTesting junit SupportFilesSetup tearDown SupportFilesSetup java     at junit extensions TestSetup   protect TestSetup java    at junit extensions TestSetup run TestSetup java    at junit extensions TestDecorator basicRun TestDecorator java    at junit extensions TestSetup   protect TestSetup java    at junit extensions TestSetup run TestSetup java    Also fails with the client  as well  Per the comment posted by Suresh to DERBY       it looks like the cause of this failure is that the  openFile    method of java engine org apache derby impl load ExportWriteData java does not close the file stream in cases where an invalid encoding is specified    ',0
'org apache derby impl store access BackingStoreHashTableFromScan does not honor ResultSet holdability    After an unrelated statement on the same connection commits  and after some number of successful calls to ResultSet next    a subsequent call to ResultSet next   throws an SQLException with a message like  The heap container with container id Container                    is closed  This seems to be related to the hard coded passing of false to the super in the constructor of org apache derby impl store access BackingStoreHashTableFromScan Steps to reproduce    Execute a statement on a connection that returns a result set    Execute a second statement on the same connection that modifies the database and commits    Call next   on the first result set until the exception is thrown Note that the number of rows that can be successfully retrieved from the result set seems to be related to the amount of data per row  Increasing the number of columns in the result set or the length of the columns causes the exception to be taken sooner The attached test program demonstrates the issue    ',0
' Invalid transaction state     in jdbcapi SetTransactionIsolationTest    See e g  http   dbtg thresher com derby test Daily jvm    testing testlog sles        suitesAll diff txt   testIsolation org apache derbyTesting functionTests tests jdbcapi SetTransactionIsolationTest ERROR X X    Invalid transaction state   held cursor requires same isolation level at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext setIsolationLevel Unknown Source  at org apache derby impl jdbc EmbedConnection setTransactionIsolation Unknown Source  at org apache derbyTesting functionTests tests jdbcapi SetTransactionIsolationTest checkIsolationLevelNoTimeout SetTransactionIsolationTest java      at org apache derbyTesting functionTests tests jdbcapi SetTransactionIsolationTest testIsolation SetTransactionIsolationTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     lt method gt org apache derbyTesting functionTests tests jdbcapi SetTransactionIsolationTest lt  method gt  lt signature gt Invalid transaction state   held cursor requires same isolation level lt  signature gt    ',0
'DriverManager getConnection leaks memory when connecting to a non existent database    Repeated calls to java sql DriverManager getConnection  jdbc derby C DOES NOT EXIST   leak memory and eventually lead to an OutOfMemoryError This bug is similar to DERBY      in that ContextManager objects are not getting removed from the HashSet  The attached test program demonstrates the issue  When run with VM options  Xms m  Xmx m  it throws an OutOfMemoryError after       calls to DriverManager getConnection    ',0
'Batch scripts in bin  report extraneous errors when DERBY HOME is invalid    If DERBY HOME is set to an invalid location  for example a directory that does not contain lib derby jar   most  bat scripts in the bin directory  the ones that call derby common bat  report three distinct error messages  of which only one is of value to the user  Reproduction C  Derby    db derby          bin gt set DERBY HOME c  tempC  Derby    db derby          bin gt echo  DERBY HOME c  tempC  Derby    db derby          bin gt bin sysinfoDERBY HOME is set incorrectly or derby jar could not be located  Please set DERBY HOME The system cannot find the batch label specified   end     is not recognized as an internal or external command operable program or batch file The distinct error messages are    DERBY HOME is set incorrectly or derby jar could not be located  Please set DERBY HOME    The system cannot find the batch label specified   end        is not recognized as an internal or external command  operable program or batch file Only    is relevant for the user  and should ideally be the only one displayed    ',0
'Unclosed ResultSets choke JUnit lang  Suite on java      The lang suite fail for me from UnaryArithmeticParameterTest on  The tests can t drop table T  because a ResultSet is open    ',0
'Network Client allows execution of callable statement when one of the parameters is not set    If the second input parameter is set and the first is not  Client allows execution of the stored procedure  See the following code in LangProcedureTest java with a reference to this bug  op clearParameters    op setString          try      a not set op execute    fail  FAIL   a not set      catch  SQLException sqle    assertSQLState          sqle       ',0
'Client does not return SQLException on XAConnection getXAResource   on a closed connection  Embedded does    In the following scenario from converted test DataSourceTest  non tested code based on the test code                  ClientXADataSource dsx   new ClientXADataSource    dsx setDatabaseName  tstdb    XAConnection xac   dsx getXAConnection    XAConnection xac    dsx getXAConnection    XAResource xar    xac  getXAResource    xac  close       allow close on already closed XAConnection xac  close    try   xac  getXAResource       Network Server does not think this is worth an exception    catch  SQLException sqle    System out println  expect a       as with Embedded                       With DerbyNetClient  the xac  getXAResource   does not return an SQLException This ought to be documented if expected  or fixed    ',0
'testVirtualMemoryHeap junit test fails with  Virtual memory heap test failed  Got unexpected value  expected  but was      junit suite fails with the following error    testVirtualMemoryHeap org apache derbyTesting functionTests tests lang UpdateCursorTest junit framework AssertionFailedError  Virtual memory heap test failed  Got unexpected value  expected  lt     gt  but was  lt     gt  at org apache derbyTesting functionTests tests lang UpdateCursorTest testVirtualMemoryHeap UpdateCursorTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'Code paths for db restore do not use doPrivileged calls  causing SecurityException    When using  createFrom  or  restoreFrom  in the JDBC url to restore a database from a backup image  a SecurityException is thrown even though the policyfile for codebase derby jar is correctly configured  giving Derby access to the backup image  A few comments on this issue can be found here  and in subsequent comments   https   issues apache org jira browse DERBY      action         A workaround is wrapping the connection call in doPrivileged at the  application level code   or granting the required permissions to the application codebase as well    ',1
'Missing asserts in ProcedureInTriggerTest    ProcedureInTriggerTest sometimes executes queries without checking the results  The comments indicate that the results should have been checked line         and line                Check that insert successful and trigger fired   rs   s executeQuery  select   from t    line                check delete failed rs   s executeQuery  select   from t     expectedRows   new String             two         four         eight    line                check trigger is not dropped rs   s executeQuery  select count from SYS SYSTRIGGERS where triggername  TEST TRIG    line                     check index is not created rs   s executeQuery  select count from SYS SYSCONGLOMERATES where CONGLOMERATENAME  IX  and ISINDEX     line                     check delete failed rs   s executeQuery  select   from t     expectedRows   new String             two         four         eight       ',0
'ContextService notifyAllActiveThreads    and network server code need a privileged block around the calls to Thread interrupt      It looks to me as though the call to interrupt   can raise a SecurityException  I think this may give rise to another permission that we need to add to our template policy file and to our security documentation    ',1
'Wrong description of IndexName field in public JavaDoc for LockTable    The public JavaDoc for LockTable says the following in the description of the INDEXNAME retrieved from SYSCS DIAG LOCK TABLE  INDEXNAME varchar        normally null  If non null  a lock is held on the index  this can only happen if this is not a user transaction I think the last part is wrong  Normal user transactions might also have a value in the INDEXNAME  For example  here is part of the lock table for three user transactions XID  TYPE  MODE TABLENAME  LOCKNAME  STATE TABLETYPE INDEXNAME                                                                          ROW  X  T          GRANT T  NULL     ROW  S  T          WAIT  T  NULL     ROW  X  T           GRANT T  NULL      ROW  S  T           WAIT  T  NULL     ROW  S  T          GRANT T  SQL                     ROW  S  T          GRANT T  SQL                     ROW  X  T          GRANT T  NULL      ROW  S  T          WAIT  T  NULL Two of the lock entries have an index  I expect this to be the Scan lock that have been set during traversal of the B tree Proposed fix  remove the last part of the sentence    ',0
'TIMESTAMP value is truncated  when return to client    In ParameterMappingTest I see the following differences between embedded and client  Client is truncating the TIMESTAMP value  Look for this bug number in the test for reproduction  case java sql Types TIMESTAMP  if  param       if  usingEmbedded    assertEquals                                  val toString     else assertEquals                               val toString     else if  param       if  usingEmbedded    assertEquals                                  val toString     else assertEquals                               val toString     break    ',0
'DatabaseMetaData is not consistent about throwing SqlException when tablename null    According to java sql DatabaseMetaData  the following DatabaseMetaData methods should not allow tablename null getBestRowIdentifier  getColumnPrivileges  getIndexInfo  getVersionColumns  getPrimaryKeys  getImportedKeys  getExportedKeys  In the five former methods  SqlExceptions are thrown if tablename    null  but this check is not performed in the latter two The method calls eventually end up in EmbedDatabaseMetaData  which performs this check  Hence  an exception is thrown either way  If we want the exception to be thrown as early as possible  the two latter methods should do so as well  If not  the check should be removed from the former methods    ',0
'Queries in metadata properties allow tablepattern for JDBC methods that do not allow patterns    The DatabaseMetaData methods getBestRowIdentifier  getColumnPrivileges  getIndexInfo  getVersionColumns  getPrimaryKeys  getImportedKeys  getExportedKeys do not allow table name patterns  However  the SQL in metadata properties implement these with  table like     thus allowing patterns  The SQL for these methods should be modified to  table       ',0
'upgrade test incorrectly tries to test in place compress in      release     When trying to run upgrade test in trunk with all releases available for upgrade to test found at https   svn apache org repos asf db derby jars          I got   errors  not including those that are part of DERBY           testNegValueSupportedLogRecord org apache derbyTesting functionTests tests upgradeTests Changes     java sql SQLException   SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql compile StaticMethodCallNode bindExpression StaticMethodCallNode java      at org apache derby impl sql compile JavaToSQLValueNode bindExpression JavaToSQLValueNode java      at org apache derby impl sql compile CallStatementNode bindStatement CallStatementNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derbyTesting functionTests tests upgradeTests Changes     checkDataToCase    Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     testNegValueSupportedLogRecord Changes     java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testGetTablesModify org apache derbyTesting functionTests tests jdbcapi DataaseMetaDataTest java sql SQLException  Use of  XML  requires database to be upgaded from version      to version      or later  at org apache derby iapi error StandardException newException StandardExcepion java      at org apache derby impl sql catalog DD Version checkVersion DD Version jav      at org apache derby impl sql catalog DataDictionaryImpl checkVersion DataDitionaryImpl java       at org apache derby impl sql compile SQLParser checkVersion SQLParser java     at org apache derby impl sql compile SQLParser XMLType SQLParser java       at org apache derby impl sql compile SQLParser dataTypeCommon SQLParser jav       at org apache derby impl sql compile SQLParser dataTypeDDL SQLParser java      at org apache derby impl sql compile SQLParser columnDefinition SQLParser jva       at org apache derby impl sql compile SQLParser tableElement SQLParser java      at org apache derby impl sql compile SQLParser tableElementList SQLParser jva       at org apache derby impl sql compile SQLParser tableDefinition SQLParser jaa        at org apache derby impl sql compile SQLParser createStatements SQLParser jva       at org apache derby impl sql compile SQLParser StatementPart SQLParser java      at org apache derby impl sql compile SQLParser Statement SQLParser java      at org apache derby impl sql compile ParserImpl parseStatement ParserImpl jva      at org apache derby impl sql GenericStatement prepMinion GenericStatement jva      at org apache derby impl sql GenericStatement prepare GenericStatement java    at org apache derby impl sql conn GenericLanguageConnectionContext prepareIternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java     at org apache derby impl jdbc EmbedStatement execute EmbedStatement java     at org apache derbyTesting functionTests tests jdbcapi DatabaseMetaDataTestcreateTablesForTest DatabaseMetaDataTest java       at org apache derbyTesting functionTests tests jdbcapi DatabaseMetaDataTesttestGetTablesModify DatabaseMetaDataTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl jav     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessormpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testNegValueSupportedLogRecord org apache derbyTesting functionTests tests upgradeTests Changes     ERROR   Y     SYSCS UTIL SYSCS INPLACE COMPRESS TABLE  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException StandardException java  at org apache derby impl sql compile StaticMethodCallNode bindExpression StaticMethodCallNode java  at org apache derby impl sql compile JavaToSQLValueNode bindExpression JavaToSQLValueNode java  at org apache derby impl sql compile CallStatementNode bind CallStatementNode java  at org apache derby impl sql GenericStatement prepMinion GenericStatement java  at org apache derby impl sql GenericStatement prepare GenericStatement java  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java  at org apache derby impl jdbc EmbedStatement execute EmbedStatement java  at org apache derby impl jdbc EmbedStatement execute EmbedStatement java  at org apache derbyTesting functionTests tests upgradeTests Changes     checkDataToCase    Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     testNegValueSupportedLogRecord Changes     java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       Upgrade Phase  UPGRADEjava sql SQLException  Failed to start database  singleUse oneuse    see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java       at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc EmbeddedDataSource getConnection EmbeddedDataSource java      at org apache derby jdbc EmbeddedDataSource getConnection EmbeddedDataSource java      at org apache derbyTesting functionTests tests upgradeTests PhaseChanger setUp PhaseChanger java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    FAILURES   Tests run       Failures     Errors      ',0
'intermittent network startup related errors in running junit nightly test suite    I intermitently get network startup related errors in running the nightly full test suite on my laptop  running XP  with a firewall and a VPN   I am not sure what if any of those environmental factors is causing it  I have been mostly ignoring the errors as it seemed like it usually was only one test  I my latest run it was more like   or    I ll append exact tests as a comment on this issue To debug the problem I picked one   org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest and ran it in a loop  When I did this it failed everytime after the first one  and the first one intermittently failed   When I bumped the WAIT TIME up to        and the SLEEP TIME to     injava testing org apache derbyTesting junit NetworkServerTestSetup java then the test passed everytime   In    runs theentire test took varying times from   minutes to   minutes  mostly in the   minute range    ',0
'upgrade tests fail through BlobStoredProcedureTest and ClobStoredProcedureTest with JSR       The      upgrade tests  Changes       add the ClobStoredProcedureTest and BlobStoredProcedureTest class However these tests should not run with JSR     for the stored procedures use DriverManager to obtain the default connection This should be unimportant with JSR     because the procedures are internal procedures that are only intended to be exercised by client code  and client server is not currently supported with JSR    For reference  the stack trace is  for example  like so     testClobGetLengthSP org apache derbyTesting functionTests tests jdbcapi ClobStoredProcedureTest java sql SQLException  The exception  java lang NoClassDefFoundError  java sql DriverManager  was thrown while evaluating an expression  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby iapi error StandardException unexpectedUserException Unknown Source  at org apache derby impl services reflect DirectCall invoke Unknown Source  at org apache derby impl sql execute RowResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow Unknown Source  at org apache derby impl jdbc EmbedResultSet movePosition Unknown Source  at org apache derby impl jdbc EmbedResultSet next Unknown Source  at org apache derby impl jdbc EmbedCallableStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests jdbcapi ClobStoredProcedureTest setUp ClobStoredProcedureTest java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'upgrade test failures with weme         Since activating the upgrade tests for weme     and resolving some of the failures  I can now see   new error and    new failures  Some of these may warrant their own bug  some are probably caused by the initial problem  In the section below  I m skipping the junit extensions   part of the stack  error    testProcedureSignature org apache derbyTesting functionTests tests upgradeTests Changes     java sql SQLException  PROCEDURE  GC  already exists  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql execute CreateAliasConstantAction executeConstantAction Unknown Source  at org apache derby impl sql execute MiscResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derbyTesting functionTests tests upgradeTests Changes     testProcedureSignature Changes     java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java                           failures     testProcedureSignature org apache derbyTesting functionTests tests upgradeTests Changes     junit framework AssertionFailedError  Expected error  XCL    but no error was thrown  at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java      at org apache derbyTesting functionTests tests upgradeTests Changes     testProcedureSignature Changes     java     at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java           and      testOldVersion org apache derbyTesting functionTests tests upgradeTests BasicSetup junit framework AssertionFailedError  Old minor  driver   expected  lt   gt  but was  lt   gt  at org apache derbyTesting functionTests tests upgradeTests BasicSetup testOldVersion BasicSetup java     at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java                                   and      with a variation in originating line number in Changes      marked     in the stack below  and expected error numbertestGrantRevokeStatements org apache derbyTesting functionTests tests upgradeTests Changes             junit framework ComparisonFailure  Unexpected SQL state  expected  lt    X   gt  but was  lt    Z   gt    junit framework ComparisonFailure  Unexpected SQL state  expected  lt XCL   gt  but was  lt   Z   gt  at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java             at org apache derbyTesting functionTests tests upgradeTests Changes     testGrantRevokeStatements Changes     java         at org apache derbyTesting functionTests tests upgradeTests Changes     testGrantRevokeStatements Changes     java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java        Caused by  java sql SQLException  GRANT not allowed unless database property derby database sqlAuthorization has value  TRUE   at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile SQLParser checkSqlStandardAccess Unknown Source  at org apache derby impl sql compile SQLParser grantStatement Unknown Source  at org apache derby impl sql compile SQLParser StatementPart Unknown Source  at org apache derby impl sql compile SQLParser Statement Unknown Source  at org apache derby impl sql compile ParserImpl parseStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java             at org apache derbyTesting functionTests tests upgradeTests Changes     testGrantRevokeStatements Changes     java         at org apache derbyTesting functionTests tests upgradeTests Changes     testGrantRevokeStatements Changes     java      at at java lang reflect AccessibleObject invokeV AccessibleObject java             more                         and     testDatabaseOwnerChange org apache derbyTesting functionTests tests upgradeTests Changes     junit framework ComparisonFailure  AUTHORIZATIONID not valid for SYSIBM expected  lt DBA gt  but was  lt APP gt  at org apache derbyTesting functionTests tests upgradeTests Changes     checkSystemSchemasOwner Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     testDatabaseOwnerChange Changes     java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java                                   and    testPolicyReloadingProcedure org apache derbyTesting functionTests tests upgradeTests Changes     junit framework AssertionFailedError  Reloading results  expected  lt false gt  but was  lt true gt  at org apache derbyTesting functionTests tests upgradeTests Changes     tryReloading Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     assertPolicyReloaderDoesNotExist Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     testPolicyReloadingProcedure Changes     java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java                             testImportExportLobsProcedures org apache derbyTesting functionTests tests upgradeTests Changes     junit framework AssertionFailedError  Expected error    Y    but no error was thrown  at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java      at org apache derbyTesting functionTests tests upgradeTests Changes     testImportExportLobsProcedures Changes     java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java                             ',0
'Errors messages early in starting the network server through NetworkServerControl start   are not reported to the PrintWriter passed into start       Cause seems to be not calling setLogWriter   in NetworkServerControlImpl start   before calling startNetworkServer    ',0
'If large clob is updated after Reader  the reader continues to point to old data    If a Reader is fetched from a large clob  obtained from ResultSet  a reader linked to the dvd stream is returned once a set method is called on it the clob data is materialized in control class but the Reader returned previously continues to point to old data    ',0
'Ensure that a temporary file is not created for a lob obtained from resultset unless user updates it     Currently LOBStreamControl has a buffer limit of  k if the lob is larger than this a temporary file is created  Ensure that lob data is kept in memory unless user start to update it    ',0
'LIKE parameter marker combined with index multi probing leads to ASSERT failure with sane jars  wrong results with insane jars     In cases where the optimizer chooses to do index multi probing for an IN list  DERBY      the presence of a LIKE condition whose argument is a parameter marker leads to an ASSERTion failure with sane jars  With insane jars  the same query returns incorrect results  it only returns rows matching the first argument in the IN list  As an example  if we have the following DDL  create table ct  i int  c  char      c  char       insert into ct values                            insert into ct values                                            insert into ct select     i from ct  insert into ct select      i from ct  update ct set c    cast i as char       update ct set c    c     c   create index idx  on ct  c   c   Then we see the following results         This one works select i c  c  from ct where c  in           and c  like     order by i         These all work  too prepare p  as  select i c  c  from ct where c  in               and c  like        execute p  prepare p  as  select i c  c  from ct where c  in       and c  like        execute p  using  values                         But these all fail  Something about having a parameter in the LIKE is triggering the assertion   prepare p  as  select i c  c  from ct where c  in       and c  like   order by i  execute p  using  values                        prepare p  as  select i c  c  from ct where c  in       and c  like    execute p  using  values                        prepare p  as  select i c  c  from ct where c  in               and c  like    execute p  using  values          prepare p  as  select i c  c  from ct where c  in           and c  like    execute p  using  values                 The actual assertion is thrown because multiprobing expects the start and stop keys to be same value  But something about the LIKE parameter violates that expectation ERROR XJ     Java exception   ASSERT FAILED All multi probing result sets are expected to have a single key that is both the start key AND the stop key  but that is not the case   org apache derby shared common sanity AssertFailure  This is a regression introduced by the DERBY    changes  everything runs fine in      and earlier    ',0
'jdbcapi metadata java and jdbcapi odbc metadata java fail because of new procedure SYSCS UTIL SYSCS GET USER ACCESS    The following failure occurs with Rev          likely due to checkin of DERBY     failure Details                  Diff file derbyall derbylang metadata diff             Start  metadata jdk         derbyall derbylang                          a   gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx  a   gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx  a   gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a    gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a        gt  null SYSCS UTIL SYSCS GET USER ACCESS       VARCHAR         null null   null       YES xxxxGENERATED IDxxxx      gt  null SYSCS UTIL SYSCS GET USER ACCESS USERNAME      VARCHAR         null null   null       YES xxxxGENERATED IDxxxx    Test Failed  End  metadata jdk         derbyall derbylang                                    Diff file derbyall derbylang odbc metadata diff             Start  odbc metadata jdk         derbyall derbylang                          a   gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a    gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a    gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a    gt  null SYSCS UTIL SYSCS GET USER ACCESS org apache derby catalog SystemProcedures SYSCS GET USER ACCESS xxxxGENERATED IDxxxx   a        gt  null SYSCS UTIL SYSCS GET USER ACCESS       VARCHAR         null null   null       YES xxxxGENERATED IDxxxx      gt  null SYSCS UTIL SYSCS GET USER ACCESS USERNAME      VARCHAR         null null   null       YES xxxxGENERATED IDxxxx    Test Failed  End  odbc metadata jdk         derbyall derbylang                           ',0
'testLoadJavaClassIndirectly   als fails on JVM     with  Unexpected SQL state  expected  but was     Jar file  MY JAVA  already exists in Schema  EMC         testLoadJavaClassDirectly org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest java sql SQLException  Jar file  MY JAVA  already exists in Schema  EMC     testLoadJavaClassDirectly  org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest java sql SQLException  Jar file  MY JAVA  already exists in Schema  EMC     testLoadJavaClassDirectly  org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest java sql SQLException  Jar file  MY JAVA  already exists in Schema  EMC     testLoadDerbyClassIndirectly org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest java sql SQLException  Jar file  MY JAVA  already exists in Schema  EMC     testLoadJavaClassIndirectly org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest junit framework ComparisonFailure  Unexpected SQL state  expected  lt                 gt  but was  lt      XJ         gt See e g http   dbtg thresher com derby test Daily jvm    testing Limited testSummary        htmlhttp   dbtg thresher com derby test trunk   jvmAll testing Limited testSummary        html   ',0
'org apache derby impl drda DDMWriter might swallow unexpected exceptions    Some methods in org apache derby impl drda DDMWriter catch Exception and print a message about unsupported encoding  They should instead catch the specific exception UnsupportedEncodingException and let all other exceptions propagate up the call stack    ',0
'Client connections should not fail if permission is not granted to read derby client traceLevel  and derby client traceDirectory    Running the      network server tests with the      server  most tests fail with AccessControlException  Access denied java util Property derby client traceLevel readdue to DERBY       This can break existing applications that don t have this permission and should be a non fatal warning if permission is not granted    ',1
'testBlobAfterCommit     jdbcapi BlobClob BlobTest  fails with  Unexpected SQL state  expected  but was      testBlobAfterCommit org apache derbyTesting functionTests tests jdbcapi BlobClob BlobTest junit framework ComparisonFailure  Unexpected SQL state  expected  lt XJ              gt  but was  lt XJ              gt after r         DERBY     See http   dbtg thresher com derby test tinderbox trunk   jvm    testing testlog SunOS      i  pc i           org apache derbyTesting functionTests suites All diff txt   ',0
'ij  describe  built in command cannot describe a table named  run     steps to duplicate  attach ij to any database ij gt  create table run  i int    rows inserted updated deletedij gt  desc run ERROR   X    Syntax error  Encountered  desc  at line    column   ij gt  I think this is a parser problem within ij where the  run  is taken as a token and that token is not included in the definition of a tablename expression in the grammer  should be an easy fix     ',0
'make entry for clob in connection so that temporary file is removed when a connection is closed or transaction is commited rolledback       ',0
'DatabaseMetaData  locatorsUpdateCopy   should return true    Since updates made to a BLOB or CLOB value in Derby is made on a copy  DatabaseMetaData  locatorsUpdateCopy   call should return true  For the embedded driver the functionality to update a LOB value is new in       For the client driver  updates have been possible in prior releases  and locatorsUpdateCopy   has returned false  That behavior was wrong since the client updated a main memory copy  not the values in the database  For       the client will use a locator based implementation which will rely on the behavior of the embedded driver  Hence  locatorsUpdateCopy   should return true in both cases    ',0
'Obscure error messages when using SSL in various combinations    I ran clients with various ssl configurations on their urls and startup options against servers with various ssl configurations  I will attach an html file recording my results  I feel that many of the error conditions raised diagnostics which were too obscure to be helpful  I think this will be burdensome to tech support    ',1
'ASSERT failure with sane build if DISTINCT and ORDER BY are present in a query that selects from a diagnostic table function     Attempts to execute the following query will lead to an ASSERT failure with sane jars ij gt  select distinct   from table syscs diag space table  T     X order by   ERROR XJ     Java exception   ASSERT FAILED markOrderingDependent   not expected to be called for org apache derby impl sql compile FromVTI  org apache derby shared common sanity AssertFailure  Stack trace is  at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at ResultSetNode markOrderingDependent ResultSetNode java       at SingleChildResultSetNode markOrderingDependent SingleChildResultSetNode java      at SingleChildResultSetNode markOrderingDependent SingleChildResultSetNode java      at SingleChildResultSetNode markOrderingDependent SingleChildResultSetNode java      at SelectNode genProjectRestrict SelectNode java       at SelectNode modifyAccessPaths SelectNode java       at SingleChildResultSetNode modifyAccessPaths SingleChildResultSetNode java      at DMLStatementNode optimizeStatement DMLStatementNode java      at CursorNode optimizeStatement CursorNode java     I was able to avoid this by adding an empty implementation of  markOrderingDependent  to the FromVTI class  so that s probably the fix that I will post  after looking a bit more closely at the code to see if this makes sense     ',0
'calling getByteLength on org apache derby impl jdbc StoreStreamClob makes BinaryStream  fetched before this call  unusable    StoreStreamClob getByteLength first resets the internal stream and then reads the entire stream  Due to this any read on Stream obtained by StoreStreamClob getRawByteStream returns    StoreStreamClob is a read only InternalClob  so probably keeping the length in a variable will be good idea    ',0
'Assessing blob  when its linked to DVD stream  ie large blob  corrupts stream fetched prior to this access        ',0
'ij doesn t start with J ME   JSR      weme    because attempting to find java sql Driver if ij protocol property is specified    When starting ij with the following command ij  jcl foun    Xbootclasspath a  lt path to jdbc jar gt  org apache derby tools ij  p derby propertiesand derby properties contains the following                  ij database jdbc derby bladb create trueij protocol jdbc derby ij showNoConnectionsAtStart trueij showNoCountForSelect true DataSource properties  only used if ij dataSource is setij dataSource databaseName bladbij dataSource createDatabase createij dataSource org apache derby jdbc EmbeddedSimpleDataSource                  ij does not start and instead gives the following stack trace Exception in thread  main  java lang NoClassDefFoundError  java sql Driver at java lang ClassLoader defineClassImpl Native Method  at java lang ClassLoader defineClass ClassLoader java      at java security SecureClassLoader defineClass SecureClassLoader java      at java net URLClassLoader findClassImpl URLClassLoader java       at java net URLClassLoader   run URLClassLoader java      at java security AccessController doPrivileged AccessController java      at java net URLClassLoader findClass URLClassLoader java      at com ibm oti vm URLSystemClassLoader findClass URLSystemClassLoader java     at java lang ClassLoader loadClass ClassLoader java      at com ibm oti vm URLSystemClassLoader loadClass URLSystemClassLoader java     at java lang ClassLoader loadClass ClassLoader java      at java lang Class forNameImpl Native Method  at java lang Class forName Class java      at org apache derby impl tools ij util loadDriver util java      at org apache derby impl tools ij util loadDriverIfKnown util java      at org apache derby impl tools ij util startJBMS util java      at org apache derby impl tools ij util startJBMS util java      at org apache derby impl tools ij ConnectionEnv init ConnectionEnv java     at org apache derby impl tools ij utilMain initFromEnvironment utilMain java      at org apache derby impl tools ij Main  lt init gt  Main java      at org apache derby impl tools ij Main getMain Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    The properties file is an example of the  old test harness  properties files  The test harness would get sql scripts tested with J ME by stripping away the ij protocol and ij database specifications In another bug   DERBY        it was suggested ij protocol be blanked out  in tools ij util java   with J ME Another approach would be to check for ij protocol or ij database setting when we have a datasource and we re using J ME    ',0
'Error messages for deadlocks contain less information than in         In       an error message for a deadlock would look like this ERROR        A lock could not be obtained due to a deadlock  cycle of locks and waiters is Lock   ROW  T        Waiting XID         S    APP  select   from t where id     Granted XID         X  Lock   ROW  T        Waiting XID         S    APP  select   from t where id     Granted XID         X    The selected victim is XID       On trunk  the same deadlock would be reported asjava sql SQLException  A lock could not be obtained due to a deadlock  cycle of locks and waiters is Lock   ROW  T        Waiting XID    org apache derby impl services locks LockSpace      d  S   Granted XID    org apache derby impl services locks LockSpace da bf   X  Lock   ROW  T        Waiting XID    org apache derby impl services locks LockSpace da bf   S   Granted XID    org apache derby impl services locks LockSpace      d  X    The selected victim is XID   org apache derby impl services locks LockSpace      d That is  the transaction id and the failing statement are not shown    ',0
'ParameterMetaDataJdbc   fails for weme     which prevents rest of suites All from completing     With the addtion of the ParameterMetaDataJdbc   JUnit test  DERBY        suites All has been failing with weme     It turns out the that new ParameterMetaDataJdbc  Test fails with the following error  Failed to invoke suite   java lang NoClassDefFoundError  java sql ParameterMetaData which prevents suites All from continuing and thus no results can be gathered It might be good to disable the test for weme    at least in the short term so that rest of suites All can run cleanly again  Not sure if that s a complete solution or just a temporary one until the test can be fixed      ',0
'BUILDING txt doesn t mention junit jar in list of jars installed in tools java    BUILDING txt contains this paragraph Note  After following the steps in sections             of thisdocument  you should have the following   derby source  tools java empty jar  derby source  tools java geronimo spec servlet     rc  jar  derby source  tools java jakarta oro       jar  derby source  tools java javacc jar  derby source  tools java osgi jar    Since section       mentions how to install junit jar into   derby source  tools java  the list should also include junit jar Also  since the paragraph refers to sections              it should be located below section        currently  it s between       and           ',0
'iepnegativetests ES sql fails  new canon needed     See http   dbtg thresher com derby test Daily jvm    testing Limited testSummary        html   w     lt method gt i  n iepnegativetests ES sql lt  method gt  lt signature gt  lt  ERROR XJ     Excepci EnC  gt     lt  n de Java   extout nodir t  dat  No such file or directory   java io FileNotFoundException    a   gt  ERROR XJ     Excepci EnC  gt     lt  n de Java   extout nodir t  dat  The system cannot find the path specified   java io FileNotFoundException   lt  signature gt    ',0
'NetworkServer not accepting connections with default security manager on Ipv  machines    While running tests on Ipv  machines using the      jars with the default security manager  I had the following findings questionsI started the server like this java org apache derby drda NetworkServerControl start  h        a  f a              and the server started with the following commandSecurity manager installed using the Basic server security policy Apache Derby Network Server            beta            started and ready to accept connections on port      at                          GMTSo I think the server is using the default security manager  Then when I tried to get conenction though ijgot the following error messageAccess denied  java net SocketPermission             a  f a                           accept resolve java security AccessControlException  Access denied  java net SocketPermission             a  f a                           accept resolve   at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkAccept  SecurityManager java       at java net ServerSocket implAccept ServerSocket java      at java net ServerSocket accept ServerSocket java      at org apache derby impl drda ClientThread   run  Unknown Source  at java security AccessController doPrivileged AccessController java      at org apache derby impl drda ClientThread run Unknown Source I had the derby properties file like thisderby database sqlAuthorization truederby connection requireAuthentication truederby infolog append truederby authentication provider BUILTINderby stream error logSeverityLevel   derby language logStatementText true User s Definitionsderby user user  pass    ',1
'CREATE TABLE AS  does not maintain the collation for character types     create table t as select tablename from sys systables with no data This creates a column TABLENAME with collation based upon the user schema  but the type of sys systables tablename has collation UCS BASIC The required behaviour should be verified with the SQL standard       SR    but since collation is an attribute of a type it seems logical that the collation is maintained by the create Fixing this to keep the collation of the system column will cause problems though as there would be no way to recreate this table through a regular create table  say if the schema is dumped and recreated using ddlutils I think this is critical as fixing it after a release would lead to a change in behaviour for applications    ',0
'Wrong connection object used in EmbedConnection clearLOBMapping      I think there are two bugs in EmbedConnection clearLOBMapping       It checks if lobHashMap is non null  but it should have checked rootConnection lobHashMap     It calls getlobHMObj   clear   regardless of whether there is a HashMap  This creates a HashMap object even though it s not needed  and all the subsequent transactions on that connection have to perform cleanup on that object    ',0
'Closing a resultset after retrieving a large         bytes value with Network Server does not release locks    This is the same issue as DERBY      https   issues apache org jira browse DERBY       The test attached to DERBY     shows the locks being not released  Everything is fine when using Derby           I would think it s a regression bug Output from sysinfo                    Java Informationen                   Java Version          Java Anbieter  Sun Microsystems Inc Java Home  C  work applications development java jdk   u  SE jreJava Klassenpfad  C  work applications development derby          lib derby jar C  work applications development derby         lib derbynet jar C  work applications development derby          lib derbyclient jar C  work applications develpment derby          lib derbytools jarName des Betriebssystems  Windows XPArchitektur des Betriebssystems  x  Betriebssystemversion     Java Benutzername  thomas niessenJava Benutzerausgangsverzeichnis  C  Dokumente und Einstellungen thomas niessenJava Benutzerverzeichnis  C  work applications development derby         java specification name  Java Platform API Specificationjava specification version               Derby Informationen         JRE   JDBC  Java SE     JDBC         C  work applications development derby          lib derby jar                              C  work applications development derby          lib derbytools jar                              C  work applications development derby          lib derbynet jar                              C  work applications development derby          lib derbyclient jar                                                                                                 Informationen zur L  ndereinstellung                  Aktuelle L  ndereinstellung   Deutsch Deutschland      de DE      Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       cs      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       de DE      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       es      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       fr      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       hu      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       it      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       ja JP      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       ko KR      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       pl      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       pt BR      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       ru      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       zh CN      Version                     Es wurde Unterst  tzung f  r die folgende L  ndereinstellung gefunden       zh TW      Version                        ',0
'INSERT and UPDATES succeed when permission has not been granted     GrantRevokeTest had assert methods  assertInsertPrivilege etc   of the formtry   s execute command   catch  SQLException sqle   if   hasPrivilege   assertSQLState          e   else fail       Note that no fail   assert was in the try portion after the SQL execution  The statement should not work if hasPrivilege is false  but the test will incorrectly pass if the statement succeeds  I added fail asserts with revision        like if   hasPrivilege  fail  expected no INSERT permission on table   but these two for INSERT and UPDATE caused the test to fail  about   fixtures fail  indicating that the statement succeeds even if the permission is not granted It could be a test problem but needs some investigation The asserts for assertInsertPrivilege and asserUpdatePrivilege are commented out to stop the test failing    ',1
'AS IDENTITY  START WITH                       fails    When creating a tableAS IDENTITY  START WITH                      fails butAS IDENTITY  START WITH                      succeeds Guess this is a parsing SQL problem as the absolute value appears to be held in a long  which is not quite long enough at the positive end    ',0
'SimpleStringOperatorNode in it s bindExpression method generates a character string CAST if required but does not set the correct collation     Following query should run into error if run in a territory based database SELECT TABLENAME FROM SYS SYSTABLES WHERE UPPER CURRENT DATE    TABLENAME When a CAST node is generated on top of CURRENT DATE to create a character string type  we do not set the collation of that character string type and hence it always ends up getting the default which is collation derivation IMPLICIT and collation type UCS BASIC  That does not sound right  There might be other places where we generate CAST node to create a character string type  We should check if the collation is set correctly for them    ',0
'DDMReader readLengthAndCodePoint   decodes long integer incorrectly    DDMReader readLengthAndCodePoint   contains code to decode a long integer from a byte array  This code is broken since it uses int operations and not long operations in the decoding  The long might be encoded using four  six or eight bytes  and since Derby currently always uses the four bytes encoding  the bug is not exposed in the current code    ',0
'ERROR        The second or third argument of the SUBSTR function is out of range   with data concatenation in group by query     CREATE TABLE A  C CHAR     NOT NULL  D DATE NOT NULL  DC DECIMAL       INSERT INTO A VALUES   aaa   DATE                         SELECT A C  SUBSTR  MAX CAST A D AS CHAR         CAST A DC AS CHAR              AS BUG FROM A GROUP BY A C results in a       error on the select ij gt  C  BUG                   ERROR        The second or third argument of the SUBSTR function is out of rangeNote that the ResultSetMetaData seems to indicate to ij that the column width of  BUG  is four instead of       ',0
'In soft upgrade mode  the metadata queries do not get compiled in SYS schema  This will cause problems in future releases of Derby     EmbedDatabaseMetaData implements metadata queries  The implementation of metadata queries in EmbedDatabaseMetaData checks if we are in soft upgrade mode  getPreparedQuery   has following code if  notInSoftUpgradeMode    s   getPreparedQueryUsingSystemTables queryName  net  else   try     Can t use stored prepared statements because we are in soft upgrade   mode and hence need to get metadata sql from metadata properties file   or metadata net properties String queryText   getQueryFromDescription queryName  net   s   getEmbedConnection   prepareMetaDataStatement queryText     catch  Throwable t    throw handleException t      So  when running in soft upgrade mode  we do not go through SYSSTATEMENT but this will cause the metadata query to run in whatever the current schema may be rather than in SYS schema  This is not a problem in Derby      release because during soft upgarde  the collation will always be UCS BASIC and hence collation mismatch can t happen But in Derby       a user can create a database with territory based collation  When such a database will be in soft upgrade mode for say Derby       the metadata queries will run into problem if they are run in a user schema  This is because in soft upgrade mode  we do not go through SYSSTATEMENTS and instead compile the metadata queries in current schema  If the current schema is user schema  then character string literals in metadata queries will get the collation type of territory based and when compared with character string colunms from SYS tables with collation type of UCS BASIC  we will end up getting compilation error for the metadata queries  So  before the next release  we will have to fix this problem  One solution may be to somehow make the current compilation schema as SYS when running the metadata queries in soft upgrade mode    ',0
'BatchUpdateTest testAssociatedParams test fails with collation with exception  Java exception   ASSERT FAILED type of inserted column      org apache derby iapi types CollatorSQLChartype of template column      org apache derby iapi types SQLChar     BatchUpdateTest testAssociatedParams test fails with collation with exception  java sql SQLException  Java exception   ASSERT FAILED type of inserted column              org apache derby iapi types CollatorSQLChartype of template column              org apache derby iapi types SQLChar  org apache derby shared common sanity AssertFailure  Full trace below Java exception   ASSERT FAILED type of inserted column              org apache derby iapi types CollatorSQLChartype of template column              org apache derby iapi types SQLChar  org apache derby shared common sanity AssertFailure  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache derbyTesting functionTests tests jdbcapi BatchUpdateTest testAssociatedParams BatchUpdateTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org eclipse jdt internal junit runner junit  JUnit TestReference run JUnit TestReference java      at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java     Caused by  org apache derby shared common sanity AssertFailure  ASSERT FAILED type of inserted column              org apache derby iapi types CollatorSQLChartype of template column              org apache derby iapi types SQLChar at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby impl store access btree OpenBTree isIndexableRowConsistent OpenBTree java      at org apache derby impl store access btree BTreeController doIns BTreeController java      at org apache derby impl store access btree BTreeController insert BTreeController java       at org apache derby impl store access btree index B IController insert B IController java      at org apache derby impl sql execute IndexChanger insertAndCheckDups IndexChanger java      at org apache derby impl sql execute IndexChanger doInsert IndexChanger java      at org apache derby impl sql execute IndexChanger insert IndexChanger java      at org apache derby impl sql execute IndexSetChanger insert IndexSetChanger java      at org apache derby impl sql execute RowChangerImpl insertRow RowChangerImpl java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              more   ',0
'ERROR   ZA  creating table with check constraint with literal comparison    I cannot create the following table with a collated database  EMPNAME should be TERRITORY BASED collation I think  but perhaps is not initialized in time for the check constraint processing ij gt  connect  jdbc derby nordb create true territory no NO collation TERRITORY BASED  ij gt  CREATE TABLE STAFF   EMPNUM CHAR    NOT NULL CONSTRAINT STAFF  PK PRIMARY KEY  EMPNAME CHAR      GRADE DECIMAL     CITY CHAR      CONSTRAINT STAFF  EMPNAME CHECK  EMPNAME NOT LIKE  T     ERROR   ZA   Operand of LIKE predicate with type CHAR     and collation UCS BASIC is not compatable with LIKE pattern operand with type CHAR    and collation TERRITORY BASED    ',0
'TriggerTest testTypesINActionStatement fails with  ASSERT FAILED col  getClass    class org apache derby iapi types SQLClob  expected to be the same as col  getClass    class org apache derby iapi types CollatorSQLClob     I have not yet been able to create a stand alone repro but the test TriggerTest testTypesINActionStatement fails with  ASSERT FAILED col  getClass    class org apache derby iapi types SQLClob  expected to be the same as col  getClass    class org apache derby iapi types CollatorSQLClob Failed statement is  sqlMain    SELECT ID  XMLSERIALIZE V AS CLOB        XMLSERIALIZE V AS CLOB  FROM T MAIN ORDER BY       testTypesInActionStatement org apache derbyTesting functionTests tests lang TriggerTest java sql SQLException  Java exception   ASSERT FAILED col  getClass    class org apache derby iapi types SQLClob  expected to be the same as col  getClass    class org apache derby iapi types CollatorSQLClob   org apache derby shared common sanity AssertFailure   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement executeQuery EmbedStatement java      at org apache derbyTesting functionTests tests lang TriggerTest actionTypesCompareMainToAction TriggerTest java      at org apache derbyTesting functionTests tests lang TriggerTest actionTypesInsertTest TriggerTest java      at org apache derbyTesting functionTests tests lang TriggerTest actionTypeTest TriggerTest java      at org apache derbyTesting functionTests tests lang TriggerTest testTypesInActionStatement TriggerTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby shared common sanity AssertFailure  ASSERT FAILED col  getClass    class org apache derby iapi types SQLClob  expected to be the same as col  getClass    class org apache derby iapi types CollatorSQLClob  at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby impl store access sort MergeSort checkColumnTypes MergeSort java      at org apache derby impl store access sort MergeInserter insert MergeInserter java     at org apache derby impl sql execute SortResultSet loadSorter SortResultSet java      at org apache derby impl sql execute SortResultSet openCore SortResultSet java      at org apache derby impl sql execute BasicNoPutResultSetImpl open BasicNoPutResultSetImpl java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              more   ',0
'rs moveToInsertRow   causes loss of connection with TERRITORY BASED collation     In the attached test case  rs moveToInsertRow   causes loss of the connection with a TERRITORY BASED collation database  With UCS BASIC it is fine    ',0
'The ResultSet returned by DatabaseMetaData getFunctions   does not contain a required column named FUNCTION TYPE     The FUNCTION TYPE column  sandwiched between REMARKS and SPECIFIC NAME  is supposed to describe the return type of the function    ',0
'Query involving CASE statement significantly slower in          than in             A select of a CASE statement that performed acceptably in          is very slow in          the first time it is executed The following example ij script ELAPSEDTIME ON CREATE table test  id integer  CREATE table test  id varchar      SELECT CASE WHEN t id     THEN  a  WHEN t id     THEN  b  WHEN t id     THEN  c  WHEN t id     THEN  d  WHEN t id     THEN  e  WHEN t id     THEN  f  WHEN t id     THEN  g  WHEN t id     THEN  h  WHEN t id      THEN  i  WHEN t id      THEN  j   WHEN t id      THEN  k  WHEN t id      THEN  l  WHEN t id      THEN  m   WHEN t id      THEN  n  WHEN t id      THEN  o  WHEN t id      THEN  p  WHEN t id      THEN  q  WHEN t id      THEN  r  WHEN t id      THEN  s  ELSE  SELECT t  id FROM test  t    ENDFROM test  t When run on          the select results in ELAPSED TIME       milliseconds When run on          the select results in ELAPSED TIME         milliseconds    ',0
'Insert into table with constraints fails if the table name is  indicator   or any other SQL keyword     I ve runned the testcase against both           latest stable  and          alpha  trunk  and results are the same Sysinfo output                                     Java                             Java                         Java  Sun Microsystems Inc                              Java  C  java jre                        Java  D  dev workspaces DerbyQuery bin D  dev src db derby trunk          jars sane derbytools jar D  dev src db derby trunk          jars sane derby jar D  dev src db derby trunk          jars sane derbyclient jar D  dev src db derby trunk          jars sane derbyLocale cs jar D  dev src db derby trunk          jars sane derbyLocale de DE jar D  dev src db derby trunk          jars sane derbyLocale es jar D  dev src db derby trunk          jars sane derbyLocale fr jar D  dev src db derby trunk          jars sane derbyLocale hu jar D  dev src db derby trunk          jars sane derbyLocale it jar D  dev src db derby trunk          jars sane derbyLocale ja JP jar D  dev src db derby trunk          jars sane derbyLocale ko KR jar D  dev src db derby trunk          jars sane derbyLocale pl jar D  dev src db derby trunk          jars sane derbyLocale pt BR jar D  dev src db derby trunk          jars sane derbyLocale zh CN jar D  dev src db derby trunk          jars sane derbyLocale zh TW jar D  dev src db derby trunk          jars sane derbynet jar D  dev src db derby trunk          jars sane derbyrun jar          Windows XP                       x                                               Java  dmitrygusev                                                   Java  C  Documents and Settings dmitrygusev                                   Java  D  dev workspaces DerbyQueryjava specification name  Java Platform API Specificationjava specification version                                Derby         JRE   JDBC  J SE       JDBC         D  dev src db derby trunk          jars sane derby jar               alpha             D  dev src db derby trunk          jars sane derbytools jar               alpha             D  dev src db derby trunk          jars sane derbynet jar               alpha             D  dev src db derby trunk          jars sane derbyclient jar               alpha                                                                                                                                                                                        ru RU                                                               cs                           alpha                                                                 de DE                           alpha                                                                 es                           alpha                                                                 fr                           alpha                                                                 hu                           alpha                                                                 it                           alpha                                                                 ja JP                           alpha                                                                 ko KR                           alpha                                                                 pl                           alpha                                                                 pt BR                           alpha                                                                 ru                           alpha                                                                 zh CN                           alpha                                                                 zh TW                           alpha                                                              How to reproduce the bug    Create a table with name  indicator   or any other SQL keyword as the name  i e   select   and one field of any type  for instance CHAR     like this CREATE TABLE   indicator   c CHAR    DEFAULT  N     Add constraint to the field ALTER TABLE    indicator    ADD CONSTRAINT   MY CONSTRAINT   CHECK   c IN   Y   N       Try to insert any row to that table INSERT INTO   indicator   VALUES   N  The INSERT statement will throw an exception java sql SQLException  Java exception     java util EmptyStackException  Also  see the program  Main java  attached to this issue and derby log contained the exception s stacktace output I ve also created and attached the patch that may fix this issue  Hope this help to improve Derby    ',0
'Index split deadlock    After doing dome research on the mailing list  it appears that the index split deadlock is a known behaviour  so I will start by describing the theoretical problem first and then follow with the details of my test case If you have concurrent select and insert transactions on the same table  the observed locking behaviour is as follows  the select transaction acquires an S lock on the root block of the index and then waits for an S lock on some uncommitted row of the insert transaction the insert transaction acquires X locks on the inserted records and if it needs to do an index split creates a sub transaction that tries to acquire an X lock on the root block of the indexIn summary  INDEX LOCK followed by ROW LOCK   ROW LOCK followed by INDEX LOCK   deadlockIn the case of my project this is an important issue  lack of concurrency after being forced to use table level locking  and I would like to contribute to the project and fix this issue  if possible   I was wondering if someone that knows the code can give me a few pointers on the implications of this issue  Is this a limitation of the top down algorithm used  Would fixing it require to use a bottom up algorithm for better concurrency  which is certainly non trivial   Trying to break the circular locking above  I would first question why does the select transaction need to acquire  and hold  a lock on the root block of the index  Would it be possible to ensure the consistency of the select without locking the index The attached test  InsertSelectDeadlock java  tries to simulate a typical data collection application  it consists of   an insert thread that inserts records in batch a select thread that  processes  the records inserted by the other thread   select   from table where id  gt    The derby log provides detail about the deadlock trace and stacktraces during deadlock txt shows that the inser thread is doing an index split The test was run on          and          with identical behaviour Thanks Bogdan Calmac    ',0
'getBinaryStream returns incorrect result  truncated value  if underlying blob is deleted    If getBinaryStream is reading a value  READ UNCOMMITTED  and the row is deleted by another connection  a truncated value will be returned without error  I believe instead either the whole value or an IOException should occur With      and higher with the repro attahed we get  gt  java TruncatedBlobEmbedded Read       bytes  rows in BLOBCLOBWith     Embedded Read       bytes  OK   rows in BLOBCLOB Note network server returns the full value for both      and      but gives a lock timeout for        I will file a separate issue for that    ',0
'iepnegativetests ES diff fails with J ME Foundation    Diff file derbyall i  nTest iepnegativetests ES diff             Start  iepnegativetests ES jdkJ ME Foundation Specification v    derbyall i  nTest                          a      gt  ij gt    export table is null gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP   null   extinout t  dat    gt  null  null  null    gt  ERROR XIE    Nombre de entidad nulo   a      gt  ij gt    export query is null  gt  call SYSCS UTIL SYSCS EXPORT QUERY null  gt   extinout t  dat    null  null  null    gt  ERROR XIE    Nombre de entidad nulo    del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   XXXX    T      extinout t  dat      a   gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   XXXX    T      extinout t  dat       del lt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a   gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a   gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a   gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a   gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a   gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a    gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat      a    gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat        del lt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       a    gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat        del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       a    gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat        del lt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE  IEP    T      extinout t  dat       a    gt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE  IEP    T      extinout t  dat        del lt  call SYSCS UTIL SYSCS IMPORT TABLE  IEP    T      extin nodir t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE  IEP    T      extin nodir t  dat        del lt  ERROR XIE    Archivo de datos no encontrado  extin nodir t  dat   a    gt  ERROR XIE    Archivo de datos no encontrado  extin nodir t  dat    del lt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    NOTABLE     extinout t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    NOTABLE     extinout t  dat        del lt  call SYSCS UTIL SYSCS IMPORT TABLE   XXXX    T      extinout t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE   XXXX    T      extinout t  dat        del lt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat       a    gt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat        del lt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat        del lt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat       a    gt  ij gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat        del lt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE   IEP    T      extinout t  dat        del lt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t  dat       a    gt  ij gt  call SYSCS UTIL SYSCS EXPORT TABLE   IEP    T      extinout t    dat        del lt   extinout t  dat       a    gt   extinout t    dat        del lt   extinout t  dat       a    gt   extinout t    dat        del lt   extinout t  dat       a    gt   extinout t    dat        del lt   extinout t  dat       a    gt   extinout t    dat        del lt   extinout t  dat       a    gt   extinout t    dat        del lt  call SYSCS UTIL SYSCS IMPORT TABLE   SYS    SYSTABLES     extinout t  dat       a    gt  call SYSCS UTIL SYSCS IMPORT TABLE   SYS    SYSTABLES     extinout t    dat    Test Failed  End  iepnegativetests ES jdkJ ME Foundation Specification v    derbyall i  nTest                           ',0
'CollationTest fails with  Unexpected row count  expected  but was   when Xalan     jars are in classpath    When I have the Xalan jars in the classpath  testEnglishCollation    testNorwayCollation   and testPolishCollation   fail with this stack trace    testEnglishCollation org apache derbyTesting functionTests tests lang CollationTest junit framework AssertionFailedError  Unexpected row count  expected  lt   gt  but was  lt   gt  at org apache derbyTesting junit JDBC assertDrainResults JDBC java      at org apache derbyTesting junit JDBC assertEmpty JDBC java      at org apache derbyTesting functionTests tests lang CollationTest checkLangBasedQuery CollationTest java       at org apache derbyTesting functionTests tests lang CollationTest commonTestingForTerritoryBasedDB CollationTest java       at org apache derbyTesting functionTests tests lang CollationTest testEnglishCollation CollationTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    If I remove the Xalan jars from the classpath  the test runs cleanly    ',0
'java lang ClassCastException returning null from a case statement  in subquery    The following query returning NULL date from a case statement in a subquery causees a ClassCastException in      The query works fine in     ij gt  create table t  d date  vc varchar        rows inserted updated deletedij gt  insert into t values CURRENT DATE   hello     row inserted updated deletedij gt  SELECT d from t where d    SELECT CASE WHEN       THEN CURRENT DATE ELSE NULL END from t  D                      row selectedij gt  SELECT d from t where d    SELECT CASE WHEN       THEN CURRENT DATE ELSE NULL END from t  D          ERROR        The exception  java lang ClassCastException  org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue  was thrown while evaluating an expression java sql SQLException  The exception  java lang ClassCastException  org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedResultSet closeOnTransactionError EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil DisplayResults JDBCDisplayUtil java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java    Caused by  java sql SQLException  Java exception   org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue  java lang ClassCastException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java             moreCaused by  java lang ClassCastException  org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue at org apache derby exe ac        x    xaec x    x          d   g  Unknown Source  at org apache derby exe ac        x    xaec x    x          d   e  Unknown Source  at org apache derby impl services reflect DirectCall invoke ReflectGeneratedClass java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow BasicNoPutResultSetImpl java      at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java             moreERROR XJ     Java exception   org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue  java lang ClassCastException  java sql SQLException  Java exception   org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue  java lang ClassCastException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedResultSet closeOnTransactionError EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil indent DisplayResults JDBCDisplayUtil java      at org apache derby tools JDBCDisplayUtil DisplayResults JDBCDisplayUtil java      at org apache derby impl tools ij utilMain displayResult utilMain java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main   main Main   java     at org apache derby tools ij main ij java    Caused by  java lang ClassCastException  org apache derby iapi types SQLChar incompatible with org apache derby iapi types DateTimeDataValue at org apache derby exe ac        x    xaec x    x          d   g  Unknown Source  at org apache derby exe ac        x    xaec x    x          d   e  Unknown Source  at org apache derby impl services reflect DirectCall invoke ReflectGeneratedClass java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow BasicNoPutResultSetImpl java      at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java             more   ',0
'select query results in nullpointer exception in skipScan      The following error was repeatedly thrown when we tried to run a select query via JDBC  Strangely  the exact same select query did not trigger any error when run from the command line console  After we added an index  the error went away completely  java lang NullPointerException at org apache derby impl sql execute NoPutResultSetImpl skipScan Unknown Source  at org apache derby impl sql execute TableScanResultSet openCore Unknown Source  at org apache derby impl sql execute IndexRowToBaseRowResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openRight Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute SortResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derby impl drda DRDAStatement execute Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source    ',0
' Schema  does not exist  when constraint used in table definition    https   issues apache org jira browse DERBY     action         In the response to my original comment post  which you can find via the permalink above  I was encouraged to file this as a new issue verified this back to          with the following ij script connect  jdbc derby wombat create true user blogs  CREATE TABLE BLOGSCOM BLOGSUSERS PK INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY username VARCHAR     NOT NULL CONSTRAINT BLOGSCOMBLOGSUSERS UNIQUE username UNIQUE CONSTRAINT BLOGSCOMBLOGS USERS PASSWORD username CHECK LENGTH username  gt    password VARCHAR         NOT NULL   PRIMARY KEY PK      ',0
'lang synonym sql fails with weme     with junit framework ComparisonFailure  Output at line     expected  but was     synonym org apache derbyTesting functionTests tests lang LangScripts  failed junit framework ComparisonFailure  Output at line     expected  lt         gt  but was  lt         gt  at junit framework Assert assertEquals Assert java     at org apache derbyTesting functionTests util CanonTestCase compareCanon CanonTestCase java      at org apache derbyTesting functionTests util ScriptTestCase runTest ScriptTestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at TimeRunner main TimeRunner java       ',0
'testImportExportProcedureNegative org apache derbyTesting functionTests tests tools ImportExportProcedureTest junit framework ComparisonFailure  Unexpected SQL state  expected  but was        testImportExportProcedureNegative org apache derbyTesting functionTests tests tools ImportExportProcedureTest junit framework ComparisonFailure  Unexpected SQL state  expected  lt       gt  but was  lt XIE S gt  at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java      at org apache derbyTesting functionTests tests tools ImportExportProcedureTest testImportExportProcedureNegative ImportExportProcedureTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  The export operation was not performed  because the specified output file  extinout t  dat  already exists  Export processing will not overwrite an existing file  even if the process has permissions to write to that file  due to security concerns  and to avoid accidental file damage  Please either change the output file name in the export procedure arguments to specify a file which does not exist  or delete the existing file  then retry the export operation  at org apache derby client am SQLExceptionFactory getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am PreparedStatement execute Unknown Source  at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java             moreCaused by  org apache derby client am SqlException  The export operation was not performed  because the specified output file  extinout t  dat  already exists  Export processing will not overwrite an existing file  even if the process has permissions to write to that file  due to security concerns  and to avoid accidental file damage  Please either change the output file name in the export procedure arguments to specify a file which does not exist  or delete the existing file  then retry the export operation  at org apache derby client am Statement completeExecute Unknown Source  at org apache derby client net NetStatementReply parseEXCSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readExecuteCall Unknown Source  at org apache derby client net StatementReply readExecuteCall Unknown Source  at org apache derby client net NetStatement readExecuteCall  Unknown Source  at org apache derby client am Statement readExecuteCall Unknown Source  at org apache derby client am PreparedStatement flowExecute Unknown Source  at org apache derby client am PreparedStatement executeX Unknown Source         more   ',0
'Trying to reconnect with derby client after bringing server down throws SQL Exception       rather than   XXX exception    This issue was discussed in DERBY      because the case where the server is brought down and an application tries to reconnect does not throw a SQLNonTransientException  Discussion is still underway about whether   XXX exceptions should be SQLNonTransientExceptions  but at least for this case changing the exception to       per Knut s suggestion should correct the problem for this case  See https   issues apache org jira browse DERBY     action         Below is current stack and test case Apache Derbygot connection now sleepnow try to use the connection after you killed the nSException in thread  main  java sql SQLException  A communications error has been detected  Software caused connection abort  recv failed at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source at org apache derby client am SqlException getSQLException Unknown Source at org apache derby client am Connection prepareStatement Unknown Source at org apache derby client am LogicalConnection prepareStatement Unknown Source at DerbyClientNonXA main DerbyClientNonXA java    Caused by  org apache derby client am DisconnectException  A communications error has been detected  Software caused connection abort  recv failed at org apache derby client net NetAgent throwCommunicationsFailure Unknown Source at org apache derby client net Reply fill Unknown Source at org apache derby client net Reply ensureALayerDataInBuffer Unknown Source at org apache derby client net Reply readDssHeader Unknown Source at org apache derby client net Reply startSameIdChainParse Unknown Source at org apache derby client net NetStatementReply readPrepareDescribeOutput Unknown Source at org apache derby client net StatementReply readPrepareDescribeOutput Unknown Source at org apache derby client net NetStatement readPrepareDescribeOutput  Unknown Source at org apache derby client am Statement readPrepareDescribeOutput Unknown Source at org apache derby client am PreparedStatement readPrepareDescribeInputOutput Unknown Source at org apache derby client am PreparedStatement flowPrepareDescribeInputOutput Unknown Source at org apache derby client am PreparedStatement prepare Unknown Source at org apache derby client am Connection prepareStatementX Unknown Source       moreCaused by  java net SocketException  Software caused connection abort  recv failedat java net SocketInputStream read SocketInputStream java            moreimport java sql Connection import java sql DatabaseMetaData import java sql PreparedStatement import java sql SQLException import java sql Statement import javax sql PooledConnection public class DerbyClientNonXA public static void main String args    throws Exception org apache derby jdbc ClientConnectionPoolDataSource   ds   new org apache derby jdbc ClientConnectionPoolDataSource     Connection conn   null ds setDatabaseName  e   temp  sampl    create true   PooledConnection pooledCon   ds getPooledConnection   conn   pooledCon getConnection   DatabaseMetaData md   conn getMetaData   System out println md getDatabaseProductVersion    System out println md getDatabaseProductName    System out println  got connection now sleep  Bring down network server    Statement st   null PreparedStatement ps    null st   conn createStatement   try st executeUpdate  drop table TAB     catch  SQLException x  System out println  no table exists    Thread sleep        System out println  now try to use the connection after you killed the nS   ps    conn prepareStatement  CREATE TABLE TAB  COL  INT NOT NULL    ps  executeUpdate   conn commit   System out println  done        ',0
'Intermittent transaction failure caused by internal duplicate savepoint name for triggers    While running our app overnight  performing some intensive database operations  primarily deletes   we experienced a transaction failure  with error message  A SAVEPOINT with the passed name already exists in the current transaction   This failure appears to be very intermittent  as I ve run the same operation successfully for hours and hours without failure  Some more information    I see that there are four JIRA issues which report the same message  DERBY       DERBY       DERBY       DERBY        I am not sure to what extent if any  the problem I experienced is related to these issues    At least three of the above JIRA issues are related to triggers  Our transaction failure occurred while performing a delete in a table which has delete triggers    We aren t using savepoints explicitly  Of course  it can be seen in the stack trace that the trigger operation is setting a savepoint    One of the JIRA issues mentions exceeding maximum depth of nested triggers  Not sure what a nested trigger is  but the trigger we are performing should not  in theory  cause another trigger event    Here s the stack trace Caused by  java sql SQLException  A SAVEPOINT with the passed name already exists in the current transaction  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeUpdate Unknown Source  at com referentia sdf monitor samplebase derby DerbySampleBase   perform DerbySampleBase java      at com referentia sdf monitor samplebase derby DerbySampleBase performInTransaction DerbySampleBase java             moreCaused by  java sql SQLException  A SAVEPOINT with the passed name already exists in the current transaction  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  ERROR  B     A SAVEPOINT with the passed name already exists in the current transaction  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store raw xact Xact setSavePoint Unknown Source  at org apache derby impl store access RAMTransaction setSavePoint Unknown Source  at org apache derby impl sql conn GenericStatementContext setSavePoint Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl sql execute GenericTriggerExecutor executeSPS Unknown Source  at org apache derby impl sql execute RowTriggerExecutor fireTrigger Unknown Source  at org apache derby impl sql execute TriggerEventActivator notifyEvent Unknown Source  at org apache derby impl sql execute DeleteResultSet fireAfterTriggers Unknown Source  at org apache derby impl sql execute DeleteResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         more   Here are the relevant tables and triggers  We have different tables for different  sample  data types in our application  currently int  long  float  double  Boolean  string   I have shown the int sample table  the other tables are identical but have a different data type for the value field  Sample records are first class  time records are second class   they only exist to support sample records  When there are no remaining sample records for a given time record  the time record can be removed  It is the job of the trigger to perform this cleanup  when a record is deleted from any of the sample tables  the time record corresponding to   sample fk time id is deleted only if there are no remaining records in any of the sample tables which have the same fk time id  So although there are cascading deletes  deleting a time record deletes all of its samples   the trigger should not recurse because the trigger only deletes when there are no associated records create table time   id int not null generated always as identity  time timestamp not null  constraint time pk primary key  id   constraint time unique unique  time   create table int sample   fk band id int not null  fk time id int not null  value int not null  constraint int sample pk primary key  fk band id  fk time id   constraint int sample fk band foreign key  fk band id  references band  id  on delete cascade  constraint int sample fk time foreign key  fk time id  references time  id  on delete cascade  create trigger cascade delete unused time for int sample trigger after delete on int sample referencing old as oldrow for each row delete from time where  time id   oldrow fk time id and id not in  select fk time id from int sample   and id not in  select fk time id from long sample   and id not in  select fk time id from float sample   and id not in  select fk time id from double sample   and id not in  select fk time id from boolean sample   and id not in  select fk time id from string sample     Invocation  This is very rough pseudocode focusing on the core logic  In reality  there s a lot more code  but I m doing the usual stuff  such as using prepared statements  and closing all resources when done  The key thing is that I m using two statements in a nested fashion  in the outer statement  I iterate over records in the time table  and in the inner loop I use a second statement to delete records in one of the sample tables  I can provide the actual code if desired deleteSamples int bandId  String sampleTable  Object someQueryCriteria    within transaction   create stmt  iterating over time ids in time table  restricted by someQueryCriteria  for  time id in stmt     PreparedStatement stmt    conn prepareStatement String format   delete from  s where fk band id     and fk time id       sampleTable    set stmt  parameters and executeUpdate          ',0
'LOB locks are not released after free       When getBlob getClob is called on the ResultSet  the current row islocked if the JDBC driver does not cache the entire LOB value inmemory  This is done to prevent the Blob Clob object from beingchanged  Until now  this lock has been held to the end of thetransaction JDBC  introduced free   methods for the Blob Clob class  The lockingshould be changed so that the locks is releases when the Blob Clobobject is freed    ',0
'java lang NumberFormatException in test lang TableFunctionTest on specific machines  Win      Vista     This failure is gleaned from the nightly tests posted to the list  The test started failing on September    The stack is    testTableFunctions org apache derbyTesting functionTests tests lang TableFunctionTest java lang NumberFormatException  For input string          at sun misc FloatingDecimal readJavaFormatString FloatingDecimal java       at java lang Double parseDouble Double java      at org apache derbyTesting functionTests tests lang TableFunctionTest readDoubleTag TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest vtiCosting TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest testTableFunctions TableFunctionTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       ',0
'On client  Clob free   does not release locators     On client  Clob free   does not call the stored procedure to release the locator associated with the Clob  Hence  server side Clob objects are not freed until the transaction terminates    ',0
'totalSpace not properly initialized in AllocPage    There are some problems with the initialization of totalSpace in AllocPage  It is initialized in StoredPage initSpace   which is again called from StoredPage usePageBuffer    and it is set to the value returned from AllocPage getMaxFreeSpace    The problems are     The calculation in getMaxFreeSpace   uses borrowedSpace  but when createIdentity   is called on an AllocPage  borrowedSpace has not been initialized when getMaxFreeSpace   is called and the calculated size is wrong     When a page object is reused  usePageBuffer   is only called if a new byte array must be allocated  because the new page has a different size than the old page   This means that the totalSize field gets the same value as in the old page if their sizes are equal  which is not necessarily correct    ',0
'ComparisonFailure in synonym org apache derbyTesting functionTests tests lang LangScripts     Since r        synonym org apache derbyTesting functionTests tests lang LangScripts   has failed with  junit framework ComparisonFailure  Output at line    expected  lt    gt  but was  lt         When we decide to convert this test to junit test  the converted tests can       gt   lt method gt org apache derbyTesting functionTests tests lang LangScripts lt  method gt  lt signature gt Output at line    expected  lt    gt  but was  lt         When we decide to convert this test to junit test  the converted tests can       gt  lt  signature gt    ',0
'IllegalArgumentException  Malformed  uxxxx encoding while trying to find Xalan version running tests via ant    Following stack trace after executing ant  propertyfile ant properties junit all codeline jars      junit      Unexpected exception while trying to find Xalan version       junit      java lang IllegalArgumentException  Malformed  uxxxx encoding       junit      at java util Properties loadConvert Properties java           junit      at java util Properties load Properties java           junit      at org apache derbyTesting junit XML checkXalanVersion XML java           junit      at org apache derbyTesting junit XML  lt clinit gt  XML java        ',0
'AccessControlException when running junit tests under the ant harness in ant          The following AccessControlException occurs on junit tests run under the ant harness if the ant version is             junit      Running org apache derbyTesting functionTests tests jdbcapi AutoloadTest      junit      Tests run     Failures     Errors     Time elapsed        sec      junit      Exception in thread  main  java security AccessControlException  access denied  java io FilePermission  Users rh       derby mainline trunk junitvmwatcher          properties write       junit      at java security AccessControlContext checkPermission AccessControlContext java           junit      at java security AccessController checkPermission AccessController java           junit      at java lang SecurityManager checkPermission SecurityManager java           junit      at java lang SecurityManager checkWrite SecurityManager java           junit      at java io FileOutputStream  lt init gt  FileOutputStream java           junit      at java io FileOutputStream  lt init gt  FileOutputStream java          junit      at java io FileWriter  lt init gt  FileWriter java          junit      at org apache tools ant taskdefs optional junit JUnitTestRunner registerNonCrash JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner main JUnitTestRunner java           junit      Running org apache derbyTesting functionTests tests jdbcapi AutoloadTest      junit      Tests run     Failures     Errors     Time elapsed    secI haven t looked at the ant source  but here is my theory about what is going on    Ant       is trying to write a file to the directory where the ant script lives   The write is not wrapped in a privileged block   So all code domains above it on the stack need to be granted write permission on the directory where the ant script livesI will attach a modified version of derby tests policy which allows me to start up the tests without tripping across this security exception    ',1
'SYSCS GET USER ACCESS incorrectly treats the passed in user name as a SQL identifier and thus can reports the wrong user information    VALUES SYSCS GET USER ACCESS CURRENT USER  will report the wrong user information if the user name needs to be a delimited identifier when used in a SQL statement such as GRANT  E g  user fred derby com      etc Passing the user name as a VARCHAR also returns the wrong user for such user names    ',1
'NetworkServerControlApiTest fails with java security AccessControlException if not run as first test    There appears to be a problem loading the test specific policy file for NetworkServerControlApiTest if it is not run as the first test in the suite Failure in the derby log is Trace directory changed to C  test system access denied  java io FilePermission C  test system Server  trace write java security AccessControlException  access denied  java io FilePermission C  test system Server  trace write  at java security AccessControlContext checkPermission AccessControlContext java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkWrite SecurityManager java      at java io FileOutputStream  lt init gt  FileOutputStream java      at java io FileOutputStream  lt init gt  FileOutputStream java     at java io FileWriter  lt init gt  FileWriter java     at org apache derby impl drda DssTrace   run DssTrace java      at java security AccessController doPrivileged Native Method  at org apache derby impl drda DssTrace startComBufferTrace DssTrace java      at org apache derby impl drda Session initTrace Session java      at org apache derby impl drda Session setTraceOn Session java      at org apache derby impl drda NetworkServerControlImpl setTrace NetworkServerControlImpl java       at org apache derby impl drda NetworkServerControlImpl processCommands NetworkServerControlImpl java       at org apache derby impl drda DRDAConnThread sessionInitialState DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java        ',1
'NullPointerException on INSERT after ALTER TABLE     DROP COLUMN    ij version     ij gt  connect  jdbc derby bugdb create true  ij gt  create table t   x varchar      y varchar      id int primary key generated by default as identity    rows inserted updated deletedij gt  alter table t drop column y   rows inserted updated deletedij gt  insert into t values  a  ERROR XJ     Java exception     java lang NullPointerException  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source  at org apache derby iapi tools run main Unknown Source Caused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java lang NullPointerException at org apache derby impl sql compile ResultColumn columnTypeAndLengthMatch Unknown Source  at org apache derby impl sql compile ResultColumnList columnTypesAndLengthsMatch Unknown Source  at org apache derby impl sql compile InsertNode bindStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source         more   ',0
'DataSourceTest uses ConnectionEventListener but never verifies that events are getting fired    Derby has a junit test called DataSourceTest in jdbcapi package  This test registers ConnectionEventListener for various Connection objects but never verifies that events from those Connection objects are getting delivered to the listeners  Prior to this test s conversion to junit  there were System out println in the test but since this test is not cannon based anymore  those printlns have been commented out  I will soon submit a patch where this test will have asserts to make sure that Connection events are getting fired    ',0
'LOCALIZEDDISPLAY of CURRENT TIMESTAMP returns only the TIME    In IJ   LOCALIZEDDISPLAY ON causes VALUES CURRENT TIMESTAMP to display on the TIMEij gt  values current timestamp                                                     row selectedij gt  localizeddisplay on ij gt  values current timestamp                          AM PST  row selected   ',0
'Using setQueryTimeout will leak sections    The implementation of setQueryTimeout relies on NetStatementReply writeSetSpecialRegister   which will allocate a dynamic section when called  No reference to this Section object is kept  and so Section free   never gets called on it  Executing the same statment repeatedly with a query timeout set results in the client driver throwing an exception because the number of Sections exceeding          ',0
' AccessControlException  access denied  java io FilePermission C       file   log read   in ErrorStreamTest     Seen on Windows only See e g  http   dbtg thresher com derby test Daily jvm    testing Limited testSummary        html   vista  w     suitesAll fail                                                                 testFile org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system file   log read    testWrongFile org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system foo file   log read    testFileOverMethod org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system file   log read    testFileOverField org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system file   log read    testFileOverMethodAndField org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system file    log read    testDefault org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  File C  cludev jagtmp autoderbyN regression suitesAll    log system derby log could not be deleted   testMethod org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  assertNotEmpty failed C  cludev jagtmp autoderbyN regression suitesAll    log system method   logsuitesAll fail                                                                 testFile org apache derbyTesting functionTests tests engine ErrorStreamTest java security AccessControlException  access denied  java io FilePermission C  cludev jagtmp autoderbyN regression suitesAll    log system file   log read  at java security AccessControlContext checkPermission AccessControlContext java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkRead SecurityManager java      at java io File exists File java      at java io Win  FileSystem canonicalize Win  FileSystem java      at java io File getCanonicalPath File java      at org apache derbyTesting functionTests tests engine ErrorStreamTest testFile ErrorStreamTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java         ',1
'Optimizer can see negative cost estimates when pulling Optimizables from the join order     When iterating through join order permutations for a query the optimizer places  Optimizables   FromTables  into a join order  estimates the cost  then  pulls  Optimizables out of the join order and re places them in different positions  For details see  http   wiki apache org db derby JoinOrderPermutationsAs optimizables are added to the join order the optimizer keeps track of the accumulated cost estimate for the join order  Then when an Optimizable is removed   pulled   from the join order  the optimizer substracts that Optimizable s cost from the total accumulated cost In certain cases  esp  with very large queries  it s possible that the cost for some Optimizable OPT A is so large that adding it to the accumulated cost of the join order leads to loss of the previous sum  This happens due to normal Java addition of double values  see  doubleAdd java  attached As an example  assume our current join order is    OPT    OPT        and that the estimated costs for OPT   and OPT   are     and      respectively  The accumulated cost for OPT   and OPT   is then                   Then assume we place OPT A into the final position in the join order    OPT    OPT    OPT A  If the cost of OPT A is something that is orders of magnitude larger than       then by adding it to      we will effectively  lose  the       Let s say the cost of OPT A is estimated to be     E    which is actually possible  esp  as a result of DERBY        The size of OPT A s cost makes the cost of OPT     OPT   insignificant when using Java doubles  see attached doubleAdd java              E         E  So the total accumulated cost for the join order is now     E    Later  when we go to pull OPT A from the join order  we ll subtract its cost from the accumulated cost  yielding      E         E      Notice how the accumulated cost  which is supposed to represent the cost of OPT   plus the cost of OPT    is now ZERO  And our join order goes back to    OPT    OPT        Next we pull OPT   from the join order  which means we have to subtract it s cost from the accumulated cost                So we end up with a negative accumulated cost  which is WRONG   Actually  the ZERO accumulated cost in the previous step was wrong  this is just a side effect  As it turns out  there is code in OptimizerImpl that tries to account for negative costs when the negative value comes from normal imprecise arithmetic  In particular we see the following in the code that pulls Optimizables  double newCost   currentCost getEstimatedCost    if  pullCostEstimate    null    pullCost   pullCostEstimate getEstimatedCost    newCost    pullCost        It s possible for newCost to go negative here due to    loss of precision     if  newCost  lt       newCost             This code hides the error mentioned above because when it sees        it assumes that the negative stems from normal loss of precision  So the cost for the plan is incorrectly set to      which makes it cheaper than any other plan thus far  and probably cheaper than anything to come   and therefore the optimizer will probably choose the wrong plan I think the check for negative newCost is only valid if the join position that we re pulling is   i e  if we just pulled the first optimizable in the join order  In that case the accumulated cost should be zero  so checking for a negative value and setting it to zero is fine we re just accounting for the loss of precision that is mentioned in the current code comments Note that the same issue also exists for  sort avoidance costs   but in that code there is  currently  no check for negative costs  So if a situation as described above occurs in the current code when the cost of OPT A is for a sort avoidance plan  the code will throw an ASSERTION failure because the cost should be non negative I noticed this behavior somewhat accidentally while testing out a fix for DERBY       with my attempted fix applied  the query  new style sql txt  was failing with an ASSERTION failure due to the negative cost estimate  Hence this jira    ',0
'ErrorStreamTest failing on ibm j  jvm    Getting the following junit tests failures on just on the j  jvm platform running on windows There were    failures    testDefault org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testDefault ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testFile org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testFile ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testWrongFile org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testWrongFile ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testMethod org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testMethod ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testWrongMethod org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testWrongMethod ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testField org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testField ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testWrongField org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testWrongField ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testFileOverMethod org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testFileOverMethod ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       testFileOverField org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testFileOverField ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java        testFileOverMethodAndField org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testFileOverMethodAndField ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java        testMethodOverField org apache derbyTesting functionTests tests engine ErrorStreamTest junit framework AssertionFailedError  shutdown engine not implemened at org apache derbyTesting junit DataSourceConnector shutEngine DataSourceConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests engine ErrorStreamTest testMethodOverField ErrorStreamTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at  lt unknown class gt   lt unknown method gt  Unknown Source  at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       ',0
'Group by query with many aggregate columns and case statements fails with  ERROR XSDA   Restore of a serializable or SQLData object of class   attempted to read more data than was originally stored    using the attached database  v          select   from pivotview   fails with the stack trace below  A view  pivotview ok  created on a subset of the columns in pivotview executes fine  Adding one column back into pivotview ok causes failures most of the time  See attached for view definitions                         GMT Thread     main   main       XID              SESSIONID        DATABASE   pivotview    DRDAID   null   Failed Statement is  select   from pivotviewERROR XSDA   Restore of a serializable or SQLData object of class   attempted to read more data than was originally stored at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store raw data StreamFileContainer fetchNext Unknown Source  at org apache derby impl store raw data StreamFileContainerHandle fetchNext Unknown Source  at org apache derby impl store access sort MergeScan mergeARow Unknown Source  at org apache derby impl store access sort MergeScan init Unknown Source  at org apache derby impl store access sort MergeSort openSortScan Unknown Source  at org apache derby impl store access RAMTransaction openSortScan Unknown Source  at org apache derby impl sql execute GroupedAggregateResultSet loadSorter Unknown Source  at org apache derby impl sql execute GroupedAggregateResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source Caused by  java io EOFException at java io DataInputStream readBoolean DataInputStream java      at org apache derby impl sql execute MaxMinAggregator readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby iapi types UserType readExternal Unknown Source         more              begin nested exception  level                java io EOFException at java io DataInputStream readBoolean DataInputStream java      at org apache derby impl sql execute MaxMinAggregator readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby iapi types UserType readExternal Unknown Source  at org apache derby impl store raw data StreamFileContainer fetchNext Unknown Source  at org apache derby impl store raw data StreamFileContainerHandle fetchNext Unknown Source  at org apache derby impl store access sort MergeScan mergeARow Unknown Source  at org apache derby impl store access sort MergeScan init Unknown Source  at org apache derby impl store access sort MergeSort openSortScan Unknown Source  at org apache derby impl store access RAMTransaction openSortScan Unknown Source  at org apache derby impl sql execute GroupedAggregateResultSet loadSorter Unknown Source  at org apache derby impl sql execute GroupedAggregateResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source               end nested exception  level                Cleanup action completed   ',0
' java sql SQLException  The conglomerate      requested does not exist   from Derby          embedded within Eclipse     and RAD        We are getting an SQLException when several prepared statement deletes are done upon an existing database  As far as we can tell this exception should never occur unless  evil  things like deleting the database or editing files occurs  This is using the embedded driver within a plug in inside RAD      and Eclipse      I m not sure what else to submit that might be helpful java sql SQLException  The conglomerate      requested does not exist  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at sun reflect GeneratedMethodAccessor   invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke Unknown Source  at java lang reflect Method invoke Unknown Source  at com surelogic sierra jdbc LazyPreparedStatementConnection LazyPreparedStatement invoke Unknown Source  at  Proxy  execute Unknown Source  at com surelogic sierra jdbc finding FindingManager delete Unknown Source  at com surelogic sierra jdbc finding ClientFindingManager updateLocalFindings Unknown Source  at com surelogic sierra jdbc project ClientProjectManager synchronizeProject Unknown Source  at com surelogic sierra client eclipse jobs SynchronizeJob synchronize Unknown Source  at com surelogic sierra client eclipse jobs SynchronizeJob run Unknown Source  at org eclipse core internal jobs Worker run Unknown Source Caused by  ERROR XSAI   The conglomerate      requested does not exist  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store access RAMTransaction findExistingConglomerate Unknown Source  at org apache derby impl store access RAMTransaction openScan Unknown Source  at org apache derby impl sql execute TemporaryRowHolderResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute TemporaryRowHolderResultSet getNextRow Unknown Source  at org apache derby impl sql execute IndexChanger finish Unknown Source  at org apache derby impl sql execute IndexSetChanger finish Unknown Source  at org apache derby impl sql execute RowChangerImpl finish Unknown Source  at org apache derby impl sql execute UpdateResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         more   ',0
' CollationTest  fails with   expected  but was   in testPolishCollation CollationTest java         See http   dbtg thresher com derby test     Branch jvm    testing Limited testSummary        html   sol There was   failure    testPolishCollation org apache derbyTesting functionTests tests lang CollationTest junit framework AssertionFailedError  expected  lt   gt  but was  lt   gt  at org apache derbyTesting functionTests tests lang CollationTest commonTestingForTerritoryBasedDB CollationTest java       at org apache derbyTesting functionTests tests lang CollationTest testPolishCollation CollationTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'testSysinfoLocale fails if derbyTools jar is first in the classpath      testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt false gt  but was  lt true gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt false gt  but was  lt true gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt true gt  but was  lt false gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt true gt  but was  lt false gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt false gt  but was  lt true gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testSysinfoLocale org apache derbyTesting functionTests tests tools SysinfoLocaleTest junit framework AssertionFailedError  expected  lt true gt  but was  lt false gt  at org apache derbyTesting functionTests tests tools SysinfoLocaleTest testSysinfoLocale SysinfoLocaleTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'Selecting data from a Table raises Error XN     Query processing has been terminated due to an error on the server    I got a table  PCLASS  in my database where I cannot select the data via a simple select statement  If I execute  select   from PCLASS   XN     Query processing has been terminated due to an error on the server If I execute  select   from PCLASS order by CLASSNAME   it works If I add or remove only one row to from the table  it worksIf I use the embedded driver everything works fine  But as soon as I use the derby network client to access the database  this problem occurs This is very odd  I spent a lot of time to do some research on this behavior because I could not believe that the network client produces errors depending on the data contained in a table  But after all it looks like I managed to fill the table with an exact amount of data that causes this error to arise To reproduce the problem download the attached file and follow these instructions  extract test rar to  derby system home  start derby network server start ji utility and execute the following commands   connect to database test using client driver  connect  jdbc derby   localhost test user ZOL password zol   select content of table PCLASS select   from PCLASS    gt  Error XN     Query processing has been terminated due to an error on the server      disconnect from database disconnect  shutdown database  test  connect  jdbc derby   localhost test user ZOL password zol shutdown true   connect to database  test  using embedded driver  connect  jdbc derby test user ZOL password zol   select content of table PCLASS select   from PCLASS    gt  everything o k    ',0
'NullPointerException in     B IRowLocking  searchLeftAndLockPreviousKey    The last week     we have seen a large number of this failure It was categorized as DERBY      but these instances all have the NPE Exception while trying to insert row number    ERROR XJ     Java exception     java lang NullPointerException  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derbyTesting functionTests tests store OnlineCompressTest createAndLoadTable OnlineCompressTest java      at org apache derbyTesting functionTests tests store OnlineCompressTest deleteAllRows OnlineCompressTest java      at org apache derbyTesting functionTests tests store OnlineCompressTest test  OnlineCompressTest java      at org apache derbyTesting functionTests tests store OnlineCompressTest testList OnlineCompressTest java       at org apache derbyTesting functionTests tests store OnlineCompressTest main OnlineCompressTest java      Caused by  java lang NullPointerException at org apache derby impl store access btree index B IRowLocking  searchLeftAndLockPreviousKey Unknown Source  at org apache derby impl store access btree index B IRowLocking  lockNonScanPreviousRow Unknown Source  at org apache derby impl store access btree BTreeController doIns Unknown Source  at org apache derby impl store access btree BTreeController insert Unknown Source  at org apache derby impl store access btree index B IController insert Unknown Source  at org apache derby impl sql execute IndexChanger insertAndCheckDups Unknown Source  at org apache derby impl sql execute IndexChanger doInsert Unknown Source  at org apache derby impl sql execute IndexChanger insert Unknown Source  at org apache derby impl sql execute IndexSetChanger insert Unknown Source  at org apache derby impl sql execute RowChangerImpl insertRow Unknown Source  at org apache derby impl sql execute InsertResultSet normalInsertCore Unknown Source  at org apache derby impl sql execute InsertResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source        moreThe error statistics shows the occurrences  http   dbtg thresher com derby test stats today html   http   dbtg thresher com derby test stats newest html  http   dbtg thresher com derby test statistics         html  JIRA        Week                         Daily jvm    vista       Daily jvm    lin       Daily jvm    solN         Daily jvm    sparc           Branch jvm    lin       trunk   jvmAll JDK  Jvm   SunOS      i  pc i          Daily jvm    sol       trunk   jvmAll JDK  Jvm   SunOS      i  pc i          Daily jvm    lin       trunk   jvm    SunOS      i  pc i          trunk   jvm    SunOS      sun u sparc       trunk   jvmAll JDK  Jvm   SunOS      i  pc i          Daily jvm    linMon Dec            CET     http   dbtg thresher com derby test statistics         html seems to be the first occurence JIRA        Week                         Daily jvm    linMon Dec            CET     All are seen on trunk except one on the      branch             Branch jvm    lin     ',0
'NullPointer Exception  NPE  from query with IN predicate containing two values and joining a view with a large table   ERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression     With a single value in the IN clause the query does not fail   gt  Run the following query in the attached database  v      db   SELECT A TIMESTAMP  B F NAMEADDR  B TOTAL F B TOTAL FS  B TOTAL FT  B TOTAL FXFROM TIME A  THE VIEW BWHERE B T ID   A T ID AND B F NAMEADDR IN   one two three oscar   one two three kathy  ORDER BY A TIMESTAMP ASC  gt  resultERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression ERROR XJ     Java exception     java lang NullPointerException  Stack trace  Failed Statement is  SELECT A TIMESTAMP  B F NAMEADDR  B TOTAL F B TOTAL FS  B TOTAL FT  B TOTAL FXFROM TIME A  THE VIEW BWHERE B T ID   A T ID AND B F NAMEADDR IN   one two three oscar   one two three kathy  ORDER BY A TIMESTAMP ASCERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby iapi error StandardException unexpectedUserException Unknown Source  at org apache derby impl services reflect DirectCall invoke Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute NestedLoopJoinResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute SortResultSet getRowFromResultSet Unknown Source  at org apache derby impl sql execute SortResultSet getNextRowFromRS Unknown Source  at org apache derby impl sql execute SortResultSet loadSorter Unknown Source  at org apache derby impl sql execute SortResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source Caused by  java lang NullPointerException at org apache derby exe ac   a   fx    xa   xc f x        a     e  Unknown Source         more              begin nested exception  level                java lang NullPointerException at org apache derby exe ac   a   fx    xa   xc f x        a     e  Unknown Source  at org apache derby impl services reflect DirectCall invoke Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute NestedLoopJoinResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute SortResultSet getRowFromResultSet Unknown Source  at org apache derby impl sql execute SortResultSet getNextRowFromRS Unknown Source  at org apache derby impl sql execute SortResultSet loadSorter Unknown Source  at org apache derby impl sql execute SortResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main   main Unknown Source  at org apache derby tools ij main Unknown Source               end nested exception  level                Schema info CREATE TABLE TIME   T ID  BIGINT NOT NULL   TIMESTAMP  TIMESTAMP NOT NULL   DAY  INTEGER NOT NULL   WEEK  INTEGER NOT NULL   MONTH  INTEGER NOT NULL   YEAR COL  INTEGER NOT NULL  CREATE TABLE F   F ID  BIGINT NOT NULL   T ID  BIGINT NOT NULL   F NAMEADDR  VARCHAR      NOT NULL   TOTAL F  BIGINT NOT NULL   TOTAL FS  BIGINT NOT NULL   TOTAL FT  BIGINT NOT NULL   TOTAL FX  BIGINT NOT NULL  CREATE VIEW the view AS SELECT T T ID AS T ID   T F NAMEADDR AS F NAMEADDR  T TOTAL F AS TOTAL F  T TOTAL FS AS TOTAL FS  T TOTAL FT AS TOTAL FT   T TOTAL FX AS TOTAL FX  FROM F AS T  WHERE T T ID    SELECT MAX T ID  FROM F     ',0
'NullPointerException caused by race condition in GenericActivationHolder    I have a stress test using Derby          which is executing the same PreparedStatement using multiple threads concurrently and I consistently get the following NPE after several hours of running                         GMT Thread     pool   thread      main       XID              SESSIONID          DATABASE    usr ironhide var db opera derby    DRDAID   null   Failed Statement is  select rdbmsvaria   GUID AND INDEX as GUID        rdbmsvaria   VALUE  as VALUE        rdbmsvaria   HOLDER GUID as HOLDER        rdbmsvaria   VALUE TYPE as VALUE        rdbmsvaria   VALUE GUID as VALUE        rdbmsvaria   DELETED as DELETED     from VARIABLE rdbmsvaria   where rdbmsvaria   GUID AND INDEX   with   parameters begin parameter      C   AB E       A    C C   A D F     end parameterjava lang NullPointerException at org apache derby impl sql GenericActivationHolder execute GenericActivationHolder java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeQuery EmbedPreparedStatement java      at org hibernate jdbc AbstractBatcher getResultSet AbstractBatcher java      at org hibernate loader Loader getResultSet Loader java       at org hibernate loader Loader doQuery Loader java      at org hibernate loader Loader doQueryAndInitializeNonLazyCollections Loader java      at org hibernate loader Loader loadEntity Loader java       at org hibernate loader entity AbstractEntityLoader load AbstractEntityLoader java     at org hibernate loader entity AbstractEntityLoader load AbstractEntityLoader java     at org hibernate persister entity AbstractEntityPersister load AbstractEntityPersister java       at org hibernate event def DefaultLoadEventListener loadFromDatasource DefaultLoadEventListener java      at org hibernate event def DefaultLoadEventListener doLoad DefaultLoadEventListener java      at org hibernate event def DefaultLoadEventListener load DefaultLoadEventListener java      at org hibernate event def DefaultLoadEventListener proxyOrLoad DefaultLoadEventListener java      at org hibernate event def DefaultLoadEventListener onLoad DefaultLoadEventListener java      at org hibernate impl SessionImpl fireLoad SessionImpl java      at org hibernate impl SessionImpl get SessionImpl java      at org hibernate impl SessionImpl get SessionImpl java      at sun reflect GeneratedMethodAccessor   invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org hibernate context ThreadLocalSessionContext TransactionProtectionWrapper invoke ThreadLocalSessionContext java      at  Proxy   get Unknown Source  at com approuter maestro opera rdbms RdbmsContextHolder getRdbmsVariable RdbmsContextHolder java      at com approuter maestro opera rdbms RdbmsContextHolder getVariable RdbmsContextHolder java     at com approuter maestro vm Frame getParameter Frame java      at com approuter maestro vm Task getParameter Task java       at com approuter maestro vm CallContextImpl setOutputParameter CallContextImpl java      at com approuter maestro vm CallContextImpl getOutputParameterWriter CallContextImpl java      at com approuter maestro sdk mpi DynamicExecutableActivity     getWriter DynamicExecutableActivity java      at com approuter module xml XmlSerializeTextActivity XmlSerializeTextActivityInstance serialize XmlSerializeTextActivity java     at sun reflect GeneratedMethodAccessor    invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at com approuter maestro sdk mpi DynamicExecutableActivity execute DynamicExecutableActivity java      at com approuter maestro activities Invoke call Invoke java      at sun reflect GeneratedMethodAccessor    invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at com approuter maestro activities Instruction call Instruction java     at com approuter maestro vm Program call Program java      at com approuter maestro vm Task run Task java      at com approuter maestro vm Task run Task java      at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Cleanup action completedHere is the relevant code from GenericActivationHolder java    synchronized  ps       Has the activation class changed     if  gc    ps getActivationClass         ensure the statement is valid by rePreparing it  ps rePrepare getLanguageConnectionContext         lt    line          If we get here  it means the PreparedStatement has been recompiled  Get a new Activation and check whether the parameters are compatible  If so  transfer the parameters from the old Activation to the new one  and make that the current Activation  If not  throw an exception     GeneratedClass newGC   ps getActivationClass      BaseActivation newAC    BaseActivation  newGC newInstance lcc       lt    line     DataTypeDescriptor   newParamTypes   ps getParameterTypes   As you can see  the activation class returned by the ExecPreparedStatement is null as of line      even after having called a rePrepare      on the prepared statement  line       This is most likely due to a race condition  Also note that the containing block was formerly synchronized  but has since been commented out  From browsing the source in previous versions  the synchronized statement appears to have been commented out since before           It appears the fix is to reintroduce the synchronized block  or at least make the block inside the if statement synchronized    ',0
'Not possible for non db owner to create a temporary table   Get ERROR        User  USERB  can not perform the operation in schema  SESSION       It seems that only the owner of a database may create tempoary tables in that db This is not helpful as many other users may want to run a query on that db that relies upon the creation of temporary tables I would expect non db owners to be able create temporay tables The problem is demonstrated with derby properties like this derby connection requireAuthentication truederby authentication provider BUILTINderby database sqlAuthorization TRUEderby user usera pwdderby fullAccessUsers useraderby drda host             Start the network server and run up  ij  ij gt connect  jdbc derby                     TEST  user usera password pwd create true   ij gt  declare global temporary table t   a int  on commit preserve rowsnot logged   rows inserted updated deletedAll good so far Now try this  while still connected as usera  ij gt  call SYSCS UTIL SYSCS SET DATABASE PROPERTY  derby user userb   pwd   Statement executed ij gt  call SYSCS UTIL SYSCS SET USER ACCESS  userb   FULLACCESS   Statement executed ij gt  disconnect ij gt  connect  jdbc derby                     TEST  user userb password pwd   ij gt  declare global temporary table t  a int  on commit preserve rows not logged ERROR        User  USERB  can not perform the operation in schema  SESSION  SYSINFO                            Java Information                   Java Version           eaJava Vendor  Sun Microsystems Inc Java home   usr java jdk         jreJava classpath   home ajvok derby db derby          bin lib derby jar  home ajvok derby db derby          bin lib derbynet jar  home ajvok derby db derby          bin lib derbytools jar  home ajvok derby db derby          bin lib derbyclient jar  home ajvok derby local sp  jarOS name  LinuxOS architecture  i   OS version          mdvJava user name  ajvokJava user home   home ajvokJava user dir   home ajvok derby localjava specification name  Java Platform API Specificationjava specification version               Derby Information         JRE   JDBC  Java SE     JDBC          home ajvok derby db derby          bin lib derby jar                               home ajvok derby db derby          bin lib derbytools jar                               home ajvok derby db derby          bin lib derbynet jar                               home ajvok derby db derby          bin lib derbyclient jar                                                                                                 Locale Information                  Current Locale    English United Kingdom      en GB      Found support for locale       cs      version                     Found support for locale       de DE      version                     Found support for locale       es      version                     Found support for locale       fr      version                     Found support for locale       hu      version                     Found support for locale       it      version                     Found support for locale       ja JP      version                     Found support for locale       ko KR      version                     Found support for locale       pl      version                     Found support for locale       pt BR      version                     Found support for locale       ru      version                     Found support for locale       zh CN      version                     Found support for locale       zh TW      version                                                                              ',1
'Delayed  on demand  creation of current user schema makes select from view belonging to other schema fail     The enclosed repro fails with error   Y    Schema BILL does not exist   even thoughthe query does not reference that schema  it selects from joe myview    ',0
'Derby      X ignores ORDER BY DESC when target column has an index and is used in an OR clause or an IN list     Running the following produces the error seen in Derby      X but not in      X nor in      X Don t know if this related to DERBY      First query is incorrectly sorted whereas the second one is okay when there is an index on the table  If the table is not indexed  the sort works correctly in DESC order       create table CHEESE   CHEESE CODE VARCHAR     CHEESE NAME VARCHAR      CHEESE COST DECIMAL       create index cheese index on CHEESE  CHEESE CODE DESC  CHEESE NAME DESC  CHEESE COST DESC  INSERT INTO CHEESE   CHEESE CODE  CHEESE NAME  CHEESE COST VALUES            GOUDA                         EDAM                         EDAM                         GORGONZOLA                AAAAA    EDAM                         MUENSTER             SELECT   FROM CHEESE WHERE  CHEESE CODE         OR CHEESE CODE          AND CHEESE NAME  EDAM ORDER BY CHEESE CODE DESC  CHEESE NAME DESC  CHEESE COST DESC SELECT   FROM CHEESE WHERE  CHEESE CODE  AAAAA  OR CHEESE CODE          AND CHEESE NAME  EDAM ORDER BY CHEESE CODE DESC  CHEESE NAME DESC  CHEESE COST DESC    ',0
'Uniqueness violation error         occurs after dropping a PK constraint if there exists a foreign key on the same columns     When there are multiple constraints on a single table and the constraints have the same set of columns  in the same order   Derby tries to optimize things by re using a single backing index for all of the relevant constraints  See the  executeConstantAction    method of CreateIndexConstantAction java  search for  duplicate   But there is a bug in Derby where  if one of the constraints is unique and is dropped  the uniqueness  attribute  of the backing index is not updated accordingly  This means that uniqueness may be incorrectly enforced where it is not required Take the following example   Case    from DERBY        ALTER TABLE NEWORDERS ADD CONSTRAINT NEWORDERS PK PRIMARY KEY NO W ID  NO D ID  NO O ID   ALTER TABLE NEWORDERS ADD CONSTRAINT NO O FK FOREIGN KEY  NO W ID  NO D ID  NO O ID  REFERENCES ORDERS For these statements Derby will use a single backing index for both the primary constraint NEWORDERS PK and the foreign key constraint NO O FK  That backing index will be unique because the primary key must itself be unique If later we drop the primary key  ALTER TABLE NEWORDERS DROP CONSTRAINT NEWORDERS PK then the backing index needs to be converted from a unique index to a non unique index  because a foreign key is not inherently unique   But in Derby the uniqueness attribute remains unchanged  so attempts to insert a duplicate  NO W ID  NO D ID  NO O ID  row into NEWORDERS will fail with error        when it should really succeed I tried this out on          and the same behavior occurs there  so marking  Affects  versions for everything back to that      ',0
'Incorrect result from query with nested EXIST    Derby returns unexpected results from a query with embedded EXIST clauses  The query SQL is generated by the JPOX jdo implementation and is supposed to return all of the PERSONS and PROJECTS where there is an entry in the join table  This query works as expected when using MySQL Here s the query SELECT UNBOUND E PERSONID  UNBOUND P PROJID FROM applicationidentity  DEPARTMENTS THIS   applicationidentity  PERSONS UNBOUND E   applicationidentity  PROJECTS UNBOUND P WHERE EXISTS    SELECT   FROM applicationidentity  PERSONS THIS EMPLOYEES E  WHERE EXISTS    SELECT   FROM applicationidentity  PROJECT MEMBER THIS EMPLOYEES E PROJECTS P  WHERE THIS EMPLOYEES E PROJECTS P  MEMBER    THIS EMPLOYEES E PERSONID  AND THIS EMPLOYEES E PROJECTS P  MEMBER    THIS EMPLOYEES E PERSONID  AND THIS EMPLOYEES E DEPARTMENT   THIS ID  AND THIS EMPLOYEES E DEPARTMENT   THIS ID  AND UNBOUND P PROJID   THIS EMPLOYEES E PROJECTS P PROJID  AND UNBOUND E PERSONID   THIS EMPLOYEES E PERSONID     PERSONID  PROJID                                                   rows selectedI m expecting   rows to be returned here  one row for each row in the join table  Here s the schema CREATE TABLE departments   ID INTEGER NOT NULL  NAME VARCHAR     NOT NULL  EMP OF THE MONTH INTEGER  COMPANYID INTEGER  DISCRIMINATOR VARCHAR       CONSTRAINT DEPTS COMP FK FOREIGN KEY  COMPANYID  REFERENCES companies  CONSTRAINT DEPTS PK PRIMARY KEY  ID   CREATE TABLE persons   PERSONID INTEGER NOT NULL  FIRSTNAME VARCHAR     NOT NULL  LASTNAME VARCHAR     NOT NULL  MIDDLENAME VARCHAR      BIRTHDATE TIMESTAMP NOT NULL  ADDRID INTEGER  STREET VARCHAR      CITY VARCHAR      STATE CHAR     ZIPCODE CHAR     COUNTRY VARCHAR      HIREDATE TIMESTAMP  WEEKLYHOURS REAL  DEPARTMENT INTEGER  FUNDINGDEPT INTEGER  MANAGER INTEGER  MENTOR INTEGER  HRADVISOR INTEGER  SALARY REAL  WAGE REAL  DISCRIMINATOR varchar      NOT NULL  CONSTRAINT PERS DEPT FK FOREIGN KEY  DEPARTMENT  REFERENCES departments  CONSTRAINT PERS FUNDDEPT FK FOREIGN KEY  FUNDINGDEPT  REFERENCES departments  CONSTRAINT PERS MANAGER FK FOREIGN KEY  MANAGER  REFERENCES persons  CONSTRAINT PERS MENTOR FK FOREIGN KEY  MENTOR  REFERENCES persons  CONSTRAINT PERS HRADVISOR FK FOREIGN KEY  HRADVISOR  REFERENCES persons  CONSTRAINT EMPS PK PRIMARY KEY  PERSONID   CREATE TABLE projects   PROJID INTEGER NOT NULL  NAME VARCHAR     NOT NULL  BUDGET DECIMAL       NOT NULL  DISCRIMINATOR VARCHAR       CONSTRAINT PROJS PK PRIMARY KEY  PROJID   CREATE TABLE project member   PROJID INTEGER REFERENCES projects NOT NULL  MEMBER INTEGER REFERENCES persons NOT NULL  ij gt  connect  jdbc derby  Users clr apache jdo trunk tck  target database derby jdotckdb  ij gt  set schema applicationidentity    rows inserted updated deletedij gt  select   from persons PERSONID  FIRSTNAME  LASTNAME  MIDDLENAME  BIRTHDATE  ADDRID  STREET  CITY  STA amp  ZIPC amp  COUNTRY  HIREDATE  WEEKLYHOURS  DEPARTMENT  FUNDINGDEPT MANAGER  MENTOR  HRADVISOR  SALARY  WAGE  DISCRIMINATOR                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         emp First  emp Last  emp Middle                         NULL  NULL  NULL  NULL NULL  NULL                               NULL  NULL  NULL  NULL  NULL           NULL  org apache jdo tck pc company FullTimeEmployee    emp First  emp Last  emp Middle                         NULL  NULL  NULL  NULL NULL  NULL                               NULL  NULL  NULL  NULL  NULL           NULL  org apache jdo tck pc company FullTimeEmployee    emp First  emp Last  emp Middle                         NULL  NULL  NULL  NULL NULL  NULL                               NULL  NULL  NULL  NULL  NULL  NULL        org apache jdo tck pc company PartTimeEmployee    emp First  emp Last  emp Middle                         NULL  NULL  NULL  NULL NULL  NULL                              NULL  NULL  NULL  NULL  NULL  NULL        org apache jdo tck pc company PartTimeEmployee    emp First  emp Last  emp Middle                         NULL  NULL  NULL  NULL NULL  NULL                              NULL  NULL  NULL  NULL  NULL           NULL  org apache jdo tck pc company FullTimeEmployee   rows selectedij gt  select   from projects PROJID  NAME  BUDGET  DISCRIMINATOR                                                                                                                                                                                               orange              org apache jdo tck pc company Project    blue            org apache jdo tck pc company Project    green           org apache jdo tck pc company Project   rows selectedij gt  select   from project member PROJID  MEMBER                                                             rows selected   ',0
'NullPointerException during recovery of database with territory based collation    When logical undo is performed on a database with territory based collation  you may get a NullPointerException in SQLChar getCollationKey   because SQLChar getLocaleFinder   returns null This bug was reported on derby user  http   thread gmane org gmane comp apache db derby user        ',0
'ArrayIndexOutOfBoundsException at MergeSort compare    Derby throws ArrayIndexOutOfBoundsException when I try to execute SQL query shown below This is a regression  since Derby          executes this query without problems Attached are DDL statements to create DB tables  and database itself  with data                          GMT Thread     DRDAConnThread     derby daemons       XID           SESSIONID        DATABASE   InventorizacijaDB    DRDAID   NF       G  A                         Failed Statement is  select MAX preke   BARKODAS  as col       MAX preke   PAVADINIMAS  as col       MAX preke   KIEKIS  as col       SUM irasas   FAKTINIS KIEKIS  as col      from PREKE preke    IRASAS irasas    IRASU BLOKAS irasubloka   where irasas   IRASU BLOKAS irasubloka   ID and preke   UNIKALUS KODAS irasas   UNIKALUS KODAS and irasubloka   INVENTORIZACIJA   group by irasas   UNIKALUS KODAS order by abs SUM irasas   FAKTINIS KIEKIS  MAX preke   KIEKIS   DESC with   parameters begin parameter        end parameter java lang ArrayIndexOutOfBoundsException    at org apache derby impl store access sort MergeSort compare Unknown Source  at org apache derby impl store access sort SortBuffer insert Unknown Source  at org apache derby impl store access sort MergeInserter insert Unknown Source  at org apache derby impl sql execute SortResultSet loadSorter Unknown Source  at org apache derby impl sql execute SortResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derby impl drda DRDAStatement execute Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source    ',0
'Explicit commit inside a java procedure makes a dynamic result sets passed out unavailable    Repro  Main java  that shows changed behavior after svn        the patch committed for this issue   It seems a regression   originally from Dag H  Wanvik attached to DERBY      An explicit commit inside a stored procedure makes a dynamic result sets passed out unavailable  even if the commit is executed prior to the result set  as in the repro    ',0
'Embedded ResultSet getStatement   returns incorrect reference for dynamic result sets    ResultSets returned as dynamic results sets  ie  those created in a java procedure and returned via the java sql Statement that executed the call of the procedure  do not return the correct statement reference for getStatement  Need to return reference to statement that executed the CALL and returned the ResultSet instead of the statement that performed the executeQuery    ',0
'Client ResultSet getHoldabilty will return incorrect value when the ResultSet is obtained from a procedure call    Fixing DERBY       aka DERBY       exposes that the holdability for a result set sent over DRDA is being obtained from the Statement that created the JDBC ResultSet  not its actual holdability  The two can be different when the result set is dynamic result set from a procedure jdbc  ResultSetTest getHoldability fails in client mode    ',0
'Leak in client if ResultSet not closed    If I run the attached program RepeatStatement java with   M of heap I will get an OutOfMemory error in the client java  Xmx  M RepeatStatementException in thread  main  java lang OutOfMemoryError  Java heap space at org apache derby client am Cursor allocateCharBuffer Cursor java       at org apache derby client net NetStatementReply parseSQLDTARDarray NetStatementReply java       at org apache derby client net NetStatementReply parseQRYDSC NetStatementReply java       at org apache derby client net NetStatementReply parseOpenQuery NetStatementReply java      at org apache derby client net NetStatementReply parseOPNQRYreply NetStatementReply java      at org apache derby client net NetStatementReply readOpenQuery NetStatementReply java     at org apache derby client net StatementReply readOpenQuery StatementReply java     at org apache derby client net NetStatement readOpenQuery  NetStatement java      at org apache derby client am Statement readOpenQuery Statement java       at org apache derby client am Statement flowExecute Statement java       at org apache derby client am Statement executeQueryX Statement java      at org apache derby client am Statement executeQuery Statement java      at RepeatStatement testInsertAndSelect RepeatStatement java     at RepeatStatement main RepeatStatement java    If I close the ResultSet or Statement it does not leak  This occurs on trunk and           It does however not run out of memory on           so appears to be a regression    ',0
'Logical connections do not check if a transaction is active on close    If you call close on a logical connection  for instance as obtained through a PooledConnection  it does not check if there is an active transaction The close of the logical connection is allowed  and even the close of the parent PooledConnection is allowed in the client driver  This can will cause resources to be left on the server  and later operations might fail  typically with lock timeouts because the  closed  transaction is still holding locks  I do not know if gc will solve this eventually  but I would say the current behavior of the client driver is wrong in any case There is difference in the behavior between the embedded and the client driver  and there also seems to be a bug in the embedded driver The analysis above is a bit sketchy  so it might be required to look into the issue a bit more   I will attach a repro  JDBC usage should be verified as well  is it legal   as intended     ',0
'Database creation and boot should fail if collation TERRITORY BASED and the selected locale is not supported    A problem I ve discovered when testing with the phoneME advanced platform is that the collationtests expect other locales than Locale US to be available on the platform that is used for the test  and for phoneME advanced  when compiled as foundation profile  only Locale US is available  From the jdk    javadoc of Collator getAvailableLocales   I see that only Locale US is strictly required public static Locale   getAvailableLocales   Returns an array of all locales for which the getInstance methods of this class can return localized instances  The returned array represents the union of locales supported by the Java runtime and by installed CollatorProvider implementations  It must contain at least a Locale instance equal to Locale US  Returns  An array of locales for which localized Collator instances are available This led me to thinking about how Derby should behave if created booted with collation TERRITORY BASED and territory  lt some unsupported locale gt   I m not sure what the consequences could be if the database is first created on a platform that supports whatever locale is set and later booted with one that doesn t  or created on a platform missing support and later booted with one that has  In any case I think it may confuse a user needlessly to see the database boot successfully with his collation setting and later behave in a way he does not expect Opinions voiced on the derby dev list are that both database creation and boot should fail if collation TERRITORY BASED and the selected locale is not supported If a change like this is implemented  the collationtests should be changed to verify correct behavior also if they are executed in an environment were some of the tested locales are not supported    ',0
'jdbcapi derbyStress java no longer runs with low memory heap so does not provide testing for leak scenarios    This was raised as an issue in DERBY       but it seems to make most sense to raise it as a separate issue  When derbyStress ran in derbyall it ran with   MB heap so that it could test fixes for various memory leaks  When moved to JDBCHarnessJavaTest it started running with the full    MB heap used for suites All so no longer tests for those leaks  There are two options presented so far   Move it back to derbyall    add it to the junit all target For the adding it to the junit all target option I think a few things have to happen for it to be run as part of the nightlies     Convert derbyStress java to junit     create a junit lomem target and make it part of junit all     Fix junit all so that it can run with the nightlies  DERBY        distribute ant to the testing machines make nightly script changes etc Myrna expressed some misgivings to relying on junit all because ant is not available on all the platforms where she tests  I think the best course of action is to at least temporarily move the test back to derbyall and then open separate task s  for the junit conversion effort    ',0
'Invalid method java lang Integer    void  short  because java lang NoSuchMethodException  java lang Integer  short     Invalid method java lang Integer  gt  gt  void  lt init gt  short  because java lang NoSuchMethodException  java lang Integer  lt init gt  short True  but I believe  not a helpful observation FN MATCHES A f  C d  returns short SMALLINTrelated to DERBY        But this is on the      branch                        M      DEBUG            Main       Template java       SQL  SELECT A a  D b  B c  C d FROM C JOIN A ON C e    I  AND A f IS NOT NULL AND A g   C g AND FN MATCHES A f  C d   lt  gt    JOIN B ON B h   A g JOIN D ON D h   URID hjava lang NoSuchMethodException  java lang Integer  lt init gt  short  at java lang Class getConstructor  Class java       at java lang Class getConstructor Class java       at org apache derby impl services bytecode d BCValidate checkMethod d BCValidate java      at org apache derby impl services bytecode BCMethod callMethod BCMethod java      at org apache derby impl services bytecode BCMethod pushNewComplete BCMethod java      at org apache derby impl sql compile StaticMethodCallNode generateExpression StaticMethodCallNode java      at org apache derby impl sql compile JavaToSQLValueNode generateExpression JavaToSQLValueNode java      at org apache derby impl sql compile BinaryOperatorNode generateExpression BinaryOperatorNode java      at org apache derby impl sql compile BinaryLogicalOperatorNode generateExpression BinaryLogicalOperatorNode java      at org apache derby impl sql compile ProjectRestrictNode generateMinion ProjectRestrictNode java       at org apache derby impl sql compile ProjectRestrictNode generate ProjectRestrictNode java       at org apache derby impl sql compile JoinNode getJoinArguments JoinNode java       at org apache derby impl sql compile JoinNode generateCore JoinNode java       at org apache derby impl sql compile JoinNode generate JoinNode java       at org apache derby impl sql compile JoinNode getJoinArguments JoinNode java       at org apache derby impl sql compile JoinNode generateCore JoinNode java       at org apache derby impl sql compile JoinNode generate JoinNode java       at org apache derby impl sql compile ProjectRestrictNode generateMinion ProjectRestrictNode java       at org apache derby impl sql compile ProjectRestrictNode generate ProjectRestrictNode java       at org apache derby impl sql compile ScrollInsensitiveResultSetNode generate ScrollInsensitiveResultSetNode java      at org apache derby impl sql compile CursorNode generate CursorNode java      at org apache derby impl sql compile StatementNode generate StatementNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java      at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java                   at org apache derby exe ac        x    xc   x  e xffffbce   b    g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache commons dbcp DelegatingPreparedStatement executeUpdate DelegatingPreparedStatement java      at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core namedparam NamedParameterJdbcTemplate update NamedParameterJdbcTemplate java     Invalid method java lang Integer  gt  gt  void  lt init gt  short  because java lang NoSuchMethodException  java lang Integer  lt init gt  short DEBUG            Main       Template java        java sql SQLException  Java exception   ASSERT FAILED Invalid method java lang Integer  gt  gt  void  lt init gt  short  because java lang NoSuchMethodException  java lang Integer  lt init gt  short   org apache derby shared common sanity AssertFailure  ERROR            Main       TransactionTemplate java        Application exception overridden by rollback exceptionorg springframework jdbc UncategorizedSQLException  PreparedStatementCallback  uncategorized SQLException for SQL    lt Statement that fires trigger removed gt     SQL state      XJ          error code              Java exception     java lang NullPointerException    nested exception is java sql SQLException  Java exception     java lang NullPointerException  Caused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache commons dbcp DelegatingPreparedStatement executeUpdate DelegatingPreparedStatement java      at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core namedparam NamedParameterJdbcTemplate update NamedParameterJdbcTemplate java     Caused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  java lang NullPointerException at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              moreFATAL            Main       Start java        Start FAILEDorg springframework transaction TransactionSystemException  Could not roll back JDBC transaction  nested exception is java sql SQLNonTransientConnectionException  No current connection Caused by  java sql SQLNonTransientConnectionException  No current connection  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util noCurrentConnection Util java      at org apache derby impl jdbc EmbedConnection checkIfClosed EmbedConnection java       at org apache derby impl jdbc EmbedConnection setupContextStack EmbedConnection java       at org apache derby impl jdbc EmbedConnection rollback EmbedConnection java       at org apache commons dbcp DelegatingConnection rollback DelegatingConnection java      at org apache commons dbcp PoolingDataSource PoolGuardConnectionWrapper rollback PoolingDataSource java      at org springframework jdbc datasource DataSourceTransactionManager doRollback DataSourceTransactionManager java      at org springframework transaction support AbstractPlatformTransactionManager processRollback AbstractPlatformTransactionManager java      at org springframework transaction support AbstractPlatformTransactionManager rollback AbstractPlatformTransactionManager java      at org springframework transaction support TransactionTemplate rollbackOnException TransactionTemplate java      at org springframework transaction support TransactionTemplate execute TransactionTemplate java      Caused by  java sql SQLException  No current connection  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            morederby logorg apache derby shared common sanity AssertFailure  ASSERT FAILED Invalid method java lang Integer  gt  gt  void  lt init gt  short  because java lang NoSuchMethodException  java lang Integer  lt init gt  short  at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby impl services bytecode d BCValidate checkMethod d BCValidate java      at org apache derby impl services bytecode BCMethod callMethod BCMethod java      at org apache derby impl services bytecode BCMethod pushNewComplete BCMethod java      at org apache derby impl sql compile StaticMethodCallNode generateExpression StaticMethodCallNode java      at org apache derby impl sql compile JavaToSQLValueNode generateExpression JavaToSQLValueNode java      at org apache derby impl sql compile BinaryOperatorNode generateExpression BinaryOperatorNode java      at org apache derby impl sql compile BinaryLogicalOperatorNode generateExpression BinaryLogicalOperatorNode java      at org apache derby impl sql compile ProjectRestrictNode generateMinion ProjectRestrictNode java       at org apache derby impl sql compile ProjectRestrictNode generate ProjectRestrictNode java       at org apache derby impl sql compile JoinNode getJoinArguments JoinNode java       at org apache derby impl sql compile JoinNode generateCore JoinNode java       at org apache derby impl sql compile JoinNode generate JoinNode java       at org apache derby impl sql compile JoinNode getJoinArguments JoinNode java       at org apache derby impl sql compile JoinNode generateCore JoinNode java       at org apache derby impl sql compile JoinNode generate JoinNode java       at org apache derby impl sql compile ProjectRestrictNode generateMinion ProjectRestrictNode java       at org apache derby impl sql compile ProjectRestrictNode generate ProjectRestrictNode java       at org apache derby impl sql compile ScrollInsensitiveResultSetNode generate ScrollInsensitiveResultSetNode java      at org apache derby impl sql compile CursorNode generate CursorNode java      at org apache derby impl sql compile StatementNode generate StatementNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java      at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java          our trigger stored proc java code      at org apache derby exe ac        x    xc   x  e xffffbce   b    g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache commons dbcp DelegatingPreparedStatement executeUpdate DelegatingPreparedStatement java      at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core namedparam NamedParameterJdbcTemplate update NamedParameterJdbcTemplate java     Cleanup action completed                        GMT Thread     Main   main      Cleanup action startingjava lang NullPointerException at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache commons dbcp DelegatingPreparedStatement executeUpdate DelegatingPreparedStatement java      at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core namedparam NamedParameterJdbcTemplate update NamedParameterJdbcTemplate java                             GMT Thread     Main   main      Equally severe exception raised during cleanup  ignored  nulljava lang NullPointerException at org apache derby impl sql compile CompilerContextImpl initRequiredPriv CompilerContextImpl java      at org apache derby impl sql compile CompilerContextImpl resetContext CompilerContextImpl java      at org apache derby impl sql compile CompilerContextImpl cleanupOnError CompilerContextImpl java      at org apache derby iapi services context ContextManager cleanupOnError ContextManager java      at org apache derby impl jdbc TransactionResourceImpl cleanupOnError TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at org apache commons dbcp DelegatingPreparedStatement executeUpdate DelegatingPreparedStatement java      at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core JdbcTemplate update JdbcTemplate java      at org springframework jdbc core namedparam NamedParameterJdbcTemplate update NamedParameterJdbcTemplate java     Cleanup action completed   ',0
'Replication failover implementation must be modified to fail at the master after slave has been stopped    Jorgen says   I tried to run the failover command on the master  which seems to work fine as long as the master and slave are still connected  If the slave has been stopped for some reason  however  failover hangs on MasterController startFailover here  ack   transmitter readMessage      ',0
'Various formatting erros in L  N property files    There are a number of formatting errors in the localization property files  DRDA InvalidValue U appears twice in the drda property files  english and translations  Spurious linefeed for XCL   S in messages zh TW properties Quadruple single quote rather than double single quote for contraction apostrophes in messages it properties   ',0
'Test case in GrantRevokeDDLTest looks to be accidentally commented out       In lang GrantRevokeDDLTest java  beginning at line       at time of writing   there looks to be a test case that was inadvertently commented out     set connection user    ij USER   gt          test multiple FKs DERBY      set    connection user drop table user  rt drop table    user  rt drop table user  rt create table rt   c  int    primary key not null  c  int insert into rt  values                grant references on rt  to PUBLIC  user      user set connection user  XJ    occurred at create table    rt    create table rt   c  int primary key not null     constraint rt fk foreign key c   references    user  rt  insert into rt  values         grant    references on rt  to PUBLIC  user set connection    user create table rt   c  int primary key not null     constraint rt fk  foreign key c   references    user  rt   constraint rt fk  foreign key c   references    user  rt  insert into rt  values         set connection    user  rt fk  should get dropped revoke references on rt     from PUBLICrevoke references on rt  from user set    connection user revoke references on rt  from PUBLIC    expect errorinsert into rt  values    set connection    user  expect error  use user  references privilege     rt fk  still in effectinsert into rt  values    set    connection user revoke references on rt  from user set    connection user  ok  rt fk  should be dropped insert    into rt  values    Based on the format of the comment  my guess is that this JUnit test was created using the conversion script attached to DERBY       and that the script somehow messed up the conversion The first line of the comment mentions DERBY       but a  there is a question mark after it  and b  the commit for that issue does not appear to include the aforementioned lines If the test case is supposed to be commented out  then some explanatory comments explaining why might be nice      ',0
'Replication  Slave must inform master if DBs are out of sync     If I copy the database to the slave before booting the master  slave will be out of sync with the master since new log records are created during booting  The slave will then stop replication  but the master will not be notified If I then try to stop or failover the master the master will hang    ',0
'The  ca option should be removed from ij and from the ij command usage line    The ij tool gives the following help output Usage  java org apache derby tools ij       p propertyfile            ca connectionAttributePropertyFile           inputfile     The  ca connectionAttributePropertyFile option is no longer needed and is deprecated  so it is not documented in the Tools Guide  The option should also be removed from the usage statement    ',0
'Inconsistency in JDBC autogen APIs between Connection prepareStatement      and Statement execute         In EmbedStatement java the execute String  String     execute String  int     executeUpdate String  String     and executeUpdate String  int    methods treat a   length array to mean NO GENERATED KEYS  But in EmbedConnection java the prepareStatement String  String    and prepareStatement String  int    methods treat a   length array to mean RETURN GENERATED KEYS  For the sake of consistency  the two classes should treat   length arrays in the same way  which probably means changing EmbedConnection to match EmbedStatement    ',0
'DatabaseMetaData getConnection returns the wrong connection when using connection pooling    The connection returned from DatabaseMetaData getConnection is not the same as the connection used to create the meta data object when the client driver is used with connection pooling enabled For trunk  the embedded driver ds does the right thing    ',0
'Allow SQL query text to be null in StatementKey    Because the SQL isn t checked before the cache is queried  StatementKey should allow the SQL query text to be null This simplifies handling this exceptional situations  hopefully without complications What will happen is  the cache is queried  null is returned  no match  and then prepare will fail in the driver  Because the statement is never prepared  it will never be inserted into the cached  nor  incorrectly  fetched from the cache in the first step Of course  one could also explicitly check for null in either the Logical Prepared Callable Statement              StatementKeyFactory or StatementCacheInteractor However  the proposed change is small  isolated to one class and makes the exceptional case be handled by the normal code path    ',0
'Move replication methods from org apache derby database Database to org apache derby iapi db Database       ',0
'Simple column names specified as part of  AS  clause in a table expression are ignored if the table expression is a view     Simple repro as follows create table t   i int  j int  insert into t  values                                          create view v  as select j  i from t  create view v   x y z  as select j  i  i j from t          OK  Returns column names specified in AS clause select   from t  as x a b          OK  Returns column names for the viewsselect   from v  select   from v          WRONG  Ignores column names specified in AS clause for the views select   from v  x a b  select   from v  as x a b c  I observed this as far back as           so this is not a regression    ',0
'Changed unexpected query plan when running test  lang predicatePushdown sql     Seen in tinderbox since r       See e g  http   dbtg thresher com derby test tinderbox trunk   jvm    testing testlog SunOS      i  pc i           derbyall diff txt       Start  predicatePushdown jdk         derbyall derbylang                             del lt  Rows seen from the left         a     gt  Rows seen from the left          del lt  Rows seen from the right         a     gt  Rows seen from the right          del lt  Rows returned         a     gt  Rows returned           ',0
'Error message XRE   does not include the right port number     If the master is not able to connect to the slave  the error messages does not include the right port number ij gt  connect  jdbc derby masterDB user oystein password pass startMaster true slaveHost localhost slavePort       ERROR XRE    Could not establish a connection to the peer of the replicated database  masterDB  on address  localhost        ',0
'When the replication log buffer becomes full  the chunk of log that should be appended is to the buffer is discarded    In MasterController appendLog  log is force sent to the slave if the replication log buffer becomes full  However  the log chunk that should have been appended is discarded try   logBuffer appendLog greatestInstant  log  logOffset  logLength    catch  LogBufferFullException lbfe    try   logShipper forceFlush      catch  IOException ioe       The log chunk must be added after freeing a log buffer by calling forceFlush   ',0
'CallableStatement with output parameter leaves cursor open after execution    When executing a CallableStatement which has an output parameter  the language result set is left open and makes subsequent calls to Connection setTransactionIsolation   fail with  ERROR X X    Invalid transaction state   held cursor requires same isolation level     ',0
'OOME at slave during replication    After deleting and inserting more than   million records during replication  I got java lang OutOfMemoryError  Java heap space The heap dump shows that almost the entire heap is byte arrays  and it seems most of them are referred to by ReplicationMessage objects  An inspection of the heap dump in VisualVM it seems that it is references rooted in SocketConnection objInputStream that keeps them from being garbage collected    ',0
'The replication log shipper is not notified when a new replication transmitter is instantiated in MC handleException     In MasterController handleException  a new ReplicationMessageTransmit object is created if the exception is IOException  However  the logShipper is not notified that the new transmitter should be used  A possible solution would be to add a setTransmitter method to AsynchronousLogShipper  Note that the logShipper may contain state information that cannot be discarded  so it cannot be reinstantiated    ',0
'specialCollation   and noSpecialCollation   in TableFunctionTest fail with weme        The  specialCollation    and  noSpecialCollation    fixtures in TableFunctionTest fail when run with weme     I have not explicitly confirmed but it looks like this may be related to svn           The stack trace is noSpecialCollation o a dTesting functionTests tests lang TableFunctionTest java sql SQLException  An attempt was made to get a data value of type  java lang Object  from a data value of type  DECIMAL   at o a d impl jdbc SQLExceptionFactory getSQLException Unknown Source  at o a d impl jdbc Util generateCsSQLException Unknown Source  at o a d impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at o a d impl jdbc TransactionResourceImpl handleException Unknown Source  at o a d impl jdbc EmbedConnection handleException Unknown Source  at o a d impl jdbc ConnectionChild handleException Unknown Source  at o a d impl jdbc EmbedResultSet closeOnTransactionError Unknown Source  at o a d impl jdbc EmbedResultSet movePosition Unknown Source  at o a d impl jdbc EmbedResultSet next Unknown Source  at o a dTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at o a dTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at o a dTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at o a dTesting functionTests tests lang TableFunctionTest allLegalDatatypesVTIResults TableFunctionTest java       at o a dTesting functionTests tests lang TableFunctionTest tableFunctionTest TableFunctionTest java      at o a dTesting functionTests tests lang TableFunctionTest noSpecialCollation TableFunctionTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at o a dTesting junit BaseTestCase runBare BaseTestCase java     Caused by  ERROR        An attempt was made to get a data value of type  java lang Object  from a data value of type  DECIMAL   at o a d iapi error StandardException newException Unknown Source  at o a d iapi types DataType dataTypeConversion Unknown Source  at o a d iapi types DataType getObject Unknown Source  at o a d impl sql execute VTIResultSet cast Unknown Source  at o a d impl sql execute VTIResultSet populateFromResultSet Unknown Source  at o a d impl sql execute VTIResultSet getNextRowCore Unknown Source  at o a d impl sql execute BasicNoPutResultSetImpl getNextRow Unknown Source Comments from RIck on derby dev  in response to DERBY      inquiry    The handling of DECIMAL on the small device platform is different  The test may need some special logic so that it calls the correct method for the small device environment     ',0
'NullPointerException during execution for query with LEFT OUTER JOIN whose inner table selects all constants     For a query having a LEFT OUTER JOIN such that the right  or  inner   table is a SELECT subquery whose result column list consists entirely of constants  Derby may throw an execution time NPE while trying to apply the join predicate  I say  may  because it depends on which join strategy the optimizer chooses Using optimizer overrides I was able to reproduce this problem against trunk with the following  admittedly nonsense  query  create table t   i int  j int   insert into t  values                               select   from t  left outer join  select    a    b from t   x    DERBY PROPERTIES joinStrategy NESTEDLOOP on x  a   t  i I  J  A  B                                                                                      ERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression ERROR XJ     Java exception     java lang NullPointerException  Running the same query also failed with the same NPE on           even though optimizer overrides don t exist there  So I m marking all known releases to be affected by this issue Note  while this particular query may not make much sense  I have seen a user with a very large  auto generated query that  when executed  fails due to this problem  So it is worth investigating      ',0
'If NetworkServer fails to shutdown when run as a separate process by NetworkServerTestSetup  test run will hang    If the NetworkServer fails to shutdown for some reason  we do not clean up the process but will just hang the tests  We should kill off the process if the server fails to shutdown and continue  To reproduce try runnning the test derbynet SecureServerTest with      derbyTesting jar and      jars  See DERBY      for details    ',0
'Unable to start slave mode after authentication failure on a previous startSlave attempt    Trying a startSlave after an initial startSlave fails due to an authentication failure throws an errorsaying that the database has already been bootedvn vn laptop   work workspaces freshworkspace slave  java org apache derby tools ijij version     ij gt  connect  jdbc derby mydb startSlave true slaveHost localhost slavePort       ERROR        Connection authentication failure occurred  Reason  Invalid authentication  ij gt  connect  jdbc derby mydb startSlave true user oystein password pass slaveHost localhost slavePort       ERROR XRE    Cannot start replication slave mode for database  mydb   The database has already been booted  ij gt    ',1
'regression test failure in testDerbyJarAttributeAlpha   Security Exception    I am getting    errors in this test of the following form  all security exceptions from the management test suite  I can post othersif necessary    testDerbyJarAttributeAlpha org apache derbyTesting functionTests tests management VersionMBeanTest javax management RuntimeMBeanException  java lang SecurityException  Access denied  org apache derby security SystemPermission engine monitor  at com sun jmx interceptor DefaultMBeanServerInterceptor rethrow DefaultMBeanServerInterceptor java      at com sun jmx interceptor DefaultMBeanServerInterceptor rethrowMaybeMBeanException DefaultMBeanServerInterceptor java      at com sun jmx interceptor DefaultMBeanServerInterceptor getAttribute DefaultMBeanServerInterceptor java      at com sun jmx mbeanserver JmxMBeanServer getAttribute JmxMBeanServer java      at org apache derbyTesting functionTests tests management MBeanTest   run MBeanTest java      at java security AccessController doPrivileged AccessController java      at org apache derbyTesting functionTests tests management MBeanTest getAttribute MBeanTest java      at org apache derbyTesting functionTests tests management MBeanTest checkBooleanAttributeValue MBeanTest java      at org apache derbyTesting functionTests tests management VersionMBeanTest testDerbyJarAttributeAlpha VersionMBeanTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java lang SecurityException  Access denied  org apache derby security SystemPermission engine monitor  at org apache derby iapi services info Version checkMonitor Version java     at org apache derby iapi services info Version isAlpha Version java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at com sun jmx mbeanserver StandardMBeanIntrospector invokeM  StandardMBeanIntrospector java     at com sun jmx mbeanserver StandardMBeanIntrospector invokeM  StandardMBeanIntrospector java     at com sun jmx mbeanserver MBeanIntrospector invokeM MBeanIntrospector java      at com sun jmx mbeanserver PerInterface getAttribute PerInterface java     at com sun jmx mbeanserver MBeanSupport getAttribute MBeanSupport java      at javax management StandardMBean getAttribute StandardMBean java      at com sun jmx interceptor DefaultMBeanServerInterceptor getAttribute DefaultMBeanServerInterceptor java             more   ',1
'Alter column set data type not allowed in soft upgrade with unique constraint    In      I can do this ij gt  create table t   i int not null  v varchar    not null  constraint uq unique v i     rows inserted updated deletedij gt  alter table t  alter v set data type varchar      rows inserted updated deletedij gt In      soft upgrade mode I cannot ij gt  create table t   i int not null  v varchar    not null  constraint uq unique v i     rows inserted updated deletedij gt  alter table t  alter v set data type varchar    ERROR   Z    Column  V  cannot be made nullable  It is part of a primary key or unique constraint  which cannot have anynullable columns ij gt    ',0
'LOB locators are not released if the LOB columns are not accessed by the client    If the client creates a result set containing LOB locator columns and iterates through it without actually accessing the LOB columns  the locators are not released The amount of locators and their associated LOB objects causes the server to consume large amounts of memory and it eventually gets an OOME There are a few workarounds for this bug  a  Access and or properly close the LOBs  i e  Blob free   This is partly dependent on DERBY       b  Invoke Connection commit  or rollback  periodically  which causes all locators on the connection to be released    ',0
'Changing certain properties on client DataSource objects causes existing connections to reflect the new values    The client driver has code propagating changes made to the DataSource to existing connections created by that DataSource There is some discussion of this in the thread http   www nabble com ConnectionPoolDataSource properties td         html  and there is also an example of what can happen due to this  feature  Besides from being a bug with the potential to cause strange errors in deployment  the issue also makes the client driver code harder to read and understand As far as I can see  there is also some related code in other parts of the client driver  for instance for  fully  resetting statements  There is mention of dynamic versus static sections in the comments  this one from am Statement      If a dataSource is passed into resetClientConnection    then we will assume    properties on the dataSource may have changed  and we will need to go through    the open statement list on the connection and do a full reset on all statements     including preparedStatement s and callableStatement s  This is because property    change may influence the section we allocate for the preparedStatement  and    also the cursor attributes  i e  setCursorSensitivity       If no dataSource is passed into resetClientConnection    then we will do the    minimum reset required for preparedStatement s and callableStatement s Note that the reset code for statements is also invoked when ClientPooledConnection getConnection   is invoked  I do not understand why we should reset statements when we get a new logical connection Further  I also suspect the concept of a deferred reset has been introduced because of the feature bug described by this Jira issue  A deferred reset seems to be a mechanism to avoid a round trip to validate the newly changed DataSource properties  typically user  password and security mechanism  I will look into removing code related to deferred resets as well  If you have historic information about these parts of the driver  I would appreciate if you share it with the community if possible Just to be clear  it is my opinion that changed DataSource properties should take effect when one of the following methods is invoked  DataSource getConnection   ConnectionPoolDataSource getPooledConnection   XADataSource getXAConnection  All of the methods above returns a physical connection  Properties like user name and password are associated with the physical connection  and thus requests to obtain a logical connection should not cause any of these properties to change    ',0
'suites All fails to run on Jvm     when built with JDK      Failed to invoke suite     jdbc   Suite     Further  the following methods are only called from the reset    ',0
'TableFunctionTest SpecialCollation and NoSpecialCollation fail with IBM iseries in checkGetXXXCalls    abstract Connection reset     and impl NetConnection reset    ',0
'Creation of logical connections from a pooled connection causes resource leak on the server    NetConnection resetNetConnection   ',0
' IN  clause ignores valid results  incorrect qualifier handling suspected    All these methods have cousins taking   arguments  which are being used by on one occasion  ClientPooledConnection getConnection   ',0
'SELECT DISTINCT field FROM TABLE NAME GROUP BY field   field                               ',0
'TableFunctionTest fails under Ubuntu         When running the test org apache derbyTesting functionTests tests lang TableFunctionTest  it fails with the output shown below  This test blocks the proper execution of suites All and it was tested under Ubuntu       also tested on Windows Vista and it doesn t throw an error there  There were   errors    noSpecialCollation org apache derbyTesting functionTests tests lang TableFunctionTest java sql SQLException  The exception  java lang ClassNotFoundException  ERROR XBM U  No class was registered for identifier       was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedResultSet closeOnTransactionError EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest simpleVTIResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest tableFunctionTest TableFunctionTest java      at org apache derbyTesting functionTests tests lang TableFunctionTest noSpecialCollation TableFunctionTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java     Caused by  java sql SQLException  Java exception   ERROR XBM U  No class was registered for identifier       java lang ClassNotFoundException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java             moreCaused by  java lang ClassNotFoundException  ERROR XBM U  No class was registered for identifier      at org apache derby iapi services io FormatIdInputStream readObject FormatIdInputStream java      at org apache derby catalog types TypeDescriptorImpl readExternal TypeDescriptorImpl java      at org apache derby iapi services io FormatIdInputStream readObject FormatIdInputStream java      at org apache derby impl sql execute VTIResultSet thawReturnType VTIResultSet java      at org apache derby impl sql execute VTIResultSet getReturnColumnTypes VTIResultSet java      at org apache derby impl sql execute VTIResultSet populateFromResultSet VTIResultSet java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java      at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow BasicNoPutResultSetImpl java      at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java             more   specialCollation org apache derbyTesting functionTests tests lang TableFunctionTest java sql SQLException  The exception  java lang ClassNotFoundException  ERROR XBM U  No class was registered for identifier       was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedResultSet closeOnTransactionError EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest assertResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest simpleVTIResults TableFunctionTest java       at org apache derbyTesting functionTests tests lang TableFunctionTest tableFunctionTest TableFunctionTest java      at org apache derbyTesting functionTests tests lang TableFunctionTest specialCollation TableFunctionTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   ERROR XBM U  No class was registered for identifier       java lang ClassNotFoundException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java             moreCaused by  java lang ClassNotFoundException  ERROR XBM U  No class was registered for identifier      at org apache derby iapi services io FormatIdInputStream readObject FormatIdInputStream java      at org apache derby catalog types TypeDescriptorImpl readExternal TypeDescriptorImpl java      at org apache derby iapi services io FormatIdInputStream readObject FormatIdInputStream java      at org apache derby impl sql execute VTIResultSet thawReturnType VTIResultSet java      at org apache derby impl sql execute VTIResultSet getReturnColumnTypes VTIResultSet java      at org apache derby impl sql execute VTIResultSet populateFromResultSet VTIResultSet java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java      at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow BasicNoPutResultSetImpl java      at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java             moreFAILURES   Tests run     Failures     Errors      ',0
'testfailure in storetests st derby    with ibm     on iseries machine  one deadlock message missing    I saw this fail once  a couple of reruns didn t duplicate the problem The only difference appears to be that one of the deadlock messages is missing from the output   del lt  Got a Deadlock    ',0
'Cannot use row number   in ORDER BY clause    The following query works correctly select abs a   row number   over   from twhere a  gt      and a  lt     order by abs a I expected the following query to also work  but it raised an exception select abs a   row number   over   from twhere a  gt      and a  lt     order by row number   over   This is the error I saw   ERROR   X    Syntax error  Encountered  over  at line    column     Here are the reasons why I think that this syntax is supposed to be supported According to my reading of the      SQL spec  the ORDER BY clause should be able to sort on any expression in the SELECT list  That includes OLAP expressions  I believe this is so because  according to part    section         lt sort specification gt    a  lt sort key gt  can be any  lt value expression gt  and if you follow the grammar for  lt value expression gt   it can resolve to be a  lt value expression primary gt   see section       which can in turn resolve to be a  lt window function gt   This reasoning is supported by tracing the hotlinks on the following page which lays out the SQL      BNF  http   savage net au SQL sql        bnf html This interpretation is further supported by the example of an ORDER BY clause referencing an OLAP expression which is provided on page    of the introduction to OLAP written by Fred Zemke  Krishna Kulkarni  Andy Witkowski  and Bob Lyle  www cse iitb ac in dbms Data Papers Other SQL     OLAP       r  pdf   ',0
'Derby does not follow the SQL Standard when trying to map SQL routines to Java methods     I have only tested this in the      trunk  However  I suspect that this affects all previous releases of Derby as well In resolving method signatures for function procedure invocations  the SQL standard makes the following definitions in part     section      parameter mapping   These definitions  in turn  refer to tables B   and B   in JDBC     Specification  Final Release  October            JDBC        Simply mappable   This refers to the correspondence of SQL and Java types described in      JDBC      table B    This is the table which defines the mapping of SQL types to Java primitives  Object mappable   This refers to the correspondence of SQL and Java types described in      JDBC      table B    This is the table which defines the mapping of SQL types to Java wrapper objects  Output mappable   For OUT and INOUT parameters  this refers to a single element array whose cell is simply mappable or object mappable  E g  Integer   or float    Mappable   This means simply  object  or output mappable  Result set mappable   This means a single element array whose cell is a type which implements either java sql ResultSet or sqlj runtime ResultSetIterator Putting all of this together  section     continues   A Java method with M parameters is mappable  to SQL  if and only if  for some N     zero   lt   N  lt   M  the data types of the first N parameters are mappable  the last M   N parameters are result set mappable  and the result type is either simply mappable  object mappable  or void  Section     gives more detailed rules  but they are hard to follow  According to section      when resolving a routine invocation  Derby should expect to find one and only one static mappable method with the expected external name  Java class   method name  I believe that this is a fair description of the rules  This  at least  is what some other databases appear to do  See  for instance  http   infocenter sybase com help index jsp topic  com sybase help ase      java html java java    htm and http   www service architecture com database articles mapping sql and java data types htmlWe do not have a regression test which verifies that Derby applies the SQL standard resolution rules  There may be several divergences from the standard  This JIRA is a place to track those discrepancies  Here is one that I have noticed The following SQL signature  a int   returns intshould be mappable to any of the following Java signaturespublic static int f  int a  public static int f  Integer a  public static Integer f  int a  public static Integer f  Integer a  However  I observe that Derby is only able to resolve the first and third signatures  the ones with primitive arguments   I will attach a test case showing this problem I will also attach an html table summarizing the simply and object mappable rules    ',0
'errror in nightly regression test  LobStreamsTest encryptedjunit framework AssertionFailedError  f  jartest JarResults            ibm   suites All system singleUse oneuse e tmp lob     tmp    There was   failure    LobStreamsTest encryptedjunit framework AssertionFailedError  f  jartest JarResults            ibm   suites All system singleUse oneuse e tmp lob     tmp at org apache derbyTesting junit DropDatabaseSetup removeDir DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup removeDir DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup access     DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup   run DropDatabaseSetup java      at java security AccessController doPrivileged AccessController java      at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup removeDatabase DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup tearDown DropDatabaseSetup java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'Comment in template security policy incorrectly says that JMX is not enabled by default    The template policy located at  DERBY HOME demo templates server policy  release distributions  and  trunk java drda org apache derby drda template policy  source tree  contains a comment relating to JMX permissions which says    JMX management of Derby is NOT enabled by default  see also DERBY      This was no longer true after DERBY      was fixed  which includes the          release  JMX monitoring and management is enabled by default given that the JVM includes the required APIs  and that the security policy allows JMX features to come up  The comment should have been removed  but this has not happened  The same applies to the default server policy  server policy  which also should be corrected  this policy s comments are however not exposed to users in the same way as the template  Note that no code or actual permissions need to change as a result of this  it is merely an outdated comment that needs to be removed in order not to give users a false impression    ',1
'LOBStateTracker should not use SYSIBM CLOBRELEASELOCATOR when the database is soft upgraded from         Reported by Daniel Noll on derby user  http   thread gmane org gmane comp apache db derby user     To reproduce     Create a database with Derby             Create a table with a clob column and insert some data    Access that database with client server at version          and iterate through the rows in the tableYou ll see an error message like this ERROR   Y     SYSIBM CLOBRELEASELOCATOR  is not recognized as a function or procedure    ',0
' ALTER TABLE  is not allowed on the System table   SYSCS DIAG   TRANSACTION TABLE   in derbyall   store TransactionTable sql    See e g  http   dbtg thresher com derby test tinderbox trunk   jvm    testing testlog SunOS      i  pc i           derbyall diff txt lt method gt store TransactionTable sql lt  method gt  lt signature gt     del lt    rows inserted updated deleted   a        gt  ERROR        The exception  java sql SQLException   ALTER TABLE  is not allowed on the System table   SY SCS DIAG   TRANSACTION TABLE     was thrown while evaluating an expression  gt  ERROR X Y     ALTER TABLE  is not allowed on the System table   SYSCS DIAG   TRANSACTION TABLE    lt  signature gt    ',0
'SYSCS BULK INSERT doesn t quote identifiers or strings properly    Discovered by Mamta A  Satoor in DERBY      SYSCS BULK INSERT builds an insert statement in which it doesn t quote the schema name or the table name  It also takes string parameters that are inserted into the statement text with single quotes around them  but that won t work if those strings contain single quote characters    ',0
'NullPointerException when invoking statement event listeners if one of the listeners is null    If PooledConnection addStatementEventListener   is called with a null argument  the client driver throws a NullPointerException when the listeners are invoked  Embedded does not throw an exception    ',0
'If an IOException is encountered during establishment of the connection  Network Server should print the root exception to the console instead of a generic message    In working on DERBY       I noticed that when the FileNotFound exception caused the connection to fail it just printed out a generic exception  not the IOException that caused the error That is because of this code in ClientThread  catch  IOException ioe       IOException causes this thread to stop  No    console error message if this was caused by a    shutdown synchronized  parent getShutdownSync      if   parent getShutdown      parent consolePropertyMessage  DRDA UnableToAccept S       In the event of an unexpected IOException the actual exception should print and the client socket should be closed if it has been established    ',0
'In Net Client mode  negative values for stream length are accepted without an exception for PreparedStatement setAsciiStream      This is related to Cloudscape bug      Pass negative length as the stream length for various setXXXStream methods should throw an exception  But in Net Client mode  passing a negative value as stream length to PreparedStatement setAsciiStream   doesn t throw an exception e g    from store StreamingColumnPreparedStatement ps   prepareStatement  insert into      testLongVarCharInvalidStreamLength   values             ps setInt          try   println      gt  testing using setAsciiStream with    as length    ps setAsciiStream    fileIn          should throw exception here but doesn t   This issue has been fixed for embedded mode  but not for client mode    ',0
'setting tracedirectory from the command line does not work    I triedjava org apache derby drda NetworkServerControl tracedirectory  tmpand got Trace directory changed to  tmp java org apache derby drda NetworkServerControl trace onTrace turned on for all sessions Trace turned on for all sessions And the trace output was not redirected to the  tmp directory  The tracedirectory command seemed to be ignored Setting tracedirectory with the system property derby drda traceDirectory or with the NetworkServerControl api seems to work ok    ',0
'NPE when firing a trigger    NullPointerException raised when firing a trigger  Originally reported by Thiyagu P on the Derby user list  http   www nabble com Trigger function broken in           td         html a         Thiyagu reports that the same script works fine in           Here s the script CREATE TABLE TRADE  ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY  START WITH        BUYID INT NOT NULL  QTY FLOAT    NOT NULL    CREATE TABLE TOTAL BUYID INT NOT NULL  TOTALQTY FLOAT    NOT NULL   CREATE TRIGGER TRADE INSERT AFTER INSERT ON TRADE REFERENCING NEW AS NEWROW FOR EACH ROW MODE DB SQL UPDATE TOTAL SET TOTALQTY   NEWROW QTY WHERE BUYID   NEWROW BUYID  INSERT INTO TOTAL VALUES         INSERT INTO TRADE VALUES           Here s the stack trace java lang NullPointerException at org apache derby iapi types DataTypeDescriptor getNull DataTypeDescriptor java       at org apache derby iapi types DataTypeDescriptor normalize DataTypeDescriptor java      at org apache derby impl sql execute NormalizeResultSet normalizeRow NormalizeResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute UpdateResultSet collectAffectedRows UpdateResultSet java      at org apache derby impl sql execute UpdateResultSet open UpdateResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute RowTriggerExecutor fireTrigger RowTriggerExecutor java      at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java       ',0
'    replication buffer LogBufferFullException  causes failover to fail w   XRE    SQLERRMC  Could not perform operation because the database is not in replication master mode      With the patch for DERBY       derby      p  v  diff txt  I was able to provoke this error twice in    test runs on this platform  On another platform I saw none in     test runs  I will upload the full test run log dir  Summary     testReplication Local StateTest part  org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part  junit framework ComparisonFailure  Unexpected SQL state  expected  lt XRE             gt  but was  lt XRE             gt Master derby log                                               BEGIN REPLICATION ERROR MESSAGE               PM      Exception occurred during log shipping org apache derby impl store replication buffer LogBufferFullException at org apache derby impl store replication buffer ReplicationLogBuffer switchDirtyBuffer ReplicationLogBuffer java      at org apache derby impl store replication buffer ReplicationLogBuffer appendLog ReplicationLogBuffer java      at org apache derby impl store replication master MasterController appendLog MasterController java      at org apache derby impl store raw log LogAccessFile writeToLog LogAccessFile java      at org apache derby impl store raw log LogAccessFile flushDirtyBuffers LogAccessFile java      at org apache derby impl store raw log LogAccessFile flushLogAccessFile LogAccessFile java      at org apache derby impl store raw log LogAccessFile writeLogRecord LogAccessFile java      at org apache derby impl store raw log LogToFile appendLogRecord LogToFile java       at org apache derby impl store raw log FileLogger logAndDo FileLogger java      at org apache derby impl store raw xact Xact logAndDo Xact java       at org apache derby impl store raw data LoggableActions doAction LoggableActions java      at org apache derby impl store raw data LoggableActions actionUpdate LoggableActions java     at org apache derby impl store raw data StoredPage doUpdateAtSlot StoredPage java       at org apache derby impl store raw data StoredPage updateOverflowDetails StoredPage java       at org apache derby impl store raw data StoredPage updateOverflowDetails StoredPage java       at org apache derby impl store raw data BasePage insertAllowOverflow BasePage java      at org apache derby impl store raw data BasePage insert BasePage java      at org apache derby impl store access heap HeapController doInsert HeapController java      at org apache derby impl store access heap HeapController insert HeapController java      at org apache derby impl sql execute RowChangerImpl insertRow RowChangerImpl java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement execute EmbedPreparedStatement java       at org apache derby impl drda DRDAStatement execute DRDAStatement java      at org apache derby impl drda DRDAConnThread parseEXCSQLSTTobjects DRDAConnThread java       at org apache derby impl drda DRDAConnThread parseEXCSQLSTT DRDAConnThread java       at org apache derby impl drda DRDAConnThread processCommands DRDAConnThread java      at org apache derby impl drda DRDAConnThread run DRDAConnThread java                          END REPLICATION ERROR MESSAGE                      Slave derby log                                                                                                                    GMT Thread     DRDAConnThread     main       DATABASE    export home tmp os       testingInMyDerbySandbox    db slave wombat    DRDAID         Replication slave mode started successfully for database   export home tmp os       testingInMyDerbySandbox    db slave wombat   Connection refused because the database is in replication slave mode  Replication slave role was stopped for database   export home tmp os       testingInMyDerbySandbox    db slave wombat               BEGIN SHUTDOWN ERROR STACK              ERROR XSLA   Cannot redo operation null in the log  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw log FileLogger redo FileLogger java       at org apache derby impl store raw log LogToFile recover LogToFile java      at org apache derby impl store raw RawStore boot RawStore java      at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl store access RAMAccessManager boot RAMAccessManager java       at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby iapi services monitor Monitor bootServiceModule Monitor java      at org apache derby impl db BasicDatabase bootStore BasicDatabase java      at org apache derby impl db BasicDatabase boot BasicDatabase java      at org apache derby impl db SlaveDatabase bootBasicDatabase SlaveDatabase java      at org apache derby impl db SlaveDatabase access     SlaveDatabase java     at org apache derby impl db SlaveDatabase SlaveDatabaseBootThread run SlaveDatabase java      at java lang Thread run Thread java     Caused by  ERROR        Database       shutdown  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw log LogToFile stopReplicationSlaveRole LogToFile java       at org apache derby impl store replication slave SlaveController stopSlave SlaveController java      at org apache derby impl store replication slave SlaveController access     SlaveController java     at org apache derby impl store replication slave SlaveController SlaveLogReceiverThread run SlaveController java                   begin nested exception  level                ERROR        Database       shutdown  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw log LogToFile stopReplicationSlaveRole LogToFile java       at org apache derby impl store replication slave SlaveController stopSlave SlaveController java      at org apache derby impl store replication slave SlaveController access     SlaveController java     at org apache derby impl store replication slave SlaveController SlaveLogReceiverThread run SlaveController java                   end nested exception  level                             END SHUTDOWN ERROR STACK                 ',0
'Fix error handling in PrivilegedFileOpsForTests    The exception handling in this utility class is unclear and can in some cases cause ClassCastException to be thrown Note that SecurityException is a runtime exception Potential issues to be fixed     Avoid possibility of ClassCastException in  getFileInputStream     Don t include SecurityException in the signature  throws clause     Document SecurityException in JavaDoc Points   and   leads to the option of not catching SecurityException  which allows the code to be written more concisely and we can use PrivilegedAction instead of PrivilegedExceptionAction in some cases There is also a missing character in the class name in the header  and an invalid JavaDoc tag in the class JavaDoc    ',0
'Improve calculation of refSize in ClassSize java    java engine org apache derby iapi services cache ClassSize java has a static code block which calculates the size of a reference for the architecture  This code could be improved by adding garbage collection before measuring memory  to give a consistent reading  Also there have been suggestions that we use os arch or sun arch data model to make the measurement more reliable  especially on   bit machines    ',0
'Incorrect position calculation in PositionedStoreStream with read byte           A bug in the methods  read byte     and  read byte   int int   in PositionedStoreStream can cause the position variable to be set to an incorrect value The bug is only triggered if one of the two read methods is invoked after EOF of the underlying stream has been reached If the bug is triggered  the position will be decreased by one because the underlying stream returns     Subsequent reads will further decrease the position  This can cause EOF exceptions  during repositioning  or incorrect data being returned in subsequent calls    ',0
'Revoking a column level privilege from a user  a prepared statement relying on that privilege can still be executed    When a table level SELECT privilege is revoked  a dependent prepared statement is invalidated and can no longer be executed  but in the case of a column level privilegeSELECT privilege  the dependent prepared statement can still be executed This works as expected in       but does not work in all      and      releases    ',1
'Derby can leak classloaders in an app server environment    A user reported potential class loader leaks in Derby   The first one looks like Derby created a long runningthread and copying the context class loader  To fix  thecontext class loader should be saved set restored around thecreation of the new thread so that it copies some benign classloader instead  e g   null or getClass   getClassLoader      x     e   java lang Thread    e   e      truncating at running thread LEAK     Object   x     e   java lang Thread    e   eChildren   x     ee  java lang String    f   f  x    e    java lang ThreadGroup  f e f e  x     e  org apache derby impl services monitor AntiGC    a   a  x   cfac The second is another long running thread  The same applies   x   fe a  java lang Thread               truncating at running thread LEAK     Object   x   fe a  java lang Thread         Parents   x    e a   Ljava lang Thread   f   f    x   fe   org apache derby iapi services context ContextManager         Children   x   fe    java lang String   a   a   x    e    java lang ThreadGroup  f e f e  x   fe f org apache derby impl services daemon BasicDaemon           x   cfac The third is a TimerThread owneed   which is created when aTimer is created  The same applies   x   ac    java util Timer TimerImpl  b a b a      truncating at running thread LEAK     Object   x   ac    java util Timer TimerImpl  b a b aParents   x  faaf    Ljava lang Thread   c   c  Object   x   ac    java util Timer  b   b  Parents   x   ac   org apache derby impl services timer SingletonTimerFactory   e   e For more info  see thread at http   www nabble com ClassLoader leaks  td         html   ',1
'ImportExportLobTest failed on Zos  Clobs differ at index   expected  but was     testImportDataExportQueryLobsInExtFile org apache derbyTesting functionTests tests tools ImportExportLobTest junit framework AssertionFailedError  Clobs differ at index   expected  lt    gt  but was  lt     gt  at org apache derbyTesting junit BaseJDBCTestCase assertEquals BaseJDBCTestCase java      at org apache derbyTesting junit JDBC assertSameContents JDBC java       at org apache derbyTesting functionTests tests tools ImportExportLobTest verifyData ImportExportLobTest java      at org apache derbyTesting functionTests tests tools ImportExportLobTest testImportDataExportQueryLobsInExtFile ImportExportLobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    I ran on Windows with  Dfile encoding  UTF     and got a different error    testImportDataExportQueryLobsInExtFile org apache derbyTesting functionTests tests tools ImportExportLobTest java sql SQLException  The exception  java sql SQLException  Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table   was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement execute EmbedPreparedStatement java       at org apache derbyTesting functionTests tests tools ImportExportBaseTest doImportDataLobsFromExtFile ImportExportBaseTest java      at org apache derbyTesting functionTests tests tools ImportExportLobTest testImportDataExportQueryLobsInExtFile ImportExportLobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java sql SQLException  The exception  java sql SQLException  Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table   was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  java sql SQLException  Column  COLUMN   is either not in any table in the FROM list or appears within a joinspecification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java      at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  EmbedPreparedStatement   java     at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby impl load Import performImport Import java      at org apache derby impl load Import importData Import java      at org apache derby catalog SystemProcedures SYSCS IMPORT DATA LOBS FROM EXTFILE SystemProcedures java       at org apache derby exe acaa ac   x   bx    x cd x     dcd cb   g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              moreCaused by  ERROR   X    Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql compile ColumnReference bindExpression ColumnReference java      at org apache derby impl sql compile ResultColumn bindExpression ResultColumn java      at org apache derby impl sql compile ResultColumnList bindExpressions ResultColumnList java      at org apache derby impl sql compile SelectNode bindExpressions SelectNode java      at org apache derby impl sql compile SelectNode bindExpressionsWithTables SelectNode java      at org apache derby impl sql compile DMLStatementNode bindExpressionsWithTables DMLStatementNode java      at org apache derby impl sql compile DMLStatementNode bindResultSetsWithTables DMLStatementNode java      at org apache derby impl sql compile InsertNode bindStatement InsertNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java             more   testImportDataExportQueryLobsInExtFile org apache derbyTesting functionTests tests tools ImportExportLobTest java sql SQLException  The exception  java sql SQLException  Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table   was thrown while evaluating an expression  at org apache derby client am SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am PreparedStatement execute PreparedStatement java       at org apache derbyTesting functionTests tests tools ImportExportBaseTest doImportDataLobsFromExtFile ImportExportBaseTest java      at org apache derbyTesting functionTests tests tools ImportExportLobTest testImportDataExportQueryLobsInExtFile ImportExportLobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  org apache derby client am SqlException  The exception  java sql SQLException  Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table   was thrown while evaluating an expression  at org apache derby client am Statement completeExecute Statement java       at org apache derby client net NetStatementReply parseEXCSQLSTTreply NetStatementReply java      at org apache derby client net NetStatementReply readExecuteCall NetStatementReply java      at org apache derby client net StatementReply readExecuteCall StatementReply java     at org apache derby client net NetStatement readExecuteCall  NetStatement java      at org apache derby client am Statement readExecuteCall Statement java       at org apache derby client am PreparedStatement flowExecute PreparedStatement java       at org apache derby client am PreparedStatement executeX PreparedStatement java       at org apache derby client am PreparedStatement execute PreparedStatement java              moreCaused by  org apache derby client am SqlException  Column  COLUMN   is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and isnot in the GROUP BY list  If this is a CREATE or ALTER TABLE statement then  COLUMN   is not a column in the target table         more   ',0
'jdbc  ClobTest fails on Zos with AssertionFailedError  Streams differ at index   expected  but was     testGetAsciiStreamCreateClob org apache derbyTesting functionTests tests jdbc  ClobTest junit framework AssertionFailedError  Streams differ at index   expected  lt     gt  but was  lt    gt  at org apache derbyTesting junit BaseTestCase assertEquals BaseTestCase java      at org apache derbyTesting functionTests tests jdbc  ClobTest testGetAsciiStreamCreateClob ClobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    I was able to reproduce this on Windows with slightly different errors running with  Dfile encoding  UTF    There were   errors   testGetCharacterStreamClobUpdates org apache derbyTesting functionTests tests jdbc  ClobTest java sql SQLException  Te position argument      exceeds the size of the BLOB CLOB  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedClob setString EmbedClob java      at org apache derby impl jdbc EmbedClob setString EmbedClob java      at org apache derbyTesting functionTests tests jdbc  ClobTest testGetCharacterStreamClobUpdates ClobTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    aused by  java sql SQLException  The position argument      exceeds the size of the BLOB CLOB  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java     at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            more  testGetCharacterStreamClobUpdates org apache derbyTesting functionTests tests jdbc  ClobTest java sql SQLException  Te position argument      exceeds the size of the BLOB CLOB  at org apache derby client am SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am Clob setString Clob java      at org apache derbyTesting functionTests tests jdbc  ClobTest testGetCharacterStreamClobUpdates ClobTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    aused by  org apache derby client am SqlException  The position argument      exceeds the size of the BLOB CLOB  at org apache derby client am Clob setStringX Clob java      at org apache derby client am Clob setString Clob java             morehere were   failures   testGetAsciiStreamCreateClob org apache derbyTesting functionTests tests jdbc  ClobTest junit framework AssertionFaildError  Streams differ at index   expected  lt     gt  but was  lt    gt  at org apache derbyTesting junit BaseTestCase assertEquals BaseTestCase java      at org apache derbyTesting functionTests tests jdbc  ClobTest testGetAsciiStreamCreateClob ClobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java      testGetAsciiStreamCreateClob org apache derbyTesting functionTests tests jdbc  ClobTest junit framework AssertionFaildError  Streams differ at index   expected  lt     gt  but was  lt    gt  at org apache derbyTesting junit BaseTestCase assertEquals BaseTestCase java      at org apache derbyTesting functionTests tests jdbc  ClobTest testGetAsciiStreamCreateClob ClobTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    FAILURES   Tests run      Failures     Errors      ',0
'SecureServerTest  SSLTest are failed on Zos with exit code     starting network server       ',1
'PositionedStoreStream reposition pos  with pos greater than length leaves the stream object in an inconsistent state    PositionedStoreStream reposition pos  with pos greater than the stream length leaves the stream object in an inconsistent state  causing subsequent calls to fail or the state to remain inconsistent  which can cause the wrong data to be returned  The problem is that the position variable gets out of sync with the underlying stream There are at least two ways to fix this  assuming the positioned store stream does not know the length of the underlying stream   a  Reset stream to position zero  b  Let the stream be positioned at EOF and update the internal position variable Option b  leaves the stream in an unusable state  and the next request will cause option a  to be performed  It also require a slight rewrite of  PositionedStoreStream skipFully  and  PositionedStoreStream reposition  to be able to determine the position of the stream  the length in this case  Option a  will cause the first page of the stream to be read into the cache  if not already there   but taken the reason for doing this is an error condition it seems acceptable A correct value of the position variable is required for correct valid operation of PositionedStoreStream    ',0
'Client Configuration java imports engine class  org apache derby iapi services info JVMInfo    The client code  org apache derby client am Configuration  imports the engine class org apache derby iapi services info JVMInfo This will make two copies of the class in derby jar and derbyclient jar which can cause problems if mixed version jars are used and I think may cause jar sealing issues as well Until we have a good framework for sharing code between engine and client  the client shouldn t import engine classes    ',0
'ImportExportTest doesn t detect lack of expected errors    I observed that ImportExportTest contains many test cases which do try catch assertSQLException  but none of them call fail   at the end of the try block  Example  public void testEarlyEndOfFile   throws Exception   Connection c   getConnection    try   doImportFromFile c   extin EndOfFile txt     T     null   null   null        catch  SQLException e    assertSQLState  XIE E   e      I think this means that if the expected exception isn t thrown the test still passes    ',0
'NullPointerException when accessing a clob through a pooled connection    After returning a pooled connection to the pool and getting it again a NullPointerException is thrown when a clob field is accessed again  This may be related to the following post  http   mail archives apache org mod mbox db derby user        mbox   C  CD             sun com  EHere is the stack trace java lang NullPointerException at org apache derby client am PreparedStatement setIntX Unknown Source  at org apache derby client am CallableLocatorProcedures clobGetLength Unknown Source  at org apache derby client am Clob getLocatorLength Unknown Source  at org apache derby client am Lob sqlLength Unknown Source  at org apache derby client am Clob length Unknown Source  at org apache derby client am Cursor getString Unknown Source  at org apache derby client am ResultSet getString Unknown Source  at derbyerr Main main Main java    Here is the code to reproduce the problem package derbyerr import java sql Connection import java sql PreparedStatement import java sql ResultSet import java sql SQLException import javax sql PooledConnection import org apache derby jdbc ClientConnectionPoolDataSource public class Main   public static void main  String   args    org apache derby tools sysinfo main  args    ClientConnectionPoolDataSource creator   new ClientConnectionPoolDataSource         There should be an empty db named testdb creator setDatabaseName   testdb     try   PooledConnection pc   creator getPooledConnection      Connection c   pc getConnection      PreparedStatement ps   ResultSet rs   String s      Drop the table  test   if it exsists try   ps   c prepareStatement   drop table test     ps execute      ps close        catch  Exception e         Create a test table with a clob field ps   c prepareStatement   create table test  pkey varchar      not null primary key  value clob      ps execute      ps close         Insert a record ps   c prepareStatement   insert into test values          abc       ps execute      ps close         Query the record and    ps   c prepareStatement   select   from test     rs   ps executeQuery      rs next            access the clob field   this works s   rs getString       assert s equals   abc     rs close      ps close         Simulate connection pooling  close the connection and get it again c close      c   pc getConnection         Now again query the record    ps   c prepareStatement   select   from test     rs   ps executeQuery      rs next            and access the clob   this fails s   rs getString       assert s equals   abc     rs close      ps close        catch  Exception e    e printStackTrace             ',0
'NullPointerException in stress multi test    I saw the following NPE in stress multi running on      with derbyclient java lang NullPointerException at org apache derby impl jdbc EmbedPreparedStatement getMetaData Unknown Source  at org apache derby impl drda DRDAConnThread writeSQLDARD Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Cleanup action completed   ',0
'StoreStreamClob getReader charPos  performs poorly    StoreStreamClob getReader charPos  performs poorly because it resets the underlying stream and skips data until it reached the requested character position  Not only does the data has to be skipped  it also has to be decoded  UTF    The problem is exposed through EmbedClob getSubString  which causes extremely bad performance for the client driver because the locator based Clob implementation uses this method For the record  there is another read buffer size issue that exaggerates the problem  it will probably be handled under DERBY       and also DERBY          ',0
'The test code executes java processes by just executing java instead of using a full path  This may cause the wrong java to be picked up     There are places in the code where we execute a java process  e g  BaseTestCase assertExecJavaCmdAsExpected where we execcute a java process and just call  java   In windows at least the new shell created for the exec ed process does not share the parent process path but rather picks up the path from the Windows System variables  This can cause the wrong java to be picked up  Also the method does not work for j  because it calls  java  instead of the actual executable name  Perhaps we should have a method  public static final String getJavaExecutableName     String vmname   getSystemProperty  com ibm oti vm exe    if  vmname    null  vmname   getSystemProperty  java home     File pathSeparator    java   return vmname   There are also issues with this in NetworkServerControlApiTest  NetworkServerTestSetup and the replication tests and maybe others as well    ',0
'difference between Embedded vs DerbyNetClient in format of return from timestamp cast   as varchar          There is a slight difference in how Embedded vs  DerbyNetClient return a specific cast This showed up during conversion of the test lang datetime sql which before was only run with Embedded   The following sql  prepare dateTimePS as  values  date cast   as integer   timestamp cast   as varchar         execute dateTimePS using  values cast   as integer                                    gives                                             Embedded                                       DerbyNetClient                                        in Embedded there s a     between date and time part  with DerbyNetClient a space  with Embedded the separator between time elements is    with DerbyNetClient    Embedded reflects the data as passed in  with DerbyNetClient it seems to be the default timestamp format  I am not sure which is correct at this point  but I confirmed the behavior is like this in latest builds of trunk and      and      branches    ',0
'tools ide is not included in the source tarball    The tools ide directory is not part of the source tarball  checked the          release and the          release candidate   It should be included to make it easier for people to open the source code in an IDE    ',0
'NPE in testSemantics      lang RolesTest  on JavaME   CVM    See http   dbtg thresher com derby test Daily javaME testing testlog ubuntu        suitesAll diff txt   testSemantics org apache derbyTesting functionTests tests lang RolesTest junit framework AssertionFailedError  java lang NullPointerException   at org apache derbyTesting junit JDBCDataSource getDataSourceObject Ljava lang String Ljava util HashMap  Ljava lang Object  JDBCDataSource java      at org apache derbyTesting junit J EEDataSource getConnectionPoolDataSource Lorg apache derbyTesting junit TestConfiguration Ljava util HashMap  Ljavax sql ConnectionPoolDataSource  J EEDataSource java     at org apache derbyTesting junit J EEDataSource getConnectionPoolDataSource  Ljavax sql ConnectionPoolDataSource  J EEDataSource java     at org apache derbyTesting functionTests tests lang RolesTest testCurrentRoleIsReset  V RolesTest java      at org apache derbyTesting functionTests tests lang RolesTest testSemantics  V RolesTest java      at org apache derbyTesting junit BaseTestCase runBare  V BaseTestCase java      at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at sun misc CVM runMain  V CVM java        ',0
'intermittent hang pinging  server on Linux    am looking at a intermittent hang with IBM     on Linux with the ping command  I am not entirely sure it is a jvm issue  but I have not been able to reproduce the hang with other jvms  The trace is XMTHREADINFO  main  TID  x          j thread t  x     AF   state R  prio   XMTHREADINFO   native thread ID  x E    native priority  x   native policy UNKNOWN  XESTACKTRACE at java net SocketInputStream socketRead  Native Method  XESTACKTRACE at java net SocketInputStream read SocketInputStream java      XESTACKTRACE at java net SocketInputStream read SocketInputStream java      XESTACKTRACE at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer NetworkServerControlImpl java       XESTACKTRACE at org apache derby impl drda NetworkServerControlImpl readResult NetworkServerControlImpl java       XESTACKTRACE at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen NetworkServerControlImpl java       XESTACKTRACE at org apache derby impl drda NetworkServerControlImpl ping NetworkServerControlImpl java      Compiled Code   XESTACKTRACE at org apache derby drda NetworkServerControl ping NetworkServerControl java     Compiled Code   XESTACKTRACE at Repro pingForServerUp Repro java    Compiled Code   XESTACKTRACE at Repro startAndShutdown Repro java    The client has sent the ping  but there is no corresponding session on the server side to process thecommand  The full thread dump is in javacore                           txtThe program Repro java shows the problem  It repeatedly starts the server  pings until it comes up  and then shuts down In the derby log I see a startup error  that the address is already in use  so presumably the shutdown is not complete before we start the server and then perhaps it shuts down mid ping causing the hang                         GMT   Could not listen on port      on host            java net BindException  Address already in useAn exception was thrown during network server startup  DRDA ListenPort S Could not listen on port      on host            java net BindException  Address already in usejava lang reflect InvocationTargetException at sun reflect GeneratedMethodAccessor  invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby iapi jdbc DRDAServerStarter run DRDAServerStarter java      at java lang Thread run Thread java     Caused by  java lang Exception  DRDA ListenPort S Could not listen on port      on host            java net BindException  Address already in use at java lang Throwable  lt init gt  Throwable java     at org apache derby impl drda NetworkServerControlImpl consolePropertyMessageWork NetworkServerControlImpl java       at org apache derby impl drda NetworkServerControlImpl consolePropertyMessage NetworkServerControlImpl java       at org apache derby impl drda NetworkServerControlImpl blockingStart NetworkServerControlImpl java            moreFull log is attached as derby log   ',0
'Concurrent Inserts of rows with XML data results in an exception    We insert rows into a table using the following prepared statement  through JDBC  INSERT INTO USER  PSTORE values      XMLPARSE document CAST    AS CLOB  preserve whitespace  where each of the   s are replaced with a string One thread runs fine  Two or more result in the following exception  org apache derby client am SqlException  Java exception   FWK    parse may not be called while parsing   org xml sax SAXException   at org apache derby client am SqlException  lt init gt  Unknown Source  at org apache derby client am SqlException  lt init gt  Unknown Source We believe that this comes from the dBuilder parse InputSource  method    ',0
'Replication  stopSlave does not close serversocket when master has crashed     The stopSlave command  connection URL attribute  fails to close the ServerSocket when called after master database has crashed  Because of this  the same Derby instance cannot later start a slave on the same port  The problem is in ReplicationMessageReceive tearDown and SocketConnection tearDown SC tearDown When objOutputStream is closed  the stream s flush method is called  Flush throws an exception  and socket close is not called RMR tearDown When socketCon teardown throws an exception  serverSocket close is not called Suggested fix  add try catch finally blocks so that vital code  socket close and serverSocket close  is always called Note that the stop slave command can also come from the master  if stopMaster connection URL is called   in which case this bug will not materialize    ',0
'LOBStreamControl replaceBytes   leaves temporary files open    I haven t seen any problems as a result of this  but the code that closes and deletes the old temporary file in LOBStreamControl replaceBytes   looks wrong to me When replaceBytes   is called on a lob that has been materialized into a temporary file  it will create a new file and copy the relevant parts from the old file  But the old file is only closed and deleted if the block that is replaced ends before the last byte of the lob  I believe that the old file should be closed and deleted also when we replace a block that ends at or after the last byte of the original lob    ',0
'Embedded Derby fails under JBoss because of JMX related conflicts    I m trying to use embedded Derby as datasource for JBoss and found that it fails with error See stacktrace below It looks like JMX module in Derby conflicts with JBoss JMX After I have disabled Derby JMX removing  derby module mgmt jmx org apache derby impl services jmx JMXManagementService  line from org apache derby modules properties file in derby jar JAR  the bug disappears How to reproduce the issue     Install JBoss    Copy jboss docs examples varia derby plugin jar into jboss server default lib    Copy Derby JAR  derby jar  into jboss server default lib    Copy datasource file into jboss server default lib    Start JBoss using bin run batDatasource file  zzzzz ds xml         lt  xml version       encoding  UTF     gt  lt  DOCTYPE datasources PUBLIC     JBoss  DTD JBOSS JCA Config      EN   http   www jboss org j ee dtd jboss ds     dtd  gt  lt datasources gt   lt local tx datasource gt   lt jndi name gt zzzzzDatasource lt  jndi name gt   lt driver class gt org apache derby jdbc EmbeddedDriver lt  driver class gt   lt    connection url gt jdbc derby   jboss server data dir    derby   zzzzz create true lt  connection url   gt   lt connection url gt jdbc derby IGNORED lt  connection url gt   lt user name gt IGNORED lt  user name gt   lt password gt IGNORED lt  password gt   lt min pool size gt   lt  min pool size gt   lt max pool size gt    lt  max pool size gt   lt idle timeout minutes gt   lt  idle timeout minutes gt   lt track statements  gt   lt depends gt jboss service zzzzzDerbyDB lt  depends gt   lt  local tx datasource gt   lt     Don t forget to install derby plugin jar and derby  jar into jboss server default lib    gt   lt mbean code  org jboss jdbc DerbyDatabase  name  jboss service zzzzzDerbyDB  gt   lt attribute name  Database  gt zzzzz lt  attribute gt   lt attribute name  User  gt sa lt  attribute gt   lt attribute name  Password  gt  lt  attribute gt   lt  mbean gt  lt  datasources gt       Part of JBoss log with error and stacktrace                    INFO      DerbyDatabase      starting derby jdbc derby C  opt jboss       GA server default data derby zzzzz create true             WARN      ServiceController      Problem starting service jboss service zzzzzDerbyDBjava lang ExceptionInInitializerError at java lang Class forName  Native Method  at java lang Class forName Class java      at org jboss jdbc DerbyDatabase getConnection DerbyDatabase java      at org jboss jdbc DerbyDatabase startService DerbyDatabase java      at org jboss system ServiceMBeanSupport jbossInternalStart ServiceMBeanSupport java      at org jboss system ServiceMBeanSupport jbossInternalLifecycle ServiceMBeanSupport java      at sun reflect GeneratedMethodAccessor  invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss system ServiceController ServiceProxy invoke ServiceController java      at  Proxy  start Unknown Source  at org jboss system ServiceController start ServiceController java      at sun reflect GeneratedMethodAccessor  invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss mx util MBeanProxyExt invoke MBeanProxyExt java      at  Proxy  start Unknown Source  at org jboss deployment SARDeployer start SARDeployer java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx interceptor AbstractInterceptor invoke AbstractInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx interceptor ModelMBeanOperationInterceptor invoke ModelMBeanOperationInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss mx util MBeanProxyExt invoke MBeanProxyExt java      at  Proxy   start Unknown Source  at org jboss deployment XSLSubDeployer start XSLSubDeployer java      at org jboss deployment MainDeployer start MainDeployer java       at org jboss deployment MainDeployer deploy MainDeployer java      at org jboss deployment MainDeployer deploy MainDeployer java      at sun reflect GeneratedMethodAccessor   invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx interceptor AbstractInterceptor invoke AbstractInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx interceptor ModelMBeanOperationInterceptor invoke ModelMBeanOperationInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss mx util MBeanProxyExt invoke MBeanProxyExt java      at  Proxy  deploy Unknown Source  at org jboss deployment scanner URLDeploymentScanner deploy URLDeploymentScanner java      at org jboss deployment scanner URLDeploymentScanner scan URLDeploymentScanner java      at org jboss deployment scanner AbstractDeploymentScanner ScannerThread doScan AbstractDeploymentScanner java      at org jboss deployment scanner AbstractDeploymentScanner startService AbstractDeploymentScanner java      at org jboss system ServiceMBeanSupport jbossInternalStart ServiceMBeanSupport java      at org jboss system ServiceMBeanSupport jbossInternalLifecycle ServiceMBeanSupport java      at sun reflect GeneratedMethodAccessor  invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss system ServiceController ServiceProxy invoke ServiceController java      at  Proxy  start Unknown Source  at org jboss system ServiceController start ServiceController java      at sun reflect GeneratedMethodAccessor  invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss mx util MBeanProxyExt invoke MBeanProxyExt java      at  Proxy  start Unknown Source  at org jboss deployment SARDeployer start SARDeployer java      at org jboss deployment MainDeployer start MainDeployer java       at org jboss deployment MainDeployer deploy MainDeployer java      at org jboss deployment MainDeployer deploy MainDeployer java      at org jboss deployment MainDeployer deploy MainDeployer java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org jboss mx interceptor ReflectedDispatcher invoke ReflectedDispatcher java      at org jboss mx server Invocation dispatch Invocation java     at org jboss mx interceptor AbstractInterceptor invoke AbstractInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx interceptor ModelMBeanOperationInterceptor invoke ModelMBeanOperationInterceptor java      at org jboss mx server Invocation invoke Invocation java     at org jboss mx server AbstractMBeanInvoker invoke AbstractMBeanInvoker java      at org jboss mx server MBeanServerImpl invoke MBeanServerImpl java      at org jboss mx util MBeanProxyExt invoke MBeanProxyExt java      at  Proxy  deploy Unknown Source  at org jboss system server ServerImpl doStart ServerImpl java      at org jboss system server ServerImpl start ServerImpl java      at org jboss Main boot Main java      at org jboss Main   run Main java      at java lang Thread run Thread java     Caused by  javax management JMRuntimeException  Failed to load MBeanServerBuilder class org jboss mx server MBeanServerBuilderImpl  java lang ClassNotFoundException  org jboss mx server MBeanServerBuilderImpl at javax management MBeanServerFactory checkMBeanServerBuilder MBeanServerFactory java      at javax management MBeanServerFactory getNewMBeanServerBuilder MBeanServerFactory java      at javax management MBeanServerFactory newMBeanServer MBeanServerFactory java      at javax management MBeanServerFactory createMBeanServer MBeanServerFactory java      at javax management MBeanServerFactory createMBeanServer MBeanServerFactory java      at sun management ManagementFactory createPlatformMBeanServer ManagementFactory java      at java lang management ManagementFactory getPlatformMBeanServer ManagementFactory java      at org apache derby impl services jmx JMXManagementService   run Unknown Source  at org apache derby impl services jmx JMXManagementService   run Unknown Source  at java security AccessController doPrivileged Native Method  at org apache derby impl services jmx JMXManagementService findServer Unknown Source  at org apache derby impl services jmx JMXManagementService boot Unknown Source  at org apache derby impl services monitor BaseMonitor boot Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor startModule Unknown Source  at org apache derby iapi services monitor Monitor startSystemModule Unknown Source  at org apache derby impl services monitor BaseMonitor runWithState Unknown Source  at org apache derby impl services monitor FileMonitor  lt init gt  Unknown Source  at org apache derby iapi services monitor Monitor startMonitor Unknown Source  at org apache derby iapi jdbc JDBCBoot boot Unknown Source  at org apache derby jdbc EmbeddedDriver boot Unknown Source  at org apache derby jdbc EmbeddedDriver  lt clinit gt  Unknown Source          moreCaused by  java lang ClassNotFoundException  org jboss mx server MBeanServerBuilderImpl at java lang Class forName  Native Method  at java lang Class forName Class java      at javax management MBeanServerFactory loadBuilderClass MBeanServerFactory java      at javax management MBeanServerFactory checkMBeanServerBuilder MBeanServerFactory java              more             INFO      ConnectionFactoryBindingService      Bound ConnectionManager  jboss jca service DataSourceBinding name DefaultDS  to JNDI name  java DefaultDS              INFO      A      Bound to JNDI name  queue A             INFO      B      Bound to JNDI name  queue B             INFO      C      Bound to JNDI name  queue C             INFO      D      Bound to JNDI name  queue D             INFO      ex      Bound to JNDI name  queue ex             INFO      testTopic      Bound to JNDI name  topic testTopic             INFO      securedTopic      Bound to JNDI name  topic securedTopic             INFO      testDurableTopic      Bound to JNDI name  topic testDurableTopic             INFO      testQueue      Bound to JNDI name  queue testQueue             INFO      UILServerILService      JBossMQ UIL service available at                               INFO      DLQ      Bound to JNDI name  queue DLQ             INFO      ConnectionFactoryBindingService      Bound ConnectionManager  jboss jca service ConnectionFactoryBinding name JmsXA  to JNDI name  java JmsXA              INFO      TomcatDeployer      deploy  ctxPath  jmx console  warUrl     deploy jmx console war              ERROR      URLDeploymentScanner      Incomplete Deployment listing         MBeans waiting for other MBeans        ObjectName  jboss service zzzzzDerbyDB State  FAILED Reason  java lang ExceptionInInitializerError Depends On Me  jboss jca service ManagedConnectionFactory name zzzzzDatasource        MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM        ObjectName  jboss service zzzzzDerbyDB State  FAILED Reason  java lang ExceptionInInitializerError Depends On Me  jboss jca service ManagedConnectionFactory name zzzzzDatasource             INFO      Http  AprProtocol      Starting Coyote HTTP     on http                            INFO      AjpAprProtocol      Starting Coyote AJP     on ajp                            INFO      Server      JBoss  MX MicroKernel             GA  build  SVNTag JBoss       GA date                    Started in   s    ms   ',0
'LOBStreamControl truncate   doesn t delete temporary files    If LOBStreamControl truncate   reduces the size of the lob so that it fits in the internal buffer  it closes the temporary file  but it doesn t remove it  See the attached Java class  TruncateClob java  which fills the tmp directory with temporary lob files  even if each lob is explicitly freed    ',0
'SQLSessionContext not correctly initialized in some non method call nested contexts    In some contexts  beside calling stored routines containing SQL  Derbyuses nested execution contexts  wehere we have two nested activations but no nested connections In such cases  currently a new SQLSessionContext is constructed  butnot initialized correctly  This leads to the session variablesCURRENT ROLE CURRENT SCHEMA not being set correctly in these contexts they should inherited from the parent context  cf DERBY       For method calls  this is being handled by generating a call tolcc setupNestedSessionContext  seeStaticMethodCallNode generateSetupNestedSessionContext In some of these nested contexts  one or both of the session variablesCURRENT ROLE CURRENT SCHEMA can be referenced  in othersnot  Obviously  if they can  this will lead to errors  The followingcontexts will have this problem  ALTER TABLE ADD COLUMN  lt colname gt   lt coltype gt  DEFAULT CURRENT ROLE In the AlterTableConstantAction  a nested UPDATE statement is used to give existing rows the new column its default value  This execution context is nested  cf  AlterTableConstantAction executeUpdate TRIGGER body execution may reference CURRENT ROLE CURRENT SCHEMA  The body executes in a nested context  cf  GenericTriggerExecutor executeSPS In other cases  the session variables can not be referenced  so thisnot a problem   CHECK constraint execution when executed as part of an ALTER TABLE EmbedResultSet insertRow   deleteRow   updateRowThe session context should not be changed  pushed  for these nestedexecutions  since there is no nested connection  SQL                AnSQL session is associated with an SQL connection      ',0
'Blob setBytes differs between embedded and client driver when the specified length is invalid    Blob setBytes behaves differently with the embedded driver and the client driver Assume a   byte array and a specified length of    Blob setBytes    new byte     x          Embedded  IndexOutOfBoundsException  from java io RandomAccessFile writeBytes or System arraycopy Client  succeeds  returns insertion count  The behavior should be made consistent  but what is the correct behavior From the Blob setBytes JavaDoc  Writes all or part of the given byte array to the BLOB value that this Blob object represents and returns the number of bytes written  Writing starts at position pos in the BLOB value  len bytes from the given byte array are written  The array of bytes will overwrite the existing bytes in the Blob object starting at the position pos  If the end of the Blob value is reached while writing the array of bytes  then the length of the Blob value will be increased to accomodate the extra bytes     ',0
'some messages are referenced but never used   MessageBundleTest output    MessageBundleTest was taken out of derbyall because it only ran with classes  not with jars  and it was decided that it would be better to make this into a build check rather than a test   However  the build check   DERBY        was never implemented  and so  the test has not been run When I ran  I got the following output testSQLStateOrphanedIds ERROR  Message id       S   in SQLState java was not found in messages en propertiesERROR  Message id XCL   S in SQLState java was not found in messages en propertiesERROR  Message id X RQ  C in SQLState java was not found in messages en propertiesERROR  Message id XSAX  in SQLState java was not found in messages en propertiesused     ms  testMessageIdOrphanedIds used   ms  testMessageBundleOrphanedMessages WARNING  Message id       S   in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id J    in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id J    in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id J    in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id J    in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id       S   in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id XCL   S in messages en properties is not referenced in either SQLState java or MessageId javaWARNING  Message id XJ    S in messages en properties is not referenced in either SQLState java or MessageId javaused   ms Some of these are known issues  e g  XCL     it s been in MessageBundleTest out for a long time   XSAX  looks like a assumption mismatch in MessageBundleTest  see DERBY         But others need some minor code changes cleanup  for instance  looks like the need for J    was removed during DERBY       see http   svn apache org viewvc view rev amp revision         and should probably get removed from messages en properties messages xml Needs further checking    ',0
'mismatch between error XCL   and       S   and parameters in usage    I found a script  trunk tools testing i  nTestGenerator generateClientMessageTest sh  intended to create a test to verify correctness of client error messages trunk java testing org apache derbyTesting functionTests tests i  n TestClientMessages java    The script is broken  see DERBY       but after fixing up the resulting test and running it  it did show two messages which look a little odd in their usage  plus some messages for which the usage looked fine  XCL     LANG STREAMING COLUMN I O EXCEPTION  messages xml    lt msg gt   lt name gt XCL   S lt  name gt   lt text gt An IOException was thrown when reading a       from an InputStream  lt  text gt   lt arg gt value lt  arg gt   lt  msg gt apparently correct number of parameters  but odd   doesn t look like ioe fits the usage in the message text EmbedBlob    catch  IOException ioe    throw StandardException newException  SQLState LANG STREAMING COLUMN I O EXCEPTION  ioe    has a second parameter client am Lob  throw new SqlException null  new ClientMessageId  SQLState LANG STREAMING COLUMN I O EXCEPTION   typeDesc  ioe   looks like second parameter fits the     SQLBinary   throw StandardException  newException SQLState LANG STREAMING COLUMN I O EXCEPTION  ioe  getTypeName    SQLChar  throw StandardException  newException SQLState LANG STREAMING COLUMN I O EXCEPTION  ioe  getTypeName     throw StandardException newException  SQLState LANG STREAMING COLUMN I O EXCEPTION   ioe    java sql String                                                                       S     CLIENT LENGTH OUTSIDE RANGE FOR DATATYPE  lt msg gt   lt name gt       S   lt  name gt   lt text gt The length       exceeds the maximum length for the data type        lt  text gt   lt arg gt number lt  arg gt   lt arg gt datatypeName lt  arg gt   lt  msg gt correct number of parameters  but new Integer Integer MAX VALUE  returns a number  not a datatype name  client am PreparedStatement  throw new SqlException  agent  logWriter   new ClientMessageId  SQLState CLIENT LENGTH OUTSIDE RANGE FOR DATATYPE   new Long length   new Integer Integer MAX VALUE    getSQLException   client am ResultSet  throw new SqlException agent  logWriter   new ClientMessageId SQLState CLIENT LENGTH OUTSIDE RANGE FOR DATATYPE   new Long length   new Integer Integer MAX VALUE   getSQLException    throw new SqlException agent  logWriter   new ClientMessageId SQLState CLIENT LENGTH OUTSIDE RANGE FOR DATATYPE   new Long length   new Integer Integer MAX VALUE   getSQLException     throw new SqlException agent  logWriter   new ClientMessageId SQLState CLIENT LENGTH OUTSIDE RANGE FOR DATATYPE   new Long length   new Integer Integer MAX VALUE   getSQLException                                                 ',0
'testMetaDataQueryRunInSYScompilationSchema      upgradeTests Changes      fails on CVM phoneME    Seen since  svn r        See e g  http   dbtg thresher com derby test Daily javaME testing Limited testSummary        htmlhttp   dbtg thresher com derby test Daily javaME testing testlog ubuntu        suitesAll diff txt   testMetaDataQueryRunInSYScompilationSchema org apache derbyTesting functionTests tests upgradeTests Changes     java sql SQLException  Failed to create database  singleUse oneuse d   see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory getSQLException Ljava lang String Ljava lang String Ljava sql SQLException ILjava lang Throwable  Ljava lang Object  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Ljava lang String  Ljava lang Object Ljava sql SQLException ILjava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc Util seeNextException Ljava lang String  Ljava lang Object Ljava sql SQLException  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedConnection createDatabase Ljava lang String Ljava util Properties  Lorg apache derby iapi db Database  Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Lorg apache derby jdbc InternalDriver Ljava lang String Ljava util Properties  V Unknown Source  at org apache derby impl jdbc EmbedConnection    lt init gt  Lorg apache derby jdbc InternalDriver Ljava lang String Ljava util Properties  V Unknown Source  at org apache derby jdbc Driver    getNewEmbedConnection Ljava lang String Ljava util Properties  Lorg apache derby impl jdbc EmbedConnection  Unknown Source  at org apache derby jdbc InternalDriver connect Ljava lang String Ljava util Properties  Ljava sql Connection  Unknown Source  at org apache derby jdbc EmbeddedSimpleDataSource getConnection Ljava lang String Ljava lang String  Ljava sql Connection  Unknown Source  at org apache derby jdbc EmbeddedSimpleDataSource getConnection  Ljava sql Connection  Unknown Source  at org apache derbyTesting functionTests tests upgradeTests Changes     testMetaDataQueryRunInSYScompilationSchema  V Changes     java      at org apache derbyTesting junit BaseTestCase runBare  V BaseTestCase java      at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at sun misc CVM runMain  V CVM java     Caused by  java sql SQLException  Collator support not available from the JVM for the database s locale  no   at org apache derby impl jdbc SQLExceptionFactory getSQLException Ljava lang String Ljava lang String Ljava sql SQLException ILjava lang Throwable  Ljava lang Object  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Lorg apache derby iapi error StandardException  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Ljava lang Throwable ZZ Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Ljava lang Throwable  Ljava sql SQLException  Unknown Source         moreCaused by  ERROR XBM    Collator support not available from the JVM for the database s locale  no   at org apache derby iapi error StandardException newException Ljava lang String Ljava lang Object  Lorg apache derby iapi error StandardException  Unknown Source  at org apache derby iapi types DataValueFactoryImpl verifyCollatorSupport  Ljava text RuleBasedCollator  Unknown Source  at org apache derby iapi types DataValueFactoryImpl boot ZLjava util Properties  V Unknown Source  at org apache derby impl services monitor BaseMonitor boot Ljava lang Object ZLjava util Properties  V Unknown Source  at org apache derby impl services monitor TopService bootModule ZLjava lang Object Lorg apache derby impl services monitor ProtocolKey Ljava util Properties  Ljava lang Object  Unknown Source  at org apache derby impl services monitor BaseMonitor startModule ZLjava lang Object Ljava lang String Ljava lang String Ljava util Properties  Ljava lang Object  Unknown Source  at org apache derby iapi services monitor Monitor bootServiceModule ZLjava lang Object Ljava lang String Ljava util Properties  Ljava lang Object  Unknown Source  at org apache derby impl db BasicDatabase boot ZLjava util Properties  V Unknown Source  at org apache derby impl services monitor BaseMonitor boot Ljava lang Object ZLjava util Properties  V Unknown Source  at org apache derby impl services monitor TopService bootModule ZLjava lang Object Lorg apache derby impl services monitor ProtocolKey Ljava util Properties  Ljava lang Object  Unknown Source  at org apache derby impl services monitor BaseMonitor bootService Lorg apache derby iapi services monitor PersistentService Ljava lang String Ljava lang String Ljava util Properties Z Ljava lang Object  Unknown Source  at org apache derby impl services monitor BaseMonitor createPersistentService Ljava lang String Ljava lang String Ljava util Properties  Ljava lang Object  Unknown Source  at org apache derby iapi services monitor Monitor createPersistentService Ljava lang String Ljava lang String Ljava util Properties  Ljava lang Object  Unknown Source         more   ',0
'Incorrect ORDER BY caused by index    I think I found a bug in Derby that is triggered by an index on a large column  VARCHAR        I know it is generally not a good idea to have an index on such a large column I have a table  table   with a column  value   my query orders on this column but the result is not sorted  It is sorted if I remove the index on that column The output of the attached script is as follows  results should be ordered on the middle column  ID  VALUE  VALUE                                                                                                                         While I would expect ID  VALUE  VALUE                                                                                                                         This is the definition CREATE TABLE table   id BIGINT NOT NULL  PRIMARY KEY id   CREATE INDEX key  ON table  id  CREATE TABLE table   id BIGINT NOT NULL  name VARCHAR     NOT NULL  value VARCHAR        PRIMARY KEY id  name   CREATE UNIQUE INDEX key  ON table  id  name  CREATE INDEX key  ON table  value  This is the query SELECT table  id  m  value  m  valueFROM table   table  m   table  m WHERE table  id m  idAND m  name  PageSequenceId AND table  id m  idAND m  name  PostComponentId AND m  value        ORDER BY m  value The bug can be reproduced by just executing the attached script with the ij tool Note that the result of the query becomes correct when enough data is changed  This prevented me from creating a smaller example See the attached file  derby reproduce zip  for sysinfo  derby log and script sql Michael Segel pointed out  It looks like its hitting the index ordering on id name from table   and is ignoring the order by clause     ',0
'GeneratedColumnsTest fails with   F MINUS  is not recognized as a function or procedure   on cvm phoneME    See http   dbtg thresher com derby test Daily javaME testing Limited testSummary        html   http   dbtg thresher com derby test Daily javaME testing testlog ubuntu        suitesAll diff txt   test     basicForeignKeys org apache derbyTesting functionTests tests lang GeneratedColumnsTest java sql SQLException   F MINUS  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory getSQLException Ljava lang String Ljava lang String Ljava sql SQLException ILjava lang Throwable  Ljava lang Object  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Lorg apache derby iapi error StandardException  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Ljava lang Throwable ZZ Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  V Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement     lt init gt  Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  V Unknown Source  at org apache derby jdbc Driver    newEmbedPreparedStatement Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Ljava lang String IIII I Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derbyTesting functionTests tests lang GeneratedColumnsTest chattyPrepare Ljava sql Connection Ljava lang String  Ljava sql PreparedStatement  GeneratedColumnsTest java      at org apache derbyTesting functionTests tests lang GeneratedColumnsTest goodStatement Ljava sql Connection Ljava lang String  V GeneratedColumnsTest java      at org apache derbyTesting functionTests tests lang GeneratedColumnsTest test     basicForeignKeys  V GeneratedColumnsTest java      at org apache derbyTesting junit BaseTestCase runBare  V BaseTestCase java      at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at sun misc CVM runMain  V CVM java     Caused by  ERROR   Y     F MINUS  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException Ljava lang String Ljava lang Object  Lorg apache derby iapi error StandardException  Unknown Source  at org apache derby impl sql compile StaticMethodCallNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile JavaValueNode  Unknown Source  at org apache derby impl sql compile JavaToSQLValueNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile ValueNode  Unknown Source  at org apache derby impl sql compile GenerationClauseNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile ValueNode  Unknown Source  at org apache derby impl sql compile TableElementList bindAndValidateGenerationClauses Lorg apache derby impl sql compile FromList  V Unknown Source  at org apache derby impl sql compile CreateTableNode bindStatement  V Unknown Source  at org apache derby impl sql GenericStatement prepMinion Lorg apache derby iapi sql conn LanguageConnectionContext Z Ljava lang Object Lorg apache derby iapi sql dictionary SchemaDescriptor Z Lorg apache derby iapi sql PreparedStatement  Unknown Source  at org apache derby impl sql GenericStatement prepare Lorg apache derby iapi sql conn LanguageConnectionContext Z Lorg apache derby iapi sql PreparedStatement  Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Lorg apache derby iapi sql dictionary SchemaDescriptor Ljava lang String ZZ Lorg apache derby iapi sql PreparedStatement  Unknown Source         more   test     basicTriggers org apache derbyTesting functionTests tests lang GeneratedColumnsTest java sql SQLException   F MINUS  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory getSQLException Ljava lang String Ljava lang String Ljava sql SQLException ILjava lang Throwable  Ljava lang Object  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Lorg apache derby iapi error StandardException  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Ljava lang Throwable ZZ Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Ljava lang Throwable  Ljava sql SQLException  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  V Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement     lt init gt  Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  V Unknown Source  at org apache derby jdbc Driver    newEmbedPreparedStatement Lorg apache derby impl jdbc EmbedConnection Ljava lang String ZIIII I Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Ljava lang String IIII I Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Ljava lang String  Ljava sql PreparedStatement  Unknown Source  at org apache derbyTesting functionTests tests lang GeneratedColumnsTest chattyPrepare Ljava sql Connection Ljava lang String  Ljava sql PreparedStatement  GeneratedColumnsTest java      at org apache derbyTesting functionTests tests lang GeneratedColumnsTest goodStatement Ljava sql Connection Ljava lang String  V GeneratedColumnsTest java      at org apache derbyTesting functionTests tests lang GeneratedColumnsTest test     basicTriggers  V GeneratedColumnsTest java      at org apache derbyTesting junit BaseTestCase runBare  V BaseTestCase java      at junit extensions TestDecorator basicRun Ljunit framework TestResult  V TestDecorator java     at junit extensions TestSetup   protect  V TestSetup java     at junit extensions TestSetup run Ljunit framework TestResult  V TestSetup java     at org apache derbyTesting junit BaseTestSetup run Ljunit framework TestResult  V BaseTestSetup java     at sun misc CVM runMain  V CVM java     Caused by  ERROR   Y     F MINUS  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException Ljava lang String Ljava lang Object  Lorg apache derby iapi error StandardException  Unknown Source  at org apache derby impl sql compile StaticMethodCallNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile JavaValueNode  Unknown Source  at org apache derby impl sql compile JavaToSQLValueNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile ValueNode  Unknown Source  at org apache derby impl sql compile GenerationClauseNode bindExpression Lorg apache derby impl sql compile FromList Lorg apache derby impl sql compile SubqueryList Ljava util Vector  Lorg apache derby impl sql compile ValueNode  Unknown Source  at org apache derby impl sql compile TableElementList bindAndValidateGenerationClauses Lorg apache derby impl sql compile FromList  V Unknown Source  at org apache derby impl sql compile CreateTableNode bindStatement  V Unknown Source  at org apache derby impl sql GenericStatement prepMinion Lorg apache derby iapi sql conn LanguageConnectionContext Z Ljava lang Object Lorg apache derby iapi sql dictionary SchemaDescriptor Z Lorg apache derby iapi sql PreparedStatement  Unknown Source  at org apache derby impl sql GenericStatement prepare Lorg apache derby iapi sql conn LanguageConnectionContext Z Lorg apache derby iapi sql PreparedStatement  Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Lorg apache derby iapi sql dictionary SchemaDescriptor Ljava lang String ZZ Lorg apache derby iapi sql PreparedStatement  Unknown Source         more   ',0
'Generation clauses which mention user coded functions may produce different resuls depending on who performs the triggering INSERT UPDATE    This is similar to DERBY       The compiler uses the current schema in order to resolve unqualifed function names when preparing INSERT UPDATE statement  This means that a generation clause may evaluate differently depending on who invokes the triggering INSERT UPDATE statement  This violates the requirement that generation clause should be deterministic  see part   of the ANSI ISO standard  section      Hopefully  the same patch will fix both DERBY      and this issue    ',0
'Cannot insert     character long string into indexed column    Inserting a     character string into a varchar       column with an index fails These steps    create table t  x varchar       primary key      insert into t values   where   holds a     character stringproduce the following error ERROR XSCB   Limitation  Record of a btree secondary index cannot be updated or inserted due to lack of space on the page  Use the parameters derby storage pageSize and or derby storage pageReservedSpace to work around this limitation  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store access btree BTreeController doIns BTreeController java      at org apache derby impl store access btree BTreeController insert BTreeController java       at org apache derby impl store access btree index B IController insert B IController java      at org apache derby impl sql execute IndexChanger insertAndCheckDups IndexChanger java      at org apache derby impl sql execute IndexChanger doInsert IndexChanger java      at org apache derby impl sql execute IndexChanger insert IndexChanger java      at org apache derby impl sql execute IndexSetChanger insert IndexSetChanger java      at org apache derby impl sql execute RowChangerImpl insertRow RowChangerImpl java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java      The page size should be set sufficiently high at index creation time to hold columns with the specified maximum size    ',0
'Don t allow references to generated columns in the NEW transition variables of triggered actions of BEFORE triggers    Thanks to Dag for finding this restriction in the SQL Standard  part    section        SR    c  I see this provision      If BEFORE is specified  then    c  The  lt triggered action gt  shall not contain a  lt field reference gt  that references a field in the new transition variable corresponding to a generated column of T    ',0
'PositionedStoreStream doesn t initialize itself properly    When a PositionedStoreStream is created on top of a stream from store  it must properly initialize itself Proper initialization consists of initializing and resetting the stream to make sure the states of the streams are in sync A case of out of sync stream states was detected in a test where the Clob reference wasn t kept  but a new Clob object was created for each operation  i e  rs getClob    length    rs getClob    getSubString      A symptom of out of sync stream states is EOFException on a valid request I don t think the access style above is supposed to work  but the proper initialization should be performed anyway    ',0
'Clob truncate long  in the client driver doesn t update the cached Clob length    The client driver caches the Clob length  but doesn t update it when Clob truncate is called I will attach a few regression tests  where one of them demonstrates the issue  The fix is also very simple  update the cached length    ',0
'ResultSetStreamTest fails on case sensitive file systems  and isn t run as part of any suite    ResultSetStreamTest fails on case sensitive file systems  and it isn t run as part of any suite I believe this should be easy to fix  and can be a nice issue to work on for people wanting to get more familiar with the basics of the Derby test framework  including JUnit  Assuming the test works once the first obstacle has been removed   ',0
'With IBM     T RawStoreFactory fails with There should be   observers  but we still have   observers on Win  K    On Win K T RawStoreFactory fails consistently with java version        Java TM  SE Runtime Environment  build pwi    sr              SR   IBM J  VM  build      J RE       IBM J      Windows XP x      jvmwi                     JIT enabled  AOT enabled J VM                   lHdSMrJIT   r               GC            AB JCL                   Start  T RawStoreFactory jdk                               del lt          Unit Test T RawStoreFactory finished  add gt  There should be   observers  but we still have   observers  gt  Shutting down due to unit test failure Test Failed     I have seen the same failure on Linux and Windows XP intermittently with IBM        ',0
'ORDER BY causes column to be returned    The ORDER BY is causing the ordered column to be retrieved even though it is not part of the SELECT clause  Here is a script to create a table  insert a row  and perform the select CREATE TABLE  REVIEWS   GEOFF REVIEWS REVIEW   PK INTEGER PRIMARY KEY not null  numstars BIGINT  body VARCHAR         title VARCHAR         authoremail VARCHAR         INSERT INTO  REVIEWS   GEOFF REVIEWS REVIEW   PK numstars body title authoremail  VALUES     not nullable     s   s   s   SELECT  review   numstars FROM  GEOFF REVIEWS REVIEW  AS  review WHERE  review   PK     ORDER BY  review  PK   ',0
'ALTER COLUMN     WITH DEFAULT NULL does not change the default    Reported on derby user http   mail archives apache org mod mbox db derby user        mbox   c         post talk nabble com  eij gt  create table t  x varchar    default  abc     rows inserted updated deletedij gt  alter table t alter column x with default null   rows inserted updated deletedij gt  insert into t values default   row inserted updated deletedij gt  select   from t X abc   row selected   ',0
'ArrayIndexOutOfBoundsException in TopService inService under heavy multithreaded use of EmbeddedDriver    I have created a test program that reproduces this issue  The program pounds on Derby by running jobs on a pool of    threads  Each job creates a new Derby database  a schema  a table  and an index  Then it shuts down the database and finishes  The program runs until an error occurs or until      jobs have finished The problem is very intermittent  and related I think to multithreaded access of a vector  moduleInstances  in TopService java  I am seeing the error on my machine about half the time I run the test program  Sometimes it happens after     or     jobs   but sometimes not until     or more  or not at all I am using the        derby jar downloaded from http   db apache org derby releases release          cgi  without any modifications on my part I will attach the test program plus output from a run that failed with the ArrayIndexOutOfBoundsException   The actual exception thrown to the application from Derby is SQLException  but the underlying cause is an ArrayIndexOutOfBoundsException   BE AWARE that if you run this test program it can use up a GByte or more of disk space in your Java tmp directory    ',0
'An attempt was made to access an out of range slot on a page    When running our application we get the following error message An attempt was made to access an out of range slot on a page INSERT INTO orders  operation  receptacle  vehicle id  iata origin  icao origin  sta  eta  ata  pta  onb  arr stand id  arr gate  arr flight no  arr remarks  flight no  icao flight no  icao callsign  iata destination  icao destination  std  etd  atd  ofb  stand id  pit code  gate  aircraft subtype code  aircraft registration  fuel request  canceled  delay ind  remarks  ptd  slot request code  slot request  slot granted  terminal  customer name  customer type  supplier id  carnet no  carnet expiry  contract id  authorization reference  service level  standby at  started at  completed at  status  comment  meter  start volume automatic  meter  start volume manual  meter  stop volume automatic  meter  stop volume manual  meter  start volume automatic  meter  start volume manual  meter  stop volume automatic  meter  stop volume manual  temperature  density  created at  updated at  fuel on board  id  VALUES  FUELLING   NULL  NULL  NULL  NULL                                                                                                                      anAEBO yqr zaaabxfoB Q   NULL   DY        NULL   DY         NAX        NAX       TOS    ENTC                          NULL                                                 anAEBO yqr zaaabxfoB Q   NULL                LNKHA             X   NULL                         NULL  NULL  NULL       NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL  NULL                                                    aV HYQ  ir B DabxfoB Q  The error occurs several times per day on different systems  It started yesterday   ',0
'On Z OS store access sql fails with encryptionAES and encryptionDES    On Z OS access sql fails for encryptionAES and encryptionDES  The diff is big but I can t quite make out what the problem is  Maybe just a change of query plans    ',1
'org apache derby impl load Import needs to escape single quotes    The code that builds the SQL statement that invokes the Import VTI doesn t properly escape single quotes  This causes problems for users  see  http   mail archives apache org mod mbox db derby user        mbox   c         post talk nabble com  eImport performImport   is the method that needs to be fixed    ',0
'Multithreaded clob update causes growth in table that does not get reclaimed    Doing a multithreaded update of a Clob table causes table growth that does not get reclaimed except by compressing the table  The reproduction has a table with two threads  One thread updates row   repeatedly with        character clob  The other thread updates row   with a small clob   hello   The problem occurs back to      but seems much worse on trunk than       The trunk database grew to    MB on trunk after       updates of each row  The      database grew only to   MB  If the update is synchronized there is no growth I will attach the repro    ',0
'InputStream returned from Blob getBinaryStream long  long  terminates the stream by returning    should return       Take the following code to copy a sub stream from a BLOB Blob blob   rs getBlob    InputStream stream   blob getBinaryStream             try   IOUtils copy stream  out    finally   stream close    This will loop forever in IOUtils copy  as the InputStream is returning   at end of stream instead of     It probably should return    to comply with the Javadoc for InputStream Notes I have not yet checked Blob getBinaryStream    or any of the Clob methods  or the client driver  So some of these may have a similar issue    ',0
'ClientConnectionPoolDataSource getPooledConnection and ClientXADataSource getXAConnection ignore connection attributes    The methods CCPDS getPooledConnection and CXADS getXAConnection fail to pick up attributes set with setConnectionAttributes String  The current regression tests fail to detect this  because they obtain a connection using getConnection    I m not sure if this method should be present in a XADataSource at all  but this problem should be addressed by a separate issue    ',0
'shutdown with incorrect permission on log files shows java lang NullPointerException  at org apache derby impl store raw log LogToFile flush LogToFile java         Should give bettter message     I recently saw case where a user was seeing the following error in the derby log when trying to shutdown their database New exception raised during cleanup nulljava lang NullPointerException at org apache derby impl store raw log LogToFile flush LogToFile java       at org apache derby impl store raw log LogToFile flush LogToFile java       at org apache derby impl store raw data BaseDataFileFactory flush BaseDataFileFa at org apache derby impl store raw data CachedPage writePage CachedPage java     at org apache derby impl store raw data CachedPage clean CachedPage java      at org apache derby impl services cache ConcurrentCache cleanAndUnkeepEntry Conc at org apache derby impl services cache ConcurrentCache cleanCache ConcurrentCac at org apache derby impl services cache ConcurrentCache cleanAll ConcurrentCache at org apache derby impl services cache ConcurrentCache shutdown ConcurrentCache at org apache derby impl store raw data BaseDataFileFactory stop BaseDataFileFac at org apache derby impl services monitor TopService stop TopService java      at org apache derby impl services monitor TopService shutdown TopService java    at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java  at org apache derby impl db DatabaseContextImpl cleanupOnError DatabaseContextIm at org apache derby iapi services context ContextManager cleanupOnError ContextM at org apache derby impl jdbc TransactionResourceImpl cleanupOnError Transaction at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java     It ended up that some of the log files did not have proper write permissions because some operation on the database had been performed by root  They had subsequently deleted their db lck file so the database did not boot READ ONLY as it would if the root owned db lck file still existed and the symptom was that they got this error on shutdown Clearly this was user error  but it would have been good if we gave a better error message  To reproduce on Linux As a user with umask       run the program java MakeDBthis will make the databases wombat and create a table su rootwith umask       run the program to insert data and remove the db lck file java InsertALotrm wombat db lckgo back to the original userrun the program java ConnectAndShutdownThe application gets the normal shutdown exception but if you look in derby log you will see the exception java lang NullPointerException at org apache derby impl store raw log LogToFile flush LogToFile java          I will attach the files    ',1
'BTreeController comparePreviousRecord   may fail to release latch on left most leaf    If comparePreviousRecord   is called on some other leaf page than the left most leaf  and all the rows to the left of the current position are deleted so that the position is moved all the way to slot   on the left most leaf  comparePreviousRecord   will return without releasing the latch on the left most leaf  Only the leaf on which comparePreviousRecord   is called should be latched when the method returns Since comparePreviousRecord   currently fails to continue after finding a deleted row  this bug is not possible to expose until DERBY      is fixed    ',0
'BTreeScan delete   throws AM RECORD NOT FOUND if record is found    The code below is from BTreeScan delete    If the call to reposition   manages to position on the row  an exception is raised indicating that the row could not be found  If the row is not found  no exception is raised  but code later in the method will probably throw a NullPointerException because scan position current leaf is set to null by reposition    I believe that  if  reposition        should be changed to  if   reposition         According to the test coverage reports  this code is not exercised by any of the existing tests  if  latch released       lost latch on page in order to wait for row lock     Because we have scan lock on page  we need only    call reposition   which will use the saved record    handle to reposition to the same spot on the page     We don t have to search the    tree again  as we have the a scan lock on the page    which means the current rh is valid to reposition on  if  reposition scan position  false     throw StandardException newException  SQLState AM RECORD NOT FOUND  new Long err containerid   new Long scan position current rh getId              ',0
'Trigger  fails with ERROR        The exception  java sql SQLException  ResultSet not open  during VTIResultSet getNextRowCore      I don t have a reproduction without the user database yet  but it seems that recompiling the trigger stored prepared statements on upgrade is causing a result set to get closed and is causing the following error when firing a trigger in a global transaction  The holdability in an XA transaction is CLOSE CURSORS AT COMMIT so it may be that there is a commit occurring as part of the process that is causing the problem  I haven t tried yet with a regular transaction and using default holdability CLOSE CURSORS AT COMMIT  The error comes on a delete which fires an after delete statement trigger to insert some values into another table Here is the stack trace                         GMT Thread     main   main       XID              SESSIONID        DATABASE   derby wpsdb    DRDAID   null   Cleanup action starting                        GMT Thread     main   main       XID              SESSIONID        DATABASE   derby wpsdb    DRDAID   null   Failed Statement is  DELETE FROM XXX WHERE WSID  ERROR        The exception  java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF   was thrown while evaluating an expression  at org apache derby iapi error StandardException newException StandardException java      at org apache derby iapi error StandardException unexpectedUserException StandardException java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NestedLoopJoinResultSet getNextRowCore NestedLoopJoinResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute DeleteResultSet fireAfterTriggers DeleteResultSet java      at org apache derby impl sql execute DeleteResultSet open DeleteResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement executeUpdate EmbedStatement java      at org apache derby iapi jdbc BrokeredStatement executeUpdate BrokeredStatement java      at ReproRSClosed main ReproRSClosed java    Caused by  java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java       at org apache derby impl jdbc ConnectionChild newSQLException ConnectionChild java      at org apache derby impl jdbc EmbedResultSet checkIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet checkExecIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java             moreCaused by  java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            more              begin nested exception  level                java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java       at org apache derby impl jdbc ConnectionChild newSQLException ConnectionChild java      at org apache derby impl jdbc EmbedResultSet checkIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet checkExecIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NestedLoopJoinResultSet getNextRowCore NestedLoopJoinResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute DeleteResultSet fireAfterTriggers DeleteResultSet java      at org apache derby impl sql execute DeleteResultSet open DeleteResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement executeUpdate EmbedStatement java      at org apache derby iapi jdbc BrokeredStatement executeUpdate BrokeredStatement java      at ReproRSClosed main ReproRSClosed java    Caused by  java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            more              end nested exception  level                              begin nested exception  level                java sql SQLException  ResultSet not open  Operation  next  not permitted  Verify that autocommit is OFF  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util newEmbedSQLException Util java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java       at org apache derby impl jdbc ConnectionChild newSQLException ConnectionChild java      at org apache derby impl jdbc EmbedResultSet checkIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet checkExecIfClosed EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java      at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java      at org apache derby impl sql execute VTIResultSet getNextRowCore VTIResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NestedLoopJoinResultSet getNextRowCore NestedLoopJoinResultSet java      at org apache derby impl sql execute ProjectRestrictResultSet getNextRowCore ProjectRestrictResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute StatementTriggerExecutor fireTrigger StatementTriggerExecutor java     at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute DeleteResultSet fireAfterTriggers DeleteResultSet java      at org apache derby impl sql execute DeleteResultSet open DeleteResultSet java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement executeUpdate EmbedStatement java      at org apache derby iapi jdbc BrokeredStatement executeUpdate BrokeredStatement java      at ReproRSClosed main ReproRSClosed java                  end nested exception  level                Cleanup action completed   ',0
' testMixedInsertDelete org apache derbyTesting functionTests tests lang NullableUniqueConstraintTest org apache derby client am BatchUpdateException     Seen twice    See http   dbtg thresher com derby test trunk   jvm    testing testlog SunOS     sun u sparc        org apache derbyTesting functionTests suites All diff txthttp   dbtg thresher com derby test trunk   jvm    testing testlog SunOS      i  pc i           org apache derbyTesting functionTests suites All diff txt   testMixedInsertDelete org apache derbyTesting functionTests tests lang NullableUniqueConstraintTest org apache derby client am BatchUpdateException  Non atomic batch failure  The batch was submitted  but at least one exception occurred on an individual member of the batch  Use getNextException   to retrieve the exceptions for specific batched elements  at org apache derby client am Agent endBatchedReadChain Unknown Source  at org apache derby client am PreparedStatement executeBatchRequestX Unknown Source  at org apache derby client am PreparedStatement executeBatchX Unknown Source  at org apache derby client am PreparedStatement executeBatch Unknown Source  at org apache derbyTesting functionTests tests lang NullableUniqueConstraintTest testMixedInsertDelete NullableUniqueConstraintTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'SYSCS UTIL SYSCS UPDATE STATISTICS should update the store estimated row count for the table    When SYSCS UTIL SYSCS UPDATE STATISTICS is run  it doesn t update the store estimated row count  The program oldSelectivity java attached to DERBY      shows that the statistics are not updated See discussions in DERBY     https   issues apache org jira browse DERBY      focusedCommentId          amp page com atlassian jira plugin system issuetabpanels  Acomment tabpanel action         https   issues apache org jira browse DERBY      focusedCommentId          amp page com atlassian jira plugin system issuetabpanels  Acomment tabpanel action            ',0
'derbyclient jar is not a complete OSGi bundle    The manifest in derbyclient jar is incomplete for usage in OSGi  There are no packages exported  This appears to only be a problem in standalone equinox  outside of eclipse   Note that I did not try other OSGi containers The fix is relatively simple  Adding the Export Package manifest header should take care of the problem    ',0
'The in memory storage back end doesn t work on Windows    Bug reported by Knut Magne Solem  see DERBY     Using the in memory storage back end fails on Windows  i e  connect  jdbc derby memory MyDbTest create true   from ij  ERROR XJ     Java exception   ASSERT FAILED serviceName   memory C  Documents and Settings user workspace derby MyDbTest storageFactory getCanonicalName     C  Documents and Settings user workspace derby MyDbTest  org apache derby shared common sanity AssertFailure  With an insane build  the error messages will look like this ERROR XJ     Failed to create database  memory myDB   see the next exception for details ERROR XBM    Startup failed due to an exception  See next exception for details ERROR XSTB   Cannot log transaction changes  maybe trying to write to a read only database The error occurs during boot  which means Windows users are unable to use the in memory back end at all    ',0
' testTableFunctionInJar  fails w   The class  DummyVTI  does not exist or is inaccessible     on jvm       Seen in tests on jvm    since   svn rev        See e g http   dbtg thresher com derby test Daily jvm    testing Limited testSummary        htmlE g     testTableFunctionInJar org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest java sql SQLException  The class  DummyVTI  does not exist or is inaccessible  This can happen if the class is not public  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeQuery Unknown Source  at org apache derbyTesting functionTests tests lang DatabaseClassLoadingTest testTableFunctionInJar DatabaseClassLoadingTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java sql SQLException  Java exception   DummyVTI   DummyVTI  Unsupported major minor version        java lang ClassNotFoundException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java lang ClassNotFoundException  DummyVTI   DummyVTI  Unsupported major minor version       at org apache derby impl services reflect DatabaseClasses loadApplicationClass Unknown Source  at org apache derby iapi services loader ClassInspector getClass Unknown Source  at org apache derby iapi services loader ClassInspector accessible Unknown Source  at org apache derby impl sql compile QueryTreeNode verifyClassExist Unknown Source  at org apache derby impl sql compile StaticMethodCallNode bindExpression Unknown Source  at org apache derby impl sql compile JavaToSQLValueNode bindExpression Unknown Source  at org apache derby impl sql compile ResultColumn bindExpression Unknown Source  at org apache derby impl sql compile ResultColumnList bindExpressions Unknown Source  at org apache derby impl sql compile RowResultSetNode bindExpressions Unknown Source  at org apache derby impl sql compile DMLStatementNode bindExpressions Unknown Source  at org apache derby impl sql compile DMLStatementNode bind Unknown Source  at org apache derby impl sql compile CursorNode bindStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source         more   ',0
'java lang VerifyError causing java sql SQLException  Cannot create an instance of generated class     in lang GeneratedColumnsTest and GeneratedColumnsPermsTest  on IBM iseries    This results in    errors Here s the stack trace with an insane build    test     basicInsert org apache derbyTesting functionTests tests lang GeneratedColumnsTest java sql SQLException  Cannot create an instance of generated class org apache derby exe acd  d  d x    x  bdx dffxffffb          at java lang Throwable  lt init gt  Throwable java      at java lang Exception  lt init gt  Exception java     at java sql SQLException  lt init gt  SQLException java     at org apache derby impl jdbc EmbedSQLException  lt init gt  Unknown Source  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derbyTesting functionTests tests lang GeneratedColumnsHelper chattyPrepare GeneratedColumnsHelper java      at org apache derbyTesting functionTests tests lang GeneratedColumnsHelper goodStatement GeneratedColumnsHelper java      at org apache derbyTesting functionTests tests lang GeneratedColumnsTest test     basicInsert GeneratedColumnsTest java      at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   org apache derby exe acd  d  d x    x  bdx dffxffffb                     java lang VerifyError   at java lang Throwable  lt init gt  Throwable java      at java lang Exception  lt init gt  Exception java     at java sql SQLException  lt init gt  SQLException java     at org apache derby impl jdbc EmbedSQLException  lt init gt  Unknown Source  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java lang VerifyError  org apache derby exe acd  d  d x    x  bdx dffxffffb                    at java lang Throwable  lt init gt  Throwable java      at java lang Error  lt init gt  Error java     at java lang VerifyError  lt init gt  VerifyError java     at sun reflect NativeConstructorAccessorImpl newInstance NativeConstructorAccessorImpl java     at sun reflect DelegatingConstructorAccessorImpl newInstance DelegatingConstructorAccessorImpl java     at java lang reflect Constructor newInstance Constructor java      at org apache derby iapi services loader ClassInfo getNewInstance Unknown Source  at org apache derby impl services reflect LoadedGeneratedClass newInstance Unknown Source  at org apache derby impl services reflect ReflectGeneratedClass newInstance Unknown Source  at org apache derby impl sql GenericActivationHolder  lt init gt  Unknown Source  at org apache derby impl sql GenericPreparedStatement getActivation Unknown Source         more   ',0
'NullPointerException in system sttest run with             I see the following stack trace on line       of the redirected output Thread finished   complete initial datatotal memory           free          Tue Mar             PDT     java lang NullPointerException at org apache derbyTesting system sttest utils Datatypes update one row Datatypes java      at org apache derbyTesting system sttest Sttest run Sttest java     Exception in thread  Thread    java lang NullPointerException at org apache derbyTesting system sttest Sttest run Sttest java     java lang NullPointerException at org apache derbyTesting system sttest utils Datatypes update one row Datatypes java      at org apache derbyTesting system sttest Sttest run Sttest java     Exception in thread  Thread     java lang NullPointerException at org apache derbyTesting system sttest Sttest run Sttest java     java lang NullPointerException at org apache derbyTesting system sttest utils Datatypes update one row Datatypes java      at org apache derbyTesting system sttest Sttest run Sttest java     Exception in thread  Thread     java lang NullPointerException at org apache derbyTesting system sttest Sttest run Sttest java     quantity in pick some is     rows deletedMatching this up with the derby log   the first entry in derby log is                         GMT  and ls  al shows                  PDT for the creation of testDB  so time diff was   hours   shows nothing of interest  The last entry in derby log is at                         GMT  so only   hours later I ve seen the same thing   times   this needs to be analyzed further I will also run on another machine  and run with sane jars to see if we get any stack trace of other help from derby log    ',0
' No method was found that matched the method call       in testPayment and testSubmitter  org apache derbyTesting system oe test OperationsTester  on           RC      Seen when running testPayment org apache derbyTesting system oe test OperationsTester  with           RC   The test passed with no failures on             testPayment org apache derbyTesting system oe test OperationsTester java sql SQLSyntaxErrorException  No method was found that matched the method call org apache derbyTesting system oe routines Data dataForBadCredit java lang String  short  short  short  short  int  java math BigDecimal   tried all combinations of object and primitive types and any possible type conversion for any parameters the method call may have  The method might exist but it is not public and or static  or the parameter types are not method invocation convertible  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derbyTesting system oe direct StatementHelper prepareStatement StatementHelper java     at org apache derbyTesting system oe direct Standard paymentById Standard java      at org apache derbyTesting system oe direct Standard payment Standard java      at org apache derbyTesting system oe test OperationsTester testPayment OperationsTester java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       testSubmitter org apache derbyTesting system oe test OperationsTester java sql SQLSyntaxErrorException  No method was found that matched the method call org apache derbyTesting system oe routines Data dataForBadCredit java lang String  short  short  short  short  int  java math BigDecimal   tried all combinations of object and primitive types and any possible type conversion for any parameters the method call may have  The method might exist but it is not public and or static  or the parameter types are not method invocation convertible  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derbyTesting system oe direct StatementHelper prepareStatement StatementHelper java     at org apache derbyTesting system oe direct Standard paymentById Standard java      at org apache derbyTesting system oe direct Standard payment Standard java      at org apache derbyTesting system oe client Submitter runPayment Submitter java      at org apache derbyTesting system oe client Submitter runTransaction Submitter java      at org apache derbyTesting system oe test OperationsTester testSubmitter OperationsTester java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Related to DERBY       DERBY       DERBY       DERBY         ',0
'Connections to on disk db go to in memory db if in memory db with same name is booted    When an in memory database has been booted  subsequent attempts to connect to an ordinary  on disk  database with the same name as the in memory database will connect to the in memory db ij version     ij gt  connect  jdbc derby memory MyDB create true           with subprotocol memoryij gt  create table t  x varchar        rows inserted updated deletedij gt  insert into t values  This is the in memory backend    row inserted updated deletedij gt  connect  jdbc derby MyDB create true     without subprotocol memory  should create disk dbWARNING   J    Database  MyDB  not created  connection made to existing database instead ij CONNECTION   gt  select   from t X                               This is the in memory backend   row selected   ',0
'bootLock java fails with missing exception on z OS with  pmz    sr ifix             SR  IZ      IZ        and Windows Vista    I saw this diff in store bootLock java  I did not see it with the   bit jvm run on          RC      Start  bootLock jdk      storeall storemore                           d  lt  expected exception lt  SQLSTATE XJ      lt  SQLSTATE XSDB   Test Failed  End  bootLock jdk      storeall storemore                            The test passed on rerun when run independently    ',0
'When using the FOR UPDATE OF clause with SUR  Scroll insensive updatable result sets   the updateRow   method crashes    This problem occurs on both Client Server and Embedded With the Embedded driver  the JVM crashes with the following error                                       lt                                       testReproduction org apache derbyTesting functionTests tests store ReproHoldCursorBug org apache derby shared common sanity AssertFailure  ASSERT FAILED statementContext is not expected to equal statementContexts            at org apache derby shared common sanity SanityManager ASSERT SanityManager java      at org apache derby impl sql conn GenericLanguageConnectionContext popStatementContext GenericLanguageConnectionContext java       at org apache derby impl jdbc EmbedResultSet updateRow EmbedResultSet java       at org apache derbyTesting functionTests tests store ReproHoldCursorBug testReproduction ReproHoldCursorBug java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java                                         lt                                              It shows a stack trace after this  but I m attaching the result folders since those are more thorough             On the client driver  the JVM does not crash but it also errors out    testReproduction org apache derbyTesting functionTests tests store ReproHoldCursorBug java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerExceptionXJ    U more detail on the log files            The error does not show as long as the  OF DATA  isn t specified  It also won t show if the whole FOR UPDATE clause is omitted I would also like some comments and advice on how to proceed on converting holdCursorJDBC   sql as it is affected by this problem  The original test does an update on a cursor with the  FOR UPDATE OF DATA  clause  and this isn t working on the Java version of the test  Do I go around it by removing the FOR UPDATE clause or should I wait for this bug to get fixed Attachments               ErrorOutput Embedded tar gz   Error output files of the Embedded run              ErrorOutput Client tar gz   Error output files of the Client Server run              ReproHoldCursorBug java   The reproduction of the errors   ',0
'SecureServerTest AssertionFailedError  Timed out waiting for network server to start    I saw this failure in the nightly run on      on the      branch                        I have not seen it in previous runs on the same machine  There were actually two failures in the test  I think the second one failed because of the first so am not reporting a separate issue for that There were   failures    SecureServerTest  Opened   false  Authenticated  false  CustomDerbyProperties  null  WildCardHost  null  junit framework AssertionFailedError  Timed out waiting for network server to start Spawned SpawnedNetworkServer exitCode   at org apache derbyTesting junit NetworkServerTestSetup setUp NetworkServerTestSetup java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       SecureServerTest  Opened   false  Authenticated  false  CustomDerbyProperties  functionTests tests derbynet SecureServerTest derby properties  WildCardHost  null  junit framework AssertionFailedError  directory trace does not exist at org apache derbyTesting functionTests tests derbynet SecureServerTest setTraceDirectory SecureServerTest java      at org apache derbyTesting functionTests tests derbynet SecureServerTest testServerStartup SecureServerTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',1
' Table View  MAX SCAN  does not exist  in org apache derbyTesting functionTests tests store IndexSplitDeadlockTest    See e g  http   dbtg thresher com derby test trunk   jvm    testing testlog Linux          ELsmp x      x             org apache derbyTesting functionTests suites All diff txtThere were   errors    testMultipleLastKeyWaitsInMaxScan org apache derbyTesting functionTests tests store IndexSplitDeadlockTest java sql SQLException  Table View  MAX SCAN  does not exist  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest   doWork IndexSplitDeadlockTest java      at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest AsyncThread run IndexSplitDeadlockTest java      at java lang Thread run Thread java     Caused by  ERROR   X    Table View  MAX SCAN  does not exist  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile DMLModStatementNode verifyTargetTable Unknown Source  at org apache derby impl sql compile InsertNode bindStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql GenericPreparedStatement rePrepare Unknown Source        more   testMultiplePrevKeyWaitsInForwardScan org apache derbyTesting functionTests tests store IndexSplitDeadlockTest java sql SQLException  Table View  FW SCAN  does not exist  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest   doWork IndexSplitDeadlockTest java      at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest AsyncThread run IndexSplitDeadlockTest java      at java lang Thread run Thread java     Caused by  ERROR   X    Table View  FW SCAN  does not exist  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile DMLModStatementNode verifyTargetTable Unknown Source  at org apache derby impl sql compile InsertNode bindStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql GenericPreparedStatement rePrepare Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source        moreor http   dbtg thresher com derby test Daily jvm    testing testlog lin        suitesAll diff txt or http   dbtg thresher com derby test Daily jvm    testing testlog sles        suitesAll diff txt or http   dbtg thresher com derby test Daily javaME testing testlog ubuntu        suitesAll diff txt   ',0
'XAResource setTransactionTimeout   makes XAResource start   fail with the client driver    Got below error message when running an XA prolgram with derby  org apache derby client am XaException  XAER PROTO   Error executing a XAResource start    server returned XAER PROTO  at org apache derby client net NetXAResource throwXAException Unknown Source  at org apache derby client net NetXAResource start Unknown Source  at TestDerbyXA process TestDerbyXA java      at TestDerbyXA main TestDerbyXA java    Caused by  org apache derby client am SqlException  Error executing a XAResource start    server returned XAER PROTO  at org apache derby client net NetXAResource xaRetValErrorAccumSQL Unknown Source        moreBelow is the example program I used  Note  The program will succeed if comment out line       setTransactionTimeout  Does that means call XAResource setTransactionTimeout   caused the failure I use Apache Derby Network Server                        The same program works fine with another version Apache Derby Network Server                        It looks like there is a regression between the two versions import java sql Connection import java sql PreparedStatement import java sql SQLException import java sql Statement import javax sql XAConnection import javax transaction xa XAException import javax transaction xa XAResource import javax transaction xa Xid import org apache derby jdbc ClientXADataSource public class TestDerbyXA   ClientXADataSource xaDSLocal   null  ClientXADataSource xaDSRemote   null  public TestDerbyXA        Create two XA data sources  xaDSLocal   new ClientXADataSource    xaDSLocal setServerName  localhost    xaDSLocal setPortNumber        xaDSLocal setDatabaseName  testdb    xaDSLocal setUser  app    xaDSLocal setPassword  derby    xaDSRemote   new ClientXADataSource    xaDSRemote setServerName  localhost    xaDSRemote setPortNumber        xaDSRemote setDatabaseName  testdb    xaDSRemote setUser  app    xaDSRemote setPassword  derby       xaDSRemote   xaDSLocal    public static void main String   args  throws Exception   TestDerbyXA testObj   new TestDerbyXA    testObj dropTable  tablea    testObj createTable  CREATE TABLE tablea  col  INT  col  VARCHAR         testObj dropTable  tableb    testObj createTable  CREATE TABLE tableb  col  INT  col  VARCHAR         testObj process      public void dropTable String tableName  throws Exception   Connection conn   null  Statement stmt   null  try   conn   xaDSLocal getConnection    stmt   conn createStatement    stmt executeUpdate  DROP TABLE     tableName   System out println  Drop table     tableName     succeed       catch  SQLException sqle    System out println  Drop table     tableName     failed     sqle printStackTrace      finally                   Close JDBC objects  including the connection         if  stmt    null    try   stmt close    stmt   null    catch  SQLException e        if  conn    null    try   conn close    conn   null    catch  SQLException e            public void createTable String DDL  throws Exception   Connection conn   null  Statement stmt   null  try   conn   xaDSLocal getConnection    stmt   conn createStatement    stmt executeUpdate DDL   System out println DDL     succeed       catch  SQLException sqle    System out println DDL     failed     sqle printStackTrace      finally                   Close JDBC objects  including the connection         if  stmt    null    try   stmt close    stmt   null    catch  SQLException e        if  conn    null    try   conn close    conn   null    catch  SQLException e            public void process   throws Exception   Connection connLocal   null  Connection connRemote   null  int rows      PreparedStatement pstmtLocal   null  PreparedStatement pstmtRemote   null  XAConnection xaConnLocal   null  XAConnection xaConnRemote   null  XAResource xarLocal   null  XAResource xarRemote   null  Xid xidLocal   null  Xid xidRemote   null  try   xaConnLocal   xaDSLocal getXAConnection    xaConnRemote   xaDSRemote getXAConnection    connLocal   xaConnLocal getConnection    connRemote   xaConnRemote getConnection    xarLocal   xaConnLocal getXAResource    xarRemote   xaConnRemote getXAResource       Create the Xids    Create the global ID byte   globalTransactionId    new byte      globalTransactionId        byte     byte   globalTransactionId    new byte      globalTransactionId        byte        Create the local branch ID byte   branchQualifierLocal   new byte      branchQualifierLocal       byte     xidLocal   new XidImpl globalTransactionId   branchQualifierLocal   x          Create the remote branch ID byte   branchQualifierRemote   new byte      branchQualifierRemote       byte     xidRemote   new XidImpl globalTransactionId   branchQualifierRemote   x          Database operations on the local branch  suspend local branch xarLocal setTransactionTimeout             The failure will disappear if comment out this line  connLocal setAutoCommit false   xarLocal start xidLocal  XAResource TMNOFLAGS   pstmtLocal   connLocal  prepareStatement  INSERT INTO tablea  col   col   VALUES           pstmtLocal setInt        pstmtLocal setString     insert first rec to tablea    rows   pstmtLocal executeUpdate    System out println rows     rows inserted to tablea    pstmtLocal close    pstmtLocal   null  xarLocal end xidLocal  XAResource TMSUCCESS   connLocal setAutoCommit true      Database operation on the remote branch  commit remote branch xarRemote setTransactionTimeout       connRemote setAutoCommit false   xarRemote start xidRemote  XAResource TMNOFLAGS   pstmtRemote   connRemote  prepareStatement  INSERT INTO tableb  col   col   VALUES           pstmtRemote setInt        pstmtRemote setString     insert second rec to tableb    rows   pstmtRemote executeUpdate    System out println rows     rows inserted to tableb    pstmtRemote close    pstmtRemote   null  xarRemote end xidRemote  XAResource TMSUCCESS   connRemote setAutoCommit true   System out println  commit remote branch    xarRemote commit xidRemote  true      Resume the local branch and do some database operation  commit local branch xarLocal setTransactionTimeout       connLocal setAutoCommit false   xarLocal start xidLocal  XAResource TMJOIN   pstmtLocal   connLocal  prepareStatement  INSERT INTO tablea  col   col   VALUES           pstmtLocal setInt        pstmtLocal setString     insert third rec to tablea    rows   pstmtLocal executeUpdate    System out println rows     rows inserted to tablea    pstmtLocal close    pstmtLocal   null  xarLocal end xidLocal  XAResource TMSUCCESS   connLocal setAutoCommit true   System out println  commit local branch    xarLocal commit xidLocal  true      Close the resources connLocal close    connLocal   null  connRemote close    connRemote   null  xaConnLocal close    xaConnLocal   null  xaConnRemote close    xaConnRemote   null    catch  SQLException e    System err println  SQL Error      e getMessage     e printStackTrace      catch  XAException e    System err println  XA Error      e getMessage     e printStackTrace      finally   if  pstmtLocal    null  try   pstmtLocal close    pstmtLocal   null    catch  SQLException ignore      if  pstmtRemote    null  try   pstmtRemote close    pstmtRemote   null    catch  SQLException ignore      if  connLocal    null  try   connLocal close    connLocal   null    catch  SQLException ignore      if  connRemote    null  try   connRemote close    connRemote   null    catch  SQLException ignore      if  xaConnLocal    null  try   xaConnLocal close    xaConnLocal   null    catch  SQLException ignore      if  xaConnRemote    null  try   xaConnRemote close    xaConnRemote   null    catch  SQLException ignore             ',0
'PropertySetter isn t able to recognize JDK without version number in path    With empty ant properties and JDK   installed in  tmp jdk as the only JDK on the system  PropertySetter complains that it s not able to set java  compile classpath            setJdkProperties           setJdkProperties      PropertySetter environment        setJdkProperties           setJdkProperties      java vendor   Sun Microsystems Inc       setJdkProperties      java home    tmp jdk jre      setJdkProperties      java version                 setJdkProperties      os name   SunOS      setJdkProperties      j  lib   null      setJdkProperties      j  lib   null      setJdkProperties      j  lib   null      setJdkProperties      BUILD FAILED  code derby trunk  build xml      Don t know how to set java  compile classpath  java  compile classpath using this environment  java vendor   Sun Microsystems Inc  java home    tmp jdk jre java version            os name   SunOS j  lib   null j  lib   null j  lib   null     Since it is able to detect both that the version of the default JDK is          and where it is installed  setting java  compile classpath should be trivial If the name of the JDK directory is changed from  tmp jdk to  tmp jdk       Derby is built successfully    ',0
'A lock could not be obtained within the time requested error in testBTreeForwardScan fetchRows resumeAfterWait nonUnique split    I recently merged changes for DERBY      into          codeline  revision         and I ran the junit tests on the merged code  The tests finished with one  A lock could not be obtained within the time requested   Knut suggested that I open a new jira entry for this issue  Copying his comment from DERBY      here  Yes  that test was added for DERBY        It requires some coordination between two threads  so my first guess would be that there is a timing issue in the test  Please file a separate JIRA issue for this failure  Thanks   Following is the stack track for the failureThere was   error     testBTreeForwardScan fetchRows resumeAfterWait nonUnique split org apache derbyTesting functionTests tests store IndexSplitDeadlockTest java sql SQLException  A lock could not be obtained within the time requested  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java      at org apache derby impl jdbc Util generateCsSQLException Util java       at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java       at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java       at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java        at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java      at org apache derby impl jdbc EmbedResultSet closeOnTransactionError EmbedResultSet java        at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet next EmbedResultSet java       at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest testBTreeForwardScan fetchRows resumeAfterWait nonUnique split IndexSplitDeadlockTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method   at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java      at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java       at junit extensions TestDecorator basicRun TestDecorator java      at junit extensions TestSetup   protect TestSetup java      at junit extensions TestSetup run TestSetup java      at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java      at junit extensions TestDecorator basicRun TestDecorator java      at junit extensions TestSetup   protect TestSetup java      at junit extensions TestSetup run TestSetup java      at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     Caused by  ERROR   XL   A lock could not be obtained within the time requested at org apache derby iapi error StandardException newException StandardException java       at org apache derby impl services locks ConcurrentLockSet lockObject ConcurrentLockSet java       at org apache derby impl services locks ConcurrentLockSet zeroDurationLockObject ConcurrentLockSet java       at org apache derby impl services locks AbstractPool zeroDurationlockObject AbstractPool java       at org apache derby impl store raw xact RowLocking nohold lockRecordForRead RowLocking nohold java      at org apache derby impl store access heap HeapController lockRow HeapController java       at org apache derby impl store access heap HeapController lockRow HeapController java       at org apache derby impl store access btree index B IRowLocking  lockRowOnPage B IRowLocking  java       at org apache derby impl store access btree index B IRowLocking   lockScanRow B IRowLocking  java       at org apache derby impl store access btree index B IRowLockingRR lockScanRow B IRowLockingRR java       at org apache derby impl store access btree BTreeForwardScan fetchRows BTreeForwardScan java       at org apache derby impl store access btree BTreeScan fetchNextGroup BTreeScan java        at org apache derby impl sql execute BulkTableScanResultSet reloadArray BulkTableScanResultSet java       at org apache derby impl sql execute BulkTableScanResultSet getNextRowCore BulkTableScanResultSet java       at org apache derby impl sql execute BasicNoPutResultSetImpl getNextRow BasicNoPutResultSetImpl java       at org apache derby impl jdbc EmbedResultSet movePosition EmbedResultSet java              more FAILURES    Tests run        Failures     Errors      ',0
'SYSCS UPDATE STATISTICS takes unnecessary table lock    I m using SYSCS UTIL SYSCS UPDATE STATISTICS in an application and see deadlocks similar to this one from time to time Caused by  java sql SQLTransactionRollbackException  A lock could not be obtained due to a deadlock  cycle of locks and waiters is Lock   ROW  SYSSTATISTICS         Waiting XID           S    APP  SELECT CS REVISION  A NAME  CS TIME  CS MESSAGE  F  PATH FROM CHANGESETS CS  FILECHANGES FC  REPOSITORIES R  FILES F  AUTHORS A  FILECHANGES FC   FILES F  WHERE R PATH     AND F PATH LIKE   ESCAPE     AND F REPOSITORY   R ID AND A REPOSITORY   R ID AND CS ID   FC CHANGESET AND R ID   CS REPOSITORY AND FC FILE   F ID AND A ID   CS AUTHOR AND CS ID   FC  CHANGESET AND FC  FILE   F  ID ORDER BY CS ID DESC Granted XID           X  Lock   TABLE  CHANGESETS  Tablelock Waiting XID           X    APP  alter table  APP   CHANGESETS  all update statistics  Granted XID           IS    The selected victim is XID         Here  a select statement is being re prepared because update statistics has invalidated it  but it has to wait for update statistics to finish in order to read the new statistics from SYSSTATISTICS  Then update statistics attempts to obtain an exclusive lock on the table whose indexes are being updated  but it has to wait because the select statement is holding an intention lock on the table  Both transactions wait for each other  so we have a deadlock Since SYSCS UPDATE STATISTICS does not update the table  only its entries in SYSSTATISTICS  there is no need to take an exclusive table lock  If it didn t lock the table exclusively  this deadlock situation would go away    ',0
'Update demo s to remove references to com ibm db  jcc DB Driver    SimpleApp java is still refering to DB  JDBC driver  I think it should be take out to reflect DB  driver is no longer supported There are also some typos in SimpleApp java  i e  noone  retreiving  etc example html that should be updated as well Kathey mention nserverdemo also has references to the DB  driver  This issue will address that as well    ',1
'     Upgrade test fails  SYSCS UTIL SYSCS SET XPLAIN SCHEMA is not recognized as a function    The      upgrade tests are currently commented out  When the      upgrade test is enabled  it fails with the following exception Caused by  java sql SQLException   SYSCS UTIL SYSCS SET XPLAIN SCHEMA  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  ERROR   Y     SYSCS UTIL SYSCS SET XPLAIN SCHEMA  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql compile StaticMethodCallNode bindExpression StaticMethodCallNode java      at org apache derby impl sql compile JavaToSQLValueNode bindExpression JavaToSQLValueNode java      at org apache derby impl sql compile CallStatementNode bindStatement CallStatementNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java             more   ',0
'All Columns become Nullable when Using left join    Consider following  create table person   id varchar     not null  name varchar      not null  create table car   id varchar     not null  person id varchar     not null  model varchar      not null  plat no varchar      not null  When select   selectp name c model c plat nofrom person pleft join car c on  p id   c person id  From the ResultSet  get the ResultSetMetaData and inspect each column s isNullable   value  which is always      always nullable   Expected   column  p name  isNullable      not nullable   but I get  p name  isNullable      nullable    ',0
'creation of FileInputStream in org apache derby impl tools ij Main not wrapped in privilege  block which can cause problems running under SecurityManager    org apache derby impl tools ij Main has this code where the call to FileInputStream is not wrapped in a privilege block  try   in    new FileInputStream file   if  in     null    in    new BufferedInputStream in   utilMain BUFFEREDFILESIZE   in   langUtil getNewInput in        catch  FileNotFoundException e    if  Boolean getBoolean  ij searchClassPath      in   langUtil getNewInput util getResourceAsStream file     This can cause issues when running under SecurityManager   ',1
' compilation time did not compute           expected  but was   in testGroupBySortProps     tests lang XplainStatisticsTest     Seen inhttp   dbtg thresher com derby test trunk   jvm    testing testlog CYGWIN NT     i    unknown        org apache derbyTesting functionTests suites All diff txtThere was   failure    testGroupBySortProps org apache derbyTesting functionTests tests lang XplainStatisticsTest junit framework AssertionFailedError  compilation time did not compute           expected  lt    gt  but was  lt   gt  at org apache derbyTesting functionTests tests lang XplainStatisticsTest verifySensibleStatementTimings XplainStatisticsTest java      at org apache derbyTesting functionTests tests lang XplainStatisticsTest testGroupBySortProps XplainStatisticsTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'SQLException XJ    on insert  with setCharacterStream   and autocommit off in mailjdbc test    I am running the      maildbc test on Linux with network server and the          release candidate and an updated derbyTesting jar to have just Lily s change to change the backup user  I see in the test output early and often  this error inserting data into the table SQLState  XJ   Severity       Message  You cannot invoke other java sql Clob java sql Blob methods after calling the free   method or afterClob s transaction has been committed or rolled back java sql SQLException  You cannot invoke other java sql Clob java sql Blob methods after calling the free   mter the Blob Clob s transaction has been committed or rolled back  at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Lob checkValidity Unknown Source  at org apache derby client am Clob length Unknown Source  at org apache derby client net NetStatementRequest computeProtocolTypesAndLengths Unknown Source  at org apache derby client net NetStatementRequest buildSQLDTAcommandData Unknown Source  at org apache derby client net NetStatementRequest writeExecute Unknown Source  at org apache derby client net NetPreparedStatement writeExecute  Unknown Source  at org apache derby client am PreparedStatement writeExecute Unknown Source  at org apache derby client am PreparedStatement flowExecute Unknown Source  at org apache derby client am PreparedStatement executeUpdateX Unknown Source  at org apache derby client am PreparedStatement executeUpdate Unknown Source  at org apache derbyTesting system mailjdbc utils DbTasks insertMail DbTasks java      at org apache derbyTesting system mailjdbc tasks Refresh insertMail Refresh java     at org apache derbyTesting system mailjdbc tasks Refresh doWork Refresh java     at org apache derbyTesting system mailjdbc tasks Refresh run Refresh java    Caused by  org apache derby client am SqlException  You cannot invoke other java sql Clob java sql Blob metholling the free   method or after the Blob Clob s transaction has been committed or rolled back The interesting thing is that the test itself is not using any Clob methods it uses setCharacterStream and also autocommit is off Below is a code excerpt and conn setAutoCommit false   PreparedStatement insertFirst   conn prepareStatement  Statements insertStr  Statement RETURN GENERATED KEYS   String name   new String  ABCD    String l name   new String  WXYZ    long s insert   System currentTimeMillis    for  int i      i  lt  num  i      String new name   new String increment name        String new lname   new String decrement l name        insertFirst setString    new name   insertFirst setString    new lname   insertFirst setTimestamp    new Timestamp System  currentTimeMillis      name   new name  l name   new lname  try      to create a stream of random length between     bytes and  MB int clobLength   Rn nextInt                           streamReader   new LoopingAlphabetReader clobLength  CharAlphabet modernLatinLowercase     insertFirst setCharacterStream    streamReader  clobLength     catch  Exception e    MailJdbc logAct logMsg LogFile ERROR   thread name            File not found Exception       e getMessage     errorPrint e   throw e    int rand num   Rn nextInt          if  i    rand num    ResultSet rs   stmt  executeQuery  select count from REFRESH INBOX where attach id gt      while  rs next      id count   rs getInt     insertFirst setInt    rs getInt            rs close    conn setTransactionIsolation Connection TRANSACTION READ COMMITTED     else insertFirst setInt        insertFirst  setString      This column is used only to by pass the space problem  If the problem still exists  then we are going to      have a serious issue here                                                                                                          int result   insertFirst executeUpdate   if I connect with ij I do see some rows in the INBOX  so some inserts do seem to be happening  Kristian pointed out that this looks similar to DERBY      with setAsciiStream   but this looks far more serious as autocommit is off and there does not appear to be a commit  so there is no obvious workaround  I assume this is also a regression  We shouldn t be throwing this error if the user did not use any Clob methods  I will try to narrow down the reproduction and track down where the issue was introduced  Knut said DERBY      goes all the way back to          with DERBY      I don t know if it is the same case with this one    ',0
'Attempt to reuse streams in client on insert gives protocol exception and inserts wrong data    If a user attempts to reuse a stream set as a parameter to a prepared statement  the statement execution should fail with SQL State XJ     Instead client fails with a protocol error and inserts wrong data  See the attached java program ReproReuseStream java for a reproduction      C  kmarsden repro reusestream      java ReproReuseStreamInsert row  Try to insert row   with reused streamsjava sql SQLException  Network protocol error  end of stream prematurely reached  parameter     Remaining data has been padded with  x   at org apache derby client am SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby client am PreparedStatement executeUpdate PreparedStatement java      at ReproReuseStream main ReproReuseStream java    Caused by  org apache derby client am SqlException  Network protocol error  end of stream prematurely reached  parameter     Remaining data has been padded with  x   at org apache derby client net Request writePlainScalarStream Request java      at org apache derby client net Request writeScalarStream Request java      at org apache derby client net NetStatementRequest buildEXTDTA NetStatementRequest java      at org apache derby client net NetStatementRequest writeExecute NetStatementRequest java      at org apache derby client net NetPreparedStatement writeExecute  NetPreparedStatement java      at org apache derby client am PreparedStatement writeExecute PreparedStatement java       at org apache derby client am PreparedStatement flowExecute PreparedStatement java       at org apache derby client am PreparedStatement executeUpdateX PreparedStatement java      at org apache derby client am PreparedStatement executeUpdate PreparedStatement java            moreGo ahead and commit so we can see the wrong data ID  MNAMEMVALUE BYTEDATACHARDATA                                                                                                                                                                                                                                                                                                                                                                                                                             mname                                                                                                                                  amp ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc amp   mname                                                                                                                                  amp   amp To workaround the issue users should not attempt to reuse streams but we should give a better message and not insert wrong data The code was extracted from StreamingColumnTest testDerby    but the commits were removed    ',0
'hang in suites all with ibm     on AIX after ttestDefaultProperties    The test run for          hung in suites All  The console output  the run was with  Dderby tests trace true  showed ttestDefaultProperties had successfully completed but the run was halted ps  eaf   grep java showed the process that kicked off suites All  and a networkserver process with the following flags  classpath  lt classpath including derby jar  derbytools jar  derbyclient jar  derbynet jar  derbyTesting jar  derbyrun jar  derbyTesting jar and junit jar gt   Dderby drda logConnections   Dderby drda traceAll   Dderby drda traceDirectory   Dderby drda keepAlive   Dderby drda timeSlice   Dderby drda host   Dderby drda portNumber   derby drda minThreads   Dderby drda maxThreads   Dderby drda startNetworkServer   Dderby drda debug  org apache derby drda NetworkServerControl start  h localhost  p     This process had been sitting for   days After killing the NetworkServerControl process  the test continued successfully  except for DERBY       fixed in trunk   but the following was put out to the console  START SPAWNED SpawnedNetworkServer STANDARD OUTPUT  exit code                            GMT   Security manager installed using the Basic serversecurity policy                         GMT   Apache Derby Network Server                      started and ready to accept connections on port     END SPAWNED  SpawnedNetworkServer STANDARD OUTPUT    ',0
'hang on winvista with IBM     SR  in NSSecurityMechanismTest    This is stopping my platform testing on winvista with ibm     SR  During the initial run of suites All  I got                                  testNetworkServerSecurityMechanism java net SocketException  Connection reset by peer  setsockopt at java net PlainSocketImpl socketSetOption Native Method  at java net PlainSocketImpl setOption PlainSocketImpl java      at java net Socket setKeepAlive Socket java       at org apache derby impl drda ClientThread run Unknown Source                                 Rerunning suites All gave the same error There is only   java process active  amp  hanging Running just the test itself also results in a hang but there was  so far   it s been sitting unchanged for   hours  java net SocketException    ',1
'SQLSTATE        NullPointerException  at inner self join and value x   x         create table xyz  c  int  c  int  insert into xyz values      select   from xyz t  inner join xyz t  on t  c    t  c  where value t  c   t  c       causes the following error FEHLER        Bei der Auswertung eines Ausdrucks wurde die Ausnahme  java lang NullPointerException  ausgeloest FEHLER XJ     Java Ausnahme     java lang NullPointerException     ',0
'ASSERT FAILED calling setTransactionIsolation checking isolation     level   on  pooled connection    For DERBY       I thought I would do a little testing to understand the server round trips in various scenarios for pooled connections  So I wrote the small attached program ConnReuse java and hit this assertion in client Exception in thread  main  org apache derby shared common sanity AssertFailure  ASSERT FAILED at org apache derby shared common sanity SanityManager ASSERT SanityManager java     at org apache derby client am Connection setTransactionIsolationX Connection java      at org apache derby client am Connection setTransactionIsolation Connection java      at org apache derby client am LogicalConnection setTransactionIsolation LogicalConnection java      at TestConnReuse main TestConnReuse java                   To run the program on trunk java org apache derby drda NetworkServerControl startjava TestConnReuse This needs more investigation  but I thought I would go ahead and log the bug  I tried this only on trunk  I have not yet Tried it on the branches  Tried it with Lily s DERBY      patch  Tried it with embedded  Tried actually doing something with the prior logical connection which might be related    ',0
'Copy table content with  INSERT INTO table SELECT FROM        statement leads to corrupt data    I had to change a the primary key of a table and used ddlutils to do so  Ddlutils recreated the table to perform this task After the schema conversion the row data of the changed table were corrupted  The values of the last table column were filled with values from other rows After performing a few tests I could break down the problem to the SQL statement  INSERT INTO table SELECT FROM       To reprocude the effect do the following    unpack attached database  rmdb zip    connect to the database with embedded driver  User  IGEL Password  test    read data of an example row from database select   from stringrangenew where classname    x xserver  colordepth  result is  x xserver  colordepth                                            now copy the data to the second table  column INSTANCENR has been added to this table  INSERT INTO STRINGRANGENEW   CLASSNAME FIRMWAREID RVALUE  SELECT CLASSNAME FIRMWAREID RVALUE FROM STRINGRANGENEW    select data of example row from second table select   from stringrangenew  where classname    x xserver  colordepth  result is  x xserver  colordepth           CCW          CW          XX       gt  value of last column is not the same as in orignal table Here some additional information i worked out during my tests  if you change the copy statement to include the additional column INSTANCENR  the copied data are correct  delete from STRINGRANGENEW   INSERT INTO STRINGRANGENEW   CLASSNAME FIRMWAREID  INSTANCENR  RVALUE  SELECT CLASSNAME FIRMWAREID      RVALUE FROM STRINGRANGENEW  if you select the rows only  SELECT CLASSNAME FIRMWAREID RVALUE FROM STRINGRANGENEW   the result shows correct dataNote  The effect is not restricted to this row but also applies to other rows  But it s always the same rows  that get corrupted    ',0
'NullPointerException when preparing LEFT OUTER JOIN between VALUES statements    ij version     ij gt  connect  jdbc derby db create true  ij gt  select a   from  values   a     b    null   a left outer join  values   c     d    b on     ERROR XJ     Java exception     java lang NullPointerException     ',0
'Wrong result for simple join when index is created    In the example below  the first SELECT has correct result  After the index is created  the second SELECT gives wrong result ij gt  CREATE TABLE t   i  INT  j  INT    rows inserted updated deletedij gt  CREATE TABLE t   i  INT  j  INT    rows inserted updated deletedij gt  INSERT INTO t  VALUES         NULL       rows inserted updated deletedij gt  INSERT INTO t  VALUES          row inserted updated deletedij gt  SELECT   FROM t  INNER JOIN t  ON  t  j    t  i   OR  t  j    t  j   I   J   I   J                                                            NULL            rows selectedij gt  CREATE INDEX ix  ON t  j     rows inserted updated deletedij gt  SELECT   FROM t  INNER JOIN t  ON  t  j    t  i   OR  t  j    t  j   I   J   I   J                                                              row selected   ',0
'JavaDoc warnings in several classes in impl sql execute rts    A  raw non ASCII  character was introduced in several classes as part of a commit for DERBY      These should be removed to get rid of the JavaDoc warnings I plan to enable JavaDoc warnings reporting in the Hudson Derby build job    ',0
'Infinite loop in PredicateList joinClauseTransitiveClosure      This sequence of statements triggers an infinite loop in PredicateList joinClauseTransitiveClosure   and never completes create table c  a int  b int  c int  create table cc  aa int  select   from cc t   c t   cc t  where t  aa   t  a and t  aa   t  b and t  aa   t  c    ',0
'NullPointerException in RIGHT JOIN with NOT BETWEEN    ij gt  create table t  x int    rows inserted updated deletedij gt  create table t  x int    rows inserted updated deletedij gt  insert into t  values       row inserted updated deletedij gt  select   from t  right join t  on t  x   t  x where t  x not between   and   X  X                        ERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression ERROR XJ     Java exception     java lang NullPointerException     ',0
'NullPointerException when comparing indexed column with result from a set operation    I m reporting this issue on behalf of Bernt M  Johnsen If an indexed column is compared with a UNION query  or some other set operation   a NullPointerException is raised  as can be seen by this sequence of statements in ij ij gt  create table t a int not null primary key  b int    rows inserted updated deletedij gt  select   from t where a  lt   values   union values    ERROR XJ     Java exception     java lang NullPointerException     ',0
'NullPointerException when USING clause contains all columns in both join tables    ij gt  create table t x int    rows inserted updated deletedij gt  select t    t   from t t  join t t  using  ERROR XJ     Java exception     java lang NullPointerException  This statement should have raised an exception because both t    and t    expand to no columns  See DERBY         ',0
'Scalar subquery erroneously rejected for not returning exactly one row    This sequence of statements causes an error because the scalar sub query supposedly doesn t return exactly one row  even though it does return exactly one row ij gt  create table t  x int unique  y int    rows inserted updated deletedij gt  insert into t values         row inserted updated deletedij gt  select   from t where x  gt   values   union select y from t where      ERROR        Scalar subquery is only allowed to return a single row ij gt  values   union select y from t where                      row selectedBefore DERBY       the problematic statement would have caused a NullPointerException    ',0
'NullPointerException with JOIN   USING and invalid table name in select list    ij version     ij gt  connect  jdbc derby memory db create true  ij gt  create table t a int  b int  c int    rows inserted updated deletedij gt  select t   from t t  join t t  using  a  ERROR XJ     Java exception     java lang NullPointerException  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    Caused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  java lang NullPointerException at org apache derby impl sql compile JoinNode getAllResultColumns JoinNode java      at org apache derby impl sql compile FromList expandAll FromList java      at org apache derby impl sql compile ResultColumnList expandAllsAndNameColumns ResultColumnList java       at org apache derby impl sql compile ResultColumnList bindExpressions ResultColumnList java      at org apache derby impl sql compile SelectNode bindExpressions SelectNode java      at org apache derby impl sql compile DMLStatementNode bindExpressions DMLStatementNode java      at org apache derby impl sql compile DMLStatementNode bind DMLStatementNode java      at org apache derby impl sql compile CursorNode bindStatement CursorNode java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java            moreThe query is expected to fail  because the table name in t   does not match any of the joined tables   but not with a NullPointerException  A similar query with ON instead of USING fails more gracefully ij gt  select t   from t t  join t t  on t  a t  a ERROR   X     T  is not an exposed table name in the scope in which it appears    ',0
'Memory leak when attempting to boot non existing database with the in memory back end    When attempting to boot a non existing database with the in memory back end  a DataStore is created and referenced by a map  Since the database doesn t exist  Derby won t use the DataStore again and it will hang around indefinitely in VFMemoryStorageFactory  or until the same database is actually created  in which case the data store will be used  FYI  storage factory instances are instantiated liberally  including for the same service  i e  six instances of VFMemoryStorageFactory may be created to boot  jdbc derby memory myDB      ',0
' Table View  T   already exists in Schema  APP   in lang DropTableTest on phoneME cvm    See http   dbtg foundry sun com derby test Daily javaME testing Limited testSummary        htmlhttp   dbtg foundry sun com derby test Daily javaME FailReports        bySig html same signature as DERBY        org apache derbyTesting functionTests tests lang DropTableTest      org apache derbyTesting functionTests tests lang CheckConstraintTest       DERBY      Closed   signature           Caused by test not cleaning up and phoneME cvm executing tests in a different order than other jvms Introduced by r         DERBY      I am testing a fix    ',0
'Evaluation of default value and identity in an INSERT result set evaluated too early     In contrast to generated column  which are evaluated when the next row from the result set to be inserted  currently default values and identity columns are generated  early   that is as part of avaluating the subquery  SELECT or VALUES as the case may be   This does not currently cause a user visible bug in Derby  but it lies behind DERBY   and the effect Bryan observed in DERBY   Additionally   early  computation has given rise to much special handling and ensuing bugs  cf  DERBY       DERBY       DERBY       DERBY      and others DERBY      requires this fix for correct behaviour with INSERT See alsohttps   issues apache org jira browse DERBY      focusedCommentId          amp page com atlassian jira plugin system issuetabpanels  Acomment tabpanel action            ',0
'Wrap rollback in exception handlers in try catch    Avoid this pattern everywhere   catch SQLException se     issue a rollback on any errors conn rollback    throw se   because an error in rollback will shadow the original exception    ',0
'Prepared statement failure with CLOB  Stream has already been read and end of file reached and cannot be re used     Possibly related to       We have encountered an error when using Prepared Statements and CLOBs  I have read http   db apache org derby papers JDBCImplementation html setAsciiStream  CsetBinaryStream  CsetCharacterStreamBut it does not seem applicable  as we are not re using a stream The environment is this    Java     Derby            Bitronix JTA      We re actually using Hibernate  but I eliminated it from the equation  and the problem persists  A summary of the failure flow is this    Start a transaction   Obtain a connection from a pool of connections  for this test  the pool size is pinned at      Prepare a statement that inserts a CLOB    Set the parameters   Add the prepared statement to a batch  but we only batch           this is to emulate what hibernate is doing as closely as possible     Execute the batch Everything up to this point works    Repeat steps      But this time  the connection will be reused from the pool  and the statement will be gotten from a prepared statement cache  maintained by bitronix   I e  the prepared statement is re used    Observe the following failure org apache derby client am BatchUpdateException  Non atomic batch failure  The batch was submitted  but at least one exception occurred on an individual member of the batch  Use getNextException   to retrieve the exceptions for specific batched elements  at org apache derby client am Agent endBatchedReadChain Unknown Source  at org apache derby client am PreparedStatement executeBatchRequestX Unknown Source  at org apache derby client am PreparedStatement executeBatchX Unknown Source  at org apache derby client am PreparedStatement executeBatch Unknown Source  at bitronix tm resource jdbc JdbcPreparedStatementHandle executeBatch JdbcPreparedStatementHandle java      at org dancernetworks TestFailure doInsert TestFailure java      at org dancernetworks TestFailure doPrepared TestFailure java      at org dancernetworks TestFailure main TestFailure java    Nov                   PM bitronix tm BitronixTransactionManager shutdownINFO  shutting down Bitronix Transaction ManagerAn IOException was thrown when reading a  java sql String  from an InputStream java sql SQLException  An IOException was thrown when reading a  java sql String  from an InputStream  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc EmbedResultSet noStateChangeException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement transferParameters Unknown Source  at org apache derby jdbc XAStatementControl getRealPreparedStatement Unknown Source  at org apache derby iapi jdbc BrokeredPreparedStatement getPreparedStatement Unknown Source  at org apache derby iapi jdbc BrokeredPreparedStatement getStatement Unknown Source  at org apache derby iapi jdbc BrokeredStatement close Unknown Source  at org apache derby impl drda DRDAStatement close Unknown Source  at org apache derby impl drda Database close Unknown Source  at org apache derby impl drda Session close Unknown Source  at org apache derby impl drda DRDAConnThread closeSession Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Caused by  java sql SQLException  An IOException was thrown when reading a  java sql String  from an InputStream  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java sql SQLException  Java exception   Stream has already been read and end of file reached and cannot be re used   java io EOFException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java io EOFException  Stream has already been read and end of file reached and cannot be re used  at org apache derby iapi types ReaderToUTF Stream read Unknown Source  at java io DataInputStream readUnsignedShort DataInputStream java      at org apache derby iapi types SQLChar readExternal Unknown Source  at org apache derby iapi types SQLChar getString Unknown Source  at org apache derby iapi types SQLChar setFrom Unknown Source  at org apache derby iapi types DataType setValue Unknown Source  at org apache derby impl sql GenericParameterValueSet transferDataValues Unknown Source  at org apache derby impl sql execute BaseActivation setParameters Unknown Source  at org apache derby impl sql GenericActivationHolder setParameters Unknown Source         moreAttached is an archived Eclipse project of a self contained reproduction  It includes everything needed to run  including the Bitronix       jar    ',0
'Forbid ordering operations on UDTs    Knut has provided an example of an ordering operation which succeeds on a UDT in his Dec           comment on DERBY        ',0
'Selecting   projecting a column whose value is represented by a stream more than once fails    Selecting   projecting a column whose value is represented as a stream more than once crashes Derby  i e  ResultSet rs   stmt executeQuery  SELECT clobValue AS clobOne  clobValue AS clobTwo FROM mytable   rs getString    rs getString    After having looked at the class of bugs having to do with reuse of stream data types  I now have a possible fix  It fixes DERBY       DERBY      and DERBY       there may be more Jiras  The core of the fix is cloning certain DVDs being selected projected in multiple columns  There are two types of cloning  A  materializing clone B  stream clone A  can be implemented already   B  requires code to clone a stream without materializing it  Note that the streams I m talking about are streams originating from the store Testing revealed the following  the cost of the checks performed to figure out if cloning is required seems acceptable  negligible   in some cases  A  has better performance than  B  because the raw data only has to be decoded once stream clones are preferred when the data value is above a certain size for several reasons  avoids potential out of memory errors  and in case of a server environment  it lowers the memory pressure  avoids decoding the whole value if the JDBC streaming APIs are used to access only parts of the value avoids decoding overall in cases where the value isn t accessed by the client   user  this statement conflicts with the performance observation above We don t always know the size of a value  and since the fix code deals with all kinds of data types  it is slightly more costly to try to obtain the size What do people think about the following goal statement Goals       Phase      No crashes or wrong results due to stream reuse when executing duplicate column selections  minus goal       Minimal performance degradation for non duplicate column selections    Only a minor performance degradation for duplicate       LONG      VAR CHAR      FOR BIT DATA      column selections      Phase      No out of memory exceptions during execution of duplicate column selections of BLOB CLOB    Optimize BLOB CLOB cloningI think phase   can proceed by reviewing and discussing the prototype patch  Phase   requires more discussion and work  see DERBY       A note about the bug behavior facts Since this issue is the underlying cause for several other reported issues  I have decided to be liberal when setting the bug behavior facts  Depending on where the duplicate column selection is used  it can cause both crashes  wrong results and data corruption    ',0
'Nullpointer when performing INSERT INTO    To replicate  execute the following   queries CREATE TABLE feed  fst INTEGER  snd VARCHAR      UNIQUE fst  INSERT INTO feed VALUES      fst  CREATE TABLE tbl  col  INTEGER  col  INTEGER NOT NULL REFERENCES feed  fst  ON DELETE RESTRICT ON UPDATE RESTRICT INSERT INTO tbl col   SELECT   FROM feedThe result of the last INSERT INTO query is java lang NullPointerException at org apache derby impl store access btree BTreeScan initScanParams Unknown Source  at org apache derby impl store access btree BTreeScan reopenScan Unknown Source  at org apache derby impl sql execute TableScanResultSet reopenScanController Unknown Source  at org apache derby impl sql execute TableScanResultSet reopenScanController Unknown Source  at org apache derby impl sql execute TableScanResultSet reopenCore Unknown Source  at org apache derby impl sql execute BulkTableScanResultSet reopenCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet reopenCore Unknown Source  at org apache derby impl sql execute NormalizeResultSet reopenCore Unknown Source  at org apache derby impl sql execute InsertResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source    ',0
'Column list size mismatch with ORDER BY in INSERT statement    I see this error on trunk  revision         ij gt  create table t x varchar         rows inserted updated deletedij gt  insert into t select   from  select   from sysibm sysdummy  order by length ibmreqd   t  ERROR   X    The number of columns in the derived column list must match the number of columns in table  T   The statement succeeds if I remove the ORDER BY clause ij gt  insert into t select   from  select   from sysibm sysdummy   t    row inserted updated deleted   ',0
'j ME test failures relating to runtimeStatisticsParser    After my change for DERBY      to the runtimeStatisticsParser  the IBM tests show    errors and the Sun tests      because I ve used the String split method which isn t available with j ME For example     testDynamicLikeOptimization org apache derbyTesting functionTests tests lang DynamicLikeOptimizationTest java lang NoSuchMethodError  java lang String split Ljava lang String Ljava lang String  at org apache derbyTesting junit RuntimeStatisticsParser getStartPosition RuntimeStatisticsParser java      at org apache derbyTesting junit RuntimeStatisticsParser  lt init gt  RuntimeStatisticsParser java     at org apache derbyTesting junit SQLUtilities getRuntimeStatisticsParser SQLUtilities java      at org apache derbyTesting functionTests tests lang DynamicLikeOptimizationTest testDynamicLikeOptimization DynamicLikeOptimizationTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    The runtimeStatisticsParser code needs to be adjusted    ',0
'Make it possible to put the optional clauses of a CREATE SEQUENCE statement in the arbitrary order allowed by the SQL Standard    The current syntax for CREATE SEQUENCE requires that the optional clauses appear in a fixed order  The SQL Standard is more flexible here    ',0
'test    tableFunctionColumns fails with weme  J ME  with  java lang NoClassDefFoundError  java sql DriverManager     Starting Friday Feb    testing svn         IBM weme     fails as follows http   people apache org  myrnavl derby test results main windows testlog weme           suites All diff txtIt would appear that either the test needs to be disabled for J ME or DriverManager use needs to be removed from the test    test    tableFunctionColumns org apache derbyTesting functionTests tests lang UDTTest java sql SQLException  The exception  java lang NoClassDefFoundError  java sql DriverManager  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeQuery Unknown Source  at org apache derbyTesting functionTests tests lang GeneratedColumnsHelper assertResults GeneratedColumnsHelper java      at org apache derbyTesting functionTests tests lang UDTTest test    tableFunctionColumns UDTTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java sql SQLException  Java exception   java sql DriverManager  java lang NoClassDefFoundError   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java lang NoClassDefFoundError  java sql DriverManager at org apache derbyTesting functionTests tests lang UDTTest hashmapReader UDTTest java      at org apache derby exe ac b  d f x    xa   xbefex     d b  d   g  Unknown Source  at java lang reflect AccessibleObject invokeL AccessibleObject java      at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute VTIResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         more   ',0
'NPE in JBitSet    A NPE occurs at org apache derby iapi util JBitSet or   A NPE occured at the same location before  http   issues apache org jira browse DERBY     The bug was confirmed by Bryan Pendleton to show in the HEAD as well  http   mail archives apache org mod mbox db derby user        mbox   C B  F  E         amberpoint com  ETo reproduce                       CREATE TABLE ABC  ID int PRIMARY KEY NOT NULL  CREATE TABLE DEF  ID int PRIMARY KEY NOT NULL  SELECT   FROM ABC t WHERE  SELECT DISTINCT t  ID FROM DEF t    IN  SELECT t  ID FROM DEF t                         Leads to error message  Error  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerExceptionXJ    USQLState  XJ   ErrorCode    Stacktrace java lang NullPointerException at org apache derby iapi util JBitSet or Unknown Source  at org apache derby impl sql compile OptimizerImpl  lt init gt  Unknown Source  at org apache derby impl sql compile Level OptimizerImpl  lt init gt  Unknown Source  at org apache derby impl sql compile Level OptimizerFactoryImpl getOptimizerImpl Unknown Source  at org apache derby impl sql compile OptimizerFactoryImpl getOptimizer Unknown Source  at org apache derby impl sql compile ResultSetNode getOptimizer Unknown Source  at org apache derby impl sql compile SelectNode optimize Unknown Source  at org apache derby impl sql compile SubqueryNode optimize Unknown Source  at org apache derby impl sql compile SubqueryList optimize Unknown Source  at org apache derby impl sql compile SelectNode optimize Unknown Source  at org apache derby impl sql compile DMLStatementNode optimizeStatement Unknown Source  at org apache derby impl sql compile CursorNode optimizeStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl drda DRDAStatement prepare Unknown Source  at org apache derby impl drda DRDAStatement explicitPrepare Unknown Source  at org apache derby impl drda DRDAConnThread parsePRPSQLSTT Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Cleanup action completed   ',0
'Complation of prepared statement results in Syntax Error    In attempting to upgrade our product from Derby          to           I simply replaced the derby jars   no change to java environment or code  I now experience a Syntax Error when preparing a statement that previously worked correctly This statement SELECT Offset  CMFragmentOID  CMContentOID  FragmentLength  Fragment FROM CMFragment  WHERE CMContentOID     AND Offset BETWEEN   SELECT Offset FROM CMFragment WHERE CMContentOID     AND Offset  lt     AND Offset   FragmentLength  gt      AND  SELECT Offset FROM CMFragment WHERE CMContentOID     AND Offset  lt    AND Offset   FragmentLength  gt      ORDER BY Offset ASCWhich should evaluate to the following after the parameters are provided SELECT Offset  CMFragmentOID  CMContentOID  FragmentLength  Fragment FROM CMFragment  WHERE CMContentOID                        AND Offset BETWEEN   SELECT Offset FROM CMFragment WHERE CMContentOID                        AND Offset  lt     AND Offset   FragmentLength  gt      AND  SELECT Offset FROM CMFragment WHERE CMContentOID                        AND Offset  lt         AND Offset   FragmentLength  gt           ORDER BY Offset ASCFails with Caused by  java sql SQLSyntaxErrorException  Syntax error  Encountered  Offset  at line    column      at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at com paisley foundation sql decorator BaseConnectionDecorator prepareStatement BaseConnectionDecorator java      at com paisley foundation sql decorator batchvalidator BatchValidatorConnection prepareStatement BatchValidatorConnection java      at com paisley foundation sql decorator BaseConnectionDecorator prepareStatement BaseConnectionDecorator java      at com paisley foundation database connection DatabaseConnection prepareStatement DatabaseConnection java      at com paisley foundation persistent sql PersistentQuery execute PersistentQuery java      at com paisley rnj content model CMFragment load CMFragment java             moreCaused by  java sql SQLException  Syntax error  Encountered  Offset  at line    column      at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  ERROR   X    Syntax error  Encountered  Offset  at line    column      at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile ParserImpl parseStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source         moreThe failure position indicated is in this clause  AND Offset   FragmentLength  gt   This statement does work correctly in           It also works as a direct SQL statement  if I don t use a prepared statement  but execute the SQL above    ',0
'failures in ij  test with cdc foundation  ibm s weme         The test ij  sql from derbyall is failing for weme    like so      Start  ij  jdkWECE J ME Foundation Specification v    derbyall derbytools                           del lt  IJ ERROR  Unable to establish prepared statement S  a   gt  IJ ERROR  Unable to establish prepared statement S CONNECTION Test Failed  End  ij  jdkWECE J ME Foundation Specification v    derbyall derbytools                            I think this is expected after the change                                                                          r         rhillegas                              Wed     Feb           lineDERBY       Commit Sylvain Leroux s patch which adds qualified identifiers to ij                                                                         Looks like all that s needed is an update of java testing org apache derbyTesting functionTests master j  foundation ij  out    ',0
'Cannot use dblook on soft upgraded database  Table View  SYS SYSSEQUENCES  does not exist     I tried to use dblook on trunk to dump the schema of a database created with Derby       dblook printed the following message         Timestamp                                 Source database is  db        Connection URL is  jdbc derby db        appendLogs  false        Note  At least one unexpected error warning message was        encountered during DDL generation  See dblook log        to review the message s  In dblook log  I saw an exception with this message java sql SQLSyntaxErrorException  Table View  SYS SYSSEQUENCES  does not exist    ',0
'   failures and    errors with IBM weme    j  cdc foundation after revision        for DERBY         Since March    there s been    failures and    errors in the nightly test run with IBM s j ME CDC foundation profile implementation  see  http   people apache org  myrnavl derby test results main windows testSummary        html  Things were ok on March     see  http   people apache org  myrnavl derby test results main windows testSummary        html I believe these were the effect of the following checkin for DERBY      r         kahatlen                              Fri     Mar           linesDERBY       Provide a way to change the hash algorithm used by BUILTIN authenticationI ll attach the full failure stacks in a separate file  but I believe perhaps new tests have been added that need to be excluded from the run  because the provider doesn t support the intended mechanism I d also be interested to know if these same failures occur with Sun s Oracle s phoneME This is the top of the first error                       testVariousBuiltinAlgorithms org apache derbyTesting functionTests tests jdbcapi AuthenticationTest java sql SQLException  The message digest algorithm  SHA      is not supported by any of the available cryptography providers  Please install a cryptography provider that supports that algorithm  or specify another algorithm in the derby authentication builtin algorithm property  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedCallableStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derbyTesting functionTests tests jdbcapi AuthenticationTest setDatabaseProperty AuthenticationTest java       at org apache derbyTesting functionTests tests jdbcapi AuthenticationTest setDatabaseProperty AuthenticationTest java       at org apache derbyTesting functionTests tests jdbcapi AuthenticationTest testVariousBuiltinAlgorithms AuthenticationTest java                        The failures are likely a result of this   the stack shows issues like no cleaning up of databases etc    ',1
'test testBuiltinAuthenticationWithConfigurableHash fails from upgradeTests Changes     with ibm s j     With the patch for DERBY      I saw one error with IBM s weme        testBuiltinAuthenticationWithConfigurableHash org apache derbyTesting functionTests tests upgradeTests Changes     java sql SQLException  The message digest algorithm  SHA      is not supported by any of the available cryptography providers  Please install a cryptography provider that supports that algorithm  or specify another algorithm in the derby authentication builtin algorithm property  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedCallableStatement executeStatement EmbedCallableStatement java      at org apache derby impl jdbc EmbedPreparedStatement execute EmbedPreparedStatement java       at org apache derbyTesting functionTests tests upgradeTests Changes     setPasswords Changes     java      at org apache derbyTesting functionTests tests upgradeTests Changes     testBuiltinAuthenticationWithConfigurableHash Changes     java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   SHA      java security NoSuchAlgorithmException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java              moreCaused by  java security NoSuchAlgorithmException  SHA     at java lang Throwable  lt init gt  Throwable java     at java security MessageDigest getInstance MessageDigest java      at org apache derby impl jdbc authentication AuthenticationServiceBase encryptPasswordConfigurableScheme AuthenticationServiceBase java      at org apache derby impl jdbc authentication AuthenticationServiceBase encryptUsingDefaultAlgorithm AuthenticationServiceBase java      at org apache derby impl jdbc authentication AuthenticationServiceBase map AuthenticationServiceBase java      at org apache derby iapi services property PropertyValidation doValidateApplyAndMap PropertyValidation java     at org apache derby impl store access PropertyConglomerate validateApplyAndMap PropertyConglomerate java      at org apache derby impl store access PropertyConglomerate setProperty PropertyConglomerate java      at org apache derby impl store access RAMTransaction setProperty RAMTransaction java       at org apache derby iapi db PropertyInfo setDatabaseProperty PropertyInfo java      at org apache derby catalog SystemProcedures SYSCS SET DATABASE PROPERTY SystemProcedures java      at org apache derby exe ac        x    xb  ax d  xfffff    db   g  Unknown Source  at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java         ',0
'PropertySetter fails due to an empty jre lib directory    If a JDK directory with an empty jre lib directory is chosen by the old algorithm for detecting JDKs on the build system  the build fails because the classpath is set to the empty string instead of the default  stubs and the higher level JDK classpath  The situation causing this problem can arise if a JDK with extension libs is uninstalled  Depending on the packaging system  this may leave the jre lib ext directory behind    ',0
'Invalid conversion from Timestamp to String when calling setTimestamp   with Calendar    If you set a VARCHAR parameter with setTimestamp    the string will be formatted differently depending on whether a Calendar is specified or not  even if the default calendar is used Take for example this statement  VALUES CAST   AS VARCHAR     I executed this statement twice with the same Timestamp instance  First like this  ps setTimestamp    ts  and then like this ps setTimestamp    ts  Calendar getInstance    In this example  both of the methods should use the default Calendar to convert the timestamp to a string  However  I see that they generate different strings                       vs                    Note there are two differences    The method that takes a Calendar object does not show the fraction part        The method that takes a Calendar object is    hours off     instead of       ',0
'Broken logic for avoiding testing across midnight in TimestampArithTest    TimestampArithTest s decorator has this code to avoid failures in case the test starts close to midnight     Make sure that we are not so close to midnight that TODAY might be yesterday before we are finished using it     while  calendar get Calendar HOUR         amp  amp  calendar get Calendar MINUTE   gt       Unknown macro    try   Thread sleep       calendar get Calendar SECOND              catch  InterruptedException ie       ignore it     There are at least three problems with this code     calendar get Calendar HOUR         never evaluates to true  because calendar get Calendar HOUR  returns values in the range       Calendar HOUR OF DAY should be used instead    If the current time is after       and before        the code sleeps until        the test will wait until       before it starts  making it even more likely that it will cross midnight while running    The code is executed after the Calendar object has been initialized  so if this code is ever triggered and waits until after midnight  the TODAY field is guaranteed to be yesterday when the test starts executing    ',0
'BaseTestCase execJavaCmd   does not work with weme        Spawning a java process with BaseTestCase execJavaCmd   does not work with weme      I think because the boot classpath does not get passed  This issue came up in DERBY       After this issue is fixed  BootLockTest should be enabled for weme The error is actually JVMJ VM   W Unable to load jclfoun       The specified module could not be found JVMEXEX   E Internal VM error  Failed to create Java VMJVMEXEX   I Run C  cygwin ibmsvn ntsoftware weme    bin j  exe  help for usageexecJavaProcess does pick up the j  executable but does not pass on the other settings This is how my script invokes the test with j   It probably has a lot of legacy system properties not needed  but I suppose execJavaCmd should just pass along all system properties  but I don t know how it would get the bootclasspath  Perhaps  Dbootcp was a way to pass it on in the old harness c  cygwin ibmsvn ntsoftware weme    bin j   jcl foun    DderbyTesting serverhost localhost  DderbyTesting clienthost localhost  Demma active   Xbootclasspath a c  cygwin ibmsvn ntsoftware weme    lib jdbc jar  Dbootcp c  cygwin ibmsvn ntsoftware weme    lib jdbc jar junit textui TestRunner org apache derbyTesting functionTests tests store BootLockTest Otherwise  currently I think the method is only used in replication and network server  but am not sure    ',0
'Hidden assumptions in FromVTI makeRestriction      FromVTI makeRestriction   has this code to strip away Boolean constants from AND and OR expressions     strip off trailing vacuous constant if present if   andOperator getRightOperand   instanceof BooleanConstantNode     return makeRestriction  andOperator getLeftOperand    columnNameMap     and    strip off trailing vacuous constant if present if   orOperator getRightOperand   instanceof BooleanConstantNode     return makeRestriction  orOperator getLeftOperand    columnNameMap     The code for AND will only work as expected if the right operand is TRUE  The code for OR only works correctly if the right operand is FALSE I m not sure if this can ever result in user visible bugs  since Boolean constants are usually removed before we get to this point in the code  The predicate has probably been transformed to conjunctive normal form  in which Boolean constants in the right operand of an AndNode or an OrNode in fact is always TRUE or FALSE  respectively I think this code either should be changed to work regardless of the value of the constant in the right operand  or the assumption that the predicate is on conjunctive normal form should be documented in the comments  and perhaps also checked in an assert statement     ',0
'Unidiomatic error handling in TimestampArithTest    TimestampArithTest contains some error handling code that prevents the underlying error from being reported to the JUnit framework  and it may even terminate the JVM running the tests on some errors  Examples This code prints the stack trace of the underlying error to the terminal  but it won t be included in the report from the JUnit framework  printStackTrace sqle   fail  Unexpected exception from statement      sql        This code terminates the JVM on error  preventing subsequent tests from running  and also preventing the JUnit framework to report the results from the tests that did run    catch  Exception e    System out println s     is not a proper timestamp string     System out println e getClass   getName            e getMessage     e printStackTrace    System exit     return null      ',0
'Too few arguments when generating AM RECORD NOT FOUND error    The message for AM RECORD NOT FOUND has three parameters  but all the methods that generate an exception with that message  only use two of them  So the generated message ends up looking like this ERROR XSAM   Record     on page   in container     not found whereas it should have looked like this ERROR XSAM   Record   on page   in container     not found I don t know if these messages ever make it all the way up to the application  since they are typically caught by this code block in TableScanResultSet  if  se getMessageId   equals SQLState AM RECORD NOT FOUND        Somehow the row got deleted between the above    doesCurrentPositionQualify   call and here  one way is if    this scan is read uncommitted isolation level   return null   But they may be logged in derby log if the log severity level is set appropriately    ',0
'Unions between BOOLEAN and non BOOLEAN datatypes should be rejected    DERBY      fixed problems in implicit casts to BOOLEAN  However  the query which created the implicit casts should raise an error for other reasons select isindex from sys sysconglomerates where conglomeratename    foo unionvalues    true   This should fail because if either of the datatypes being UNIONed is BOOLEAN  then both should be BOOLEAN  Here is my reasoning  copied from the related discussion on DERBY    The rules for determining whether two datatypes are union compatible are stated in the SQL Standard in part    section       lt query expression gt    syntax rule    b ii    That  in turn  refers the reader to section      Result of data type combinations     Section      syntax rule   g says that if either of two values to be merged is BOOLEAN  then both must be BOOLEAN    ',0
'column rename looses  identity  attribute     renaming an identity column causes the column to loose its  identity  attribute you can reproduce the problem as follows CREATE TABLE njr version   id INTEGER generated always as identity  databaseVersion INTEGER  insert into njr version  databaseVersion  values              column inserted successfully rename column njr version id to idVersion insert into njr version  databaseVersion  values      Error  Column  IDVERSION  cannot accept a NULL value To compound this problem there is no way to restore the renamed column s identity attribute as the alter command doesn t let you set an identity attribute  The only work around is to create a new table and copy the data across    ',0
'Complex nested joins problems    I ran a randomized test for nested joins against PostgreSQL  Derby  and H   and found some problems with Derby  The queries below throw NullPointerExceptions  the last query an assertion  The test case is here  http   code google com p h database source browse trunk h  src test org h  test db TestNestedJoins java   There are probably shorter queries that are problematic  but I can t test it because Derby closes the connection after the assertion create table t  x int  create table t  x int  create table t  x int  create table t  x int  create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    create table t  x int  insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values    insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     insert into t  values     select t  x   t  x   t  x   t  x   t  x   t  x   t  x   t  x   t  x from    t  inner join   t  right outer join  t  inner join t  on t  x   t  x   on t  x   t  x   left outer join  t  inner join t  on t  x   t  x   on t  x   t  x   on t  x   t  x   left outer join  t  inner join t  on t  x   t  x   on t  x   t  x   inner join t  on t  x   t  x   select t  x   t  x   t  x   t  x   t  x   t  x   t  x   t  x from   t  right outer join t  on t  x   t  x   inner join    t  inner join  t  left outer join t  on t  x   t  x   on t  x   t  x   right outer join t  on t  x   t  x   left outer join  t  inner join t  on t  x   t  x   on t  x   t  x   on t  x   t  x   select t  x   t  x   t  x   t  x   t  x   t  x   t  x   t  x from     t  left outer join t  on t  x   t  x   right outer join t  on t  x   t  x   right outer join t  on t  x   t  x   inner join   t  inner join t  on t  x   t  x   right outer join  t  right outer join t  on t  x   t  x   on t  x   t  x   on t  x   t  x   select t  x   t  x   t  x   t  x   t  x   t  x from    t  inner join t  on t  x   t  x   right outer join  t  right outer join t  on t  x   t  x   on t  x   t  x   inner join  t  left outer join t  on t  x   t  x   on t  x   t  x   select t  x   t  x   t  x   t  x   t  x   t  x   t  x from   t  right outer join  t  right outer join  t  left outer join  t  left outer join t  on t  x   t  x   on t  x   t  x   on t  x   t  x   on t  x   t  x   left outer join  t  inner join t  on t  x   t  x   on t  x   t  x      ',0
'StringIndexOutOfBoundsException on syntax error  invalid COMMIT     Start the network server on port      on localhost Run ant on the following  lt project default  all  gt    lt property environment  env    gt    lt path id  derby classpath id  gt    lt fileset dir    env DERBY LIB  gt    lt include name  derbynet jar    gt    lt include name  derbyclient jar    gt    lt  fileset gt    lt  path gt    lt target name  all  gt    lt sql driver  org apache derby jdbc ClientDriver  url  jdbc derby   localhost      derbyDB create true user derbyuser passsword derbypwd   userid  derbyuser   password  derbypwd   classpathref  derby classpath id   onerror  continue  gt create table mytable   mycol varchar        commit    lt  sql gt    lt  target gt   lt  project gt  On         I get      sql      Executing commands       sql      Failed to execute  commit       sql      java sql SQLSyntaxErrorException  Syntax error  Encountered  commit   at line    column          sql        of   SQL statements executed successfully but on         I get      sql      Executing commands BUILD FAILED java lang StringIndexOutOfBoundsException  String index out of range     at java lang String charAt String java       at org apache derby client am Statement isolateAnyInitialIdentifier Unknown Source   at org apache derby client am Statement getStatementToken Unknown Source   at org apache derby client am Statement parseSqlAndSetSqlModes Unknown Source         ',0
'CheapDateFormatter returns incorrect and invalid date strings    CheapDateFormatter has multiple problems  These are the ones I m aware of    On the boundary between non leap years and leap years it will return first day of thirteenth month in previous year  for instance             instead of               It treats all years divisible by four as leap years  Those divisible by     and not by     are not leap years  It attempts to adjust for that  see the snippet below  but it always ends up setting leapYear true if  year           It s a leap year if divisible by    unless divisible by         unless divisible by      if   year    L          if   year      L          if   year      L          leapYear   true      leapYear   true      More leap year trouble  To find out which year it is  it calculates the number of four year periods that have elapsed since             A four year period is considered           days  Although most four year periods are of that length  some are shorter  so we ll get one day off starting from year       two days off from year       and so on    ',0
'DERBY      added a new message to derby log during engine shutdown and it changed the database shutdown message  Need to update docs with that information    DERBY      added a new message to derby log during engine shutdown and it changed the database shutdown message  Need to update docs with that information  I have found   places in our docs where we show examples of shutdown messages  In Getting started Guide  under Creating a Derby database and running SQL statements section  we show a typical startup and shutdown message  That section will need to change  In Derby Developer s Guide  under section Derby System   gt  Shutting down the systemAn eg of engine shutdown message in derby log is                        GMT Thread     main   main       Shutting down Derby EngineAn eg of database shutdown message is as follows                        GMT Shutting down instance               f e  f           c ef  on database directory C  p clients svnmain client  trunk systest out    dbs tours  with class loader sun misc Launcher AppClassLoader  f e f e  Notice that this message includes the name of the db getting shutdown  Before the changes for DERBY      went in  we didn t include the name of the database    ',0
'test failure in derbynet testProtocol java with ibm jvms    On Friday  I saw this failure      Start  testProtocol jdk      DerbyNetClient derbynetmats derbynetmats                            add gt  Test UNICODEMGR at level      while sending UTF  characters in RDBNAM gt  PASSED gt  Test UNICODEMGR at level      while sending UTF  characters in USRID and PASSWORD gt  PASSED gt  Test setting RDBNAM at ACCSEC  and  at SECCHK gt  PASSEDTest Failed     I assume it s related to the check in for DERBY       revision            ',0
'Files with missing ASF license headers    There are some files  consisting of creative works  without license headers in the repository  Some files are also using a different text for the Apache License header then the other files I plan to add the license header after having verified that the files were uploaded to Jira with the grant license to ASF bullet ticked The list of files I have identified so far  grouped based on the assumed action required         Add license headerjava testing org apache derbyTesting functionTests tests memory TriggerTests javajava engine org apache derby impl sql catalog XPLAINStatementDescriptor javajava engine org apache derby impl sql catalog XPLAINScanPropsDescriptor javajava engine org apache derby impl sql catalog XPLAINResultSetDescriptor javajava engine org apache derby impl sql catalog XPLAINStatementTimingsDescriptor javajava engine org apache derby impl sql catalog XPLAINSortPropsDescriptor javajava engine org apache derby impl sql catalog XPLAINResultSetTimingsDescriptor javajava engine org apache derby impl sql catalog XPLAINTableDescriptor javajava engine org apache derby impl sql execute xplain XPLAINSystemTableVisitor javajava engine org apache derby impl sql execute xplain XPLAINDefaultVisitor javajava engine org apache derby impl sql execute xplain XPLAINFactory javajava engine org apache derby impl sql execute xplain XPLAINUtil javajava engine org apache derby iapi sql execute xplain XPLAINFactoryIF javajava engine org apache derby iapi sql execute xplain XPLAINable javajava engine org apache derby iapi sql execute xplain XPLAINVisitor javajava tools org apache derby tools PlanExporter javajava tools org apache derby impl tools planexporter TreeNode javajava tools org apache derby impl tools planexporter AccessDatabase javajava tools org apache derby impl tools planexporter CreateHTMLFile javajava tools org apache derby impl tools planexporter CreateXMLFile java        Update license headerjava engine org apache derby impl services jmxnone NoManagementService javajava engine org apache derby impl services jmx JMXManagementService javajava engine org apache derby iapi services jmx ManagementService java        Consider adding headerjava shared org apache derby shared common sanity SanityState javajava shared org apache derby shared common sanity SanityState tmpljava tools org apache derby impl tools planexporter resources advancedViewXSL xsljava tools org apache derby impl tools planexporter resources vanilla html xsljava tools org apache derby impl tools planexporter resources advancedViewXSL  xslThe SanityState classes seem to come from somewhere  Does anyone have the history  Can we add the ASF license header The xsl files also look like creative works to me  Any objections on that    ',0
'NPE while inserting into a table which has a generated column and an insert trigger    The following script generates an NPE on the concluding insert connect  jdbc derby memory dummy create true  create function getRegion  v int  returns varchar      language java parameter style java deterministic no sqlexternal name  java lang Integer toString  create table orders  orderID bigint primary key  salesPrice int not null  region generated always as   getRegion  salesPrice      create table dummy  a int   create trigger newOrderTriggerafter insert on ordersfor each rowinsert into dummy  a   values       insert into orders  orderID  salesPrice   values                                  Here is the NPE java lang NullPointerException at org apache derby impl sql execute DMLWriteResultSet objectifyStreams Unknown Source  at org apache derby impl sql execute DMLWriteResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute InsertResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source    ',0
'Missing escape for apostrophes in many messages    The properties file format requires that single quote characters are escaped with an extra single quote  A number of messages don t follow this rule Take this example from the Italian localization   X   Esiste un parametro   nell elenco di selezione  Ci u  F  non  u  E  consentito Note that there s only a single apostrophe in  nell elenco  above  When this message is printed  the apostrophe will be omitted   LC ALL it IT UTF   java  jar derbyrun jar ijVersione ij     ij gt  connect  jdbc derby db create true  ij gt  select   from sys systables ERRORE   X    Esiste un parametro   nellelenco di selezione  Ci   non    consentito We should go through the message files and add extra apostrophes where they are missing    ',0
'Sequences do not work in INSERT SELECT    Using sequence in SELECT works fine whereas the same SELECT query used in INSERT SELECT results in  The statement references the following sequence more than once  error  This happens even though the SELECT in question returns exactly   row of data The Reference Manual states      NEXT VALUE FOR expression may occur in the following places  SELECT statement  As part of the expression defining a returned column in a SELECT list  and      NEXT VALUE expression may not appear in any of these situations  CASE expression  WHERE clause  ORDER BY clause  Aggregate expression  ROW NUMBER function  DISTINCT select list  Nowhere a restriction on INSERT SELECT is mentioned  Additionally  other databases  i e  Oracle  support use of sequences in INSERT SELECT Therefore  I consider it a bug    ',0
'setTimestamp   methods don t agree on trailing zeros    With the statement VALUES CAST   AS VARCHAR     PreparedStatement setTimestamp int Timestamp  and PreparedStatement setTimestamp int Timestamp Calendar  don t agree on what to do with trailing zeros in the nanosecond component  The method that doesn t take a Calendar argument  removes trailing zeros  The method that takes a Calendar object appends zeros so that the nanosecond component always has nine digits   Both methods have a special case when nanoseconds is zero  and they agree on adding just a single zero after the decimal point in that case  The format used by PreparedStatement setTimestamp int Timestamp  matches what java sql Timestamp toString   returns  in fact  it uses Timestamp toString   internally to produce the string representation   and I think it would be reasonable to use that format for both the methods    ',0
'ReplicationMessageTransmit run does not unwrap PrivilegedActionException which can lead to failure of replicationTests ReplicationRun Local StateTest part       One of our nightly tests failed with the exception  db path slightly edited  below Looking at the source of org apache derby impl store replication net ReplicationMessageTransmit run  it seems that the code does not completely unwrap the PrivilegedActionException  compared to how this is done in for example org apache derbyTesting functionTests util PrivilegedFileOpsForTests getFileInputStream    It could be that the test is looking for the java io IOException  which it doesn t get  it gets the PrivilegedActionException instead                           testReplication Local StateTest part    org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    junit framework AssertionFailedError  Got    XRE   DERBY SQL error  SQLCODE      SQLSTATE  XRE    SQLERRMC  Replicated database   test results db slave wombat  shutdown   Expected XRE   at java lang Throwable  lt init gt  Throwable java     at junit framework AssertionFailedError  lt init gt  AssertionFailedError java     at org apache derbyTesting functionTests tests replicationTests ReplicationRun assertException ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part     testPostStartedMasterAndSlave StopSlave ReplicationRun Local StateTest part    java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    testReplication Local StateTest part    ReplicationRun Local StateTest part    java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java                          The exception in the db master derby log was                         Database Class Loader started   derby database classpath        BEGIN REPLICATION ERROR MESSAGE               AM      Replication slave got a fatal error for database   test results db master wombat   Replication will be stopped ERROR XRE    Could not establish a connection to the peer of the replicated database   test results db master wombat  on address  localhost        at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store replication master MasterController setupConnection Unknown Source  at org apache derby impl store replication master MasterController startMaster Unknown Source  at org apache derby impl store raw RawStore startReplicationMaster Unknown Source  at org apache derby impl store access RAMAccessManager startReplicationMaster Unknown Source  at org apache derby impl db BasicDatabase startReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection handleStartReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc AutoloadedDriver connect Unknown Source  at org apache derby impl drda Database makeConnection Unknown Source  at org apache derby impl drda DRDAConnThread getConnFromDatabaseName Unknown Source  at org apache derby impl drda DRDAConnThread verifyUserIdPassword Unknown Source  at org apache derby impl drda DRDAConnThread parseSECCHK Unknown Source  at org apache derby impl drda DRDAConnThread parseDRDAConnection Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Caused by  java security PrivilegedActionException  java net ConnectException  Connection refused at java security AccessController doPrivileged AccessController java      at org apache derby impl store replication net ReplicationMessageTransmit initConnection Unknown Source         moreCaused by  java net ConnectException  Connection refused at java net PlainSocketImpl socketConnect Native Method  at java net PlainSocketImpl doConnect PlainSocketImpl java      at java net PlainSocketImpl connectToAddress PlainSocketImpl java      at java net PlainSocketImpl connect PlainSocketImpl java      at java net SocksSocketImpl connect SocksSocketImpl java      at java net Socket connect Socket java      at org apache derby impl store replication net ReplicationMessageTransmit   run Unknown Source  at java security AccessController doPrivileged AccessController java             more              begin nested exception  level                java security PrivilegedActionException  java net ConnectException  Connection refused at java security AccessController doPrivileged AccessController java      at org apache derby impl store replication net ReplicationMessageTransmit initConnection Unknown Source  at org apache derby impl store replication master MasterController setupConnection Unknown Source  at org apache derby impl store replication master MasterController startMaster Unknown Source  at org apache derby impl store raw RawStore startReplicationMaster Unknown Source  at org apache derby impl store access RAMAccessManager startReplicationMaster Unknown Source  at org apache derby impl db BasicDatabase startReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection handleStartReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc AutoloadedDriver connect Unknown Source  at org apache derby impl drda Database makeConnection Unknown Source  at org apache derby impl drda DRDAConnThread getConnFromDatabaseName Unknown Source  at org apache derby impl drda DRDAConnThread verifyUserIdPassword Unknown Source  at org apache derby impl drda DRDAConnThread parseSECCHK Unknown Source  at org apache derby impl drda DRDAConnThread parseDRDAConnection Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source Caused by  java net ConnectException  Connection refused at java net PlainSocketImpl socketConnect Native Method  at java net PlainSocketImpl doConnect PlainSocketImpl java      at java net PlainSocketImpl connectToAddress PlainSocketImpl java      at java net PlainSocketImpl connect PlainSocketImpl java      at java net SocksSocketImpl connect SocksSocketImpl java      at java net Socket connect Socket java      at org apache derby impl store replication net ReplicationMessageTransmit   run Unknown Source  at java security AccessController doPrivileged AccessController java             more              end nested exception  level                              begin nested exception  level                java net ConnectException  Connection refused at java net PlainSocketImpl socketConnect Native Method  at java net PlainSocketImpl doConnect PlainSocketImpl java      at java net PlainSocketImpl connectToAddress PlainSocketImpl java      at java net PlainSocketImpl connect PlainSocketImpl java      at java net SocksSocketImpl connect SocksSocketImpl java      at java net Socket connect Socket java      at org apache derby impl store replication net ReplicationMessageTransmit   run Unknown Source  at java security AccessController doPrivileged AccessController java      at org apache derby impl store replication net ReplicationMessageTransmit initConnection Unknown Source  at org apache derby impl store replication master MasterController setupConnection Unknown Source  at org apache derby impl store replication master MasterController startMaster Unknown Source  at org apache derby impl store raw RawStore startReplicationMaster Unknown Source  at org apache derby impl store access RAMAccessManager startReplicationMaster Unknown Source  at org apache derby impl db BasicDatabase startReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection handleStartReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc AutoloadedDriver connect Unknown Source  at org apache derby impl drda Database makeConnection Unknown Source  at org apache derby impl drda DRDAConnThread getConnFromDatabaseName Unknown Source  at org apache derby impl drda DRDAConnThread verifyUserIdPassword Unknown Source  at org apache derby impl drda DRDAConnThread parseSECCHK Unknown Source  at org apache derby impl drda DRDAConnThread parseDRDAConnection Unknown Source  at org apache derby impl drda DRDAConnThread processCommands Unknown Source  at org apache derby impl drda DRDAConnThread run Unknown Source               end nested exception  level                   ',0
'Override mechanism for modules properties works backwards    It is possible to override the properties in org apache derby modules properties by putting your own version of it somewhere on the classpath  BaseMonitor getDefaultModuleProperties   apparently intends to use values from the first modules properties file that mentions a property  String key    String  newKeys nextElement    if  moduleList contains  key      RESOLVE how do we localize messages before we have finished initialization  report   Ignored duplicate property     key     in     modulesPropertiesURL toString     else moduleList setProperty  key  otherList getProperty  key   However  moduleList contains key  doesn t look for a key in moduleList  it looks for a property value  This code should have used containsKey   instead Beacuse of this  the last modules properties on the classpath will take precedence over the ones earlier on the classpath  So if you for example have two different versions of derby jar in the classpath  the engine will use the classes from the first jar and modules properties from the last jar    ',0
'Errors should be displayed if using wrong CLASSPATH to make documentation target for release    When making Derby documentation for          release  no error was prompt when wrong version of java is being used or wrong value for CLASSPATH In order to make Derby documentation  the release manager has to set CLASSPATH to include  fop jar  avalon framework cvs          jar  and batik jar files located in  DOC ROOT  trunk lib  for PDF output  When using wrong CLASSPATH to build pdf documentation  no error was prompt and no PDF output was created  Error will be more intuitive that the build was not successful    ',0
'Re compilation may cause duplicate entries in the XPLAIN table    If happening at the right moment  a re compilation request may cause duplicate entries in the XPLAIN statement tables I have only confirmed this for the SYSXPLAIN STATEMENTS table  and I do not know if the other XPLAIN tables are affected The error is highly intermittent  and so far I have only been able to trigger it when testing the automatic index statistics update prototype See the attached stack trace for some more details    ',0
'Missing doPrivileged in DatabaseClasses WriteClassFile      One of my test runs failed with the following error    testAllUncommittedReclaim org apache derbyTesting functionTests tests store AccessTest java sql SQLException  Java exception   access denied  java io FilePermission  export home tmp kh       derbyall system ac        x   bxc d x    xffffa  cb  a  class write   java security AccessControlException   at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source      Caused by  java security AccessControlException  access denied  java io FilePermission  export home tmp kh       derbyall system ac        x   bxc d x    xffffa  cb  a  class write  at java security AccessControlContext checkPermission AccessControlContext java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkWrite SecurityManager java      at java io FileOutputStream  lt init gt  FileOutputStream java      at java io FileOutputStream  lt init gt  FileOutputStream java      at org apache derby impl services reflect DatabaseClasses WriteClassFile Unknown Source  at org apache derby impl services reflect DatabaseClasses loadGeneratedClass Unknown Source      I think the underlying error is an OutOfMemoryError  because I have seen tests running out of permgen space with the same configuration lately  But that error never gets all the way out to the test framework because of the above file permission error When DatabaseClasses loadGeneratedClass   fails with a LinkageError or a VirtualMachineError  the super class of OutOfMemoryError   it attempts to dump the generated class to disk  But since the tests run under a security manager  and the code writes the class to disk isn t wrapped in a privileged block  the dumping of extra debug info fails and hides the original error    ',1
'NullPointerException in testBoundaries with ibm jvm        With the line skipping the testBoundaries fixture of the InternationalConnectTest commented out  I get the following stack when I run the test with ibm        testBoundaries org apache derbyTesting functionTests tests jdbcapi InternationalConnectTest java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerExceptionXJ    U at org apache derby client am SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby jdbc ClientDriver connect ClientDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting functionTests tests jdbcapi InternationalConnectTest testBoundaries InternationalConnectTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  java lang NullPointerExceptionXJ    U at org apache derby client am Connection completeSqlca Connection java       at org apache derby client net NetConnectionReply parseRdbAccessFailed NetConnectionReply java      at org apache derby client net NetConnectionReply parseAccessRdbError NetConnectionReply java      at org apache derby client net NetConnectionReply parseACCRDBreply NetConnectionReply java      at org apache derby client net NetConnectionReply readAccessDatabase NetConnectionReply java      at org apache derby client net NetConnection readSecurityCheckAndAccessRdb NetConnection java      at org apache derby client net NetConnection flowSecurityCheckAndAccessRdb NetConnection java      at org apache derby client net NetConnection flowUSRIDONLconnect NetConnection java      at org apache derby client net NetConnection flowConnect NetConnection java      at org apache derby client net NetConnection  lt init gt  NetConnection java      at org apache derby client net NetConnection    lt init gt  NetConnection   java     at org apache derby client net ClientJDBCObjectFactoryImpl   newNetConnection ClientJDBCObjectFactoryImpl   java      at org apache derby jdbc ClientDriver connect ClientDriver java             moreThis is after the latest check in for DERBY       revision          I ll attach derby log    ',0
'ClassCastException when calling boolean meta data functions with      client against      server    I noticed that DESCRIBE didn t work when I tried to connect to a      server with ij client driver at version      ij gt  describe t JAVA ERROR  java lang ClassCastException  java lang Integer cannot be cast to java lang Booleanjava lang ClassCastException  java lang Integer cannot be cast to java lang Boolean at org apache derby client am DatabaseMetaData getMetaDataInfoBoolean DatabaseMetaData java       at org apache derby client am DatabaseMetaData storesLowerCaseIdentifiers DatabaseMetaData java      at org apache derby impl tools ij ij caIdentifier ij java       at org apache derby impl tools ij ij DescTableStatement ij java       at org apache derby impl tools ij ij ijStatement ij java       at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java     at org apache derby iapi tools run main run java       ',0
'Thread local TableDescriptor referencedColumnMap is not removed from app threads when Derby is shut down     gt  This has been seen to cause error messages in TomCat  cf  this quote from a mail on derby user  gt   gt  http   mail archives apache org mod mbox db derby user        mbox   C    E  B   BC   BC AB     B C      FB    MERCMBX  R na SAS com  E gt   gt  SEVERE  The web application       MyApp      created a ThreadLocal with key of type  org apache derby iapi sq  gt  l dictionary TableDescriptor     value      org apache derby iapi sql dictionary TableDescriptor   d   a         gt  and a value of type      java util WeakHashMap       value                   null   null    but failed to remo  gt  ve it when the web application was stopped  This is very likely to create a memory leak    ',0
'EmbeddedXADataSource with  create true attribute set in setDatabaseName fails with java sql SQLException  Database not available    Setting the  create true attribute in setDatabaseName with EmbededXADataSource and EmbeddedXADataSource   fails with   java TestDerbyCreateException in thread  main  java sql SQLException  Database not available at org apache derby jdbc EmbeddedXADataSource setupResourceAdapter EmbededXADataSource java      at org apache derby jdbc EmbeddedXADataSource getXAConnection EmbeddedXDataSource java      at TestDerbyCreate main TestDerbyCreate java    using the create attributie in databaseName works fine with EmbeddedDataSource  Using setCreateDatabase  create   with EmbeddedXADataSource is a good work around and I think generally preferable import java sql   import javax sql   public class TestDerbyCreate  public static void main String   args  throws Throwable   org apache derby jdbc EmbeddedXADataSource ds   new org apache derby jdbc EmbeddedXADataSource    ds setDatabaseName  TestDB create true    ds setUser  dbuser     ds setPassword  dbpwd     PooledConnection pooledConn   ds getXAConnection    Connection conn   pooledConn getConnection    System out println  Database product      conn getMetaData   getDatabaseProductName     System out println  Database version      conn getMetaData   getDatabaseProductVersion     System out println  Driver name      conn getMetaData   getDriverName     System out println  Driver version      conn getMetaData   getDriverVersion     System out println  JDBC driver major ve   ',0
'Four replication tests fail on z OS with junit framework AssertionFailedError  startMaster did not succeed     Four replication tests failed with junit framework AssertionFailedError  startMaster did not succeed  running on the   bit JVM on z OS ReplicationRun Local   p  ReplicationRun Local StateTest part ReplicationRun Local   p  ReplicationRun Local StateTest part   Below are the stack traces  I will attach the fail directory There were   failures    testReplication Local StateTest part  org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part  junit framework AssertionFailedError  startMaster did not succeed  at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster direct ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part   testPreStartedMaster ReplicationRun Local StateTest part  java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part  testReplication Local StateTest part  ReplicationRun Local StateTest part  java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testReplication Local StateTest part    org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    junit framework AssertionFailedError  startMaster did not succeed  at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster direct ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    testReplication Local StateTest part    ReplicationRun Local StateTest part    java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testReplication Local   p  StateTests bigInsert sleepBeforeStopMaster org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   p  junit framework AssertionFailedError  startMaster did not succeed  at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster direct ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   p  replication Local   p  StateTests ReplicationRun Local   p  java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   p  testReplication Local   p  StateTests bigInsert sleepBeforeStopMaster ReplicationRun Local   p  java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testReplication Local   p  StateNegativeTests org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   p  junit framework AssertionFailedError  startMaster did not succeed  at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster direct ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun startMaster ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   p  testReplication Local   p  StateNegativeTests ReplicationRun Local   p  java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    FAILURES   Tests run         Failures     Errors      ',0
'restoreIntrFlagIfSeen may throw ShutdownException causing confusing console stack trace at server shutdown    Exception in thread  DRDAConnThread     org apache derby iapi error ShutdownException  at org apache derby iapi services context ContextManager checkInterrupt ContextManager java      at org apache derby iapi services context ContextManager getContext ContextManager java      at org apache derby iapi services context ContextService getContextOrNull ContextService java      at org apache derby iapi util InterruptStatus restoreIntrFlagIfSeen InterruptStatus java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedPreparedStatement closeActions EmbedPreparedStatement java      at org apache derby impl jdbc EmbedStatement close EmbedStatement java      at org apache derby impl drda DRDAStatement close DRDAStatement java       at org apache derby impl drda Database close Database java      at org apache derby impl drda Session close Session java      at org apache derby impl drda DRDAConnThread closeSession DRDAConnThread java       at org apache derby impl drda DRDAConnThread run DRDAConnThread java        ',0
'Instability in Derby    LayerBTest    Seen on      RC  testFailedStreamInsertBinaryAutoCommitRollbackOnError org apache derbyTesting functionTests tests jdbc  Derby    LayerBTest  FAILURE junit framework AssertionFailedError  Column value mismatch   column  B   row    Expected   gt                    f       lt  Found   gt                    f       lt  at junit framework Assert fail Assert java     at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting functionTests tests jdbc  Derby    LayerBTest doInsertTest Derby    LayerBTest java      at org apache derbyTesting functionTests tests jdbc  Derby    LayerBTest testFailedStreamInsertBinaryAutoCommitRollbackOnError Derby    LayerBTest java        ',0
'test failure in OSReadOnlyTest in assertDirectoryDeleted    I ve seen the assert flag a failure for deleteing a log file last night  and a seg  file the night before This is one stack trace    testOSReadOnly org apache derbyTesting functionTests tests store OSReadOnlyTest junit framework AssertionFailedError  Failed to delete   files  root F  test JarResults            ibm   suites All system singleUse readWrite  F  test JarResults            ibm   suites All system singleUse readWrite log  isDir true  canRead true  canWrite true  size     F  jartest JarResults            ibm   suites All system singleUse readWrite  isDir true  canRead true  canWrite true  size    at org apache derbyTesting junit BaseJDBCTestCase assertDirectoryDeleted BaseJDBCTestCase java       at org apache derbyTesting functionTests tests store OSReadOnlyTest moveDatabaseOnOS OSReadOnlyTest java      at org apache derbyTesting functionTests tests store OSReadOnlyTest testOSReadOnly OSReadOnlyTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    This is another    testOSReadOnly org apache derbyTesting functionTests tests store OSReadOnlyTest junit framework AssertionFailedError  Failed to delete   files  root F  test JarResults            ibm   suites All system singleUse readOnly  F  test JarResults            ibm   suites All system singleUse readOnly seg   isDir true  canRead true  canWrite true  size     F  jartest JarResults            ibm   suites All system singleUse readOnly  isDir true  canRead true  canWrite true  size    at org apache derbyTesting junit BaseJDBCTestCase assertDirectoryDeleted BaseJDBCTestCase java       at org apache derbyTesting functionTests tests store OSReadOnlyTest moveDatabaseOnOS OSReadOnlyTest java      at org apache derbyTesting functionTests tests store OSReadOnlyTest testOSReadOnly OSReadOnlyTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    This is on a machine that I ve been able to arrange for a windows machine on which to run the tests for      nightly  but this is not a new machine  So perhaps the disk   being older   is a little slow in deleting  Perhaps the check can be delayed  or redone if failed first time  I m still investigating  checking on hardware settings  The disk scan showed up healthy  and multithreading is not on    ',0
'suites All stuck in RAFContainer  awaitRestoreChannel      I have suites All running on trunk  and it seems to be stuck in a call to RAFContainer  awaitRestoreChannel    Here s the stack for the waiting thread  main  prio   tid  x         nid  x  waiting on condition       xfe  e         java lang Thread State  TIMED WAITING  sleeping  at java lang Thread sleep Native Method  at org apache derby impl store raw data RAFContainer  awaitRestoreChannel RAFContainer  java      at org apache derby impl store raw data RAFContainer  writePage RAFContainer  java      at org apache derby impl store raw data CachedPage writePage CachedPage java      at org apache derby impl store raw data CachedPage clean CachedPage java      at org apache derby impl services cache ConcurrentCache cleanAndUnkeepEntry ConcurrentCache java      at org apache derby impl services cache ConcurrentCache cleanCache ConcurrentCache java      at org apache derby impl services cache ConcurrentCache cleanAll ConcurrentCache java      at org apache derby impl store raw data BaseDataFileFactory checkpoint BaseDataFileFactory java       at org apache derby impl store raw log LogToFile checkpointWithTran LogToFile java       at org apache derby impl store raw log LogToFile checkpoint LogToFile java       at org apache derby impl store raw RawStore stop RawStore java      at org apache derby impl services monitor TopService stop TopService java      at org apache derby impl services monitor TopService shutdown TopService java      at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java      at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java      at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting junit DriverManagerConnector getConnectionByAttributes DriverManagerConnector java      at org apache derbyTesting junit DriverManagerConnector shutEngine DriverManagerConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting junit SystemPropertyTestSetup setUp SystemPropertyTestSetup java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java        ',0
'Embedded Derby does not start when derby jar is dynamically uploaded   added to the classpath    Hi  For our workflow system  we can use a variety of DBMS as the store engine  Derby is one of them especially popularfor test and development purposes  During setup of our system  we allow to upload a jar file with the JDBC Driver for the DBMS In case of derby  we use the embedded mode and upload derby jar  After that we add the jar to the repositories of our class loaderand call Class drc   Class forName  org apache derby jdbc EmbeddedDriver   true  ourclassloader  Driver drv    Driver drc newInstance   this worked perfectly for many years up to version           but ceased to work in           i assume the unreleased future versions are affected  toowhen derby jar is placed in the classpath manually before starting our setup  everything works fine regardless of the derby version investigations lead to the following conclusion  since rev         this is broken  in the immediate predecessor rev         it worked  rev         in the org apache derby impl store raw data BaseDataFileFactory class introduced a new method private static String jarClassPath final Class cls  which tries to find the jarfile from which derby was loaded  it contains the following lines  if   cs    null   return null URL result   cs getLocation   return result toString     but in the case  when we dynamically load derby   cs is not null but cs getLocation   is null  so i propose to change the line with the if to    if   cs    null    cs getLocation    null  return null    or maybe it would be better to surround the whole body of the method with a try catch  since it is not essential  and a null return value is also ok thank you for your efforts concerning derby at large  Michael   ',0
'Backward  confusing error message when you use the wrong ResultSet getXXX   method in the client driver    If you try to get a Time value out of an INTEGER column  the client driver gives this error  I believe that similar nonsense comes back when you try other mismatched getters on other datatypes   An attempt was made to get a data value of type  java sql Types    from a data value of type  java sql Time   The exception is a java sql SQLDataException with SQLState        The embedded driver returns a better message   An attempt was made to get a data value of type  java sql Time  from a data value of type INTEGER   I recommend two improvements to the utility method which generates these exceptions    Flip the order of the type names    Use the ResultSetMetaData to look up the source data type name    ',0
'AccessControlException when running AssertFailureTest from Ant    Seen when running  ant junit all        junit      Running org apache derbyTesting unitTests junit  Suite      junit      Exception in thread  main  java security AccessControlException  access denied  java io FilePermission  code derby trunk  junit               junitvmwatcher                    properties write       junit      at java security AccessControlContext checkPermission AccessControlContext java           junit      at java security AccessController checkPermission AccessController java           junit      at java lang SecurityManager checkPermission SecurityManager java           junit      at java lang SecurityManager checkWrite SecurityManager java           junit      at java io FileOutputStream  lt init gt  FileOutputStream java           junit      at java io FileOutputStream  lt init gt  FileOutputStream java          junit      at java io FileWriter  lt init gt  FileWriter java          junit      at org apache tools ant taskdefs optional junit JUnitTestRunner registerTestCase JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner access     JUnitTestRunner java          junit      at org apache tools ant taskdefs optional junit JUnitTestRunner   startTest JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner   startTest JUnitTestRunner java            junit      at junit framework TestResult startTest TestResult java           junit      at junit framework TestResult run TestResult java           junit      at junit framework TestCase run TestCase java           junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner run JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner launch JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner main JUnitTestRunner java           junit      Running org apache derbyTesting unitTests junit  Suite      junit      Tests run     Failures     Errors     Time elapsed    sec      junit      Test org apache derbyTesting unitTests junit  Suite FAILED  crashed    ',0
'Race condition in FileContainer allocCache when reopening RAFContainer after interrupt    The symptom is an ArrayIndexOutOfBoundsException java lang ArrayIndexOutOfBoundsException     at org apache derby impl store raw data AllocationCache validate AllocationCache java      at org apache derby impl store raw data AllocationCache getLastPageNumber AllocationCache java      at org apache derby impl store raw data FileContainer pageValid FileContainer java       at org apache derby impl store raw data FileContainer getUserPage FileContainer java       at org apache derby impl store raw data FileContainer getInsertablePage FileContainer java       at org apache derby impl store raw data FileContainer getPageForInsert FileContainer java       at org apache derby impl store raw data BaseContainerHandle getPageForInsert BaseContainerHandle java      at org apache derby impl store access heap HeapController doInsert HeapController java      at org apache derby impl store access heap HeapController insertAndFetchLocation HeapController java      at org apache derby impl sql execute RowChangerImpl insertRow RowChangerImpl java      at org apache derby impl sql execute InsertResultSet normalInsertCore InsertResultSet java       at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeUpdate EmbedPreparedStatement java      at InterruptTest WorkerThread run InterruptTest java    This can only happen if another thread has called allocCache reset while the thread above is in the loop in validate  so as to set numExtents to   The synchronization of allocCache is documented in the Javadoc of the FileContainer class  all accesses to allocCache should synchronize This is omitted when we reopen  FileContainer openContainer calls readHeader   gt  readHeaderFromArray   gt  allocCache reset   ',0
'Replication tests lose derby log for slave    After running ReplicationRun Local   p  I notice that of the two directories created  db master and db slave  only db master contains a derby log file  This is not so nice  since the log file is sometimes needed for test debugging   ',0
'Retrying after interrupts in store pops a bug in derbyall storeall storeunit T RawStoreFactory in some cases    Cf Myrna s comment on DERBY       I think the latest check in has caused the following tinderbox failure derbyall storeall storeall fail unit T RawStoreFactory unitsee  http   dbtg foundry sun com derby test tinderbox trunk   jvm    testing testlog SunOS      i  pc i            derbyall diff txt                  Diff file derbyall storeall storeunit T RawStoreFactory diff             Start  T RawStoreFactory jdk         storeall storeunit                          del lt          Unit Test T RawStoreFactory finished  add gt  ran out of time gt  Exit due to time bombTest Failed  End  T RawStoreFactory jdk         storeall storeunit                         It failed in the nightly runs with ibm     also  and       and         ',0
'failure in jdbcapi StatementJdbc  Test testCompletionClosure jdbc    with j   j ME CDC     After revision         for DERBY       there is the following failure in the tests when run with ibm s j     testCompletionClosure jdbc    org apache derbyTesting functionTests tests jdbcapi StatementJdbc  Test java sql SQLException  The exception  java lang NoClassDefFoundError  java sql DriverManager  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derbyTesting functionTests tests jdbcapi StatementJdbc  Test vetClosedCall StatementJdbc  Test java      at org apache derbyTesting functionTests tests jdbcapi StatementJdbc  Test vetClosure StatementJdbc  Test java      at org apache derbyTesting functionTests tests jdbcapi StatementJdbc  Test testCompletionClosure jdbc    StatementJdbc  Test java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java sql SQLException  Java exception   java sql DriverManager  java lang NoClassDefFoundError   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java lang NoClassDefFoundError  java sql DriverManager at org apache derbyTesting functionTests tests jdbcapi StatementJdbc  Test dynamicResults StatementJdbc  Test java      at org apache derby exe acdf    dax   dxb  exf   xffffd bbe d   g  Unknown Source  at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute CallStatementResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moreNote  that there is no record of how this test would fare with the phoneME   those tests haven t been running since mid September       http   dbtg foundry sun com derby test Daily javaME testing Full index all html     ',0
'ALTER TABLE DROP COLUMN may leave triggers invalid even if they are not using the column getting dropped     While doing testing for DERBY       I found a case where ALTER TABLE DROP COLUMN will leave triggers in invalid state even if those triggers are not using the column getting dropped  egCREATE TABLE tab    element id INTEGER NOT NULL   altered id VARCHAR     NOT NULL   insert into tab values    aa           Create a trigger against the table CREATE TRIGGER mytrig  AFTER UPDATE OF altered id ON tab  REFERENCING NEW AS newt OLD AS oldt  FOR EACH ROW MODE DB SQL  SELECT newt altered id from tab   Drop the first column in the table  This will cause the column positions to be recalculated within the tablealter table tab drop column element id    mytrig is still looking for column altered id at position   but drop column has changed it s position within the table to  update tab set altered id  bb  As shown in the example above  table  TAB  only has   columns  The trigger  MYTRIG  uses the  nd column in it s trigger action through the REFERENCING clause  During trigger action sql parsing  every column referenced through REFERENCING clause gets transformed into a reference to the column through it s column position in the trigger table this change to look for columns based on their column positions rather than the name went in as revision        with following commit comments DERBY      Change the generated code for a new old column in a row trigger to access columns by position and not name to avoid the case insensitive name lookup specified by JDBC   When in the script above  we drop the column in position    the trigger  MYTRIG  ends up becoming invalid because column being used in the trigger action is no more in column position   One possible solution is to regenerate the SPSDescriptor associated with the trigger action for all the triggers defined on the table whose column is getting dropped  We could be little smarter and only regenerate the SPSDescriptor for the triggers who use the REFERENCING clause  But we need to do more testing to make sure that triggers without REFERENCING clause do not get impacted by a drop of column which is not the last column of the table  This optimization of recognizing the right triggers may not be worth it since performance may not be that big a criteria for an ALTER TABLE DROP COLUMN which should be a rare operation in a production system An interim solution to this problem is obviously to drop and recreate the triggers   ',0
'BootLockTest can fail with ERROR XCY    Required property  derby serviceProtocol  has not been set  with slow configurations    If derby tests are running with JVM options that slow things down substantially  it can fail with    testBootLock org apache derbyTesting functionTests tests store BootLockTest junit framework ComparisonFailure  Dual boot not detected  check BootLockMinion log expected  lt    SDB  gt  but was  lt    CY   gt  at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase assertSQLState BaseJDBCTestCase java      at org apache derbyTesting functionTests tests store BootLockTest testBootLock BootLockTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Required property  derby serviceProtocol  hasnot been set  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting junit DriverManagerConnector openConnection DriverManagerConnector java     at org apache derbyTesting junit DriverManagerConnector openConnection DriverManagerConnector java     at org apache derbyTesting junit TestConfiguration openDefaultConnection TestConfiguration java       at org apache derbyTesting junit BaseJDBCTestCase openDefaultConnection BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase getConnection BaseJDBCTestCase java      at org apache derbyTesting functionTests tests store BootLockTest testBootLock BootLockTest java             moreCaused by  java sql SQLException  Required property  derby serviceProtocol  hasnot been set  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  ERROR XCY    Required property  derby serviceProtocol  has not been set  at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl services monitor BaseMonitor startProviderService BaseMonitor java       at org apache derby impl services monitor BaseMonitor findProviderAndStartService BaseMonitor java       at org apache derby impl services monitor BaseMonitor startPersistentService BaseMonitor java      at org apache derby iapi services monitor Monitor startPersistentService Monitor java      at org apache derby impl jdbc EmbedConnection bootDatabase EmbedConnection java              moreThe test waits for the spawned process to create db lck and service properties and then waits three seconds more to make sure the properties have been written  but this might not be enough time Although I have not seen this myself with unchanged code   I can simulate it on windows by changing StorageFactoryService saveServiceProperties   to have a sleep between creating the service properties file and writing the properties out  e g  try   os   servicePropertiesFile getOutputStream    try   Thread sleep           catch  Exception e     properties store  os  serviceName   MessageService getTextMessage MessageId SERVICE PROPERTIES DONT EDIT      ',0
'Intermittent bug in InterruptResilienceTest    Knut saw an error on the nightly test on Windows       apparently an interrupt happened when waiting for a lock  Cf  enclosure test log    ',0
' patch  fix npe in error condition    LogToFile switchLogFile  In the cleanup code that handles failure of initLogFile  we seecode nulls out a variable and then access it  push the nulling down to the end    ',0
' patch  Client driver lexer to determine statement type  fix bad attempt at incrementing a variable    In the client driver lexer to determine statement type  we look for token  select    update    values  etc  The lexer used to has a bug in itshandling of end of line comments      code doesidx   idx   but this does absolutely nothing   ',0
' patch  override equals correctly    code implements equals w o an Object parm  Calling code that doesn t have first class signature of FormatableBitSet will not work as expected  Properly override equals to fix    ',0
'Cannot find Ant libraries when building from NetBeans    Building Derby doesn t work out of the box in NetBeans  The wiki page http   wiki apache org db derby BuildingDerby instructs NetBeans users to specify the ant library dir property in order to get the build working The Ant documentation says the following about the ant library dir property   The following property is only set if Ant is started via the Launcher class  which means it may not be set inside IDEs either     http   ant apache org manual properties htmlSince the property is not guaranteed to be set  I suggest that we replace references to    ant library dir  ant jar  with references to    ant core lib   in the build scripts  According to the above mentioned Ant manual page the ant core lib property should always be available and point to ant jar  Changing this makes it possible to build Derby from NetBeans with no special customization    ',0
'UpdateStatisticsTest fails after we enabled the automatic calculation of index statistics     After enabling the automatic calculation of statistics  we see the following error in UpdateStatisticsTest in the tinderbox run  See  for instance  http   dbtg foundry sun com derby test tinderbox trunk   jvm    testing Limited testSummary         html     testUpdateStatistics org apache derbyTesting functionTests tests lang UpdateStatisticsTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests lang UpdateStatisticsTest testUpdateStatistics UpdateStatisticsTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       testUpdateStatistics org apache derbyTesting functionTests tests lang UpdateStatisticsTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests lang UpdateStatisticsTest testUpdateStatistics UpdateStatisticsTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
' patch  derived InternalXact attempts  and fails  to override a method from base    RawTransaction implementspublic void checkLogicalOperationOk   throws StandardException   which is attempted to be overridden in derived class InternalXact  but is not done so because of a case problem in InternalXact public void checkLogicalOperationOK   throws StandardException   throw StandardException newException  SQLState XACT NOT SUPPORTED IN INTERNAL XACT   Code that calls this method thru the parent will not get the overridden method called    ',0
' patch  bad field masking makes non functional rowsInput evaluation    RealDistinctScalarAggregateStatistics derives from RealScalarAggregateStatisticsRealDistinctScalarAggregateStatistics takes a constructor parm of rowsInput and forwards it to the super class s constructor  where it is stored for use by the class However  the subclass mistakenly added a masked rowsInput field that is never set  and thus interferes with the proper use of the super class s rowsInput field patch removed the erroneous subclass s field    ',0
'ResultSet updateBoolean   on new BOOLEAN type throws exception    I am encountering an error trying to update a BOOLEAN type through anupdatable ResultSet  My table looks like this CREATE TABLE file store   path VARCHAR      NOT NULL  network VARCHAR     NOT NULL  file blob BLOB  file md  VARCHAR      is directory BOOLEAN NOT NULL DEFAULT false  PRIMARY KEY  path  network   My SQL looks like this SELECT path  network  is directory FROM file storeWHERE path   AND network   AND is directory true FOR UPDATE OF path  network  is directoryMy Java code looks like this    resultSet moveToInsertRow   resultSet updateString  path   dirPath  resultSet updateString  network   network  resultSet updateBoolean  is directory   true  resultSet insertRow   An exception is thrown in the call to updateBoolean   as follows java sql SQLException  An attempt was made to put a data value of type  byte  into a data value of type  BOOLEAN  It s a shame  I was looking forward to using the new BOOLEAN type before I roll out the next version of our software  For now I will fallback to SMALLINT  Does will ALTER TABLE support a change from SMALLINT to BOOLEAN    ',0
'Assert failures in UpdateStatisticsTest    I saw these failures when running suites All against revision           the  b patch attached to DERBY     junit framework AssertionFailedError  Index statistics for  lt ALL TABLES gt     tableId   a   d     e  a f d  d ffff     fa   tableName  lt n a gt   indexName  lt n a gt   lcols    rows      unique card      created                          expected  lt   gt  but was  lt   gt  at org apache derbyTesting junit IndexStatsUtil assertStats IndexStatsUtil java      at org apache derbyTesting junit IndexStatsUtil assertNoStats IndexStatsUtil java      at org apache derbyTesting functionTests tests lang UpdateStatisticsTest testUpdateStatistics UpdateStatisticsTest java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    junit framework AssertionFailedError  Index statistics for  lt ALL TABLES gt     tableId   a   d     e  a f d  d ffff     fa   tableName  lt n a gt   indexName  lt n a gt   lcols    rows      unique card      created                          expected  lt   gt  but was  lt   gt  at org apache derbyTesting junit IndexStatsUtil assertStats IndexStatsUtil java      at org apache derbyTesting junit IndexStatsUtil assertNoStats IndexStatsUtil java      at org apache derbyTesting functionTests tests lang UpdateStatisticsTest testUpdateStatistics UpdateStatisticsTest java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'Intermittent assert failure in AutomaticIndexStatisticsTest testStatisticsCorrectness    An assert on timestamps in the test AutomaticIndexStatisticsTest testStatisticsCorrectnes is unstable  and fails on sufficiently fast machines and or operating systems with lower resolution timers    ',0
' patch  Bad name collision causes non functional method    ijMultipleResultSetResult has this method     Create a ijResultImpl that represents multiple result set     public ijMultipleResultSetResult List resultSets  throws SQLException   resultSets   new ArrayList    resultSets addAll resultSets    due to the name collision  this does nothing    patch fixes with this  prefixing    ',0
'Embedded driver allows updateBytes   on BOOLEAN column    The following code inserts the value TRUE into the table T on the embedded driver  Statement s   c createStatement ResultSet TYPE FORWARD ONLY  ResultSet CONCUR UPDATABLE   s execute  create table t b boolean     ResultSet rs   s executeQuery  select b from t    rs moveToInsertRow    rs updateBytes     this is a test  getBytes     rs insertRow   The client driver fails java sql SQLException  An attempt was made to put a data value of type  byte    into a data value of type  BOOLEAN  I believe the client driver is correct  and embedded should be changed to match it    ',0
'test failure s  with IBM       in store InterruptResilienceTest testRAFWriteInterrupted  java sql SQLException  The exception  junit framework AssertionFailedError  interrupt flag lost  was thrown while evaluating an expression     Since February     I see this failure    testRAFWriteInterrupted org apache derbyTesting functionTests tests store InterruptResilienceTest  java sql SQLException  The exception  junit framework AssertionFailedError  interrupt flag lost  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests store InterruptResilienceTest testRAFWriteInterrupted InterruptResilienceTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java Compiled Code   at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   interrupt flag lost  junit framework AssertionFailedError   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  junit framework AssertionFailedError  interrupt flag lost at org apache derbyTesting functionTests tests store InterruptResilienceTest tstRAFwriteInterrupted InterruptResilienceTest java Compiled Code   at org apache derby exe ac b b    x   ex   dx  e x     a ef be  g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute CallStatementResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moretwice  February    and February     this was followed by a second test failure    testRAFReadWriteMultipleThreads org apache derbyTesting functionTests tests store InterruptResilienceTest java sql SQLException  The exception  junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt       lt  Found   gt       lt   was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests store InterruptResilienceTest testRAFReadWriteMultipleThreads InterruptResilienceTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java Compiled Code   at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   Column value mismatch   column      row    Expected   gt       lt  Found   gt       lt   junit framework AssertionFailedError   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt       lt  Found   gt       lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java Compiled Code   at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java Inlined Compiled Code   at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java Compiled Code   at org apache derbyTesting junit JDBC assertFullResultSet JDBC java Inlined Compiled Code   at org apache derbyTesting junit JDBC assertFullResultSet JDBC java Inlined Compiled Code   at org apache derbyTesting junit JDBC assertFullResultSet JDBC java Inlined Compiled Code   at org apache derbyTesting junit JDBC assertSingleValueResultSet JDBC java Compiled Code   at org apache derbyTesting functionTests tests store InterruptResilienceTest tstRAFReadWriteMultipleThreads InterruptResilienceTest java      at org apache derby exe ac   a  b x   ex  e x b  x       ebfa   g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java Compiled Code   at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java Compiled Code   at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute CallStatementResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moreSee for instance  http   people apache org  myrnavl derby test results main linux testlog ibm            suites All diff txtand http   people apache org  myrnavl derby test results main linux testlog ibm            suites All diff txtI can reproduce the first failure on my laptop with Windows XP with ibm        in fact  I got the same failure twice  I assume once with NetworkServer client  once with embedded  by just running the test This popping up on the   th is because this test didn t run with ibm       for a while before revision          see DERBY       but this is a different problem  I marked this  store   but this test doesn t fail with Sun s       jvm  judging from the results at http   dbtg foundry sun com derby test Daily jvm    testing Limited    so it s possible there s a jvm issue here    ',0
'Incorrect list of compatible JRE versions in client trace    When running with client side tracing enabled  these lines appear first in the trace file      derby      BEGIN TRACE DRIVER CONFIGURATION     derby      Driver  Apache Derby Network Client JDBC Driver          alpha           P      derby      Compatible JRE versions              The list of compatible JRE versions is wrong  The client driver doesn t work on      and     and     are missing from the list    ',0
'DERBY      caused a regression which will not allow users to drop a table if the table was involved in a trigger action rebind during ALTER TABLE DROP COLUMN    The fix for DERBY      has introduced a regression which adds rows into SYSDEPENDS which are incorrect  The error I think was caused when before doing a rebind of trigger action  I made the trigger table as the current dependent in the dependency system and hence all the dependencies required by the trigger action got associated with that trigger table and hence causing the errorneous behavior  I will work on this asap  The fix went into trunk and       I will add a test case for this in the jira and will also add a test case in our junit test   ',0
'ShutdownException in ContextManager checkInterrupt   during shutdown    When running the attached repro script  I often  but not always  see a ShutdownException in ContextManager checkInterrupt   when ij exits and shuts down the Derby engine  ij expects an exception here  but it expects an SQLException  not a ShutdownException    ',0
'After specifying deregister false on the engine shutdown URL  Derby forgets that the default behavior is deregister true    If you shutdown the engine specifying deregister false  then get a new connection  then shutdown the engine again without specifying any value for the deregister attribute  Derby acts as though you specified deregister false again  I will attach a test program which shows this problem    ',0
'NPE in istat daemon when encountering critical exception during shutdown    If the istat daemon encounters a critical error during shutdown and the data dictionary module has been stopped  it will run into a NPE This bug is highly timing dependent in two ways  the data dictionary module must have been stopped first  and then the istat daemon must encounter a critical error  at the right time  I have seen this bug once on my laptop    ',0
'GetCurrentPropertiesTest depends on implicit ordering of test cases    The test cases in GetCurrentPropertiesTest must run in the order in which they are defined in the source file  If for example the test case testPropertiesTraceOn runs first  the test will fail with the following stack trace    testPropertiesTraceOn org apache derbyTesting functionTests tests derbynet GetCurrentPropertiesTest junit framework ComparisonFailure  expected  lt      tru     e gt  but was  lt      fals     e gt  at org apache derbyTesting functionTests tests derbynet GetCurrentPropertiesTest testPropertiesTraceOn GetCurrentPropertiesTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java          Seen in the nightly tests  for example here  http   dbtg foundry sun com derby test Daily jvm    testing testlog vista            suitesAll diff txt   ',0
'ProcedureInTriggerTest depends on implicit ordering of test cases    If for example the test case testTriggerContainsSql is executed as the first test case  it will fail with the following error    testTriggerContainsSql org apache derbyTesting functionTests tests lang ProcedureInTriggerTest junit framework AssertionFailedError  expected  lt   gt  but was  lt   gt  at org apache derbyTesting functionTests tests lang ProcedureInTriggerTest checkAndResetGetConnectionProcCount ProcedureInTriggerTest java      at org apache derbyTesting functionTests tests lang ProcedureInTriggerTest testTriggerContainsSql ProcedureInTriggerTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    The test should either make the order of the test cases explicit or make the test cases independent of the order in which they run Seen in the nightly tests  for example here  http   dbtg foundry sun com derby test Daily jvm    testing testlog lin         suitesAll diff txt   ',0
'Lacking cleanup in CheckConstraintTest testJira          The test case testJira     in CheckConstraintTest doesn t drop the table it creates  The table itself has a unique name that doesn t conflict with any other test case  but it also has a constraint with a generic name  CK   that is in conflict with constraints created in testCheckConstraints and testPositionalUpdate  If testJira     runs before any of those test cases  the test will fail Example from the nightly tests http   dbtg foundry sun com derby test Daily jvm    testing testlog lin         suitesAll diff txt   testCheckConstraints org apache derbyTesting functionTests tests lang CheckConstraintTest java sql SQLException  Constraint  CK   already exists in Schema  APP   at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests lang CheckConstraintTest testCheckConstraints CheckConstraintTest java        ',0
'Assert failure in SavepointJdbc  Test testReleaseSqlSavepointAndRollback    Seen in nightly testing on Java   http   dbtg foundry sun com derby test Daily jvm    testing testlog vista            suitesAll diff txt    testReleaseSqlSavepointAndRollback org apache derbyTesting functionTests tests jdbcapi SavepointJdbc  Test junit framework AssertionFailedError  expected  lt   gt  but was  lt   gt  at org apache derbyTesting functionTests tests jdbcapi SavepointJdbc  Test testReleaseSqlSavepointAndRollback SavepointJdbc  Test java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java        ',0
'ParameterMetaDataJdbc  Test fails with   DUMMYINT  is not recognized as a function or procedure     ParameterMetaDataJdbc  Test has failed a couple of times in the nightly tests on Java   http   dbtg foundry sun com derby test Daily jvm    testing testlog lin         suitesAll diff txt   testMetatdataAfterProcRecompile org apache derbyTesting functionTests tests jdbcapi ParameterMetaDataJdbc  Test java sql SQLSyntaxErrorException   DUMMYINT  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedCallableStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareCall Unknown Source  at org apache derby impl jdbc EmbedConnection prepareCall Unknown Source  at org apache derbyTesting junit BaseJDBCTestCase prepareCall BaseJDBCTestCase java      at org apache derbyTesting functionTests tests jdbcapi ParameterMetaDataJdbc  Test testMetatdataAfterProcRecompile ParameterMetaDataJdbc  Test java        ',0
'testQualifiers org apache derbyTesting functionTests tests store AccessTest java sql SQLException  Table View  FOO  already exists in Schema  APP         testQualifiers org apache derbyTesting functionTests tests store AccessTest java sql SQLException  Table View  FOO  already exists in Schema  APP   at java lang Throwable  lt init gt  Throwable java     at java sql SQLException  lt init gt  SQLException java      at java sql SQLException  lt init gt  SQLException java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests store AccessTest testQualifiers AccessTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Table View  FOO  already exists in Schema  APP   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  ERROR X Y    Table View  FOO  already exists in Schema  APP   at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl duplicateDescriptorException Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl addDescriptor Unknown Source  at org apache derby impl sql execute CreateTableConstantAction executeConstantAction Unknown Source  at org apache derby impl sql execute MiscResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moreNote this was followed by another failure DERBY       Not sure if the failure to create the table might have impacted that test    ',0
'nightly test failure in derbyall storeall storemore SpaceTable    http   dbtg foundry sun com derby test Daily jvm    testing testlog lin         derbyall diff txtFailure Details                  Diff file derbyall storeall storemore SpaceTable diff             Start  SpaceTable jdk         storeall storemore                            del lt  PLATYPUS                           a    gt  PLATYPUS                        Test Failed  End  SpaceTable jdk         storeall storemore                                                                                 ',0
'Incomplete quoting of SQL identifiers in AlterTableConstantAction    AlterTableConstantAction generates SQL statements various places  Identifiers  schema names  table names  column names  are surrounded with double quotes in case they contain special characters  This is not enough if the identifiers contain double quotes  as can be seen with this example ij gt  create table t x int    rows inserted updated deletedij gt  alter table t add column      int default    ERROR   X    Syntax error  Encountered      at line    column    I ve found three places where AlterTableConstantAction generates SQL statements  updateNewColumnToDefault    updateNewAutoincrementColumn    getColumnMax    All three places suffer from this problem    ',0
'ParameterMetaDataJdbc  Test fails with   PMDD  is not recognized as a function or procedure     Seen in nightly testing on Java   http   dbtg foundry sun com derby test Daily jvm    testing testlog sol           suitesAll diff txt   testParameterMetadataWithLITERALParameters org apache derbyTesting functionTests tests jdbcapi ParameterMetaDataJdbc  Test java sql SQLSyntaxErrorException   PMDD  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedCallableStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedCallableStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareCall Unknown Source  at org apache derby impl jdbc EmbedConnection prepareCall Unknown Source  at org apache derbyTesting junit BaseJDBCTestCase prepareCall BaseJDBCTestCase java      at org apache derbyTesting functionTests tests jdbcapi ParameterMetaDataJdbc  Test testParameterMetadataWithLITERALParameters ParameterMetaDataJdbc  Test java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Caused by  java sql SQLException   PMDD  is not recognized as a function or procedure  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  ERROR   Y     PMDD  is not recognized as a function or procedure  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile StaticMethodCallNode bindExpression Unknown Source  at org apache derby impl sql compile JavaToSQLValueNode bindExpression Unknown Source  at org apache derby impl sql compile CallStatementNode bindStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source         moreLooks like a problem with the ordering of the test cases  testParameterMetadataWithDECIMALParameters   creates the procedure PMDD  and testParameterMetadataWithLITERALParameters   calls it and drops it  If the test cases run in the opposite order  testParameterMetadataWithLITERALParameters   cannot find the procedure and fails    ',0
'Cannot rollback after syntax error in internal statement    To reproduce  execute the statements below in ij  Can only be reproduced this way before DERBY       I don t know how to reproduce it when that bug is fixed ij version     ij gt  connect  jdbc derby db create true  ij gt  autocommit off ij gt  create table t x int    rows inserted updated deletedij gt  alter table t add column      int default    ERROR   X    Syntax error  Encountered      at line    column    Issue the  help  command for general information on IJ command syntax Any unrecognized commands are treated as potential SQL commands and executed directly Consult your DBMS server reference documentation for details of the SQL syntax supported by your server ij gt  rollback ERROR X Y    Cannot issue rollback in a nested connection when there is a pending operation in the parent connection The error message implies that we ve called rollback   on a nested transaction  whereas we re in fact called it on the parent transaction Expected result  The rollback statement should abort the transaction without raising any errors    ',0
'CLOB INOUT arg set to NULL by procedure does not preserve NULL value when re invoked    If a procedure sets an INOUT CLOB arg to NULL and is then re invoked  the NULL is not preserved  Instead  the procedure sees the same CLOB that it saw in the last invocation  This bug was disclosed during the testing of the fix for DERBY       I will attach a repro    ',0
' patch  fix up sql cleanup handling    When a sql exception occurs  don t allow potential cascading sql problems when closing sql objects from masking the original cause of the exception Also make sure statements get closed    ',0
'Setting up network server for management tests hangs intermittently    I ve seen on three occurrences with the          and          release candidates that suites All has been stuck when setting up the network server decorator for the management test suite  Here s what I see at the end of the console output  running with derby tests trace true        junit      test jdbc    used   ms       junit      test jdbc    used   ms       junit      test notBooted used      ms java net SocketException  Connection reset      junit      at java net SocketInputStream read SocketInputStream java           junit      at java net SocketInputStream read SocketInputStream java           junit      at java net SocketInputStream read SocketInputStream java           junit      at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source       junit      at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source       junit      at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source       junit      at org apache derby impl drda NetworkServerControlImpl ping Unknown Source       junit      at org apache derby drda NetworkServerControl ping Unknown Source       junit      at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java           junit      at org apache derbyTesting junit NetworkServerTestSetup pingForServerStart NetworkServerTestSetup java           junit      at org apache derbyTesting junit NetworkServerTestSetup setUp NetworkServerTestSetup java           junit      at junit extensions TestSetup   protect TestSetup java          junit      at junit framework TestResult runProtected TestResult java           junit      at junit extensions TestSetup run TestSetup java          junit      at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java          junit      at junit extensions TestDecorator basicRun TestDecorator java          junit      at junit extensions TestSetup   protect TestSetup java          junit      at junit framework TestResult runProtected TestResult java           junit      at junit extensions TestSetup run TestSetup java          junit      at junit extensions TestDecorator basicRun TestDecorator java          junit      at junit extensions TestSetup   protect TestSetup java          junit      at junit framework TestResult runProtected TestResult java           junit      at junit extensions TestSetup run TestSetup java          junit      at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java          junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at junit framework TestSuite runTest TestSuite java           junit      at junit framework TestSuite run TestSuite java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner run JUnitTestRunner java           junit      at org apache tools ant taskdefs optional junit JUnitTestRunner launch JUnitTestRunner java            junit      at org apache tools ant taskdefs optional junit JUnitTestRunner main JUnitTestRunner java     The exception trace is just printed to the console  but it doesn t make any test fail   The exception printed on FreeBSD was different  it said  DRDA InvalidReplyTooShort S Invalid reply from network server  Insufficient data   The other two looked like the one above  All the hangs have happened on VirtualBox instances  though with different guest operating systems and JVMs  Probably the timing is different from what we have on physical machines    ',0
'Interrupt of create table or index  i e  a container  will throw XSDF  under NIO   connection survives    Cf the enclosed repro  It would be good to make Derby ignore the interrupt here  Cf DERBY       Note that this is less serious than in the cases referred to in DERBY       here the database does not get shut down  even the connection survives  cf the repro  So  this can be considered a follow up to DERBY      to further improve Derby s robustness under interrupts    ',0
'Client driver silently truncates strings that exceed   KB    Can be seen with this JUnit test case that retrieves a VARCHAR value with       characters  With the client driver  the string is truncated to       characters        bytes when encoded in UTF     public void testLongColumn   throws SQLException   PreparedStatement ps   prepareStatement   values cast   as varchar            char   chars   new char         Arrays fill chars    u e      String str   new String chars   ps setString    str   JDBC assertSingleValueResultSet ps executeQuery    str       ',0
'assert failure in test testRAFReadWriteMultipleThreads  interrupted flag cleared    This is another instance of an interrupted thread losing its interrupted flag after calling Derby  but I believe this is distinct from other we have seen    testRAFReadWriteMultipleThreads org apache derbyTesting functionTests tests store InterruptResilienceTest java sql SQLException  The exception  junit framework AssertionFailedError  WorkerThread    was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests store InterruptResilienceTest testRAFReadWriteMultipleThreads InterruptResilienceTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Java exception   WorkerThread    junit framework AssertionFailedError   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  junit framework AssertionFailedError  WorkerThread   at org apache derbyTesting junit BaseTestCase fail BaseTestCase java      at org apache derbyTesting functionTests tests store InterruptResilienceTest tstRAFReadWriteMultipleThreads InterruptResilienceTest java      at org apache derby exe ac   a  b x    x  edxad  x      ebfce   g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute CallStatementResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moreCaused by  junit framework AssertionFailedError at org apache derbyTesting functionTests tests store InterruptResilienceTest WorkerThread run InterruptResilienceTest java        ',0
'Warnings regarding XPath displayed when generating JavaDoc    When generating JavaDocs for Derby  the following warnings are displayed       javadoc      Constructing Javadoc information         javadoc       home kw       derby commits      java engine org apache derby iapi types SqlXmlUtil java     package org w c dom xpath does not exist      javadoc      import org w c dom xpath XPathEvaluator       javadoc             javadoc       home kw       derby commits      java engine org apache derby iapi types SqlXmlUtil java     package org w c dom xpath does not exist      javadoc      import org w c dom xpath XPathExpression       javadoc             javadoc       home kw       derby commits      java engine org apache derby iapi types SqlXmlUtil java     package org w c dom xpath does not exist      javadoc      import org w c dom xpath XPathResult       javadoc             javadoc       home kw       derby commits      java engine org apache derby iapi types SqlXmlUtil java      cannot find symbol      javadoc      symbol   class XPathExpression      javadoc      location  class org apache derby iapi types SqlXmlUtil      javadoc      private XPathExpression query    ',0
'A table created with          with constraints cannot be dropped with      due to NullPointerException with insane build or ASSERT FAILED Failed to find sharable conglomerate descriptor for index conglomerate  with sane build    In          there was some bug that caused a duplicate entry in sys sysconglomerates After running the attached repro create sql with           you will see two rows returned instead of one with select c constraintname  c constraintid  cong conglomerateid  cong conglomeratename from sys sysconglomerates cong  sys syskeys k  sys sysconstraints c where c constraintname    PK RS  and c constraintid  k constraintid and k conglomerateid   cong conglomerateid  I am not sure what practical impact this has with      as you can still drop the table s rs with that version On connecting to the database with       either soft or hard upgrade with                   DROP TABLE S RS fails with Caused by  java sql SQLException  Java exception   ASSERT FAILED Failed to findsharable conglomerate descriptor for index conglomerate        org apache derby shared common sanity AssertFailure   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  org apache derby shared common sanity AssertFailure  ASSERT FAILED Failed to find sharable conglomerate descriptor for index conglomerate       at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby shared common sanity SanityManager THROWASSERT SanityManager java      at org apache derby iapi sql dictionary ConglomerateDescriptor describeSharedConglomerate ConglomerateDescriptor java      at org apache derby iapi sql dictionary ConglomerateDescriptor drop ConglomerateDescriptor java      at org apache derby iapi sql dictionary ConstraintDescriptor drop ConstraintDescriptor java      at org apache derby impl sql execute DDLSingleTableConstantAction dropConstraint DDLSingleTableConstantAction java      at org apache derby impl sql execute DDLSingleTableConstantAction dropConstraint DDLSingleTableConstantAction java      at org apache derby impl sql execute DropTableConstantAction dropAllConstraintDescriptors DropTableConstantAction java      at org apache derby impl sql execute DropTableConstantAction executeConstantAction DropTableConstantAction java      at org apache derby impl sql execute MiscResultSet open MiscResultSet java     at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              moreand with an insane build with a NullPointerException java lang NullPointerException  at  org apache derby iapi sql dictionary ConglomerateDescriptor drop Unknown  Source   at  org apache derby iapi sql dictionary ConstraintDescriptor drop Unknown  Source   at  org apache derby impl sql execute DDLSingleTableConstantAction dropConst  raint Unknown Source   at  org apache derby impl sql execute DDLSingleTableConstantAction dropConst  raint Unknown Source   at  org apache derby impl sql execute DropTableConstantAction dropAllConstra  intDescriptors Unknown Source   at  org apache derby impl sql execute DropTableConstantAction executeConstan  tAction Unknown Source   at org apache derby impl sql execute MiscResultSet open Unknown  Source   at  org apache derby impl sql GenericPreparedStatement executeStmt Unknown  Source   at org apache derby impl sql GenericPreparedStatement execute Unknown  Source   at org apache derby impl jdbc EmbedStatement executeStatement Unknown  Source   at org apache derby impl jdbc EmbedStatement execute Unknown Source   at org apache derby impl jdbc EmbedStatement executeUpdate Unknown  Source  Still need to figure out the exact versions affected  when the dup row was fixed  and when the drop stopped working To reproduce connect to a database with           can be accessed at http   svn apache org repos asf db derby jars          run the attached script repro create sql connect with the latest on the trunk or      branchDROP TABLE S RS The table will not drop  The work around is to drop the table with the old version            ',0
'Engine code references org apache derby shared common sanity SanityManager    Derby engine code is importing org apache derby shared common sanity SanityManager  causing sealing violations  See DERBY      why this fix is inadequate Even though this won t fix the all problems  using shared common sanity SanityManager on the client and iapi services sanity SanityManager in the engine code is a simple rule to follow  Violations are also easily addressed    ',0
'Intermittent OutOfMemoryErrors in BasicSetup testTriggersWithLOBcolumns      Seen many times in the JDK   tests lately  and also in the Tinderbox  First occurrence was here  http   dbtg foundry sun com derby test Daily jvm    testing testlog sol           suitesAll diff txt There had been no commits in the last two days before this test run  so it s difficult to say if a recent change caused it  The test case has a comment that says that it should never read the LOB into memory  but according to the stack trace  that s exactly what s happening Caused by  java lang OutOfMemoryError  Java heap space at org apache derby iapi types SQLBinary readFromStream Unknown Source  at org apache derby iapi types SQLBinary readExternal Unknown Source  at org apache derby iapi types SQLBinary getValue Unknown Source  at org apache derby iapi types SQLBinary loadStream Unknown Source  at org apache derby impl sql execute UpdateResultSet objectifyStream Unknown Source  at org apache derby impl sql execute UpdateResultSet collectAffectedRows Unknown Source  at org apache derby impl sql execute UpdateResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests upgradeTests BasicSetup testTriggersWithLOBcolumns BasicSetup java        ',0
'Large batch of DDL in a database procedure dies on a transaction severity error     The batch of DDL run by the procedure which registers database metadata functions now dies with the following error ERROR   XC   Dead statement  This may be caused by catching a transaction severity error inside this statement A process of binary search shows that this problem was introduced by revision         as part of the work on DERBY      The bug can be reproduced by compiling the DBMDWrapper class attached to DERBY      and then running the following script connect  jdbc derby memory db create true   create procedure registerPublicStaticMethods  in connectionURL varchar         in printSQL boolean  language java parameter style java modifies sql dataexternal name  DBMDWrapper registerPublicStaticMethods  call registerPublicStaticMethods   jdbc default connection   false   If you change the second argument to registerPublicStaticMethods to true  then you will see all of the DDL being issued by the database procedure  The procedure runs fine in      but fails with this error in         ',0
'Unable to boot          database   fails during soft hard upgrade process for a new version number while trying to drop jdbc metadata    I have been unable to get Derby          and          to boot the attached          database  Derby          is however able to use the DB I m not sure if this is a backwards compatibility bug or the result of corruption to the database  Running SYSCS CHECK TABLE and SYSCS COMPRESS TABLE under          found no problems with the database NOTE  I have had to remove all data and non essential tables columns triggers etc prior to attaching this database Output when connecting to the DB using ij ERROR XJ     Failed to start database  C  Users BMASON Sandbox InternalDB  with class loader sun misc Launcher AppClassLoader   b  e   see the next exception for details ERROR XSDA   Restore of a serializable or SQLData object of class   attempted to read more data than was originally storedFull exception from our application java sql SQLException  Failed to start database  C  Users BMASON Sandbox InternalDB  with class loader sun misc Launcher AppClassLoader   dee   see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc EmbedConnection bootDatabase Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedConnection    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedConnection    lt init gt  Unknown Source  at org apache derby jdbc Driver   getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc EmbeddedDataSource getConnection Unknown Source  at org apache derby jdbc EmbeddedDataSource getConnection Unknown Source  at com ADInstruments LTS util DerbyUtils exists DerbyUtils java     at com ADInstruments LTS InternalDB InternalDbUtilities cacheInternalDbVersion InternalDbUtilities java      at com ADInstruments LTCS InternalDB InternalDbStartup initialiseDatabase InternalDbStartup java     at com ADInstruments LTCS StartupTasks StartupRunnable initDatabases StartupTasks java     at com ADInstruments LTCS StartupTasks StartupRunnable run StartupTasks java     at java lang Thread run Thread java     Caused by  java sql SQLException  Failed to start database  C  Users BMASON Sandbox InternalDB  with class loader sun misc Launcher AppClassLoader   dee   see the next exception for details  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java sql SQLException  Restore of a serializable or SQLData object of class   attempted to read more data than was originally stored at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util generateCsSQLException Unknown Source         moreCaused by  ERROR XSDA   Restore of a serializable or SQLData object of class   attempted to read more data than was originally stored at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl store raw data StoredPage readRecordFromArray Unknown Source  at org apache derby impl store raw data StoredPage restoreRecordFromSlot Unknown Source  at org apache derby impl store raw data BasePage fetchFromSlot Unknown Source  at org apache derby impl store access conglomerate GenericScanController fetchRows Unknown Source  at org apache derby impl store access heap HeapScan fetchNext Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl getDescriptorViaHeap Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl getAllSPSDescriptors Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl dropJDBCMetadataSPSes Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl updateMetadataSPSes Unknown Source  at org apache derby impl sql catalog DD Version handleMinorRevisionChange Unknown Source  at org apache derby impl sql catalog DD Version upgradeIfNeeded Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl loadDictionaryTables Unknown Source  at org apache derby impl sql catalog DataDictionaryImpl boot Unknown Source  at org apache derby impl services monitor BaseMonitor boot Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor startModule Unknown Source  at org apache derby iapi services monitor Monitor bootServiceModule Unknown Source  at org apache derby impl db BasicDatabase boot Unknown Source  at org apache derby impl services monitor BaseMonitor boot Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor bootService Unknown Source  at org apache derby impl services monitor BaseMonitor startProviderService Unknown Source  at org apache derby impl services monitor BaseMonitor findProviderAndStartService Unknown Source  at org apache derby impl services monitor BaseMonitor startPersistentService Unknown Source  at org apache derby iapi services monitor Monitor startPersistentService Unknown Source         moreCaused by  java io EOFException at java io DataInputStream readInt DataInputStream java      at org apache derby iapi sql dictionary TriggerDescriptor readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby iapi services io ArrayUtil readArrayItems Unknown Source  at org apache derby impl sql execute TriggerInfo readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby impl sql execute WriteCursorConstantAction readExternal Unknown Source  at org apache derby impl sql execute UpdateConstantAction readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby impl sql GenericStorablePreparedStatement readExternal Unknown Source  at org apache derby iapi services io FormatIdInputStream readObject Unknown Source  at org apache derby iapi types UserType readExternal Unknown Source         more   ',0
'test failure  NullPointerException with J ME  weme      in testDerby     TransactionTimeoutSpecifiedNotExceeded org apache derbyTesting functionTests tests memory XAMemTest     See  http   people apache org  myrnavl derby test results main windows testlog weme            suites All diff txt until cleaned up  This test started failing after the following three changes were committed                                                            r          kahatlen                              Thu     Jun           linesDERBY       Remove usages of DriverManager to obtain an Embedded Connection in Derby ServerRemove import of DriverManager now that it s not used                                                                         r          kahatlen                              Thu     Jun           linesDERBY       getColumns   doesn t work with auto generated identitycolumns that start with large numbersRemoved hard coded maximum length for the start value and increment inthe meta data query                                                                         r          kristwaa                              Thu     Jun            linesDERBY       OOM issue using XA with timeouts Reduce the memory footprint when executing successful XA transactions thathave a timeout set by nulling out the reference to the XATransactionStateobject in the timer task  The timer task will stay around in the timer queueuntil reaching the scheduled time   even if the task is canceled Added a regression test  run as part of  ant junit lowmem   Patch file  derby       a reduce memory footprint diff                                                           The stack trace is like so                                                 testDerby     TransactionTimeoutSpecifiedNotExceeded org apache derbyTesting functionTests tests memory XAMemTest junit framework AssertionFailedError  java lang NullPointerException at org apache derbyTesting junit JDBCDataSource getDataSourceObject JDBCDataSource java      at org apache derbyTesting junit J EEDataSource getXADataSource J EEDataSource java     at org apache derbyTesting junit J EEDataSource getXADataSource J EEDataSource java     at org apache derbyTesting functionTests tests memory XAMemTest testDerby     TransactionTimeoutSpecifiedNotExceeded XAMemTest java     at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Likely this test just needs to not run if  JDBC vmSupportsJSR          ',0
'SQLAuthorisation and views    Hi in some cases there seem to be issues with SQLAuthorisation in conjunction with database VIEWS Please see attached files as repro  script txt has only the SQL I executed  output is the output resulting when running the script   I would think identical results should be returned in all cases and independent on how the view has been defined  but this to my surprise not being the case    Trying to select from view appl  VW MyTasks    which is a simple view defined on just one table   leads to expected results  i e   my  tasks are being returned    Trying to select from view appl  VW MyPriorityTasks   which is a view defined on two joined tables without using an inner join clause   leads to expected results  i e   my  priority tasks are being returned    Trying to select from view appl  VW  MyPriorityTasks   which is the same view but now the two tables joined using an inner join clause   leads to an error and no tasks returned  when the same results as in    above were expected     Trying to select from view appl  VW  MyPriorityTasks    which is a view defined using a subselect   also unexpectedly leads to an error Note  While I could rewrite each inner join clause with changing the syntax like in    above  this provides a simple work around for such cases  May be there is a work around for subselects also  not sure if every subselect could be rewritten to a join    However when depending on using EXISTS constructs in the query there unfortunately is no way  I would know of  to get around this problem  Unfortuanetly a view that makes use of EXISTS is also one I would need to define in my data base   Thanks   ',1
'Assert failure with CASE expression in GROUP BY clause    I see the following assert failure with debug jars on          and later  doesn t fail on          and earlier  ij gt  create table t x int    rows inserted updated deletedij gt  insert into t values     row inserted updated deletedij gt  select case when a   then   else   end from t t  a  join t t  b  on a b group by case when a   then   else   end ERROR XJ     Java exception   ASSERT FAILED retVN expected to be instanceof ColumnReference  not org apache derby impl sql compile ConditionalNode  org apache derby shared common sanity AssertFailure     ',0
'Incorrect use of CharsetEncoder in DDMWriter    DDMWriter has two calls to CharsetEncoder encode    in writeLDString   and writeString    According to the javadoc for CharsetEncoder  one should call reset   before one calls encode    and flush   after on  DDMWriter doesn t call reset   or flush    I m not aware of any problems that happen because of it  but we should follow the spec to avoid surprises    ',0
'Repeated database creation causes OutOfMemoryError    Repeatedly creating  querying  updating  and shutting down a database or databases eventually causes OutOfMemoryError Java source reproducing the problem is attached    ',0
'Starting           weme     upgrade tests started failing with     failures     errors with java lang IllegalAccessException    Starting on           weme     upgrade tests started failing with many failures and errors The first Error is a java lang IllegalAccessException with stack trace below  It is probably related to this checkin r          kahatlen                              Wed     Jul           linesDERBY       Unload old JDBC drivers when done with them in the upgrade testsAt first glance it looks like a JVM issue as the native method shoudln t get an IllegalAccessException Probably best to work around it short term and disable the fix for weme  I think it just impacts the tests and not the product Time            There were     errors             Upgrade Phase  CREATE java lang IllegalAccessException at java lang reflect Field setImpl Native Method  at java lang reflect Field set Field java      at org apache derbyTesting functionTests tests upgradeTests PhaseChanger clearField PhaseChanger java      at org apache derbyTesting functionTests tests upgradeTests PhaseChanger clearDerby  ThreadLocals PhaseChanger java      at org apache derbyTesting functionTests tests upgradeTests PhaseChanger tearDown PhaseChanger java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testUnimplementedSQLObjectAttributes org apache derbyTesting functionTests tests jdbcapi DatabaseMetaDataTest SQL Exception  Feature not implemented  no details  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util notImplemented Unknown Source  at org apache derby impl jdbc EmbedDatabaseMetaData getAttributes Unknown Source  at org apache derbyTesting functionTests tests jdbcapi DatabaseMetaDataTest testUnimplementedSQLObjectAttributes DatabaseMetaDataTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'URLCheck fails on phoneME    I see this failure on phoneME org apache derbyTesting functionTests tests tools ToolScripts URLCheck  from org apache derbyTesting functionTests suites All junit framework ComparisonFailure  Output at line    expected  lt      ij CONNECTION   gt     Find an unknown attribute       gt  but was  lt      JAVA ERROR  java lang NoClassDefFoundError  java sql Driver      gt  at org apache derbyTesting functionTests util CanonTestCase compareCanon Unknown Source  at org apache derbyTesting functionTests util ScriptTestCase runTest Unknown Source  at org apache derbyTesting junit BaseTestCase runBare Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at org apache derbyTesting junit BaseTestSetup run Unknown Source  at sun misc CVM runMain Unknown Source The original test was excluded on Foundation because it required java sql Driver    ',0
'ij Test fails on phoneME    org apache derbyTesting functionTests tests tools ij Test ij   from org apache derbyTesting functionTests suites All junit framework ComparisonFailure  Output at line   expected  lt ij      CONNECTION        gt     gt  but was  lt ij   gt     gt  at org apache derbyTesting functionTests util CanonTestCase compareCanon Unknown Source  at org apache derbyTesting functionTests util ScriptTestCase runTest Unknown Source  at org apache derbyTesting junit BaseTestCase runBare Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at org apache derbyTesting junit BaseTestSetup run Unknown Source  at sun misc CVM runMain Unknown Source    ',0
'AssertionFailedError in testCaseCS    B NonUniqueIndex in AccessTest    There was   failure    testCaseCS    B NonUniqueIndex org apache derbyTesting functionTests tests store AccessTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests store AccessTest assertStatsOK AccessTest java      at org apache derbyTesting functionTests tests store AccessTest doTestCaseCS    B AccessTest java       at org apache derbyTesting functionTests tests store AccessTest testCaseCS    B NonUniqueIndex AccessTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Cf  http   dbtg foundry sun com derby test Daily jvm    testing Limited testSummary         html   ',0
'NPE in BasicDatabase stop in replication slave mode  dd clearSequenceCaches     To reproduce  set up a replication pair and then stop the master  I used  stopMaster true   From derby log on the slave Replication slave role was stopped for database  replicDB  java lang NullPointerException at org apache derby impl db BasicDatabase stop Unknown Source  at org apache derby impl db SlaveDatabase stop SlaveDatabase java      at org apache derby impl services monitor TopService stop TopService java      at org apache derby impl services monitor TopService shutdown TopService java      at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java      at org apache derby impl db DatabaseContextImpl cleanupOnError DatabaseContextImpl java     at org apache derby iapi services context ContextManager cleanupOnError ContextManager java      at org apache derby impl jdbc TransactionResourceImpl cleanupOnError TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc EmbedConnection internalStopReplicationSlave EmbedConnection java       at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at org apache derby impl db SlaveDatabase handleShutdown SlaveDatabase java      at org apache derby impl db SlaveDatabase access     SlaveDatabase java     at org apache derby impl db SlaveDatabase SlaveDatabaseBootThread run SlaveDatabase java      at java lang Thread run Thread java     The reason is that there is no data dictionary available when the database is in replication slave mode Note that the exception is caught and simply printed to derby log    ',0
'By default  only the DBO should be allowed to run several of the diagnostic VTIs     Only the DBO should be allowed to run the following VTIs  syscs diag statement cache syscs diag transaction table syscs diag error log reader    syscs diag statement duration     ',1
'Intermittent failures in CompressTableTest and TruncateTableTest    The test cases CompressTableTest testConcurrentInvalidation   and TruncateTableTest testConcurrentInvalidation   fail intermittently with errors such as ERROR XSAI   The conglomerate         requested does not exist The problem has been analyzed in the comments on DERBY       and a patch attached to that issue  invalidation during compilation diff  fixes the underlying race condition  However  that patch only works correctly together with the fix for DERBY       which was backed out because it caused the regression DERBY      We will therefore need to find a way to fix DERBY      without reintroducing DERBY      in order to resolve this issue    ',0
'MemoryLeakFixesTest testRepeatedDatabaseCreationWithAutoStats   fails on phoneME  java lang InternalError  Number of class names exceeds vm limit     Seen when running MemoryLeakFixesTest  both with trunk and with the          release candidate    testRepeatedDatabaseCreationWithAutoStats org apache derbyTesting functionTests tests memory MemoryLeakFixesTest java lang InternalError  Number of class names exceeds vm limit  at java lang ClassLoader findLoadedClass  Native Method  at java lang ClassLoader findLoadedClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at sun misc Launcher AppClassLoader loadClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java util ResourceBundle loadBundle Unknown Source  at java util ResourceBundle findBundle Unknown Source  at java util ResourceBundle getBundleImpl Unknown Source  at java util ResourceBundle getBundle Unknown Source  at org apache derby iapi services i  n MessageService getBundleWithEnDefault Unknown Source  at org apache derby iapi services i  n MessageService getBundleForLocale Unknown Source  at org apache derby impl services monitor BaseMonitor getBundle Unknown Source  at org apache derby iapi services i  n MessageService getBundle Unknown Source  at org apache derby iapi services i  n MessageService getCompleteMessage Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc EmbedConnection  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedConnection    lt init gt  Unknown Source  at org apache derby jdbc Driver    getNewEmbedConnection Unknown Source  at org apache derby jdbc InternalDriver connect Unknown Source  at org apache derby jdbc EmbeddedSimpleDataSource getConnection Unknown Source  at org apache derby jdbc EmbeddedSimpleDataSource getConnection Unknown Source  at org apache derbyTesting functionTests tests memory MemoryLeakFixesTest testRepeatedDatabaseCreationWithAutoStats Unknown Source  at org apache derbyTesting junit BaseTestCase runBare Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at org apache derbyTesting junit BaseTestSetup run Unknown Source  at sun misc CVM runMain Unknown Source    ',0
'SysDiagVTIMappingTest test        failed  java text ParseException  Unparseable date   Thu Sep             CEST          Seen when testing the          release candidate on Windows   http   dbtg foundry sun com derby test          RC logs jvm    win  suitesAll report txtThere were   errors    test      org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest java text ParseException  Unparseable date   Thu Sep             CEST       at java text DateFormat parse DateFormat java      at org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest vetTimestamp SysDiagVTIMappingTest java      at org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest test      SysDiagVTIMappingTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       test      org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest java text ParseException  Unparseable date   Thu Sep             CEST       at java text DateFormat parse DateFormat java      at org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest vetTimestamp SysDiagVTIMappingTest java      at org apache derbyTesting functionTests tests lang SysDiagVTIMappingTest test      SysDiagVTIMappingTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'On z OS testConnectWrongSubprotocolWithSystemProperty org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest junit framework Asserti ailedError    With the release candidate                      I saw the following two failures on z OS in testConnectWrongSubprotoctestolWithoutSystemPropertyThere were   failures    testConnectWrongSubprotocolWithSystemProperty org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest checkConnectWrongSubprotocol ConnectWrongSubprotocolTest java     at org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest testConnectWrongSubprotocolWithSystemProperty ConnectWrongSubprotocolTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testConnectWrongSubprotoctestolWithoutSystemProperty org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest checkConnectWrongSubprotocol ConnectWrongSubprotocolTest java     at org apache derbyTesting functionTests tests tools ConnectWrongSubprotocolTest testConnectWrongSubprotoctestolWithoutSystemProperty ConnectWrongSubprotocolTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    FAILURES   Tests run         Failures     Errors   The test is newly converted with DERBY      so not likely a regression  but probably more likely an encoding issue related to this test  String ijResult   runIjScript ijScript  useSystemProperties    assertTrue ijResult indexOf           gt         ',0
'Unauthorized shutdown should not generate thread dump and javacore  AuthenticationTest dumps over    javacores with IBM JVM for normal user errors    If jdbcapi AuthenticationTest is run without changing the derby stream error extendedDiagSeverityLevel as is done in the test  it generates thread dumps and javacores for IBM jvms  I beleive the errors in this test are expected user errors and not crashes so they should not generate a thread dump or javacore  To reproduce remove this line from test    Derby      set the property to avoid thread dump and diagnostic info sysprops put  derby stream error extendedDiagSeverityLevel           Until fixed  users can work around the issue by setting derby stream error extendedDiagSeverityLevel to       as is done in the test    ',1
'Empty MAPS table in toursdb    The toursdb that s bundled with          and           and the          release candidate  has no rows in the MAPS table  Version          had three rows in that table ij gt  select   from maps MAP ID  MAP NAME  REGION  AREA  PHOTO FORMAT  PICTURE                                                                                                                                                                                                                                          North Ocean  Cup Island             gif                  fe  f                                                     c c c ff      ff  ffff      ffff  ff  ffffffffff      amp    Middle Ocean  Small Island             gif                   e  f                                                     c c c ff      ff  ffff      ffff  ff  ffffffffff      amp    South Ocean  Witch Island             gif              f   f   f                                                     c c c ff      ff  ffff      ffff  ff  ffffffffff      amp   rows selectedBuilding it on a clean trunk and looking at generated toursdb toursdb out gives the following hint FAIL         unexpected exception  java sql SQLException  Database  toursDB  not found java sql SQLException  Database  toursDB  not found  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc EmbedConnection newSQLException EmbedConnection java       at org apache derby impl jdbc EmbedConnection handleDBNotFound EmbedConnection java      at org apache derby impl jdbc EmbedConnection  lt init gt  EmbedConnection java      at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby impl jdbc EmbedConnection    lt init gt  EmbedConnection   java     at org apache derby jdbc Driver   getNewEmbedConnection Driver   java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at toursdb insertMaps main insertMaps java    Caused by  java sql SQLException  Database  toursDB  not found  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreI suspect this was introduced by the changes in DERBY      when the destination directory for toursdb was changed    ',0
'SpawnedProcess complete may fail to destroy the process when a timeout is specified    The logic in SpawnedProcess has a weakness that may result in the wrapped process not being destroyed if the destroy variable is false and a timeout is specified The problem is that the while condition will shortcut the if condition in the catch clause  where destroy is set to true if the timeout is exceeded     ',0
'ERROR       deadlock in nstest on select max serialkey     nstest with         both          RC   revision          and builds off the       tree at          level after backing out re DERBY       show deadlock errors like the following Caused by  ERROR        A lock could not be obtained due to a deadlock  cycle of at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedResultSet closeOnTransactionError Unknown Source  at org apache derby impl jdbc EmbedResultSet movePosition Unknown Source  at org apache derby impl jdbc EmbedResultSet next Unknown Source  at org apache derbyTesting system nstest utils DbUtil pick one DbUtil java      at org apache derbyTesting system nstest utils DbUtil delete one row DbUtil java      at org apache derbyTesting system nstest tester TesterObject doIUDOperation TesterObject java      at org apache derbyTesting system nstest tester Tester  startTesting Tester  java      at org apache derbyTesting system nstest NsTest run NsTest java     Caused by  java sql SQLException  A lock could not be obtained due to a deadlock  cycle of locks and waiters is Lock   ROW  NSTESTTAB           Waiting XID            S    NSTEST  select max serialkey  from nstesttab where serialkey  gt    Granted XID            X Lock   ROW  NSTESTTAB           Waiting XID            S    NSTEST  select max serialkey  from nstesttab where serialkey  gt    Granted XID            X   The selected victim is XID           at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreFor more examples  see comments on DERBY         ',0
'Problems running SecureServerTest and replication tests on Open JDK   for Mac OS X    I see the following errors when I run the JUnit tests on Open JDK   for Mac OS X sanity is sane  START SPAWNED sysinfo STANDARD OUTPUT  exit code  Tue Oct             PDT        Error getting SysInfo information END SPAWNED  sysinfo STANDARD OUTPUT FSTART SPAWNED SpawnedNetworkServer STANDARD OUTPUT  exit code    Tue Oct             PDT        Security manager installed using the Basic server security policy Tue Oct             PDT        Warning  UnknkownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not known Tue Oct             PDT        Apache Derby Network Server                        started and ready to accept connections on port     Tue Oct             PDT        host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands Tue Oct             PDT        host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands END SPAWNED  SpawnedNetworkServer STANDARD OUTPUT E START SPAWNED sysinfo STANDARD OUTPUT  exit code  Tue Oct             PDT        Error getting SysInfo information END SPAWNED  sysinfo STANDARD OUTPUT FSTART SPAWNED SpawnedNetworkServer STANDARD OUTPUT  exit code    Tue Oct             PDT        Security manager installed using the Basic server security policy Tue Oct             PDT        Warning  UnknkownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not known Tue Oct             PDT        Apache Derby Network Server                        started and ready to accept connections on port     Tue Oct             PDT        host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands Tue Oct             PDT        host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands END SPAWNED  SpawnedNetworkServer STANDARD START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F     START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F                      START SPAWNED SpawnedNetworkServer ERROR OUTPUT Error  Exception thrown by the agent   java net MalformedURLException  Local host name unknown  java net UnknownHostException  richard hillegas computer local  richard hillegas computer local  nodename nor servname provided  or not knownEND SPAWNED  SpawnedNetworkServer ERROR OUTPUT F E E E F E E E E E E E E E E E E E E ETime           There were    errors    SecureServerTest  Opened   false  Authenticated  true  CustomDerbyProperties  null  WildCardHost           java lang Exception  DRDA NeedLocalHost S host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessageWork Unknown Source  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessage Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl shutdown Unknown Source  at org apache derby drda NetworkServerControl shutdown Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup tearDown NetworkServerTestSetup java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       SecureServerTest  Opened   false  Authenticated  true  CustomDerbyProperties  null  WildCardHost              java lang Exception  DRDA NeedLocalHost S host  localhost is not local to the server running on          so cannot be used for NetworkServerControl commands  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessageWork Unknown Source  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessage Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl shutdown Unknown Source  at org apache derby drda NetworkServerControl shutdown Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup tearDown NetworkServerTestSetup java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testReplication Local LogFilesSynched org apache derbyTesting functionTests tests replicationTests ReplicationRun Local java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local testReplication Local LogFilesSynched ReplicationRun Local java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local   InsertUpdateDeleteOnMaster org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local   testReplication Local   InsertUpdateDeleteOnMaster ReplicationRun Local   java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local   Indexing org apache derbyTesting functionTests tests replicationTests ReplicationRun Local  Indexing java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun makeReadyForReplication ReplicationRun java       at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local  Indexing testReplication Local   Indexing ReplicationRun Local  Indexing java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local StateTest part    org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    testReplication Local StateTest part    ReplicationRun Local StateTest part    java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local StateTest part    org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    testReplication Local StateTest part    ReplicationRun Local StateTest part    java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local StateTest part    org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part    testReplication Local StateTest part    ReplicationRun Local StateTest part    java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun runBare ReplicationRun java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client net NetStatementReply parsePrepareError Unknown Source  at org apache derby client net NetStatementReply parsePRPSQLSTTreply Unknown Source  at org apache derby client net NetStatementReply readPrepare Unknown Source  at org apache derby client net StatementReply readPrepare Unknown Source  at org apache derby client net NetStatement readPrepare  Unknown Source  at org apache derby client am Statement readPrepare Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeX Unknown Source         more   testReplication Local StateTest part  org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part  java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XSAI   SQLERRMC     XSAI  S at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement execute Unknown Source  at org apache derbyTesting functionTests tests replicationTests ReplicationRun bootMasterDatabase ReplicationRun java      at org apache derbyTesting functionTests tests replicationTests ReplicationRun Local StateTest part  testReplication Local StateTest part  ReplicationRun Local StateTest part  java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting functi',0
'Restrictive file permissions  permissions removed also for owner on NTFS if Acl does not contain explicit entry for owner    It turns out that the file owner does not necessarily get an explicit AclEntry  this depends on whether the created file has sufficient permissions already through  say  a permission for everybody to write  The present logic removes all AclEntries except those granted to the file s owner  erroneously presuming there would be such an entry always  This led to all AclEntries being removed  This error is seen in Oracle s nightly regressions for Windows  but did not reproduced when running manually on Windows  This was due to different default inherited permissions on the directories in which the regression tests were run    ',1
'Same value returned by successive calls to a sequence generator     The following script shows the same value being returned from a sequence generator by two successive NEXT VALUE FOR calls  Thanks to Knut for finding this connect  jdbc derby memory db create true  create table t  x int  create sequence s autocommit off select count from sys syssequences with rs values next value for s drop table t rollback         same value as previous callvalues next value for s    ',0
'ClosedByInterruptException in AuthenticationTest    AuthenticationTest failed with this error on trunk  intermittent error  passed when I reran suites All  java sql SQLException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  Failed to start database  singleUse oneuse c  with class loader sun misc Launcher AppClassLoader  ff ea   see the next exception for details   SQLSTATE  XJ   Java exception   ASSERT FAILED Unable to Acquire Exclusive Lock on  export home hudsond  hudson jobs Derby JUnit workspace test system singleUse oneuse c dbex lck  org apache derby shared common sanity AssertFailure    SQLSTATE  XJ   Java exception     java nio channels ClosedByInterruptException   at org apache derby client am SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby client am SqlException getSQLException SqlException java      at org apache derby jdbc ClientDriver connect ClientDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting junit DriverManagerConnector openConnection DriverManagerConnector java     at org apache derbyTesting junit DriverManagerConnector openConnection DriverManagerConnector java     at org apache derbyTesting junit TestConfiguration openDefaultConnection TestConfiguration java       at org apache derbyTesting junit BaseJDBCTestSetup getConnection BaseJDBCTestSetup java     at org apache derbyTesting junit DatabasePropertyTestSetup tearDown DatabasePropertyTestSetup java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  DERBY SQL error  SQLCODE      SQLSTATE  XJ     SQLERRMC  Failed to start database  singleUse oneuse c  with class loader sun misc Launcher AppClassLoader  ff ea   see the next exception for details   SQLSTATE  XJ   Java exception   ASSERT FAILED Unable to Acquire Exclusive Lock on  export home hudsond  hudson jobs Derby JUnit workspace test system singleUse oneuse c dbex lck  org apache derby shared common sanity AssertFailure    SQLSTATE  XJ   Java exception     java nio channels ClosedByInterruptException   at org apache derby client am Connection completeSqlca Connection java       at org apache derby client net NetConnectionReply parseRdbAccessFailed NetConnectionReply java      at org apache derby client net NetConnectionReply parseAccessRdbError NetConnectionReply java      at org apache derby client net NetConnectionReply parseACCRDBreply NetConnectionReply java      at org apache derby client net NetConnectionReply readAccessDatabase NetConnectionReply java      at org apache derby client net NetConnection readSecurityCheckAndAccessRdb NetConnection java      at org apache derby client net NetConnection flowSecurityCheckAndAccessRdb NetConnection java      at org apache derby client net NetConnection flowUSRIDPWDconnect NetConnection java      at org apache derby client net NetConnection flowConnect NetConnection java      at org apache derby client net NetConnection  lt init gt  NetConnection java      at org apache derby client net NetConnection    lt init gt  NetConnection   java     at org apache derby client net ClientJDBCObjectFactoryImpl   newNetConnection ClientJDBCObjectFactoryImpl   java      at org apache derby jdbc ClientDriver connect ClientDriver java     The server side log was not preserved because the failure happened inside a decorator    ',1
'SecureServerTest  Driver  UnbootedTest and replication tests not prepared for space in java home    SecureServerTest  Driver  UnbootedTest and the replication tests fork JVMs by calling Runtime exec   methods that take the command as a String parameter  not a String    This causes problems like the ones seen in DERBY      when there s a space in   java home  The tests should be rewritten to use the helper method BaseTestCase execJavaCmd    which handles this case correctly    ',0
'XATransactionTest  Table View  DERBY      already exists    Cf the test report on trunk http   dbtg foundry sun com derby test Daily jvm    testing Limited testSummary         htmlIt looks like the ordering between testForgetExceptionDerby    PROTO and testForgetExceptionDerby    NOTA is inversed in this run on Windows  and the test currently requires testForgetExceptionDerby    PROTO to be run ahead of testForgetExceptionDerby    NOTA  JDK   can will reorder the fixtures    ',0
'SQLChar getCollationKey NPE in index stat thread    With this JDBC connection url is   jdbc derby directory db name territory fr FR collation TERRITORY BASED PRIMARY create trueI get a NullPointerException in index stat threadSun Dec             CET      Thread     pool   thread     main       istat   PROXIFLEX   IDAXX RES   update scheduled  reason      no stats  row estimate           queueSize   Sun Dec             CET      Thread     index stat thread   main       istat trace           worker thread started  xid             q p s       err k u c       rej f d o           Sun Dec             CET      Thread     index stat thread   main       istat trace           processing  PROXIFLEX   IDAXX RES  Sun Dec             CET      Thread     index stat thread   main       istat  runtime exception during normal operationjava lang NullPointerException at org apache derby iapi types SQLChar getCollationKey Unknown Source  at org apache derby iapi types WorkHorseForCollatorDatatypes stringCompare Unknown Source  at org apache derby iapi types CollatorSQLVarchar stringCompare Unknown Source  at org apache derby iapi types SQLChar compare Unknown Source  at org apache derby impl services daemon IndexStatisticsDaemonImpl KeyComparator compareWithPrevKey Unknown Source  at org apache derby impl services daemon IndexStatisticsDaemonImpl updateIndexStatsMinion Unknown Source  at org apache derby impl services daemon IndexStatisticsDaemonImpl generateStatistics Unknown Source  at org apache derby impl services daemon IndexStatisticsDaemonImpl processingLoop Unknown Source  at org apache derby impl services daemon IndexStatisticsDaemonImpl run Unknown Source  at java lang Thread run Thread java     Sun Dec             CET      Thread     index stat thread   main       istat trace           worker thread exit      q p s       err k u c       rej f d o           If I remove territory and collation parameters I don t have the exception In case you want to disable automatic statistics  set derby property   derby storage indexStats auto to false    ',0
'NSSecurityMechanismTest fixture testNetworkServerSecurityMechanism fails intermittentlyt    There s an intermittent failure in NSSecurityMechanismTest fixture testNetworkServerSecurityMechanism  which I couldn t find was logged separately This is the stack trace    testNetworkServerSecurityMechanism org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest junit framework AssertionFailedError  Timed out waiting for network server to start at org apache derbyTesting junit NetworkServerTestSetup waitForServerStart NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest setSecurityMechanism NSSecurityMechanismTest java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest testNetworkServerSecurityMechanism NSSecurityMechanismTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    The test output printed out this in the console  net derbynet NSSecurityMechanismTest testNetworkServerSecurityMechanism java net SocketException  Connection reset at java net SocketInputStream read SocketInputStream java      at java net SocketInputStream read SocketInputStream java      at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source  at org apache derby impl drda NetworkServerControlImpl ping Unknown Source  at org apache derby drda NetworkServerControl ping Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java      at org apache derbyTesting junit NetworkServerTestSetup pingForServerStart NetworkServerTestSetup java      at org apache derbyTesting junit NetworkServerTestSetup waitForServerStart NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest setSecurityMechanism NSSecurityMechanismTest java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest testNetworkServerSecurityMechanism NSSecurityMechanismTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java     java net SocketException  Connection reset at java net SocketInputStream read SocketInputStream java      at java net SocketInputStream read SocketInputStream java      at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source  at org apache derby impl drda NetworkServerControlImpl ping Unknown Source  at org apache derby drda NetworkServerControl ping Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java      at org apache derbyTesting junit NetworkServerTestSetup pingForServerStart NetworkServerTestSetup java      at org apache derbyTesting junit NetworkServerTestSetup waitForServerStart NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest setSecurityMechanism NSSecurityMechanismTest java      at org apache derbyTesting functionTests tests derbynet NSSecurityMechanismTest testNetworkServerSecurityMechanism NSSecurityMechanismTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java     I ve looked through my nightly test records for earlier occurrences on trunk linux  this apparently has not happened on windows    and found the following occurrences             ibm   Slightly different stack traces were seen in other runs             ibm               ibm               ibm               ibm               ibm               ibm               ibm      ',1
'Derby threads hanging when using ClientXADataSource and a deadlock or lock timeout occurs    The issue arrives when multiple XA transactions are done in parallel and there is either a lock timeout or a lock deadlock detected  When this happens the connection is leaked in the Glassfish connection pool and the client thread hangs in  org apache derby client netReply fill Reply java        Shutting down the app server fails because the thread has a lock in  org apache derby client net NetConnection    and another task is calling  org apache derby client ClientPooledConnection close ClientPooledConnection java       which is waiting for the lock Killing the appsever using  kill  and then attempting to shutdown Derby network server causes the Network Server to hang  One of the threads hangs waiting for a lock at  org apache derby impl drda NeworkServerControlImpl removeFromSessionTable NetworkServerControlImpl java        and the  main  thread has this locked at  org apache derby impl drda NetworkServerControlImpl executeWork NetworkServerControlImpl java        and it itself is waiting for a lock which belongs to a thread that is stuck at  org apache derby impl services locks ActiveLock waitForGrant ActiveLock java      which is in the TIMED WAITING state Only by killing the Network Server using  kill  is possible at this point There are transactions left even though all clients have been removed    ',0
'NullPointerException in generated VTI code    With the latest          binary distribution  the following short script produces a NullPointerException java  Dij exceptionTrace true org apache derby tools ijij gt  connect  jdbc derby brydb create true  ij gt  create table t   a int  ij gt  SELECT T    systabs   syscgs conglomeratenumber FROM  SYS SYSTABLES systabs  sys sysconglomerates syscgs  TABLE  SYSCS DIAG SPACE TABLE systabs tablename   AS T  WHERE systabs tabletype    T  and systabs tableid   syscgs tableid The exception trace is pasted below ERROR        The exception  java lang NullPointerException  was thrown while evaluating an expression java sql SQLException  The exception  java lang NullPointerException  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source Caused by  java sql SQLException  The exception  java lang NullPointerException  was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source         moreCaused by  java lang NullPointerException at org apache derby exe acf  e    x    x    x    x              g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute VTIResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openRight Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         moreERROR XJ     Java exception     java lang NullPointerException  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory   getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source Caused by  java sql SQLException  Java exception     java lang NullPointerException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java lang NullPointerException at org apache derby exe acf  e    x    x    x    x              g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke Unknown Source  at org apache derby impl sql execute VTIResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openRight Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute JoinResultSet openCore Unknown Source  at org apache derby impl sql execute ProjectRestrictResultSet openCore Unknown Source  at org apache derby impl sql execute BasicNoPutResultSetImpl open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source         more   ',0
'AssertFailures     or    with ibm     and     on Windows XP in lang NativeAuthProcs fixture testAll    Since revision          on windows XP I see some failures in the nightly test like this    testAll org apache derbyTesting functionTests tests lang NativeAuthProcs junit framework AssertionFailedError at org apache derbyTesting functionTests tests lang NativeAuthProcs vetResetPassword NativeAuthProcs java      at org apache derbyTesting functionTests tests lang NativeAuthProcs resetPasswordTests NativeAuthProcs java      at org apache derbyTesting functionTests tests lang NativeAuthProcs testAll NativeAuthProcs java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    See for instance  http   people apache org  myrnavl derby test results main windows testlog ibm           suites All diff txtThere might be an intermittent issue here  one of the runs lists only   failures  But mostly there s   This does not occur on Linux with the same jvm versions The changes between this run and the previous one when these failures did not occur                  SUBVERSION LOG FROM         TO                                                                                 r          rhillegas                              Tue     Dec           lineDERBY      Add regression tests for GRANT REVOKE on new procedures supporting NATIVE authentication                                                                         r          rhillegas                              Tue     Dec           lineDERBY      Adjust RolesTest to account for new tuple in SYSROUTINEPERMS                                                                         r          rhillegas                              Tue     Dec           lineDERBY      Add syscs reset password   and syscs modify password   system procedures                 derby log in the failed directory only shows a start and shutdown    ',0
'Java deadlock between LogicalConnection   and ClientXAConnection    patch attached     There is a Java deadlock between LogicalConnection   and ClientXAConnection    The order of calls that cause the deadlock are Thread  LogicalConnection closeClientPooledConnection recycleConnectionThread  ClientPooledConnection closeLogicalConnection nullPhysicalConnectionThread   acquires a lock on the LogicalConnection and attempts to acquire a lock on the ClientPooledConnectionThread   acquires a lock on the ClientPooledConnection and attempts to acquire a lock on the LogicalConnectionIn production this occurs when one thread is committing a transaction and another thread is trying to close the connection  This occurred because the Glassfish connection pool is setup to close all connections on any error on any connection and an error has been detected on another connection in the pool    ',0
'Race conditions in LogicalConnection checking for a null physical connection    There are race conditions with checkForNullPhysicalConnection calls in LogicalConnection  checkForNullPhysicalConnection is not synchronized and it checks for the member  phsyicalConnection  which can be cleared by  nullPhsyicalConnection   which is synchronized  and  close   which is synchronized  and  closeWithoutRecyclingToPool   which is synchronized  This affects  nativeSQL    getAutoCommit    getTransactionIsolation    getWarnings    isReadOnly    getCatalog    getTypeMap    createStatement    prepareCall    prepareStatement    setHoldability    getHoldability    setSavePoint    rollBack    releaseSavePoint    getSchema    setSchema  All of these call  checkForNullPhysicalConnection  and then use the member  physicalConnection  after that call returns  Because these methods are not synchronized  between the time  checkForNullPhysicalConnectoin  returns and  physicalConnection  is used  the  physicalConnection  member could be set to null and then a NPE occurs Probably all of these methods should be changed to synchronized    ',0
'AlterTableTest testDropColumn fails  drop view cannot be performed due to dependency    Saw this when running suitesAll on             testDropColumn org apache derbyTesting functionTests tests lang AlterTableTest java sql SQLException  Operation  DROP VIEW  cannot be performed on object  ATDC VW  A    because VIEW  ATDC VW  A    is dependent on that object  at org apache derby client am SQLExceptionFactory   getSQLException Unknown Source  at org apache derby client am SqlException getSQLException Unknown Source  at org apache derby client am Statement executeUpdate Unknown Source  at org apache derbyTesting functionTests tests lang AlterTableTest testDropColumn AlterTableTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  org apache derby client am SqlException  Operation  DROP VIEW  cannot be performed on object  ATDC VW  A    because VIEW  ATDC VW  A    is dependent on that object  at org apache derby client am Statement completeSqlca Unknown Source  at org apache derby client am Statement completeExecuteImmediate Unknown Source  at org apache derby client net NetStatementReply parseEXCSQLIMMreply Unknown Source  at org apache derby client net NetStatementReply readExecuteImmediate Unknown Source  at org apache derby client net StatementReply readExecuteImmediate Unknown Source  at org apache derby client net NetStatement readExecuteImmediate  Unknown Source  at org apache derby client am Statement readExecuteImmediate Unknown Source  at org apache derby client am Statement flowExecute Unknown Source  at org apache derby client am Statement executeUpdateX Unknown Source         morePrior to this  though  I saw this on the console  but no error failure  Probably not related  I believe we have seen this before java lang Exception  DRDA InvalidReplyTooShort S Invalid reply from network server  Insufficient data  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessageWork Unknown Source  at org apache derby impl drda NetworkServerControlImpl consolePropertyMessage Unknown Source  at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source  at org apache derby impl drda NetworkServerControlImpl ping Unknown Source  at org apache derby drda NetworkServerControl ping Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest canPingServer ServerPropertiesTest java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest ttestSetPortPriority ServerPropertiesTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java        ',0
'AssertionFailedError  Should not hold locks after commit in ResultSetMiscTest    Saw this failure when running the          regression tests on Java  u  b      testBug     org apache derbyTesting functionTests tests jdbcapi ResultSetMiscTest junit framework AssertionFailedError  Should not hold locks after commit at org apache derbyTesting functionTests tests jdbcapi ResultSetMiscTest checkLocksForAutoCommitSelect ResultSetMiscTest java      at org apache derbyTesting functionTests tests jdbcapi ResultSetMiscTest testBug     ResultSetMiscTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'NativeAuthenticationServiceTest getting multiple errors trying to delete files directories during teardown    Multiple errors during teardown while trying to delete files directories of the test databases on vista against sun jdk   on vista  but passed against same jvm on sun nightly runs againstlinux and solaris As of time of this report the tests against other sun jvms had not finished  Errors were also seen in ibm nightly runs  I ll rerport those in following comments The following checkin that was included in the reported test failures changed the Native authentication tests  so seems likely to have caused the issues r          rhillegas                              Thu     Jan           lineFirst version of NATIVE authentication service  including first tranche of tests for it vista run had   errors http   dbtg foundry sun com derby test Daily jvm    testing testlog vista         suitesAll diff txt   testAll org apache derbyTesting functionTests tests lang NativeAuthenticationServiceTest junit framework AssertionFailedError  Failed to delete    files  root C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d   C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d db lck  isDir false  canRead true  canWrite true  size      C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d log log  dat  isDir false  canRead true  canWrite true  size           C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d log  isDir true  canRead true  canWrite true  size     C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c a  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c b  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size          C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c a  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c b  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c a  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c b  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  ca  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  cb  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  cc  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  cd  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  ce  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg  cf  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d seg   isDir true  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse d  isDir true  canRead true  canWrite true  size    at org apache derbyTesting junit BaseJDBCTestCase assertDirectoryDeleted BaseJDBCTestCase java       at org apache derbyTesting junit DropDatabaseSetup removeDir DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup access     DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup   run DropDatabaseSetup java      at java security AccessController doPrivileged Native Method  at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup removeDatabase DropDatabaseSetup java     at org apache derbyTesting junit TestConfiguration   tearDown TestConfiguration java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testAll org apache derbyTesting functionTests tests lang NativeAuthenticationServiceTest junit framework AssertionFailedError  Failed to delete    files  root C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e   C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e db lck  isDir false  canRead true  canWrite true  size      C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e log log  dat  isDir false  canRead true  canWrite true  size           C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e log  isDir true  canRead true  canWrite true  size     C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c a  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c b  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size          C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c a  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c b  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c a  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c b  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c c  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c d  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c e  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c f  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  c   dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  ca  dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  cb  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  cc  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  cd  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  ce  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg  cf  dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e seg   isDir true  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse e  isDir true  canRead true  canWrite true  size    at org apache derbyTesting junit BaseJDBCTestCase assertDirectoryDeleted BaseJDBCTestCase java       at org apache derbyTesting junit DropDatabaseSetup removeDir DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup access     DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup   run DropDatabaseSetup java      at java security AccessController doPrivileged Native Method  at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java      at org apache derbyTesting junit DropDatabaseSetup removeDirectory DropDatabaseSetup java     at org apache derbyTesting junit DropDatabaseSetup removeDatabase DropDatabaseSetup java     at org apache derbyTesting junit TestConfiguration   tearDown TestConfiguration java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testAll org apache derbyTesting functionTests tests lang NativeAuthenticationServiceTest junit framework AssertionFailedError  Failed to delete    files  root C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f   C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f db lck  isDir false  canRead true  canWrite true  size      C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f log log  dat  isDir false  canRead true  canWrite true  size           C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f log  isDir true  canRead true  canWrite true  size     C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c   dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size        C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c    dat  isDir false  canRead true  canWrite true  size         C  cludev jagtmp autoderbyN regression suitesAll   log system singleUse oneuse f seg  c a  dat  isDir false  canRead true  canWrite true  size         ',0
'Access denied  java lang RuntimePermission modifyThreadGroup  in IndexStatisticsDaemonImpl schedule      I user reported this exception with                      when running regression tests against      As soon as the Index Statistics Thread was initialized they got the stack trace below There was some discussion of this issue on the dev list http   old nabble com Report of security manager issue with      and ndexStatisticsDaemonImpl schedule to         htmlI assume the failure is in  runningThread   new Thread this   index stat thread   Stack Trace java security AccessControlException  Access denied java lang RuntimePermission modifyThreadGroup  atjava security AccessController checkPermission AccessController java      atjava lang SecurityManager checkPermission SecurityManager java      atcom ibm ws security core SecurityManager checkPermission SecurityManager java      atcom ibm ws security core SecurityManager checkAccess SecurityManager java      at java lang ThreadGroup checkAccess ThreadGroup java      at java lang Thread initialize Thread java      at java lang Thread  lt init gt  Thread java      at java lang Thread  lt init gt  Thread java      atorg apache derby impl services daemon IndexStatisticsDaemonImpl schedule UnknownSource  atorg apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare UnknownSource  atorg apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement UnknownSource  atorg apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  atorg apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  atorg apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  atorg apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  atorg apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  atorg apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  atorg apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at   ',1
'Select statement with subqueries with group by and count distinct statements returns wrong number of results    Steps to reproduce    Create database  connect to database with any JDBC client   create two tables CREATE TABLE TEST     profile id INTEGER NOT NULL  group ref INTEGER NOT NULL  matched count INTEGER NOT NULL    CREATE TABLE TEST     profile id INTEGER NOT NULL  group ref INTEGER NOT NULL  matched count INTEGER NOT NULL      Insert two records for each table insert into test   values              insert into test   values               insert into test   values              insert into test   values                  Run following statementSELECT  FROM  SELECT ps  group ref  COUNT DISTINCT ps  matched count  AS matched count FROM test   ps  GROUP BY ps  group ref  ps  profile id   a   SELECT ps  group ref  COUNT  DISTINCT ps  matched count  AS matched count FROM test   ps  GROUP BY ps  group ref  ps  profile id   bAs a result I ve got   records instead of     at least Oracle   greturns   records for this statement  Maybe i m doing something wrong Do you have any suggestions   possible workarounds for this problem   ',0
'ServerPropertiesTest prints  java net SocketException  Connection reset to console but test passes    ServerPropertiesTest showed the below output when running  The ping retries and the test passes  I am not sure if in fact a Connection reset is a valid response if the server is not fully up and the test is just being too verbose or if it is real problem that we get this Error                      java net SocketException  Connection reset at java net SocketInputStream read SocketInputStream java      at java net SocketInputStream read SocketInputStream java     at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source  at org apache derby impl drda NetworkServerControlImpl ping Unknown Source  at org apache derby drda NetworkServerControl ping Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest canPingServer ServerPropertiesTest java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest shutdownServer ServerPropertiesTest java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest ttestSetPortPriority ServerPropertiesTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java     java net SocketException  Connection reset at java net SocketInputStream read SocketInputStream java      at java net SocketInputStream read SocketInputStream java     at org apache derby impl drda NetworkServerControlImpl fillReplyBuffer Unknown Source  at org apache derby impl drda NetworkServerControlImpl readResult Unknown Source  at org apache derby impl drda NetworkServerControlImpl pingWithNoOpen Unknown Source  at org apache derby impl drda NetworkServerControlImpl ping Unknown Source  at org apache derby drda NetworkServerControl ping Unknown Source  at org apache derbyTesting junit NetworkServerTestSetup pingForServerUp NetworkServerTestSetup java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest canPingServer ServerPropertiesTest java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest shutdownServer ServerPropertiesTest java      at org apache derbyTesting functionTests tests derbynet ServerPropertiesTest ttestSetPortPriority ServerPropertiesTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java                            ',0
'NPE in Store  when running SELECT in a read only database accessed via the classpath subprotocol when authentication  authorization  and Java security are turned on    I get an NPE trying to select from a table on which I don t have select privilege  The database is stored in a jar file accessed via the classpath protocol  BUILTIN authentication and sql authorization are turned on in the database  Running under a Java security manager  I will attach a repro  Here is the NPE Failed Statement is  select   from KIWI tjava lang NullPointerException at org apache derby impl store raw data BaseDataFileFactory openContainer BaseDataFileFactory java      at org apache derby impl store raw data BaseDataFileFactory openContainer BaseDataFileFactory java      at org apache derby impl store raw xact Xact openContainer Xact java       at org apache derby impl store access btree OpenBTree init OpenBTree java      at org apache derby impl store access btree BTreeController init BTreeController java       at org apache derby impl store access btree index B IController init B IController java      at org apache derby impl store access btree index B I open B I java      at org apache derby impl store access RAMTransaction openConglomerate RAMTransaction java      at org apache derby impl store access RAMTransaction openConglomerate RAMTransaction java       at org apache derby impl sql catalog DataDictionaryImpl debugGenerateInfo DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getDescriptorViaIndexMinion DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getDescriptorViaIndex DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getColumnDescriptorsScan DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getColumnDescriptorsScan DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl finishTableDescriptor DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getTableDescriptorIndex Scan DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getUncachedTableDescriptor DataDictionaryImpl java       at org apache derby impl sql catalog NameTDCacheable setIdentity NameTDCacheable java      at org apache derby impl services cache ConcurrentCache find ConcurrentCache java      at org apache derby impl sql catalog DataDictionaryImpl getTableDescriptor DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl faultInTabInfo DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getNonCoreTI DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl getUncachedPermissionsDescriptor DataDictionaryImpl java        at org apache derby impl sql catalog DataDictionaryImpl getUncachedTablePermsDescriptor DataDictionaryImpl java        at org apache derby impl sql catalog PermissionsCacheable setIdentity PermissionsCacheable java     at org apache derby impl services cache ConcurrentCache find ConcurrentCache java      at org apache derby impl sql catalog DataDictionaryImpl getPermissions DataDictionaryImpl java        at org apache derby impl sql catalog DataDictionaryImpl getTablePermissions DataDictionaryImpl java        at org apache derby iapi sql dictionary StatementTablePermission oneAuthHasPermissionOnTable StatementTablePermission java      at org apache derby iapi sql dictionary StatementTablePermission hasPermissionOnTable StatementTablePermission java      at org apache derby iapi sql dictionary StatementColumnPermission check StatementColumnPermission java     at org apache derby impl sql conn GenericAuthorizer authorize GenericAuthorizer java      at org apache derby exe ac        x    x cc x    x              fillResultSet Unknown Source  at org apache derby exe ac        x    x cc x    x              execute Unknown Source  at org apache derby impl sql GenericActivationHolder execute GenericActivationHolder java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    Cleanup action completed   ',1
'System can run out of stack space while processing DropOnCommit requests     The system currently recursively calls xact notifyObservers   from DropOnCommit update    It does this because in some casesnew observers can be added while processing the list of notifyObservers and those were being missed before the change  causingAssertions in the tests and possibly files not properly dropped on commit Multiple users on the Derby user list have had failures running SYSCS UTIL SYSCS COMPRESS TABLE    running out of stack trackwith a heavily recursive stack trace of the form  see more detail from these reports in subsequent comments  Caused by  java lang StackOverflowErrorat java lang ThreadLocal get ThreadLocal java     at java lang StringCoding deref StringCoding java    at java lang StringCoding encode StringCoding java     at java lang String getBytes String java     at java io UnixFileSystem getBooleanAttributes  Native Method at java io UnixFileSystem getBooleanAttributes UnixFileSystem java     at java io File exists File java     at org apache derby impl store raw data StreamFileContainer run Unknown Source at java security AccessController doPrivileged Native Method at org apache derby impl store raw data StreamFileContainer privExists Unknown Source at org apache derby impl store raw data StreamFileContainer open Unknown Source at org apache derby impl store raw data BaseDataFileFactory openStreamContainer Unknown Source at org apache derby impl store raw xact Xact openStreamContainer Unknown Source at org apache derby impl store raw data BaseDataFileFactory dropStreamContainer Unknown Source at org apache derby impl store raw xact Xact dropStreamContainer Unknown Source at org apache derby impl store raw data DropOnCommit update Unknown Source at java util Observable notifyObservers Observable java     at org apache derby iapi store raw xact RawTransaction notifyObservers Unknown Source at org apache derby impl store raw data DropOnCommit update Unknown Source at java util Observable notifyObservers Observable java     at org apache derby iapi store raw xact RawTransaction notifyObservers Unknown Source at org apache derby impl store raw data DropOnCommit update Unknown Source at java util Observable notifyObservers Observable java     at org apache derby iapi store raw xact RawTransaction notifyObservers Unknown Source at org apache derby impl store raw data DropOnCommit update Unknown Source at java util Observable notifyObservers Observable java        ',0
'OutOfMemoryError in OCRecoveryTest on phoneME    http   dbtg foundry sun com derby test Daily javaME testing Limited testSummary         htmlThere was   failure    testOCRecovery org apache derbyTesting functionTests tests store OCRecoveryTest junit framework AssertionFailedError  expectedExitValue   does not match exitValue  expected output strings             OK    test  actual output  lt STDOUT gt  ETime       There was   error    launchOCRecovery   org apache derbyTesting functionTests tests store OCRecoveryTest  lt END STDOUT gt  lt STDERR gt java lang OutOfMemoryError   C at java io BufferedReader  lt init gt  Unknown Source  at java io BufferedReader  lt init gt  Unknown Source  at junit runner BaseTestRunner getFilteredTrace Unknown Source  at junit textui ResultPrinter printDefectTrace Unknown Source  at junit textui ResultPrinter printDefect Unknown Source  at junit textui ResultPrinter printDefects Unknown Source  at junit textui ResultPrinter printErrors Unknown Source  at junit textui ResultPrinter print Unknown Source  at sun misc CVM runMain Unknown Source  lt END STDERR gt  expected  lt   gt  but was  lt   gt  at org apache derbyTesting junit BaseTestCase assertExecJavaCmdAsExpected Unknown Source  at org apache derbyTesting junit BaseTestCase assertLaunchedJUnitTestMethod Unknown Source  at org apache derbyTesting functionTests tests store OCRecoveryTest testOCRecovery Unknown Source  at org apache derbyTesting junit BaseTestCase runBare Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at org apache derbyTesting junit BaseTestSetup run Unknown Source  at junit extensions TestDecorator basicRun Unknown Source  at junit extensions TestSetup   protect Unknown Source  at junit extensions TestSetup run Unknown Source  at sun misc CVM runMain Unknown Source    ',0
'NATIVE warns about password expiry for DBO    The DBO s password cannot expire  Still  NATIVE warns that the password is about to expire ij gt  connect  jdbc derby authdb create true user admin  ij gt  call syscs util syscs set database property  derby authentication native passwordLifetimeMillis            rows inserted updated deletedij gt  call syscs util syscs create user  ADMIN            rows inserted updated deletedij gt  call syscs util syscs set database property  derby authentication provider    NATIVE  LOCAL     rows inserted updated deletedij gt  connect  jdbc derby authdb shutdown true  ERROR        Database  authdb  shutdown ij gt  connect  jdbc derby authdb user admin password      WARNING   J    Your password will expire in   day s   Please use the SYSCS UTIL SYSCS MODIFY PASSWORD procedure to change your password    ',0
'Rolling back a transaction leads to an inconsistent state    Rolling back a transaction can leave a table in an inconsistent state if the table has been previously altered through the addition of new columns  It appears that if newly added columns have not been changed from their default value  then when a transaction which sets new values for these columns is rolled back the new columns are not restored to their previous values Attached is an ij script with fairly minimal steps to reproduce the problem on Derby          and           Win  x    Sun    bit JRE            Expected and observed output also attached Would appreciate any suggestions as to a workaround for this issue  Running SYSCS UTIL SYSCS COMPRESS TABLE on the table after adding the columns seems to avoid the problem but may be just masking the issue    ',0
'When a foreign key constraint on a table is dropped  the associated statistics row for the conglomerate is not removed    If you drop the foreign key constraint for a table  the statistics row does not get removed  This affects the indexStat daemon because it now finds these statistics row which always appear as out of date  causing an update to be scheduled Here is how to get it to happen set schema app CREATE TABLE TEST TAB    ID INTEGER PRIMARY KEY NOT NULL  CREATE TABLE TEST TAB    ID INTEGER PRIMARY KEY NOT NULL  ALTER TABLE TEST TAB  ADD CONSTRAINT TEST TAB   FK  FOREIGN KEY  ID  REFERENCES TEST TAB   ID  insert into app TEST TAB   values     insert into test tab   values    call syscs util syscs update statistics  APP    TEST TAB     null  selectc TABLEID c CONGLOMERATENUMBER c CONGLOMERATENAME c ISINDEX c ISCONSTRAINT c CONGLOMERATEID t TABLEID t TABLENAME t TABLETYPE s STATID s REFERENCEID s TABLEID s CREATIONTIMESTAMP s TYPE s VALID s COLCOUNT CAST STATISTICS AS VARCHAR      as STATISTICSfrom sys SYSCONGLOMERATES c join sys SYSTABLES t on c TABLEID   t TABLEID join sys SYSSTATISTICS s on s TABLEID   t TABLEIDwhere t TABLENAME    TEST TAB    and c ISINDEX   false         At this point there are two statistic rowsTABLEID CONGLOMERATENUMBER CONGLOMERATENAME ISINDEX ISCONSTRAINT CONGLOMERATEID TABLEID TABLENAME TABLETYPE STATID REFERENCEID TABLEID CREATIONTIMESTAMP TYPE VALID COLCOUNT STATISTICS                   c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T edbc               c b           f                      c b           f                      c b           f                           I true   numunique    numrows                      c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T                    c b           f                      c b           f                      c b           f                           I true   numunique    numrows           Now drop the constraintalter table TEST TAB  drop constraint TEST TAB   FK   selectc TABLEID c CONGLOMERATENUMBER c CONGLOMERATENAME c ISINDEX c ISCONSTRAINT c CONGLOMERATEID t TABLEID t TABLENAME t TABLETYPE s STATID s REFERENCEID s TABLEID s CREATIONTIMESTAMP s TYPE s VALID s COLCOUNT CAST STATISTICS AS VARCHAR      as STATISTICSfrom sys SYSCONGLOMERATES c join sys SYSTABLES t on c TABLEID   t TABLEID join sys SYSSTATISTICS s on s TABLEID   t TABLEIDwhere t TABLENAME    TEST TAB    and c ISINDEX   false         There are still two statistic rowsTABLEID CONGLOMERATENUMBER CONGLOMERATENAME ISINDEX ISCONSTRAINT CONGLOMERATEID TABLEID TABLENAME TABLETYPE STATID REFERENCEID TABLEID CREATIONTIMESTAMP TYPE VALID COLCOUNT STATISTICS                   c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T edbc               c b           f                      c b           f                      c b           f                           I true   numunique    numrows                      c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T                    c b           f                      c b           f                      c b           f                           I true   numunique    numrows           Add another rowinsert into app TEST TAB   values     insert into test tab   values            Update the statisticscall syscs util syscs update statistics  APP    TEST TAB     null  selectc TABLEID c CONGLOMERATENUMBER c CONGLOMERATENAME c ISINDEX c ISCONSTRAINT c CONGLOMERATEID t TABLEID t TABLENAME t TABLETYPE s STATID s REFERENCEID s TABLEID s CREATIONTIMESTAMP s TYPE s VALID s COLCOUNT CAST STATISTICS AS VARCHAR      as STATISTICSfrom sys SYSCONGLOMERATES c join sys SYSTABLES t on c TABLEID   t TABLEID join sys SYSSTATISTICS s on s TABLEID   t TABLEIDwhere t TABLENAME    TEST TAB    and c ISINDEX   false         There are still two rows but now one show   row and one shows   rowsTABLEID CONGLOMERATENUMBER CONGLOMERATENAME ISINDEX ISCONSTRAINT CONGLOMERATEID TABLEID TABLENAME TABLETYPE STATID REFERENCEID TABLEID CREATIONTIMESTAMP TYPE VALID COLCOUNT STATISTICS                   c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T edbc               c b           f                      c b           f                      c b           f                           I true   numunique    numrows                      c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T                    c b           f                      c b           f                      c b           f                           I true   numunique    numrows           Add the constraint back onALTER TABLE TEST TAB  ADD CONSTRAINT TEST TAB   FK  FOREIGN KEY  ID  REFERENCES TEST TAB   ID          Insert another rowinsert into app TEST TAB   values     insert into test tab   values            Update the statisticscall syscs util syscs update statistics  APP    TEST TAB     null  selectc TABLEID c CONGLOMERATENUMBER c CONGLOMERATENAME c ISINDEX c ISCONSTRAINT c CONGLOMERATEID t TABLEID t TABLENAME t TABLETYPE s STATID s REFERENCEID s TABLEID s CREATIONTIMESTAMP s TYPE s VALID s COLCOUNT CAST STATISTICS AS VARCHAR      as STATISTICSfrom sys SYSCONGLOMERATES c join sys SYSTABLES t on c TABLEID   t TABLEID join sys SYSSTATISTICS s on s TABLEID   t TABLEIDwhere t TABLENAME    TEST TAB    and c ISINDEX   false         Now there are   rowsTABLEID CONGLOMERATENUMBER CONGLOMERATENAME ISINDEX ISCONSTRAINT CONGLOMERATEID TABLEID TABLENAME TABLETYPE STATID REFERENCEID TABLEID CREATIONTIMESTAMP TYPE VALID COLCOUNT STATISTICS                   c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T edbc               c b           f                      c b           f                      c b           f                           I true   numunique    numrows                      c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T   eb  e            c b           f                      c b           f                      c b           f                           I true   numunique    numrows                      c b           f                             c b           f   false false cccb   a           c b           f                      c b           f   TEST TAB   T  ea   e            c b           f    ab                c b           f                      c b           f                           I true   numunique    numrows   Note that dropping that recreating the constraint or compressing the table does not fix the problem    ',0
'Back out the concurrency improvements for identity columns introduced by derby         DERBY      attempted to improve the concurrency of identity columns by using SYSSEQUENCE style sequence generators  These improvements caused NsTest to behave differently than it used to and they disclosed a problem in clearing the identity cache  The community lost confidence in this solution and it was backed out of the      branch under issue DERBY       This new issue is filed to back the improvements out of the      trunk  Further useful discussion about how to improve the concurrency and correctness of identity columns has been taking place on DERBY      and DERBY      For the      release  identity columns will return to their old behavior of being ill suited for high concurrency applications  Applications which need higher concurrency should be re coded to use sequences rather than identity columns    ',0
'intermittent test failure in storetests st derby    java    I am seeing an irregularly occurring failure with ibm       on one machine   which happens to be the only   CPU machine and the only one running Windows        And I ve got      nightly tests running on it I have not seen this with other jvms on the same machine It s possible this would also happen on trunk  but we stopped supporting       with trunk and so I do not run tests against trunk with  ibm        When the test passes  the output contains   identical lines  Got a Deadlock  The test failures are of   kinds     or more   of the  Got a Deadlock  lines is missing we get a    XL   error  timeout  instead of a deadlock As the second situation seems to match what DERBY     was about  I thought it worthwhile reporting as a separate JIRA  We should check it s not somehow a regression    ',0
'Authorization decorators don t null out connections when done    Some decorators used to test authorization don t close and null out references to Connection objects when they have completed  Since these tests often create boot single use databases  and the Connection objects have references to the database instance and  directly or indirectly  many of its modules  this prevents much garbage from being removed from the heap after the tests have completed and shut down their single use databases  We should close the default connection and clear the reference to it when tearing down these decorators  so the space is released for subsequent tests to use This problem affects decorators returned by the following methods DatabasePropertyTestSetup builtinAuthenticationNoTeardown  TestConfiguration sqlAuthorizationDecorator  TestConfiguration sqlAuthorizationDecoratorSingleUse  These methods return modified versions of DatabasePropertyTestSetup where the tearDown   method is a no op    ',0
'ResultSetFromPreparedStatementTest keeps references to non default connections    ResultSetFromPreparedStatementTest keeps references to non default connections in the fields c  and c   c  is closed and nulled out in tearDown    c  is only closed  It should be nulled out too in order to allow gc of resources after test completion    ',0
'BigDataTest tearDown   doesn t call super tearDown      BigDataTest s tearDown   method doesn t call super tearDown    causing it to leave statements and connections open and not eligible for gc    ',0
'CheckConstraintTest holds on to resources after completion    CheckConstraintTest keeps connections  statements and result sets in instance variables  but never clears the variables  so they are kept forever    ',0
'ColumnDefaultsTest holds on to resources after completion    ColumnDefaultsTest keeps connections  statements and result sets in instance variables  but never clears the variables  so they are kept forever    ',0
'InbetweenTest holds on to resources after completion    InbetweenTest keeps connections  statements and result sets in instance variables  but never clears the variables  so they are kept forever    ',0
'TimestampArithTest keeps references to statements after completion    TimestampArithTest keeps references to statements in static fields  but never closes them or clears the fields    ',0
'TableFunctionTest keeps reference to connection after completion    The test cases in TableFunctionTest store a DatabaseMetaData instance in an instance variable  The DatabaseMetaData instance references the default connection  and the connection can therefore not be gc ed after the test has completed    ',0
'UngroupedAggregatesNegativeTest doesn t call super tearDown      public void tearDown   throws SQLException   dropTable  t     dropTable  t      Should call super tearDown   to close and release connection and statements    ',0
'ParameterMappingTest lacks call to super tearDown      ParameterMappingTest tearDown   should call super tearDown   to release connections statements    ',0
'InternationalConnectTest forgets to call super tearDown      Its tearDown   method should call super tearDown   to free resources    ',0
'EncryptionKeyTest sometimes keeps reference to connection    EncryptionKeyTest has this code to clean up the connection  if  con    null  amp  amp   con isClosed      con rollback    con close    con   null   If the connection is already closed  it won t null out the reference  It should set con to null unconditionally    ',0
'Replication tests keep references to connections after completion    The base class for the replication tests  ReplicationRun  keeps references to connections used during the test also after the test has completed  The connections are referenced from these fields  masterConn slaveConn startSlaveException  which references a connection indirectly via client am SqlException   gt  client am Sqlca    ',0
'ProtocolTest doesn t clean up its test resources    ProtocolTest doesn t clean up its test resources  A tearDown method should be added to make the referenced instances eligable for garbage collection  The test class instances currenlty retain more than    MB on the heap    ',0
'NullPointerException in GenericTriggerExecutor executeSPS   caused by OutOfMemoryError    If I run TriggerTest with the flags  server and  Xmx   M passed to the JVM  I fairly consistently see a NPE being thrown java lang NullPointerException at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute RowTriggerExecutor fireTrigger RowTriggerExecutor java      at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute UpdateResultSet fireAfterTriggers UpdateResultSet java      at org apache derby impl sql execute UpdateResultSet open UpdateResultSet java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement execute EmbedPreparedStatement java       at org apache derbyTesting functionTests tests lang TriggerTest testBlobInTriggerTable TriggerTest java      at org apache derbyTesting functionTests tests lang TriggerTest testBlobInTriggerTable TriggerTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit textui TestRunner doRun TestRunner java      at junit textui TestRunner start TestRunner java      at junit textui TestRunner main TestRunner java     In derby log  there is an OOME right before the NPE java lang OutOfMemoryError  Java heap space at org apache derby impl jdbc LOBStreamControl updateData LOBStreamControl java      at org apache derby impl jdbc LOBStreamControl write LOBStreamControl java      at org apache derby impl jdbc LOBStreamControl  lt init gt  LOBStreamControl java     at org apache derby impl jdbc EmbedBlob  lt init gt  EmbedBlob java      at org apache derby impl jdbc EmbedResultSet getBlob EmbedResultSet java       at org apache derby impl jdbc EmbedResultSet getObject EmbedResultSet java       at org apache derby exe ac     bb x    x d  x d  x     ffb f     e  Unknown Source  at org apache derby impl services reflect DirectCall invoke ReflectGeneratedClass java      at org apache derby impl sql execute RowResultSet getNextRowCore RowResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement executeSubStatement GenericPreparedStatement java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute RowTriggerExecutor fireTrigger RowTriggerExecutor java          The code that fails with NPE  is this call to cleanupOnError   in a catch block in GenericTriggerExecutor executeSPS       retrieve the current active SC    StatementContext sc   lcc getStatementContext       make sure that the cleanup is on the new SC    if  active sc    sc     sc cleanupOnError e       ',0
'Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception     When empty string is passed for the index name to the update statistics procedure  it throws following exception passing an empty string for table to compress table procedure also gives simiar exception   The new stored procedure being created through DERBY      for dropping the statistics also gave similar exceptionjava  Dij exceptionTrace true org apache derby tools ijconnect  jdbc derby db  create true   create table t  c   int  statistics int not null  call syscs util SYSCS UPDATE STATISTICS   APP    T         ERROR        The exception  java sql SQLException  Syntax error  Encountered      at line    column      was thrown while evaluating an expression java sql SQLException  The exception  java sql SQLException  Syntax error  Encountered      at line    column      was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    Caused by  java sql SQLException  The exception  java sql SQLException  Syntax error  Encountered      at line    column      was thrown while evaluating an expression  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  java sql SQLException  Syntax error  Encountered      at line    column     at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java      at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby catalog SystemProcedures SYSCS UPDATE STATISTICS SystemProcedures java      at org apache derby exe acace c a x    x f  xcc  x        e     g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java              moreCaused by  ERROR   X    Syntax error  Encountered      at line    column     at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql compile ParserImpl parseStatement ParserImpl java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java       at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java             moreERROR   X    Syntax error  Encountered      at line    column    java sql SQLSyntaxErrorException  Syntax error  Encountered      at line    column     at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util generateCsSQLException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java      at org apache derby jdbc Driver   newEmbedPreparedStatement Driver   java      at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby impl jdbc EmbedConnection prepareStatement EmbedConnection java       at org apache derby catalog SystemProcedures SYSCS UPDATE STATISTICS SystemProcedures java      at org apache derby exe acace c a x    x f  xcc  x        e     g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl tools ij ij executeImmediate ij java      at org apache derby impl tools ij utilMain doCatch utilMain java      at org apache derby impl tools ij utilMain runScriptGuts utilMain java      at org apache derby impl tools ij utilMain go utilMain java      at org apache derby impl tools ij Main go Main java      at org apache derby impl tools ij Main mainCore Main java      at org apache derby impl tools ij Main main Main java     at org apache derby tools ij main ij java    Caused by  java sql SQLException  Syntax error  Encountered      at line    column     at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java            moreCaused by  ERROR   X    Syntax error  Encountered      at line    column     at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl sql compile ParserImpl parseStatement ParserImpl java      at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepare GenericStatement java     at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement GenericLanguageConnectionContext java       at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  EmbedPreparedStatement java             moreIssue the  help  command for general information on IJ command syntax Any unrecognized commands are treated as potential SQL commands and executed directly Consult your DBMS server reference documentation for details of the SQL syntax supported by your server ij gt    ',0
'Missing argument in some XJ    errors    EmbedBlob and EmbedClob some times wrap IOExceptions in an SQLException with SQLState XJ     SQLState SET STREAM FAILURE   but they don t always specify the message argument  so the error message ends up like this java sql SQLException  Unable to set stream         The detailed error message does appear in a chained exception  so it s not a very big problem  but it looks a bit odd  I don t know of a way to expose these exceptions in a test  I just noticed it when I added some manual asserts to force a failure when investigating another issue The fix should be simple  Use the helper method Util setStreamFailure   that sets the message argument automatically    ',0
'Upgrade tests should  print full IOException stack trace when it fails to access old versions    When the Upgrade tests fail to access the oldVersions due to an IOException the message is not very clear as to what the IOException was  e g  can output ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run ALARM  IOException msg   svn apache org   Upgrade tests can NOT be run Time       OK    tests The code in OldVersions getVersions       catch  IOException ioe    alarm  Error reading from file      oldVersionsPath   ioe getMessage      should print the exception stack trace or possibly even fail on IOException    ',0
'Table functions should only accept arguments which are constant in their query block     Derby lets you invoke a table function in the FROM list of a query  passing in arguments built out of columns in other tables in the FROM list  This syntax is illegal and the resulting queries have no meaning under the SQL Standard  See the discussion on DERBY       We should forbid this syntax  Similar syntax involving correlated subqueries in the FROM list is already forbidden  Fixing this will create a backward incompatibility which requires a release note    ',0
'Documentation in release doesn t include stylesheets    The documentation that is bundled with the Derby releases does not include the three  css stylesheets that are copied into the out  lt manual name gt  directory by the Ant task that builds the HTML files  These need to be included in the docs html  lt manual name gt  directories for the releases I believe this problem has existed from the beginning         it certainly goes back several releases    ',0
'AssertionFailedError in functionTests tests lang UpdateStatisticsTest testDisposableStatsEagerness    I noticed a test failure in UpdateStatisticsTest testDisposableStatsEagerness The link is  http   people apache org  myrnavl derby test results main windows testlog ibm           suites All diff txtThe stack trace  testDisposableStatsEagerness org apache derbyTesting functionTests tests lang UpdateStatisticsTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests lang UpdateStatisticsTest testDisposableStatsEagerness UpdateStatisticsTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'testOSReadOnly fails with k AssertionFailedError  expected an error indicating the db is readonly on HP java        This failure was reported running suites All on HP  Read only database is apparently not read only    testOSReadOnly org apache derbyTesting functionTests tests store OSReadOnlyTest junit framework AssertionFailedError  expected an error indicating the db is readonly at org apache derbyTesting functionTests tests store OSReadOnlyTest assertExpectedInsertBehaviour OSReadOnlyTest java      at org apache derbyTesting functionTests tests store OSReadOnlyTest testOSReadOnly OSReadOnlyTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testOSReadOnly org apache derbyTesting functionTests tests store OSReadOnlyTest junit framework AssertionFailedError  Failed to copy directory from  local  derbytest test system singleUse oneuse b to  local  derbytest test system singleUse readOnly at org apache derbyTesting functionTests tests store OSReadOnlyTest copyDatabaseOnOS OSReadOnlyTest java      at org apache derbyTesting functionTests tests store OSReadOnlyTest testOSReadOnly OSReadOnlyTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    FAILURES   Tests run         Failures     Errors   bash        ',1
'Make DoubleProperties propertyNames   thread safe    As discussed in DERBY       DoubleProperties propertyNames   may throw a NullPointerException if properties are removed by another thread while the method is executing  Since DoubleProperties is a sub class of  and used as a drop in replacement for  java util Properties  it should be thread safe just like the propertyNames   method in the parent class    ',0
'By using syscs set database property  you can set the database version to a garbage string which prevents you from booting the database     The following script shows this problem connect  jdbc derby db create true  values   syscs util syscs get database property   DataDictionaryVersion      call syscs util syscs set database property   DataDictionaryVersion    foobar    values   syscs util syscs get database property   DataDictionaryVersion      connect  jdbc derby db shutdown true          fails to bootconnect  jdbc derby db     ',0
'The order of argument names in messages xml is sometimes wrong when the arguments occur in the message out of sequence     In most Derby messages  arguments appear in ascending order  That is      occurs in the message first  then      then      and so on  Sometimes  however  arguments occur out of sequence  When this happens  the names in the  lt arg gt  sub elements may not agree with the order that the arguments actually occur in the message  This causes MessageBuilder to garble the dita source for the Reference Guide page titled  SQL error messages and exceptions  For instance  here is the messages xml element for SQLState         lt msg gt   lt name gt       lt  name gt   lt text gt The start position for LOCATE is invalid  it must be a positive integer  The index to start the search from is        The string to search for is        The string to search from is         lt  text gt   lt arg gt startIndex lt  arg gt   lt arg gt searchString lt  arg gt   lt arg gt fromString lt  arg gt   lt  msg gt This gives rise to the following garbled text in the generated reference guide page  The start position for LOCATE is invalid  it must be a positive integer  The index to start the search from is   lt fromString gt    The string to search for is   lt startIndex gt    The string to search from is   lt searchString gt     We should re order the  lt arg gt  sub elements so that the first  lt arg gt  sub lement corresponds to      the second  lt arg gt  sub element corresponds to      and so on    ',0
'Broken handling of paths with special characters in compatibility VersionCombinationConfigurator    Some of the code handling paths in compatibility VersionCombinationConfigurator is broken The issue is that the location of a given class is given as a URL  This means the path will be URL encoded  and  for instance  spaces will be encoded as       This bug typically shows itself as an NPE when invoking compatibility  Suite    ',0
'Incorrect list of compatible JRE versions in client trace       The list of compatible JRE versions is out of sync again  It currently says           and     For trunk I believe we must remove      and we should add     For       if we want to change it  I think we can keep      And     was out and supported before we released       right This issue was logged as DERBY      the previous time it was out of sync    ',0
'Missing method exception raised when using Clobs with territory based collation    When using territory based collation with Clobs  Derby raises an error trying to invoke a missing method  The following script shows this problem connect  jdbc derby memory db create true collation TERRITORY BASED  create function makeClob  contents varchar            returns cloblanguage java parameter style java no sql deterministicexternal name  org apache derbyTesting functionTests tests lang UserDefinedAggregatesTest makeClob  create table clobTable  a clob           fails with a java lang NoSuchMethodError exceptioninsert into clobTable  a   values   makeClob   a      connect  jdbc derby memory db  create true  create function makeClob  contents varchar            returns cloblanguage java parameter style java no sql deterministicexternal name  org apache derbyTesting functionTests tests lang UserDefinedAggregatesTest makeClob  create table clobTable  a clob           succeedsinsert into clobTable  a   values   makeClob   a      Here is the error ERROR        The exception  java lang NoSuchMethodError  org apache derby iapi types DataValueFactory getClobDataValue Ljava sql Clob Lorg apache derby iapi types StringDataValue I Lorg apache derby iapi types StringDataValue   was thrown while evaluating an expression ERROR XJ     Java exception   org apache derby iapi types DataValueFactory getClobDataValue Ljava sql Clob Lorg apache derby iapi types StringDataValue I Lorg apache derby iapi types StringDataValue   java lang NoSuchMethodError     and here is the stack trace Tue Oct             PDT      Thread     main   main       XID          SESSIONID        DATABASE   memory db    DRDAID   null   Failed Statement is          fails with a java lang NoSuchMethodError exceptioninsert into clobTable  a   values   makeClob   a     ERROR        The exception  java lang NoSuchMethodError  org apache derby iapi types DataValueFactory getClobDataValue Ljava sql Clob Lorg apache derby iapi types StringDataValue I Lorg apache derby iapi types StringDataValue   was thrown while evaluating an expression  at org apache derby iapi error StandardException newException Unknown Source  at org apache derby iapi error StandardException unexpectedUserException Unknown Source  at org apache derby impl services reflect DirectCall invoke Unknown Source  at org apache derby impl sql execute RowResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute DMLWriteResultSet getNextRowCore Unknown Source  at org apache derby impl sql execute InsertResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl tools ij ij executeImmediate Unknown Source  at org apache derby impl tools ij utilMain doCatch Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source Caused by  java lang NoSuchMethodError  org apache derby iapi types DataValueFactory getClobDataValue Ljava sql Clob Lorg apache derby iapi types StringDataValue I Lorg apache derby iapi types StringDataValue  at org apache derby exe ace  d  a x   ax a fxb  bx        ed    e  Unknown Source         more   ',0
'NPE in SELECT involving subselects and windows functions    A user reports and I have verified an NPE on the following SELECT connect  jdbc derby memory db create true  create table blah   a int   insert into blah values                                   SELECT rn   SELECT rn FROM  SELECT row number   over   rn FROM blah   as T where T  rn   T  rn    rn FROM  SELECT row number   over   rn from blah  as T     ',0
'Timestamp comparison failure in AutomaticIndexStatisticsTest testStatisticsCorrectness    http   dbtg foundry sun com derby test Daily jvm    testing testlog lin         suitesAll diff txt   testStatisticsCorrectness org apache derbyTesting functionTests tests store AutomaticIndexStatisticsTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests store AutomaticIndexStatisticsTest testStatisticsCorrectness AutomaticIndexStatisticsTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    The failure is caused by this assert  assertTrue s created before now   It might be a coincidence  but it happened the same night as Europe was switching from DST It may also be related to DERBY       where a similar assert failed because poor clock resolution made the two timestamps equal    ',0
'Encryption  re encryption  and un encryption silently fail if the database is already booted     If the database is already booted  then the DBO s attempt to re encrypt or un encrypt the database will silently fail  It will appear to the DBO that the re un encryption succeeded but in fact the database will not be changed  Derby should raise an error if the database is already booted when the DBO attempts re un encryption    ',1
'Grammar doesn t accept OR operator without parentheses    The grammar doesn t accept the OR operator without parentheses in some constructs For example  in a select list ij gt  create table t b  boolean  b  boolean    rows inserted updated deletedij gt  select b  or b  from t ERROR   X    Syntax error  Encountered  or  at line    column      errorCode         Issue the  help  command for general information on IJ command syntax Any unrecognized commands are treated as potential SQL commands and executed directly Consult your DBMS server reference documentation for details of the SQL syntax supported by your server However  it does not fail if OR is replaced by AND  or if parentheses are used around the OR expression ij gt  select  b  or b   from t     rows selectedij gt  select b  and b  from t     rows selectedSimilar behaviour is seen in VALUES statements ij gt  values true or false ERROR   X    Syntax error  Encountered  or  at line    column      errorCode         Issue the  help  command for general information on IJ command syntax Any unrecognized commands are treated as potential SQL commands and executed directly Consult your DBMS server reference documentation for details of the SQL syntax supported by your server ij gt  values  true or false    true   row selectedij gt  values true and false   false  row selected   ',0
'Replication tests fail on CDC platforms without optional JSSE package    The replication code uses the javax net ServerSocketFactory class  which is not part of the core API defined by Foundation Profile      It is however part of an optional security package  JSSE  defined by the same specification  so it may or may not be available on the CDC platforms that Derby runs on Running the replication tests on phoneME without said optional package  results in NoClassDefFoundError Caused by  java lang NoClassDefFoundError  javax net SocketFactory at org apache derby impl store replication net ReplicationMessageTransmit   run Unknown Source  at java security AccessController doPrivileged Unknown Source  at java security AccessController doPrivileged Unknown Source  at org apache derby impl store replication net ReplicationMessageTransmit initConnection Unknown Source  at org apache derby impl store replication master MasterController setupConnection Unknown Source  at org apache derby impl store replication master MasterController startMaster Unknown Source  at org apache derby impl store raw RawStore startReplicationMaster Unknown Source  at org apache derby impl store access RAMAccessManager startReplicationMaster Unknown Source  at org apache derby impl db BasicDatabase startReplicationMaster Unknown Source  at org apache derby impl jdbc EmbedConnection handleStartReplicationMaster Unknown Source We might fix this by rewriting the replication code so that it s not dependent on optional packages on CDC  However  there have not been any user requests for this functionality on platforms without that package  as far as I m aware  so I suggest we just skip the replication tests for now if that package is missing The tests I ve run on Oracle Java Micro Edition Embedded Client      OJEC  have not revealed this problem  as OJEC comes with the optional JSSE package  it s version output lists  JSSE JSR     under the components section   And since the reports from the weme     test runs don t show this failure  I think it s included there as well    ',0
'ErrorMessageTest assert failure  Only one of the waiters should be aborted    I occasionally see this test failure on some ARM devices junit framework AssertionFailedError  Only one of the waiters should be aborted at org apache derbyTesting functionTests tests lang ErrorMessageTest testDeadlockTimeout ErrorMessageTest java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    It s probably timing dependent  since the failing test case runs two threads  and the devices where it s seen are slow compared to most other test servers    ',0
'NullPointerException in INSERT INTO     SELECT FROM     ORDER BY    A NullPointerException was reported by Harm Jan Zwinderman on derby user http   mail archives apache org mod mbox db derby user        mbox   C  B                gmail com  EI ve managed to reproduce it on          like this ij version     ij gt  connect  jdbc derby memory db create true  ij gt  create table t x double    rows inserted updated deletedij gt  insert into t values       row inserted updated deletedij gt  prepare ps as  insert into t select   from t order by x  ij gt  execute ps   row inserted updated deletedij gt  execute ps   rows inserted updated deletedij gt  execute ps   rows inserted updated deletedij gt  execute ps ERROR XJ     Java exception     java lang NullPointerException  Full stack trace java lang NullPointerException at org apache derby impl store access conglomerate ConglomerateUtil createFormatIds Unknown Source  at org apache derby impl store access heap Heap create Unknown Source  at org apache derby impl store access heap HeapConglomerateFactory createConglomerate Unknown Source  at org apache derby impl store access RAMTransaction createConglomerate Unknown Source  at org apache derby impl sql execute TemporaryRowHolderImpl insert Unknown Source  at org apache derby impl sql execute InsertResultSet normalInsertCore Unknown Source  at org apache derby impl sql execute InsertResultSet open Unknown Source  at org apache derby impl sql GenericPreparedStatement executeStmt Unknown Source  at org apache derby impl sql GenericPreparedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement executeStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement execute Unknown Source  at org apache derby impl tools ij ij ExecuteStatement Unknown Source  at org apache derby impl tools ij ij ijStatement Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source  at org apache derby iapi tools run main Unknown Source    ',0
'IN lists with mixed types may return wrong results    Given this table ij gt  connect  jdbc derby memory db create true  ij gt  create table t x bigint    rows inserted updated deletedij gt  insert into t values                                                                 rows inserted updated deletedA query that uses an IN list that contains all the three values actually stored in the table  returns all three rows as expected ij gt  select   from t where x in                                                                 X                                                                                   rows selectedHowever  if we add a value whose type precedence is higher  like a DOUBLE value  and that value happens to be equal to the approximation of the other values in the IN list when they are cast from BIGINT to DOUBLE  only one row is returned ij gt  select   from t where x in                                                                                  E    X                                           row selectedI believe this query should return all three rows too    ',0
'in list multi probe by primary key not chosen on tables with      rows    I have a table with a long integer primary key field and    million rows  I seem to be unable to load large chunks of rows via id in a reasonably efficient manner     If I do individual lookups via the primary key  then a fast indexed lookup occurs  However  if I do large numbers of such queries  then the time is overwhelmed by round trip overhead which makes everything incredibly slow     If I use a single query with a disjunction of the primary keys of interest  then a table scan is performed  even if the clause only contains     items   which walks over    million rows   incredibly inefficient     If I use an IN clause  then a table scan is performed  even if the clause only contains     items   which walks over    million rows   incredibly inefficient I m guessing that this might have something to do with the fact that I m using large integers and really big numbers that don t start anywhere at or about   for my keys  Could this possibly be confusing the optimizer Here are the unlimited query plans for the   cases that I enumerated                                                                                                   EL Fine                               ServerSession           Connection            Thread Thread      quot Initial Lisp Listener quot    SubL Thread Group       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE  TERM ID      bind   gt                            Thu Jan             CST      Thread      quot Initial Lisp Listener quot    SubL Thread Group       XID              SESSIONID       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE  TERM ID              Project Restrict ResultSet     Number of opens    Rows seen    Rows filtered    restriction   falseprojection   true constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      restriction time  milliseconds      projection time  milliseconds      optimizer estimated row count       optimizer estimated cost      Source result set  Index Row to Base Row ResultSet for FORMULA TERM  Number of opens     Rows seen     Columns accessed from heap                            constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      optimizer estimated row count       optimizer estimated cost       Index Scan ResultSet for FORMULA TERM using constraint KB FORMULA TERM TERM ID PK at read committed isolation level using share row locking chosen by the optimizer Number of opens     Rows seen     Rows filtered     Fetch Size     constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      next time in milliseconds row     scan information  Bit set of columns fetched All Number of columns fetched   Number of deleted rows visited   Number of pages visited   Number of rows qualified   Number of rows visited   Scan type btree Tree height    start position   gt   on first   column s   Ordered null semantics on the following columns   stop position   gt  on first   column s   Ordered null semantics on the following columns   qualifiers  None optimizer estimated row count       optimizer estimated cost           EL Fine                               ServerSession            Connection           Thread Thread      quot Initial Lisp Listener quot    SubL Thread Group       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE    TERM ID      OR  TERM ID       OR  TERM ID       bind   gt                                                                Thu Jan             CST      Thread      quot Initial Lisp Listener quot    SubL Thread Group       XID              SESSIONID       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE    TERM ID      OR  TERM ID       OR  TERM ID               Project Restrict ResultSet     Number of opens    Rows seen    Rows filtered    restriction   falseprojection   true constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      restriction time  milliseconds      projection time  milliseconds      optimizer estimated row count             optimizer estimated cost            Source result set  Project Restrict ResultSet      Number of opens     Rows seen            Rows filtered            restriction   true projection   false constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      restriction time  milliseconds      projection time  milliseconds      optimizer estimated row count             optimizer estimated cost             Source result set  Table Scan ResultSet for FORMULA TERM at read committed isolation level using instantaneous share row locking chosen by the optimizer Number of opens     Rows seen            Rows filtered     Fetch Size      constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      next time in milliseconds row     scan information  Bit set of columns fetched All Number of columns fetched   Number of pages visited       Number of rows qualified          Number of rows visited          Scan type heap start position  null stop position  null qualifiers  None optimizer estimated row count             optimizer estimated cost                 EL Fine                               ServerSession            Connection            Thread Thread      quot Initial Lisp Listener quot    SubL Thread Group       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE  TERM ID IN          bind   gt                                                                Thu Jan             CST      Thread      quot Initial Lisp Listener quot    SubL Thread Group       XID              SESSIONID       SELECT TERM ID  ARG   ARG   ARG   ARG   FORMULA HASH  FORMULA LENGTH  FORMULA TYPE  KB STATUS FROM KB FORMULA TERM WHERE  TERM ID IN                  Project Restrict ResultSet     Number of opens    Rows seen    Rows filtered    restriction   falseprojection   true constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      restriction time  milliseconds      projection time  milliseconds      optimizer estimated row count             optimizer estimated cost            Source result set  Project Restrict ResultSet      Number of opens     Rows seen            Rows filtered            restriction   true projection   false constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      restriction time  milliseconds      projection time  milliseconds      optimizer estimated row count             optimizer estimated cost             Source result set  Table Scan ResultSet for FORMULA TERM at read committed isolation level using instantaneous share row locking chosen by the optimizer Number of opens     Rows seen            Rows filtered     Fetch Size      constructor time  milliseconds      open time  milliseconds      next time  milliseconds      close time  milliseconds      next time in milliseconds row     scan information  Bit set of columns fetched All Number of columns fetched   Number of pages visited       Number of rows qualified          Number of rows visited          Scan type heap start position  null stop position  null qualifiers  None optimizer estimated row count             optimizer estimated cost               ',0
'Failures in upgradeTests Changes     related to index cardinality statistics    The upgrade test fails when run with         The reason is that a fix has been backported to         and older branches back to       and this fix invalidates assumptions made in some of the tests in Changes     Example of failures https   builds apache org job Derby      suites All    testReport As a side note  I m wondering if we don t have good enough routines to make sure we run the upgrade tests with maintenance releases on older branches before releasing them  I don t know if we can avoid this situation in general  that would at least require very careful consideration on how to write the upgrade test    ',0
'    s of errors in nightly test run on weme after jacoco property priviledges checkin        s of errors in nightly test  all seem to be a null pointer while processing policy files during setup  problem is in jvm code  and it seems specific to the weme    jvm The only change being tested in this run was  For instance      testAll org apache derbyTesting functionTests tests lang NativeAuthenticationServiceTest java lang NullPointerException at com ibm oti util DefaultPolicy addGrant DefaultPolicy java      at com ibm oti util DefaultPolicy readPolicy DefaultPolicy java      at com ibm oti util DefaultPolicy getSystemPolicy DefaultPolicy java      at com ibm oti util DefaultPolicy getPermissionsImpl DefaultPolicy java      at com ibm oti util DefaultPolicy   run DefaultPolicy java     at java security AccessController doPrivileged AccessController java      at com ibm oti util DefaultPolicy privateGetPermissions DefaultPolicy java     at com ibm oti util DefaultPolicy getPermissions DefaultPolicy java     at java security Policy getPermissions Policy java      at java security ProtectionDomain implies ProtectionDomain java      at java security AccessController checkPermission AccessController java     at java lang SecurityManager checkPermission SecurityManager java      at java lang SecurityManager checkPropertyAccess SecurityManager java      at java lang System getProperty System java      at java lang System getProperty System java      at org apache derbyTesting junit BaseTestCase   run BaseTestCase java      at java security AccessController doPrivileged AccessController java      at org apache derbyTesting junit BaseTestCase getSystemProperty BaseTestCase java      at org apache derbyTesting junit DropDatabaseSetup removeDatabase DropDatabaseSetup java     at org apache derbyTesting junit TestConfiguration   tearDown TestConfiguration java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    Here is link to all errors http   people apache org  myrnavl derby test results main windows testlog weme            suites All diff txthttp   people apache org  myrnavl derby test results main windows testlog weme            derbyall diff txt   ',0
'Package javadoc publishedapi jdbc  index html out of date    Quote    Derby runs on any J SE       or higher virtual machine and supports Java ME CDC Foundation  Derby s database format is platform independent allowing databases to be copied to any machine type   I think we have dropped        so we could omit that  but also include JDK   Profile   here  since we do mention CDC    ',0
'testPositionAgressive org apache derbyTesting functionTests tests jdbcapi BlobClob BlobTest j fails with    The handle is invalid   java io IOException      There was   error http   people apache org  myrnavl derby test results main windows testlog ibm           suites All diff txt   testPositionAgressive org apache derbyTesting functionTests tests jdbcapi BlobClob BlobTest java sql SQLException  Java exception   The handle is invalid   java io IOException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util newEmbedSQLException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc EmbedConnection clearLOBMapping Unknown Source  at org apache derby impl jdbc EmbedConnection commit Unknown Source  at org apache derbyTesting junit BaseJDBCTestCase commit BaseJDBCTestCase java      at org apache derbyTesting functionTests tests jdbcapi BlobClob BlobTest testPositionAgressive BlobClob BlobTest java       at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java io IOException  The handle is invalid  at java io RandomAccessFile close  Native Method  at java io RandomAccessFile close RandomAccessFile java      at org apache derby impl jdbc LOBFile close Unknown Source  at org apache derby impl jdbc EncryptedLOBFile close Unknown Source         more   ',0
'Upgrade tests fail on compact     The upgrade tests fail on the compact  profile because they use data sources to create databases with old Derby versions  and to shut down the old engines after the test  The data sources in Derby versions before       require JNDI to be present  Since JNDI is not present on compact   the attempts to obtain data sources fail             Upgrade Phase  CREATE java lang NoClassDefFoundError  javax naming Referenceable at java lang ClassLoader defineClass  Native Method  at java lang ClassLoader defineClass Unknown Source  at java security SecureClassLoader defineClass Unknown Source  at java net URLClassLoader defineClass Unknown Source  at java net URLClassLoader access     Unknown Source  at java net URLClassLoader   run Unknown Source  at java net URLClassLoader   run Unknown Source  at java security AccessController doPrivileged Native Method  at java net URLClassLoader findClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang ClassLoader defineClass  Native Method  at java lang ClassLoader defineClass Unknown Source  at java security SecureClassLoader defineClass Unknown Source  at java net URLClassLoader defineClass Unknown Source  at java net URLClassLoader access     Unknown Source  at java net URLClassLoader   run Unknown Source  at java net URLClassLoader   run Unknown Source  at java security AccessController doPrivileged Native Method  at java net URLClassLoader findClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang Class forName  Native Method  at java lang Class forName Unknown Source  at org apache derbyTesting junit JDBCDataSource getDataSourceObject JDBCDataSource java      at org apache derbyTesting junit JDBCDataSource getDataSource JDBCDataSource java      at org apache derbyTesting junit JDBCDataSource getDataSource JDBCDataSource java     at org apache derbyTesting junit JDBCDataSource getDataSource JDBCDataSource java     at org apache derbyTesting functionTests tests upgradeTests PhaseChanger setUp PhaseChanger java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java lang ClassNotFoundException  javax naming Referenceable at java net URLClassLoader   run Unknown Source  at java net URLClassLoader   run Unknown Source  at java security AccessController doPrivileged Native Method  at java net URLClassLoader findClass Unknown Source  at java lang ClassLoader loadClass Unknown Source  at java lang ClassLoader loadClass Unknown Source          more   ',0
'Investigate why setting a login timeout causes NativeAuthenticationServiceTest to fail when run in a suite    See DERBY      for the details of this problem    ',1
'SSL Test  and network server    can hang if serverSocket accept   fails for something other than an IOException    In starting a server with SSL as in SSLTest if serverSocket accept   fails for some reason other than an IOException it may just print the error to console and hang  In this case it was java security AccessControlException  Access denied  java util PropertyPermissionI saw this when debugging a java issue in serverSocket accept   but I think it could be simulated by adding an unwrapped System getProperty   of some sort before serverSocket accept   to force a permission error  e g   System getProperty  derby system home    return serverSocket accept      catch  IOException acceptE   I have not verified that would work    ',1
'Marshalling error in JDBCDriverTest as part of CompatibilityTest    Internal Oracle testing of RC   testing of        Tendril Request         Tendril Task                            Diff file derbyall derbynetclientmats DerbyNetClient encodingTests TestEnc diff             Start  TestEnc jdk      DerbyNetClient derbynetclientmats encodingTests                        derbyTesting encoding can only be used with jdk    skipping test End  TestEnc jdk      DerbyNetClient derbynetclientmats encodingTests                                    Diff file derbyall derbynetclientmats DerbyNetClient derbynetclientmats CompatibilityTest diff             Start  CompatibilityTest jdk      DerbyNetClient derbynetclientmats derbynetclientmats                          add gt   E  gt  There was   error  gt     testJDBCDriver org apache derbyTesting functionTests tests junitTests compatibility JDBCDriverTest java sql SQLException  Error marshalling or unmarshalling a user defined type  org apache derbyTesting functionTests tests lang Price  local class incompatible  stream classdesc serialVersionUID                       local class serialVersionUID                       gt  Caused by  org apache derby client am SqlException  Error marshalling or unmarshalling a user defined type  org apache derbyTesting functionTests tests lang Price  local class incompatible  stream classdesc serialVersionUID                       local class serialVersionUID                       gt         more gt  Caused by  java io InvalidClassException  org apache derbyTesting functionTests tests lang Price  local class incompatible  stream classdesc serialVersionUID                       local class serialVersionUID                       gt         more gt  FAILURES    gt  Tests run     Failures     Errors   Test Failed  End  CompatibilityTest jdk      DerbyNetClient derbynetclientmats derbynetclientmats                            Looking at the Price class I see it doesn t have an explicit serialVersionUID    ',0
'select from view with  upper  and  in  list throws a ClassCastException    the issue can be reproduced   create table myTbl   name varchar           create table myTbl   name varchar           create view myView  name  as select t  name from myTbl  t  union all select t  name from myTbl  t     select name from myView where upper name  in   AA    BB      failed with  org apache derby impl sql compile SimpleStringOperatorNode incompatible with org apache derby impl sql compile ColumnReference  java lang ClassCastException If the view is created as  create myView  name  as select t  name from myTbl  t    the query worked fine    ',0
'nightly regression test failure  intermittent error   testStatisticsCorrectness org apache derbyTesting functionTests tests store AutomaticIndexStatisticsTest junit framework AssertionFailedError    failure in nightly regression test  candidate       branch  ibm  may be related to daylight savings time change  there were similar resolved bugs that were marked fixed so reporting new one in case this is different http   people apache org  myrnavl derby test results v      windows testlog ibm           suites All diff txtThere was   failure    testStatisticsCorrectness org apache derbyTesting functionTests tests store AutomaticIndexStatisticsTest junit framework AssertionFailedError at org apache derbyTesting functionTests tests store AutomaticIndexStatisticsTest testStatisticsCorrectness AutomaticIndexStatisticsTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'nightly regression test failure  testMultipleLastKeyWaitsInMaxScan org apache derbyTesting functionTests tests store IndexSplitDeadlockTest junit framework AssertionFailedError  Column value mismatch   column         http   people apache org  myrnavl derby test results v     windows testlog ibm           suites All diff txt   testMultipleLastKeyWaitsInMaxScan org apache derbyTesting functionTests tests store IndexSplitDeadlockTest junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt   lt  Found   gt   lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertSingleValueResultSet JDBC java      at org apache derbyTesting functionTests tests store IndexSplitDeadlockTest testMultipleLastKeyWaitsInMaxScan IndexSplitDeadlockTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    FAILURES   Tests run         Failures     Errors      ',0
'Derby does not report warnings raised by table functions    If a table function raises warnings as the user loops through ResultSet next    those warnings are silently thrown away by Derby  Derby should return those warnings when the user calls ResultSet getWarnings      ',0
'Interrupt restarts clock for login timeout    If a login takes time  and the thread that s blocked in Driver   timeLogin   is interrupted  it will call Future get   again with the same timeout value  This means that interrupting a getConnection   call will not make it terminate faster  as one might expect  Instead  it restarts the timeout clock and makes it terminate later than if it had not been interrupted    ',0
'AutoloadTest does not proprogate original jvm  D flags to spawned JVM  leading to LAB regression test failures    IBM lab nightly regression testing is seeing numerious intermittent errors while running theAutoloadTest  This regression testing often runs multiple runs of Suites all on the same machine atthe same time and uses the  Dderby tests basePort      option to the tests to insure networkserver is created on different ports and don t intefere I think the following code in this test that spawn a process is not going pass that port info onto the networkserver startup and then lead to problems      Run   code AutoloadTest  in a separate JVM     public void spawnProcess   throws Exception   String   cmd      junit textui TestRunner   spawnedTestClass getName      SpawnedProcess proc   new SpawnedProcess execJavaCmd cmd   spawnedTestClass getName     if  proc complete           fail proc getFailMessage  Test process failed           ',0
'Cleanup suspect coding practices in org apache derby iapi error package    Similar to DERBY         ',0
'Query against view  with  where name LIKE  Col   ESCAPE       failed    The error can be reproduced    create table mytbl   name clob   K      create table mytbl   name clob   K      create view myview  name  as select t  name from mytbl  t  union all select t  name from mytbl  t     select name from myview where name LIKE  Col   ESCAPE          failed with error message  ERROR        Comparisons between  CLOB  UCS BASIC   and  CHAR  UCS BASIC   are not supported  Types must be comparable  String types must also have matching collation  If collation does not match  a possible solution is to cast operands to force them to the default collation  e g  SELECT tablename FROM sys systables WHERE CAST tablename AS VARCHAR          T    at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl sql compile BinaryComparisonOperatorNode bindComparisonOperator Unknown Source  at org apache derby impl sql compile PredicateList pushExpressionsIntoSelect Unknown Source  at org apache derby impl sql compile UnionNode pushExpressions Unknown Source  at org apache derby impl sql compile UnionNode pushExpressions Unknown Source  at org apache derby impl sql compile ProjectRestrictNode pushExpressions Unknown Source  at org apache derby impl sql compile FromList pushPredicates Unknown Source  at org apache derby impl sql compile SelectNode preprocess Unknown Source  at org apache derby impl sql compile DMLStatementNode optimizeStatement Unknown Source  at org apache derby impl sql compile CursorNode optimizeStatement Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source         more   ',0
'Cleanup suspect coding practices in org apache derby iapi services io package    Similar to DERBY         ',0
'Cleanup suspect coding practices in the org apache derby impl tools planexporter package    Similar to DERBY         ',0
'Cleanup suspect coding practices in the org apache derby iapi types package    Similar to DERBY         ',0
'Cleanup suspect coding practices in the org apache derby iapi sql dictionary package    Similar to DERBY         ',0
'Cleanup suspect coding practices in misc Derby packages    Similar to DERBY         ',0
'NullPointerException when calling a procedure with sub query as argument    ij version      ij gt  connect  jdbc derby memory db create true  ij gt  call syscs util syscs set database property  abc    values  def    ERROR XJ     Java exception     java lang NullPointerException    errorCode     The query should either compile and execute just fine  or it should raise a proper exception  It should not fail with a NullPointerException    ',0
'Issues with latest JDK   EA build because of missing SQLPermission    With the latest EA build of JDK    build       ea b     I see many failures in suites All  For example    testStartNetworkServerFalse org apache derbyTesting functionTests tests derbynet DerbyNetAutoStartTest java security AccessControlException  access denied   java sql SQLPermission   deregisterDriver   at java security AccessControlContext checkPermission AccessControlContext java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java sql DriverManager deregisterDriver DriverManager java      at org apache derby jdbc AutoloadedDriver unregisterDriverModule AutoloadedDriver java      at org apache derby jdbc Driver   stop Driver   java      at org apache derby impl services monitor TopService stop TopService java      at org apache derby impl services monitor TopService shutdown TopService java      at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java      at org apache derby impl services monitor FileMonitor shutdown FileMonitor java     at org apache derby impl services monitor BaseMonitor shutdown BaseMonitor java      at org apache derby impl services monitor FileMonitor shutdown FileMonitor java     at org apache derby jdbc InternalDriver connect InternalDriver java      at org apache derby jdbc Driver   connect Driver   java      at org apache derby jdbc AutoloadedDriver connect AutoloadedDriver java      at java sql DriverManager getConnection DriverManager java      at java sql DriverManager getConnection DriverManager java      at org apache derbyTesting junit DriverManagerConnector getConnectionByAttributes DriverManagerConnector java      at org apache derbyTesting junit DriverManagerConnector shutEngine DriverManagerConnector java      at org apache derbyTesting junit TestConfiguration shutdownEngine TestConfiguration java       at org apache derbyTesting functionTests tests derbynet DerbyNetAutoStartTest setUp DerbyNetAutoStartTest java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java     What s new in EA build    is that DriverManager deregisterDriver   now requires an SQLPermission when running under a security manager  Most of suites All runs under a security manager  and Derby s engine shutdown code calls deregisterDriver    so this problem probably affects all tests that shut down the engine    ',1
'SecureServerTest assertion error on contents of stdout from subprocess       ',1
'XMLBindingTest fails on latest JDK   EA    java sql SQLDataException  Invalid XML Document  External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed  at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util seeNextException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl handleException TransactionResourceImpl java      at org apache derby impl jdbc EmbedConnection handleException EmbedConnection java       at org apache derby impl jdbc ConnectionChild handleException ConnectionChild java     at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedPreparedStatement executeStatement EmbedPreparedStatement java       at org apache derby impl jdbc EmbedPreparedStatement execute EmbedPreparedStatement java       at org apache derbyTesting junit XML insertDocWithDTD XML java      at org apache derbyTesting functionTests tests lang XMLBindingTest XBindTestSetup setUp XMLBindingTest java      at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    Caused by  java sql SQLException  Invalid XML Document  External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed  at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java    Caused by  java sql SQLException  Java exception   External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed   org xml sax SAXException   at org apache derby impl jdbc SQLExceptionFactory getSQLException SQLExceptionFactory java     at org apache derby impl jdbc SQLExceptionFactory   wrapArgsForTransportAcrossDRDA SQLExceptionFactory   java      at org apache derby impl jdbc SQLExceptionFactory   getSQLException SQLExceptionFactory   java     at org apache derby impl jdbc Util newEmbedSQLException Util java      at org apache derby impl jdbc Util javaException Util java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java      at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException TransactionResourceImpl java     Caused by  org xml sax SAXException  External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed org xml sax SAXParseException  lineNumber      columnNumber       External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed  at org apache derby iapi types SqlXmlUtil XMLErrorHandler fatalError SqlXmlUtil java      at com sun org apache xerces internal util ErrorHandlerWrapper fatalError ErrorHandlerWrapper java      at com sun org apache xerces internal impl XMLErrorReporter reportError XMLErrorReporter java      at com sun org apache xerces internal impl XMLErrorReporter reportError XMLErrorReporter java      at com sun org apache xerces internal impl XMLScanner reportFatalError XMLScanner java       at com sun org apache xerces internal impl XMLDocumentScannerImpl DTDDriver dispatch XMLDocumentScannerImpl java       at com sun org apache xerces internal impl XMLDocumentScannerImpl DTDDriver next XMLDocumentScannerImpl java       at com sun org apache xerces internal impl XMLDocumentScannerImpl PrologDriver next XMLDocumentScannerImpl java      at com sun org apache xerces internal impl XMLDocumentScannerImpl next XMLDocumentScannerImpl java      at com sun org apache xerces internal impl XMLNSDocumentScannerImpl next XMLNSDocumentScannerImpl java      at com sun org apache xerces internal impl XMLDocumentFragmentScannerImpl scanDocument XMLDocumentFragmentScannerImpl java      at com sun org apache xerces internal parsers XML  Configuration parse XML  Configuration java      at com sun org apache xerces internal parsers XML  Configuration parse XML  Configuration java      at com sun org apache xerces internal parsers XMLParser parse XMLParser java      at com sun org apache xerces internal parsers DOMParser parse DOMParser java      at com sun org apache xerces internal jaxp DocumentBuilderImpl parse DocumentBuilderImpl java      at org apache derby iapi types SqlXmlUtil   run SqlXmlUtil java      at org apache derby iapi types SqlXmlUtil   run SqlXmlUtil java      at java security AccessController doPrivileged Native Method  at org apache derby iapi types SqlXmlUtil serializeToString SqlXmlUtil java      at org apache derby iapi types XML XMLParse XML java      at org apache derby exe acbfcc aadx   exeff x f fx      cfc     e  Unknown Source  at org apache derby impl services reflect DirectCall invoke ReflectGeneratedClass java      at org apache derby impl sql execute RowResultSet getNextRowCore RowResultSet java      at org apache derby impl sql execute NormalizeResultSet getNextRowCore NormalizeResultSet java      at org apache derby impl sql execute DMLWriteResultSet getNextRowCore DMLWriteResultSet java      at org apache derby impl sql execute InsertResultSet open InsertResultSet java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java      Caused by  org xml sax SAXParseException  lineNumber      columnNumber       External DTD  Failed to read external DTD  personal dtd   because  file  access is not allowed  at com sun org apache xerces internal util ErrorHandlerWrapper createSAXParseException ErrorHandlerWrapper java      at com sun org apache xerces internal util ErrorHandlerWrapper fatalError ErrorHandlerWrapper java        ',0
'updatelocksJDBC   test failing in nightly regression tests    updatelocksJDBC   test failed intermittently in nightly regression tests  trunk  ibm  http   people apache org  myrnavl derby test results main windows testlog ibm           derbyall diff txt                 Diff file derbyall encryptionAll storemats storemats updatelocksJDBC   diff             Start  updatelocksJDBC   jdk      storemats storemats                             d      lt  APP  UserTransaction ROW     U  A         GRANT ACTIVE      a      gt  APP  UserTransaction ROW     U  A         GRANT ACTIVE      d      lt  APP  UserTransaction ROW     U  A         GRANT ACTIVE      a      gt  APP  UserTransaction ROW     U  A         GRANT ACTIVE      d      lt  APP  UserTransaction ROW     U  A         GRANT ACTIVE      a      gt  APP  UserTransaction ROW     U  A         GRANT ACTIVE Test Failed  End  updatelocksJDBC   jdk      storemats storemats                           ',0
'NullPointerException when using more than one parameter in COALESCE    Calls to COALESCE fail with NullPointerExceptions if there are multiple   parameters ij version      ij gt  connect  jdbc derby memory db create true  ij gt  prepare ps as  values coalesce         ERROR XJ     Java exception     java lang NullPointerException    errorCode     java lang NullPointerException at org apache derby impl sql compile ParameterNode generateExpression Unknown Source  at org apache derby impl sql compile CoalesceFunctionNode generateExpression Unknown Source  at org apache derby impl sql compile ResultColumn generateExpression Unknown Source  at org apache derby impl sql compile ResultColumnList generateCore Unknown Source  at org apache derby impl sql compile ResultColumnList generate Unknown Source  at org apache derby impl sql compile RowResultSetNode generate Unknown Source  at org apache derby impl sql compile ScrollInsensitiveResultSetNode generate Unknown Source  at org apache derby impl sql compile CursorNode generate Unknown Source  at org apache derby impl sql compile StatementNode generate Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement  lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby impl jdbc EmbedPreparedStatement    lt init gt  Unknown Source  at org apache derby jdbc Driver   newEmbedPreparedStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl jdbc EmbedConnection prepareStatement Unknown Source  at org apache derby impl tools ij ij PrepareStatement Unknown Source  at org apache derby impl tools ij ij ijStatement Unknown Source  at org apache derby impl tools ij utilMain runScriptGuts Unknown Source  at org apache derby impl tools ij utilMain go Unknown Source  at org apache derby impl tools ij Main go Unknown Source  at org apache derby impl tools ij Main mainCore Unknown Source  at org apache derby impl tools ij Main main Unknown Source  at org apache derby tools ij main Unknown Source    ',0
'Intermittent failures in XplainStatisticsTest testSimpleXplainOnly    XplainStatisticsTest testSimpleXplainOnly fails intermittently Examples http   download java net javadesktop derby javadb         report javadb task         html junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt   lt  Found   gt   lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertSingleValueResultSet JDBC java      at org apache derbyTesting functionTests tests lang XplainStatisticsTest testSimpleXplainOnly XplainStatisticsTest java       at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java    http   download java net javadesktop derby javadb         report javadb task         html junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt   lt  Found   gt   lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertSingleValueResultSet JDBC java      at org apache derbyTesting functionTests tests lang XplainStatisticsTest testSimpleXplainOnly XplainStatisticsTest java       at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'XplainStatisticsTest testSimpleQuery  BEGIN COMP TIME unexpectedly NULL    Seen on two platforms in nightly testing of trunk revision         http   download java net javadesktop derby request         javadb task         htmlhttp   download java net javadesktop derby request         javadb task         htmljunit framework AssertionFailedError  BEGIN COMP TIME unexpectedly NULL at org apache derbyTesting functionTests tests lang XplainStatisticsTest getNonNullTimestamp XplainStatisticsTest java       at org apache derbyTesting functionTests tests lang XplainStatisticsTest verifySensibleStatementTimings XplainStatisticsTest java       at org apache derbyTesting functionTests tests lang XplainStatisticsTest testSimpleQuery XplainStatisticsTest java       at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'Fix incorrect  throws and  exception tags in javadoc    Many javadoc comments have  throws or  exception tags that either misspell the name of the exception class or name an exception that is not actually thrown from the method  We should fix those references    ',0
'DatabaseMetaData getJDBCMinorVersion   should return   now that we ve implemented JDBC        Now that the work on DERBY      is done  DatabaseMetaData getJDBCMinorVersion   should return   rather than    The following script shows that we re still returning   connect  jdbc derby memory db create true  call syscs util syscs register tool   databaseMetaData   true   values getJDBCMajorVersion   values getJDBCMinorVersion   call syscs util syscs register tool   databaseMetaData   false      ',0
'failure in testConstraintDrops org apache derbyTesting functionTests lang ConglomerateSharingTest junit framework AssertionFailedError  Error       should have been caused by index constraint       Don t think this failure has been reported before The url for failure is http   people apache org  myrnavl derby test results v      windows testlog weme            suites All diff txt   testConstraintDrops org apache derbyTesting functionTests tests lang ConglomerateSharingTest junit framework AssertionFailedError  Error       should have been caused by index constraint  DROPC UIX   but  DROPC UIX   did not appear in the following error message   The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by  DROPC UC   defined on  DROPC T     at org apache derbyTesting functionTests tests lang ConglomerateSharingTest checkStatementError ConglomerateSharingTest java      at org apache derbyTesting functionTests tests lang ConglomerateSharingTest testConstraintDrops ConglomerateSharingTest java      at java lang reflect AccessibleObject invokeV AccessibleObject java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'java security AccessControlException in i  n LocalizedDisplayScriptTest    Seeing more test failures because of an intentional security change in TimeZone setDefault    Therefore need to wrap Timezone setDefault in a priv block in the test     LocalizedDisplay org apache derbyTesting functionTests tests i  n LocalizedDisplayScriptTest java security AccessControlException  Access denied   java util PropertyPermission   user timezone   write   at java security AccessController throwACE AccessController java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java util TimeZone hasPermission TimeZone java      at java util TimeZone setDefault TimeZone java      at org apache derbyTesting functionTests tests i  n LocalizedDisplayScriptTest setUp LocalizedDisplayScriptTest java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    and    LocalizedDisplay org apache derbyTesting functionTests tests i  n LocalizedDisplayScriptTest java security AccessControlException  Access denied   java util PropertyPermission   user timezone   write   at java security AccessController throwACE AccessController java      at java security AccessController checkPermission AccessController java      at java lang SecurityManager checkPermission SecurityManager java      at java util TimeZone hasPermission TimeZone java      at java util TimeZone setDefault TimeZone java      at org apache derbyTesting functionTests tests i  n LocalizedDisplayScriptTest setUp LocalizedDisplayScriptTest java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',1
'CREATE TRIGGER doesn t detect all illegal references to SESSION schema    The reference manual s section on the DECLARE GLOBAL TEMPORARY TABLE statement says  Temporary tables cannot be referenced in a triggered SQL statementIt detects most cases and reports ERROR XCL    The requested function can not reference tables in SESSION schema However  some references are not detected if they are in a subquery  For example ij version      ij gt  connect  jdbc derby memory db create true  ij gt  declare global temporary table temptable x int  not logged   rows inserted updated deletedij gt  create table t  x int    rows inserted updated deletedij gt  create table t  b boolean    rows inserted updated deletedij gt  create trigger tr  after insert on t  insert into t  values exists select   from session temptable    rows inserted updated deletedThis CREATE TRIGGER statement should have raised an error    ',0
'Errors in jdbc  LobStreamTest if derbyclient jar is first in the classpath    I see the following errors in jdbc  LobStreamTest if derbyclient jar is before derby jar on trunk       Rev         There were   errors    testWriteWithInvalidParameterValues org apache derbyTesting functionTests tests jdbc  LobStreamTest java lang NoClassDefFoundError  org apache derby iapi error ExceptionUtil at org apache derby impl jdbc LOBStreamControl write LOBStreamControl java      at org apache derby impl jdbc LOBOutputStream write LOBOutputStream java      at org apache derbyTesting functionTests tests jdbc  LobStreamTest testWriteWithInvalidParameterValues LobStreamTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       testReadWithInvalidParameterValues org apache derbyTesting functionTests tests jdbc  LobStreamTest java lang NoClassDefFoundError  org apache derby iapi error ExceptionUtil at org apache derby impl jdbc LOBInputStream read LOBInputStream java      at org apache derbyTesting functionTests tests jdbc  LobStreamTest testReadWithInvalidParameterValues LobStreamTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java    There were   failures    testWriteWithInvalidParameterValues org apache derbyTesting functionTests tests jdbc  LobStreamTest junit framework AssertionFailedError  Expected IndexOutOfBoundException at org apache derbyTesting functionTests tests jdbc  LobStreamTest testWriteWithInvalidParameterValues LobStreamTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java        testReadWithInvalidParameterValues org apache derbyTesting functionTests tests jdbc  LobStreamTest junit framework AssertionFailedError  Expected IndexOutOfBoundException at org apache derbyTesting functionTests tests jdbc  LobStreamTest testReadWithInvalidParameterValues LobStreamTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java     I notice derbyclient jar contains Mon Oct             PDT      org apache derby iapi error ExceptionUtil   classMon Oct             PDT      org apache derby iapi error ExceptionUtil classwhich I think is only supposed to be in derby jar   ',0
'NullPointerException in DirFile    We got a NullPointerException trying to start a Derby database in embedded mode  the stacktrace indicated it happened in org apache derby impl io DirFile deleteAll    that method got called from org apache derby impl io BaseStorageFactory createTempDir   After investigating  it appears that the deleteAll   method calls  super list     which according to the java io File specifications  can return null  But the deleteAll   method doesn t handle that case gracefully    ',0
'ClassCastException when launching derby from windows subst drive    When launching derby bundled with glassfish  on a substed drive derby fails to startup and logs the following into the derby log Fri Nov             CET        Sicherheitsmanager mit einfacher Server Sicherheitsrichtlinie installiert java lang reflect InvocationTargetException at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke Unknown Source  at java lang reflect Method invoke Unknown Source  at com sun enterprise admin cli optional DerbyControl invokeNetworkServerControl DerbyControl java      at com sun enterprise admin cli optional DerbyControl main DerbyControl java     Caused by  java lang ExceptionInInitializerError at java lang Class forName  Native Method  at java lang Class forName Unknown Source  at org apache derby impl drda NetworkServerControlImpl startNetworkServer Unknown Source  at org apache derby impl drda NetworkServerControlImpl blockingStart Unknown Source  at org apache derby impl drda NetworkServerControlImpl executeWork Unknown Source  at org apache derby drda NetworkServerControl main Unknown Source        moreCaused by  java lang ClassCastException  java nio file FileSystemException cannot be cast to java lang RuntimeException at org apache derby iapi services io FileUtil limitAccessToOwnerViaACLs Unknown Source  at org apache derby iapi services io FileUtil limitAccessToOwner Unknown Source  at org apache derby impl services stream SingleStream PBmakeFileHPW Unknown Source  at org apache derby impl services stream SingleStream run Unknown Source  at java security AccessController doPrivileged Native Method  at org apache derby impl services stream SingleStream makeFileHPW Unknown Source  at org apache derby impl services stream SingleStream createDefaultStream Unknown Source  at org apache derby impl services stream SingleStream makeStream Unknown Source  at org apache derby impl services stream SingleStream boot Unknown Source  at org apache derby impl services monitor BaseMonitor boot Unknown Source  at org apache derby impl services monitor TopService bootModule Unknown Source  at org apache derby impl services monitor BaseMonitor startModule Unknown Source  at org apache derby iapi services monitor Monitor startSystemModule Unknown Source  at org apache derby impl services monitor BaseMonitor runWithState Unknown Source  at org apache derby impl services monitor FileMonitor  lt init gt  Unknown Source  at org apache derby iapi services monitor Monitor startMonitor Unknown Source  at org apache derby iapi jdbc JDBCBoot boot Unknown Source  at org apache derby jdbc EmbeddedDriver boot Unknown Source  at org apache derby jdbc EmbeddedDriver  lt clinit gt  Unknown Source         moreDerby was started via the glassfish command   asadmin start databaseThe asadmin command only fails if it is launched from a substed windows drive  The substed drive was created with the following command   subst d  c  dWhen derby is started from drive  C  everything is fine    ',0
'Minimal select privilege should be checked in subqueries    DERBY      added checks for minimal select privilege in cases where a SELECT query didn t access any actual column in the base table  such as SELECT COUNT FROM USER  T and SELECT   FROM USER  T  That privilege checking is only done for top level SELECT statements  It should also be done for subqueries Examples of queries where Derby does not currently check for minimal select privileges on the accessed tables  performed as USER   which has no privileges on any of USER  s tables  SELECT   FROM  SELECT COUNT FROM USER  T  SSELECT   FROM USER  T UNION SELECT   FROM USER  TINSERT INTO USER  T SELECT   FROM USER  TI believe that the above statements should have failed  but currently they succeed    ',1
'Incorrect handling when using an UPDATE to SET an identity column to DEFAULT    Derby violates the SQL Standard when an UPDATE statement SETs an identity column to the value DEFAULT  Derby does the right thing for INSERTs  however For INSERTs  the      Standard defines the meaning of DEFAULT in part    section        Effect of inserting tables into base tables   general rule    For INSERTs  the DEFAULT value is the next value of the sequence generator which defines the identity column For UPDATEs  the      Standard defines the meaning of DEFAULT in part    section        Effect of replacing rows in base tables   general rule    For UPDATEs  the DEFAULT value is also the next value of the sequence generator which defines the identity column Note also that the      Standard says that a GENERATED ALWAYS identity column can be SET to DEFAULT  Furthermore  that is the only explicit value accepted  See the      Standard  part    section        set clause list   syntax rule     If  lt set clause gt  SC specifies an  lt object column gt  that references a column of which some underlying column is either a generated column or an identity column whose descriptor indicates that values are always generated  then the  lt update source gt  specified in SC shall consist of a  lt default specification gt    What Derby actually does for UPDATEs is the following    If the column was declared GENERATED ALWAYS  then Derby raises a compile time error saying that the value of an identity column can t be overridden    If the column was declared GENERATED BY DEFAULT  then Derby raises an execution time error when trying to stuff a null into the column Correcting this bug would result in backwardly incompatible behavior  However  I think that the incompatibility is minor  it would mean the successful run of statements which previously raised errors I tripped across this problem while implementing the UPDATE action of the MERGE statement  DERBY        If we decide to fix this bug  we will want to make sure that the UPDATE actions of MERGE statements also correctly handle DEFAULT values for identity columns The following script shows this problem connect  jdbc derby memory db create true  create table t   a int generated always as identity  b int   create table t   a int generated by default as identity  b int   insert into t   a  b   values   default        insert into t   a  b   values   default        update t  set a   default update t  set a   default select   from t  select   from t     ',0
'Incorrect privileges may be required for INSERT and DELETE statements     This issue is a place to address problems with INSERT and DELETE statements similar to the problems affecting UPDATE statements recorded on DERBY       In particular  DERBY      and DERBY      list some of the problems with INSERT statements    ',1
'Connections opened by ForeignTableVTI never get released    I noticed during a run of suites All that one database instance never got garbage collected  even after it had been shut down  It turned out it could not get garbage collected because it was still referenced from the static HashMap  connections in ForeignTableVTI  Looking closer at ForeignTableVTI  it looks as if it only calls put   and get   on the HashMap  never remove    so its memory footprint will keep increasing as it is used It would be good to have some way  preferably automatic  of releasing the resources held by ForeignTableVTI when they are no longer needed    ',0
'ArrayIndexOutOfBoundsException when calling function from trigger    I m having problems will calling functions from within a trigger The problem seems to be with the outer function call  FLOOR   in this case  but it also happens with other functions   It works fine in the SELECT statement  but when used in the trigger it throws a ArrayIndexOutOfBoundsException Remove the FLOOR   part from the trigger and it works fine    create source table and some dataCREATE TABLE foo  name VARCHAR      val DOUBLE  INSERT INTO foo  name  val  VALUES   A          A          B          C          calling the function works fine hereSELECT name  FLOOR AVG LOG   val     COUNT   FROM fooGROUP BY name    create target table for triggerCREATE TABLE summary  name VARCHAR      aver DOUBLE  size INT     create the triggerCREATE TRIGGER trg foo AFTER INSERT ON fooREFERENCING NEW TABLE AS changed FOR EACH STATEMENT MODE DB SQLINSERT INTO summary  name  aver  size SELECT name  FLOOR AVG LOG   val     COUNT   FROM changedGROUP BY name    insert rows to cause trigger to fireINSERT INTO foo  name  val  VALUES   A          A          B          C       SELECT   FROM foo SELECT   FROM summary    ',0
'Infinite loop in NetworkServerControlImpl ensureDataInBuffer    NetworkServerControlImpl ensureDataInBuffer missing check for return     EOF  from  clientIs read   When read returns    thread consumes      CPU  Method NetworkServerControlImpl fillReplyBuffer correctly throw exception Fix  add two lines  private void ensureDataInBuffer int minimumBytesNeeded  throws Exception      make sure the buffer is large enough while   replyBufferCount   replyBufferPos   lt  minimumBytesNeeded    try   int bytesRead   clientIs read replyBuffer  replyBufferCount  replyBuffer length   replyBufferCount    if  bytesRead         consolePropertyMessage  DRDA InvalidReplyTooShort S   true   replyBufferCount    bytesRead    catch  IOException e    clientSocketError e        StackTrace  java lang Thread State  RUNNABLE at java net SocketInputStream read Unknown Source     at org apache derby impl drda NetworkServerControlImpl ensureDataInBuffer Unknown Source     at org apache derby impl drda NetworkServerControlImpl readLDString Unknown Source     at org apache derby impl drda NetworkServerControlImpl readStringReply Unknown Source     at org apache derby impl drda NetworkServerControlImpl runtimeInfo Unknown Source     at org apache derby drda NetworkServerControl getRuntimeInfo Unknown Source     at com crcdata dbadmin server DerbyEngine getRuntimeInfo DerbyEngine java      at com crcdata dbadmin server DerbyEngine DerbyServerMonitorTask run DerbyEngine java      at java util concurrent Executors RunnableAdapter call Unknown Source     at java util concurrent FutureTask Sync innerRun Unknown Source     at java util concurrent FutureTask run Unknown Source     at java util concurrent ThreadPoolExecutor runWorker Unknown Source     at java util concurrent ThreadPoolExecutor Worker run Unknown Source     at java lang Thread run Unknown Source       ',0
'NetworkServerControl API breaks when username or password contains non ascii characters    If you pass a non ascii username password combination to a NetworkServerControl API command  such as java  jar derbynet jar shutdown  user Bj  rn  password D  hlieit will hang forever The reason is that NetworkServerControlImpl writeLDString   writes the length of the string in characters  whereas NetworkServerControlImpl readLDString   expects the length to be in number of bytes    ',0
'Optional tool registration may fail because the CompilerContext is not always available at execution time     For reasons which elude me  the CompilerContext is sometimes available at execution time and sometimes not  When the CompilerContext is not available at execution time  optional tool loading fails on an NPE Caused by  java lang NullPointerException at org apache derby catalog Java SystemProcedures SYSCS REGISTER TOOL Java SystemProcedures java      at org apache derby exe ac d    a x    x  adx    xffffe d aa e  g  Unknown Source  at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derby impl services reflect ReflectMethod invoke ReflectMethod java     at org apache derby impl sql execute CallStatementResultSet open CallStatementResultSet java     at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java         ',0
'intermittent error in nightly regression tests  AutoIncrementTest    junit framework AssertionFailedError  Column value mismatch   column  COLUMNNAME   row    Expected   gt A ZERO lt  Found   gt A ONE lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting functionTests tests lang AutoIncrementTest testderbyIncrementTest AutoIncrementTest java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java       ',0
'Starting network server on a network drive fails with JDK   on Windows    Starting a network server on a network drive with JDK   on Windows fails  The reported exception is a ClassCastException  but the underlying exception is the following java nio file AccessDeniedException    host path derby log at sun nio fs WindowsException translateToIOException WindowsException java     at sun nio fs WindowsException rethrowAsIOException WindowsException java     at sun nio fs WindowsException rethrowAsIOException WindowsException java      at sun nio fs WindowsAclFileAttributeView setAcl WindowsAclFileAttributeView java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache derby iapi services io FileUtil limitAccessToOwnerViaACLs FileUtil java      at org apache derby iapi services io FileUtil limitAccessToOwner FileUtil java      at org apache derby impl services stream SingleStream PBmakeFileHPW SingleStream java      at org apache derby impl services stream SingleStream run SingleStream java      at org apache derby impl services stream SingleStream run SingleStream java     at java security AccessController doPrivileged Native Method  at org apache derby impl services stream SingleStream makeFileHPW SingleStream java      at org apache derby impl services stream SingleStream createDefaultStream SingleStream java      at org apache derby impl services stream SingleStream makeStream SingleStream java      at org apache derby impl services stream SingleStream boot SingleStream java     at org apache derby impl services monitor BaseMonitor boot BaseMonitor java       at org apache derby impl services monitor TopService bootModule TopService java      at org apache derby impl services monitor BaseMonitor startModule BaseMonitor java      at org apache derby impl services monitor FileMonitor startModule FileMonitor java     at org apache derby iapi services monitor Monitor startSystemModule Monitor java      at org apache derby impl services monitor BaseMonitor runWithState BaseMonitor java      at org apache derby impl services monitor FileMonitor  lt init gt  FileMonitor java     at org apache derby iapi services monitor Monitor startMonitor Monitor java      at org apache derby iapi jdbc JDBCBoot boot JDBCBoot java     at org apache derby jdbc EmbeddedDriver boot EmbeddedDriver java      at org apache derby jdbc EmbeddedDriver  lt clinit gt  EmbeddedDriver java     at java lang Class forName  Native Method  at java lang Class forName Class java      at org apache derby impl drda NetworkServerControlImpl startNetworkServer NetworkServerControlImpl java       at org apache derby impl drda NetworkServerControlImpl blockingStart NetworkServerControlImpl java      at org apache derby impl drda NetworkServerControlImpl executeWork NetworkServerControlImpl java       at org apache derby drda NetworkServerControl main NetworkServerControl java        ',0
'java lang NoSuchMethodError chaining a function and procedure    java lang NoSuchMethodError is raised when calling a procedure which takes an Integer argument and passing it the result of a function which returns an int  The error is raised in generated code    ',0
'Syntax error when reference to transition variable has whitespace around it    If a trigger action references a transition variable and has whitespace around the period sign that separates the transition variable name from the column name  it fails with a syntax error For example ij gt  create table t  x int    rows inserted updated deletedij gt  create table t  x int    rows inserted updated deletedij gt    failscreate trigger tr  after insert on t  referencing new as newfor each row insert into t  select x from t  where x   new   x ERROR   X    Syntax error  Encountered  x  at line    column     Issue the  help  command for general information on IJ command syntax Any unrecognized commands are treated as potential SQL commands and executed directly Consult your DBMS server reference documentation for details of the SQL syntax supported by your server ij gt    succeedscreate trigger tr  after insert on t  referencing new as newfor each row insert into t  select x from t  where x   new x   rows inserted updated deletedThe only difference between the failing trigger definition and the successful one  is that the former says  new   x  and the latter  new x  Both should succeed    ',0
'Non english locale flunks LuceneSupportTest    The following error surfaced in the nightly tests on a windows machine with a Swedish locale  See http   download java net javadesktop derby request          junit framework AssertionFailedError  Column value mismatch   column      row    Expected   gt en lt  Found   gt sv lt  at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertRowInResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSetMinion JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java       at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting junit JDBC assertFullResultSet JDBC java      at org apache derbyTesting functionTests tests lang LuceneSupportTest testCreateAndQueryIndex LuceneSupportTest java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'testDERBY    NumRowsInSydependsForTrigger fails when the starting version of the upgrade trajectory is              When I run the upgrade tests with           as the starting point  I see the following error  I don t see this error when the starting point is            This may suggest that           has not been added as a starting point for the upgrade tests in the nightly continuous integration test runs    testDERBY    NumRowsInSydependsForTrigger org apache derbyTesting functionTests tests upgradeTests BasicSetup junit framework AssertionFailedError  Expected error s           but no error was thrown  at org apache derbyTesting junit BaseJDBCTestCase assertStatementErrorMinion BaseJDBCTestCase java       at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java       at org apache derbyTesting junit BaseJDBCTestCase assertStatementError BaseJDBCTestCase java       at org apache derbyTesting functionTests tests upgradeTests BasicSetup testDERBY    NumRowsInSydependsForTrigger BasicSetup java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at org apache derbyTesting junit BaseTestSetup run BaseTestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java     at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit extensions TestSetup run TestSetup java       ',0
'Sequence generator makes CREATE TRIGGER fail with internal error    I m seeing this on trunk ij version      ij gt  connect  jdbc derby memory db create true  ij gt  create table t  x int  y int  z int    rows inserted updated deletedij gt  create table t  x int  y int  z int    rows inserted updated deletedij gt  create sequence seq   rows inserted updated deletedij gt  values next value for seq                           row selectedij gt  create trigger tr  after insert on t  insert into t  x  values  next value for seq  ERROR   XT   An internal error was identified by RawStore module  Internal state detail from the transaction is as follows  savedEndStatus    needSync   falsejustCreated   falsemyGlobalId   nullmyId   nullstate    inComplete   nullseenUpdates   falseinPostCommitProcessing   falselogStart   nulllogLast   nullrecoveryTransaction   falsepostCompleteMode   falsesanityCheck xaclosed   falsetransName   UserTransactionreadOnly   falseflush log on xact end   truebackupBlocked   falsedontWaitForLocks   false   ',0
'NOT elimination for CASE expressions is broken    NOT elimination for CASE expressions seems to be broken  Take this example ij gt  select   from sysibm sysdummy  where not   case when ibmreqd    Y  then true else true end   IBM amp     Y   row selectedBoth branches of the CASE expression evaluate to TRUE  so one would expect the predicate  not   case        to evaluate to FALSE  and the query should return an empty result    ',0
'ROW NUMBER function throws NullPointerException in UPDATE statement    A NullPointerException is raised with this  possibly illegal   UPDATE statement ij version      ij gt  connect  jdbc derby memory db create true  ij gt  create table t x int    rows inserted updated deletedij gt  insert into t values     row inserted updated deletedij gt  update t set x   row number   over    ERROR XJ     Java exception     java lang NullPointerException     ',0
'Incorrect nullability for CASE expression with parameter    This JUnit test code fails because it detects that the query returns null even though the result column is reported as not nullable  PreparedStatement ps   prepareStatement   values case when false then   else   end    ps setNull    Types INTEGER   JDBC assertSingleValueResultSet ps executeQuery    null     ',0
'CheckToursDBTest failed while updating sequence value on disk    I saw a failure in CheckToursDBTest while running the demo test suite on trunk  It was reported as an ArrayIndexOutOfBoundsException  The ArrayIndexOutOfBoundsException happened during cleanup and shadowed the original exception  The original exception in derby log looked like this ERROR XSTA   A transaction was already active  when attempt was made to make another transaction active  at org apache derby iapi error StandardException newException StandardException java      at org apache derby iapi error StandardException newException StandardException java      at org apache derby impl store raw xact XactFactory pushTransactionContext XactFactory java      at org apache derby impl store raw xact XactFactory startCommonTransaction XactFactory java      at org apache derby impl store raw xact XactFactory startNestedUpdateUserTransaction XactFactory java      at org apache derby impl store raw RawStore startNestedUpdateUserTransaction RawStore java      at org apache derby impl store access RAMTransaction startNestedUserTransaction RAMTransaction java       at org apache derby impl sql catalog SequenceUpdater updateCurrentValueOnDisk SequenceUpdater java      at org apache derby impl sql catalog SequenceUpdater clean SequenceUpdater java      at org apache derby impl sql catalog SequenceUpdater clearIdentity SequenceUpdater java      at org apache derby impl services cache ConcurrentCache removeEntry ConcurrentCache java      at org apache derby impl services cache ConcurrentCache ageOut ConcurrentCache java      at org apache derby impl sql catalog DataDictionaryImpl clearSequenceCaches DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl clearCaches DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl clearCaches DataDictionaryImpl java       at org apache derby impl sql catalog DataDictionaryImpl doneReading DataDictionaryImpl java       at org apache derby impl sql GenericStatement prepMinion GenericStatement java      at org apache derby impl sql GenericStatement prepareStorable GenericStatement java      at org apache derby iapi sql dictionary SPSDescriptor compileStatement SPSDescriptor java      at org apache derby iapi sql dictionary SPSDescriptor prepareAndRelease SPSDescriptor java      at org apache derby iapi sql dictionary SPSDescriptor getPreparedStatement SPSDescriptor java      at org apache derby iapi sql dictionary SPSDescriptor getPreparedStatement SPSDescriptor java      at org apache derby impl sql execute GenericTriggerExecutor executeSPS GenericTriggerExecutor java      at org apache derby impl sql execute GenericTriggerExecutor executeWhenClauseAndAction GenericTriggerExecutor java      at org apache derby impl sql execute RowTriggerExecutor fireTrigger RowTriggerExecutor java      at org apache derby impl sql execute TriggerEventActivator notifyEvent TriggerEventActivator java      at org apache derby impl sql execute UpdateResultSet fireAfterTriggers UpdateResultSet java      at org apache derby impl sql execute UpdateResultSet open UpdateResultSet java      at org apache derby impl sql GenericPreparedStatement executeStmt GenericPreparedStatement java      at org apache derby impl sql GenericPreparedStatement execute GenericPreparedStatement java      at org apache derby impl jdbc EmbedStatement executeStatement EmbedStatement java       at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derby impl jdbc EmbedStatement execute EmbedStatement java      at org apache derbyTesting functionTests tests demo CheckToursDBTest doUpdate CheckToursDBTest java      at org apache derbyTesting functionTests tests demo CheckToursDBTest testToursDB CheckToursDBTest java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at junit framework TestCase runTest TestCase java      at junit framework TestCase runBare TestCase java      at org apache derbyTesting junit BaseTestCase runBare BaseTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBareOverridable BaseJDBCTestCase java      at org apache derbyTesting junit BaseJDBCTestCase runBare BaseJDBCTestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit extensions TestDecorator basicRun TestDecorator java     at junit extensions TestSetup   protect TestSetup java     at junit framework TestResult runProtected TestResult java      at junit extensions TestSetup run TestSetup java     at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at org apache tools ant taskdefs optional junit JUnitTestRunner run JUnitTestRunner java      at org apache tools ant taskdefs optional junit JUnitTestRunner launch JUnitTestRunner java       at org apache tools ant taskdefs optional junit JUnitTestRunner main JUnitTestRunner java        ',0
'Broken link in API docs to derby drda keepAlive documentation    In the javadoc for NetworkServerMBean getDrdaKeepAlive  there is a see link which is broken  It points to http   db apache org derby docs dev adminguide radmindrdakeepalive html   ',0
'User procedures can call system procedures  circumventing SQL authorization     System procedures are implemented as public static methods in org apache derby catalog SystemProcedures  These methods can be called by code in user written procedures  This allows a user written procedure to circumvent the SQL authorization checks which are supposed to limit some procedures to being called only by the DBO  I will attach a repro    ',1
'Compilation error using a view as the source data set for a MERGE statement    Mamta found the following problem when using a view as the source data set of a MERGE statement connect  jdbc derby memory db create true  CREATE TABLE employee  employee id int first name VARCHAR     last name VARCHAR     dept no int salary int  create view v employee as select   from employee CREATE TABLE bonuses  employee id int  bonus int DEFAULT      create view v bonuses as select   from bonuses    compiles without the viewMERGE INTO bonuses BUSING employee EON B employee id   E employee idWHEN MATCHED AND E dept no    THEN UPDATE SET B bonus   E salary      WHEN NOT MATCHED AND dept no    THEN INSERT  employee id  bonus  VALUES  E employee id  E salary            compilation error with the viewMERGE INTO bonuses BUSING v employee EON B employee id   E employee idWHEN MATCHED AND E dept no    THEN UPDATE SET B bonus   E salary      WHEN NOT MATCHED AND dept no    THEN INSERT  employee id  bonus  VALUES  E employee id  E salary            ',0
'Rollback to savepoint allows violation of deferrable constraints    The bug is illustrated by the following code snippet  Connection c   DriverManager getConnection  jdbc derby memory db create true    c setAutoCommit false   Statement s   c createStatement    s execute  create table t  x int primary key initially deferred     s execute  insert into t  values            Savepoint sp   c setSavepoint    s execute  drop table t     c rollback sp      Since there are four identical rows in T   this call should have    failed because the primary key was violated  c commit       Instead  it succeeds  and all four rows are committed  as can    be seen here  ResultSet rs   s executeQuery  select   from t     while  rs next      System out println rs getInt           Insert yet another row  so that we have five identical rows     s execute  insert into t  values             and now commit complains     c commit   With auto commit off  add duplicates into a deferred primary key  Then set a savepoint  drop the table  and roll back to the savepoint Apparently  when you drop the table  information about any constraint violations seen on that table is lost  and that information is not restored when the drop table operation is undone by the rollback to savepoint So when you commit the transaction after having rolled back the drop operation  no deferred checking of constraints happens  and the duplicates you have inserted are committed    ',0
'Permission problems when running JUnit tests with Ant          I saw many permission problems when I set up a build job for the       branch  See for example this log  https   builds apache org job Derby       suites All   consoleFirst stack trace   junit  Running org apache derby PackagePrivateTestSuite  junit  Tests run      Failures     Errors     Skipped     Time elapsed        sec  junit  Exception in thread  main  java security AccessControlException  access denied   java io FilePermission    home jenkins jenkins slave workspace Derby       suites All       head junit               TEST org apache derby PackagePrivateTestSuite xml   write    junit  at java security AccessControlContext checkPermission AccessControlContext java       junit  at java security AccessController checkPermission AccessController java       junit  at java lang SecurityManager checkPermission SecurityManager java       junit  at java lang SecurityManager checkWrite SecurityManager java       junit  at java io FileOutputStream  lt init gt  FileOutputStream java       junit  at java io FileOutputStream  lt init gt  FileOutputStream java       junit  at org apache tools ant taskdefs optional junit FormatterElement DelayedFileOutputStream write FormatterElement java       junit  at java io OutputStream write OutputStream java       junit  at sun nio cs StreamEncoder writeBytes StreamEncoder java       junit  at sun nio cs StreamEncoder implFlushBuffer StreamEncoder java       junit  at sun nio cs StreamEncoder implFlush StreamEncoder java       junit  at sun nio cs StreamEncoder flush StreamEncoder java       junit  at java io OutputStreamWriter flush OutputStreamWriter java       junit  at java io BufferedWriter flush BufferedWriter java       junit  at org apache tools ant util DOMElementWriter openElement DOMElementWriter java       junit  at org apache tools ant util DOMElementWriter write DOMElementWriter java       junit  at org apache tools ant util DOMElementWriter write DOMElementWriter java       junit  at org apache tools ant util DOMElementWriter write DOMElementWriter java       junit  at org apache tools ant taskdefs optional junit XMLJUnitResultFormatter endTestSuite XMLJUnitResultFormatter java       junit  at org apache tools ant taskdefs optional junit JUnitTestRunner fireEndTestSuite JUnitTestRunner java       junit  at org apache tools ant taskdefs optional junit JUnitTestRunner run JUnitTestRunner java       junit  at org apache tools ant taskdefs optional junit JUnitTestRunner launch JUnitTestRunner java        junit  at org apache tools ant taskdefs optional junit JUnitTestRunner main JUnitTestRunner java        junit  Running org apache derby PackagePrivateTestSuite  junit  Tests run     Failures     Errors     Skipped     Time elapsed    sec  junit  Test org apache derby PackagePrivateTestSuite FAILED  crashed I can reproduce these failures in my environment by running the junit single target with Ant        For example ant  Dderby junit testclass org apache derbyTesting unitTests junit FormatableBitSetTest junit singleIf I use an older Ant version  I ve tried       and        it does not fail    ',1
'ROW NUMBER should not be allowed as argument in a procedure call    Fails with assert NPE instead of proper error ij gt  call syscs util syscs compress table  APP    T   row number   over     ERROR XJ     Java exception   ASSERT FAILED cannot get interface without operand  org apache derby shared common sanity AssertFailure     ',0
'Assert failure ArrayIndexOutOfBoundsException when using COUNT in MERGE matching clause    This  meaningless  statement gives NPE in insane builds andassert failure in sane builds s execute  create table t  x int    s execute  create table t  x int    s execute  insert into t  values       s executeUpdate  merge into t  using t  on  t  x t  x       when not matched then insert values  count       I see it also applies to other aggregates  e g  MAX stack trace  insane  Exception in thread  main  java sql SQLException  Java exception       java lang ArrayIndexOutOfBoundsException   at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory getSQLException Unknown Source  at org apache derby impl jdbc Util seeNextException Unknown Source  at org apache derby impl jdbc Util javaException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl wrapInSQLException Unknown Source  at org apache derby impl jdbc TransactionResourceImpl handleException Unknown Source  at org apache derby impl jdbc EmbedConnection handleException Unknown Source  at org apache derby impl jdbc ConnectionChild handleException Unknown Source  at org apache derby impl jdbc EmbedStatement execute Unknown Source  at org apache derby impl jdbc EmbedStatement executeLargeUpdate Unknown Source  at org apache derby impl jdbc EmbedStatement executeUpdate Unknown Source  at derby     Derby     main Derby     java    Caused by  ERROR XJ     Java exception       java lang ArrayIndexOutOfBoundsException   at org apache derby iapi error StandardException newException Unknown Source  at org apache derby impl jdbc SQLExceptionFactory wrapArgsForTransportAcrossDRDA Unknown Source         moreCaused by  java lang ArrayIndexOutOfBoundsException     at org apache derby impl services bytecode BCMethod popStack Unknown Source  at org apache derby impl services bytecode BCMethod callMethod Unknown Source  at org apache derby impl sql compile ResultColumnList generateEvaluatedRow Unknown Source  at org apache derby impl sql compile MatchingClauseNode generateInsertUpdateRow Unknown Source  at org apache derby impl sql compile MatchingClauseNode generate Unknown Source  at org apache derby impl sql compile MergeNode generate Unknown Source  at org apache derby impl sql compile StatementNode generate Unknown Source  at org apache derby impl sql GenericStatement prepMinion Unknown Source  at org apache derby impl sql GenericStatement prepare Unknown Source  at org apache derby impl sql conn GenericLanguageConnectionContext prepareInternalStatement Unknown Source        more   ',0
'OOME when running ConstraintCharacteristicsTest with smaller heap    When I ran suites All on a device with little memory  so that I needed to reduce the heap   Xmx   M   it stopped and failed with an OOME when it came to ConstraintCharacteristicsTest That test uses a memory database in order to speed it up  One of the test cases  testManySimilarDuplicates  has such a big data set that the database doesn t fit in the heap  It would be good if we could reduce the memory requirements of the test so that it passes on smaller devices to  Alternatively  we could add a switch that makes it easy to disable test cases that are known to have high memory requirements    ',0
'Add derbyoptionaltools jar to the class paths of the scripts in the bin directory    The derbyoptionaltools jar should be added to the class paths constructed by all of the scripts in the bin distros which include derby jar  Otherwise  the Lucene plugin  and future features which we put in derbyoptionaltools jar  won t be available when you use the scripts to run ij  the network server  and sysinfo For instance  you will see information on this jar file if you run sysinfo this way   java  jar derbyrun jar sysinfo  but not if you run the sysinfo script in the bin directory of a Derby installation    ',0
'Add derbyoptionaltools jar to the maven artifacts we publish    The new derbyoptionaltools jar is not published to the maven repositories along with the other Derby jar files    ',0
'Cannot create a Lucene index if a key column s name is case sensitive    The workaround is to create a view which gives the columns case insensitive names  The following script shows this problem connect  jdbc derby memory db create true  call syscs util syscs register tool   luceneSupport   true   create schema  s  create table  s   t    passageID  int   text  varchar              fails because the trailing key id is case sensitivecall luceneSupport createIndex    s      t      text    null    passageID    create view  s   t view    passageID  text   as select   from  s   t     succeeds on a view with case insensitive identifierscall luceneSupport createIndex    s      t view     text   null   passageID      ',0
'The jacoco junit target fails to store coverage data for some sub suites    The console log for the code coverage test runs at https   builds apache org job Derby JaCoCo  shows that JaCoCo fails to write coverage data for the following test suites langjdbcapistoreengineencryptionIt is caused by the following permissions related exception   junit  java security AccessControlException  access denied   java io FilePermission    home jenkins jenkins slave workspace Derby JaCoCo trunk junit               jacoco exec   write    junit  at java security AccessControlContext checkPermission AccessControlContext java       junit  at java security AccessController checkPermission AccessController java       junit  at java lang SecurityManager checkPermission SecurityManager java       junit  at java lang SecurityManager checkWrite SecurityManager java       junit  at java io FileOutputStream  lt init gt  FileOutputStream java       junit  at org jacoco agent rt internal  dd     output FileOutput openFile FileOutput java      junit  at org jacoco agent rt internal  dd     output FileOutput writeExecutionData FileOutput java      junit  at org jacoco agent rt internal  dd     Agent shutdown Agent java       junit  at org jacoco agent rt internal  dd     Agent   run Agent java    The result of this is that the coverage report shows lower coverage than what s actually covered by the tests    ',1
