@relation 'CamelBug'

@attribute Text string
@attribute class-att {0,1}

@data

' FileConfigureTest can t pass in Windows box    Because of the File separator is different between the unix and windows system  So the test can t pass in windows box I just attached a patch for it  Please have a look at it  I tested it in windows box    ',0
'JMSXGroupID is not copied across ActiveMQ endpoints    See thread  http   www nabble com MethodName in header is ignored by beanRef       tf       s      html a           ',0
'URL link broken in org apache camel Processor API doc     Message Transformer  link is broken    ',0
'org apache camel processor UnitOfWorkWithAsyncFlowTest failure    Running org apache camel processor UnitOfWorkWithAsyncFlowTestTests run     Failures     Errors     Skipped     Time elapsed         sec  lt  lt  lt  FAILURE This prevents developer from building camel under Linux platform  Thanks    ',0
'exception clause doesn t proceed with pipeline    Problem is very similar to CAMEL     but this time with exception clause As exceptions are not cleared pipeline doesn t proceed    ',0
'the       release didnt  seem to include the javadocs or doc directory  or manual      I wondered if this was due to your machine Hiram having some dodgy maven plugin around or something    ',0
'Headers lost after XSLT processing    After xslt processing the message headers are lost  See attached unit test  this test fails since revision        http   svn apache org viewvc view rev amp revision          ',0
'Fix performance counters       ',0
' Spring integration  TheadType is missing in org apache camel model jaxb index    TheadType is missing in org apache camel model jaxb index   gt  JAXB don t know how to unmarshall thread Bug description found in Camel Users forum   http   www nabble com Processor thread pool td        s      html   ',0
' Spring integration  Bad urls in META INF spring schemas    http    activemq apache org camel schema spring camel spring     xsd becomes http    activemq apache org camel schema spring camel spring       xsdhttp    activemq apache org camel schema spring camel spring     xsd becomes http    activemq apache org camel schema spring camel spring       xsdThere s no camel spring     xsd and camel spring     xsd under http   activemq apache org camel schema spring    ',0
'NullPointerException in CXF routes when there is an endpoint between router and service CXF endpoints    When an endpoint is added between a cxf router and a cxf service endpoint the message exchange is interrupted by a NullPointerException Example code     JAVA BEGIN                                                           This code worksfrom StringUtils join cxfRouterURI   to StringUtils join cxfServiceURI       This code crashes  same problem with seda and log endpoints String anyEndpoint    activemq someQueue      JAVA END                                                         from StringUtils join cxfRouterURI   to anyEndpoint  to StringUtils join cxfServiceURI        EXCEPTION BEGIN                                                       org apache cxf phase PhaseInterceptorChain doInterceptINFO  Interceptor has thrown exception  unwinding noworg apache cxf interceptor Fault at org apache camel component cxf interceptors RawMessageContentRedirectInterceptor handleMessage RawMessageContentRedirectInterceptor java     at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java      at org apache camel component cxf invoker CxfClient invokeWithMessageStream CxfClient java      at org apache camel component cxf invoker CxfClient dispatch CxfClient java     at org apache camel component cxf CxfProducer process CxfProducer java      at org apache camel component cxf CxfProducer process CxfProducer java      at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsynProcessorBridge process AsyncProcessorTypeConverter java     at org apache camel processor SendProcessor process SendProcessor java     at org apache camel processor DeadLetterChannel process DeadLetterChannel java      at org apache camel processor DeadLetterChannel process DeadLetterChannel java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel component cxf CamelInvoker invoke CamelInvoker java     at org apache camel component cxf interceptors AbstractInvokerInterceptor handleMessage AbstractInvokerInterceptor java     at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java      at org apache camel component cxf CxfMessageObserver onMessage CxfMessageObserver java     at org apache cxf transport http jetty JettyHTTPDestination serviceRequest JettyHTTPDestination java      at org apache cxf transport http jetty JettyHTTPDestination doService JettyHTTPDestination java      at org apache cxf transport http jetty JettyHTTPHandler handle JettyHTTPHandler java     at org mortbay jetty handler ContextHandler handle ContextHandler java      at org mortbay jetty handler ContextHandlerCollection handle ContextHandlerCollection java      at org mortbay jetty handler HandlerWrapper handle HandlerWrapper java      at org mortbay jetty Server handle Server java      at org mortbay jetty HttpConnection handleRequest HttpConnection java      at org mortbay jetty HttpConnection RequestHandler content HttpConnection java      at org mortbay jetty HttpParser parseNext HttpParser java      at org mortbay jetty HttpParser parseAvailable HttpParser java      at org mortbay jetty HttpConnection handle HttpConnection java      at org mortbay io nio SelectChannelEndPoint run SelectChannelEndPoint java      at org mortbay thread BoundedThreadPool PoolThread run BoundedThreadPool java     Caused by  java lang NullPointerException at org apache commons io IOUtils copyLarge IOUtils java       at org apache commons io IOUtils copy IOUtils java      at org apache camel component cxf interceptors RawMessageContentRedirectInterceptor handleMessage RawMessageContentRedirectInterceptor java            more     EXCEPTION END                                   Known workaround Change the code like this     JAVA BEGIN                                                          String anyEndpoint    activemq someQueue   from StringUtils join cxfRouterURI   process new Processor    public void process Exchange exchange  throws Exception   exchange setOut exchange getIn          to anyEndpoint  to StringUtils join cxfServiceURI       JAVA END                                                            ',0
'Multithreaded HTTP invocations doesn t work    Description of the bug http   www nabble com Multithreaded http endpoint to        s      html a           ',0
'DefaultParameterMappingStrategy doesn t load its defaults    This is preventing BeanProcessor from using bean methods with a Message parameter  or bean methods not named  process  that have an Exchange as their parameter  For example  to map to a Message the it tries using the ParameterExpression bodyAs Message class  instead of inmessageExpression      ',0
'spring       jar is twice in the camel distro    I downloaded the latest snapshot apache camel                        zip fromhttp   people apache org repo m  snapshot repository org apache camel apache camel     SNAPSHOT The  zip file contains spring       jar twice camel lib camel lib optionalIs Spring both mandatory and optional And btw it includes an old version of commons logging       jar  v    of commons logging is out    ',0
'bad content length header value in http response    By default HttpBinding class copies all request header attributes from the request to the response including  Content Length   So the consequence is that the response is declaring the same size as the request which can lead to serious truncation problems  the workaround is simply to add the line out removeHeader  Content Length    in the writeResponse method of the httpbinding class allowing jetty to set the right value    ',0
'Mina TCP does not support InOut pattern    See this thread http   www nabble com camel mina TCP InOut exchange td        s      htmlThis builder does not support InOut when a client send a textline to localhost      The client never receives a response url    mina tcp   localhost      textline true  from uri  process new Processor     public void process Exchange e    String in   e getIn   getBody String class      append newline at end to denote end of data for textline codec e getOut   setBody  Hello     in     n         Attached is a patch that fixes this by introducing a new parameter to the URL for fluent builder sync true  ie is there a better name  Using this url instead and the patch then Camel will send a response back to the client mina tcp   localhost      textline true amp sync true   ',0
'camel cxf component can t deal with the exception message in MESSAGE dataFormat    From  Willem JiangTo  camel user activemq apache orgSubject  Re  camel cxf throwing a faultDate  Wed     Mar                    Reply To  camel user activemq apache orgHi Marc It looks like camel cxf component s issue which can t deal with the exception message in MESSAGE dataFormat Could you fill a JIRA for it   I will fix it later this week As usual  you just need throw the exception from the processor   CXF will try to marshal it into a soap fault Regards WillemMarc Giger wrote  gt  Hi  gt  gt  I m trying to get the following camel route working where the gt  dataformat is MESSAGE  gt  gt   lt from uri  cxf bean routerEndpoint dataFormat MESSAGE   gt   gt   lt process ref  decryptProcessor   gt   gt   lt choice gt  gt   lt when gt   gt   lt methodCall bean  endpointSelector  method  matches   gt  gt   lt to uri  cxf bean serviceEndpoint dataFormat MESSAGE   gt   gt   lt  when gt  gt   lt otherwise gt   gt   lt to uri  cxf bean localEndpoint dataFormat MESSAGE   gt   gt   lt  otherwise gt  gt   lt  choice gt   gt  gt  if the endpointSelector bean returns true the request is redirected to gt  a remote webservice  gt  otherwise the request is forwarded to a local cxf service  with gt  local transport  gt  gt  Now  if I invoke the routerEndpoint and somewhere in the pipeline gt  happens an exception  in my case in the decryptProcessor   I get the gt  following Exception in the outFault chain  gt  gt  Mar                  PM org apache cxf phase PhaseInterceptorChain gt  doIntercept INFO  Interceptor has thrown exception  unwinding now gt  org apache cxf interceptor Fault gt  at gt  org apache camel component cxf interceptors RawMessageContentRedirectInterceptor handleMessage RawMessageContentRedirectInterceptor java     gt  at gt  org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java      gt  at gt  org apache cxf interceptor OutgoingChainInterceptor handleMessage OutgoingChainInterceptor java     gt  at gt  org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java      gt  at gt  org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java     gt  at gt  org apache cxf transport servlet ServletDestination doMessage ServletDestination java     gt  at gt  org apache cxf transport servlet ServletController invokeDestination ServletController java      gt  at gt  org apache cxf transport servlet ServletController invoke ServletController java      gt  at gt  org apache cxf transport servlet AbstractCXFServlet invoke AbstractCXFServlet java      gt  at gt  org apache cxf transport servlet AbstractCXFServlet doPost AbstractCXFServlet java      gt  at javax servlet http HttpServlet service HttpServlet java      at gt  javax servlet http HttpServlet service HttpServlet java      at gt  org mortbay jetty servlet ServletHolder handle ServletHolder java      gt  at gt  org mortbay jetty servlet ServletHandler handle ServletHandler java      gt  at gt  org mortbay jetty security SecurityHandler handle SecurityHandler java      gt  at gt  org mortbay jetty servlet SessionHandler handle SessionHandler java      gt  at gt  org mortbay jetty handler ContextHandler handle ContextHandler java      gt  at gt  org mortbay jetty webapp WebAppContext handle WebAppContext java      gt  at gt  org mortbay jetty handler ContextHandlerCollection handle ContextHandlerCollection java      gt  at gt  org mortbay jetty handler HandlerCollection handle HandlerCollection java      gt  at gt  org mortbay jetty handler HandlerWrapper handle HandlerWrapper java      gt  at org mortbay jetty Server handle Server java      at gt  org mortbay jetty HttpConnection handleRequest HttpConnection java      gt  at gt  org mortbay jetty HttpConnection RequestHandler content HttpConnection java      gt  at org mortbay jetty HttpParser parseNext HttpParser java      at gt  org mortbay jetty HttpParser parseAvailable HttpParser java      at gt  org mortbay jetty HttpConnection handle HttpConnection java      at gt  org mortbay io nio SelectChannelEndPoint run SelectChannelEndPoint java      gt  at gt  org mortbay thread BoundedThreadPool PoolThread run BoundedThreadPool java      gt  Caused by  java lang NullPointerException at gt  org apache commons io IOUtils copyLarge IOUtils java       at gt  org apache commons io IOUtils copy IOUtils java      at gt  org apache camel component cxf interceptors RawMessageContentRedirectInterceptor handleMessage RawMessageContentRedirectInterceptor java         gt     more gt  gt  This is because the InputStream is null in gt  RawMessageContentRedirectInterceptor  gt  gt  public void handleMessage Message message  throws Fault   gt  gt  InputStream is   message getContent InputStream class   gt  OutputStream os   message getContent OutputStream class   gt   gt  try    gt  IOUtils copy is  os   gt  is close    gt  os flush    gt    catch  Exception e    gt  throw new Fault e   gt    gt    gt  gt  How can I return a custom soap fault in a processor filter  gt  gt  Thanks  gt  gt  Marc gt  gt    ',0
'SftpConsumer is not connecting and retrieving remote files    SftpConsumer does not connect to server due to patch for CAMEL      The SftpConsumer also checks remote file modification timestamp against last poll timestamp but incorrectly converts seconds to milliseconds using integer math so the resulting conversion is always negative and will never retrieve file  I will attach the fixes to this issue    ',0
'HttpBinding writeResponse doesn t set the response status code  i e  it s always         When writing out an Http response  the HttpBinding should check for the existing of the header HttpProducer HTTP RESPONSE CODE and set it in the response if it s there  This allows requests made via the http component to be output with the correct status code info  If also allows processors in the flow to control the status code by setting the header themselves    ',0
'Support for a full customized soap fault incl  fault code and detail    Don t wrap a Fault in a Fault    ',0
'Javadoc warnings    Get the javadoc warnings reported by the javadoc generator fixed    ',0
'Exception handling of the ErrorHandlerSupport class    When you configure your route builder and say you want to configure two exceptions lets say  NullPointer and Exception  Now say the bean you call as your end point throws a NullPointer  wouldn t you think the NullPointer policy would handle that exception  Well I m seeing sometimes it does and sometimes it doesn t due to the map not keeping the exceptions in any particular order  Is there anyway this could be changed to a LinkedHashMap or a List Issue with class  org apache camel processor ErrorHandlerSupport   ',0
'Invalid jar in binary distribution    The apache camel jar in the binary distribution misses a lot of files  including class and schema files    k in size compared to the    M released jar     ',0
'Camel should raise an exception if parsing of xslt file fails    Consider a Camel route that involves an xslt component  When Camel sets up the route  the XsltBuilder ignores any errors coming from the xerces xml parser and continues constructing the route even though the xslt transformer is not initialized  Later when the route is executed Camel correctly checks if the transformer is initialized and raises an error if not java lang IllegalArgumentException  No transformer configured However in case of a parse error in the xslt file  the whole route becomes unusable and the setup routine that constructs the route should fail with an appropriate error message  A sanity check needs to be added in methodorg apache camel builder xml XsltBuilder setTransformerSource javax xml transform Source     ',0
'file endpoint with noop true does not detect old files moved into a directory       ',0
'camel core does not compile on HP UX    camel core src main java org apache camel model ProcessorType java                  inconvertible types found   org apache camel model ProcessorType lt Type gt  required  org apache camel model InterceptTypecamel core src main java org apache camel model ProcessorType java                  inconvertible types found   org apache camel model ProcessorType lt Type gt  required  org apache camel model InterceptTypecamel core src main java org apache camel model ProcessorType java                  inconvertible types found   org apache camel model ProcessorType lt Type gt  required  org apache camel model InterceptTypecamel core src main java org apache camel model ProcessorType java                  inconvertible types found   org apache camel model ProcessorType lt Type gt  required  org apache camel model InterceptType   ',0
'JMX Connector is not closed by InstrumentationAgentImpl doStop         ',0
'Javadoc   improve summaries etc    The javadoc could use to be polished for eg  summaries statis the Apache license instead of a short brief summary what the class package does etc It s all the javadoc also for the components    ',0
'IntrumentationProcessor does properly record processing time    The InstrumentationLifeCycleStrategy inserts an InstrumentationProcessor interceptor at the end of a route which is intercepted after the processing has been done  The InstrumentationProcessor does not actually record the time spent on the route  It is fixed by inserting InstrumentationProcessor at the beginning of the route and wrapping all the outputs There two MBeans  ManagedRoute and PerformanceCounter  registered for each route eventhough ManagedRoute already extends PerformanceCounter  We probably only need to expose one MBean  The ManagedRoute MBean shows performance attributes and operations  since it extends PerformanceCoutner  but these performance related stuffs don t really work  This is fixed by registering only the ManagedRoute MBean and making the performance related attributes and operations functional This patch supports exposing all processors within a route as PerformanceCounter MBeans so that users are possible to monitor performance at the processor s level With this patch  the org apache camel spi package no longer depends CamelNamingStrategy of the org apache camel management management package  It follows the suggestion mentioned in https   issues apache org activemq browse CAMEL     Another update is to following the JMX spec convention of including a  type  property in the ObjectName  replacing the current  groups  property   This patch also simplify the ManagedRoute s ObjectName a bit by removing builder and group properties  If for some reasons  they need to be in the ObjectName  please add them back    ',0
'camel cxf component not propagating context data    For POJO data formats the CxfProducer currently invokes the following method to invoke on a target serverresult   client invoke operation  parameters toArray    This fails to setup the Request and Response contexts for the out  request  message and in  response  message  It should instead be copying the relevant data from the consumer and invoking the following operation on the Client interfaceObject   invoke BindingOperationInfo oi  Object   params  Map lt String  Object gt  context  throws Exception Likewise the PAYLOAD and MESSAGE data formats are not setting up their contexts before they call the dispatch operation  In fact there is comments in the current codebase       invoke the message prepare the context Map lt String  Object gt  context   new HashMap lt String  Object gt     Map lt String  Object gt  requestContext   new HashMap lt String  Object gt     Map lt String  Object gt  responseContext   new HashMap lt String  Object gt        TODO Get the requestContext from the CamelExchange context put CxfClient REQUEST CONTEXT  requestContext   context put CxfClient RESPONSE CONTEXT  responseContext  The fix should also include a fix for all three data format types   ',0
'NPE from came run with below route codes    With the following route  from  timer   tutorial fixedRate true amp period       setBody  constant   lt  xml version       encoding  UTF     gt  lt greetMe gt Hello World lt  greetMe gt      setHeader  CBR    constant  No    choice   when  header  CBR    isEqualTo  Yes    setHeader   CreditcardValidation   constant  Yes    to   log CBRBean level INFO   to  log XSLT for provider  level INFO    when header  CBR    isEqualTo  No    setHeader   CreditcardValidation   constant  No    to   log XSLT for provider  level INFO   end   choice    when header  CreditcardValidation   isEqualTo  Yes     to  log CCVBean level INFO   to  log XSLT for consumer  level INFO   when  header  CreditcardValidation   isEqualTo  No     to  log XSLT for consumer  level INFO   otherwise    to  log test level INFO   end   running mvn camel run I get the following stack trace java lang NullPointerException at org apache camel view NodeData  lt init gt  NodeData java      at org apache camel view GraphGeneratorSupport getNodeData GraphGeneratorSupport java      at org apache camel view RouteDotGenerator printNode RouteDotGenerator java      at org apache camel view RouteDotGenerator printNode RouteDotGenerator java      at org apache camel view RouteDotGenerator printRoute RouteDotGenerator java     at org apache camel view RouteDotGenerator printRoutes RouteDotGenerator java     at org apache camel view RouteDotGenerator printRoutes RouteDotGenerator java     at org apache camel view RouteDotGenerator generateFile RouteDotGenerator java      at org apache camel view GraphGeneratorSupport generateFile GraphGeneratorSupport java      at org apache camel view GraphGeneratorSupport drawRoutes GraphGeneratorSupport java     at org apache camel spring Main generateDot Main java      at org apache camel spring Main postProcessContext Main java      at org apache camel spring Main doStart Main java      at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel spring Main run Main java      at org apache camel spring Main run Main java      at org apache camel spring Main main Main java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache camel maven RunMojo   run RunMojo java      at java lang Thread run Thread java     the error seems related to the maven camel plugin failing generating the dot file for the route    ',0
'File component   noop does not lock the file during processing    The noop true option does not lock the file during processing as it states in its class javadoc  The parameter is false  It should be true instead  public NoOpFileProcessStrategy     super false       ',0
'camel spring is dependent on spring aop     lt dependency gt   lt groupId gt org springframework lt  groupId gt   lt artifactId gt spring aop lt  artifactId gt   lt version gt   spring version  lt  version gt   lt  dependency gt is needed in pom xml for camel spring as its needed to let camel spring component work out of the box  Without it the camel example spring does not work and blows up with a ClassNotFoundException when you use camel run   ',0
'Multicast default excecutor do not create the enough thread for parallel processing    When I added the loan broker example CAMEL      I found there is no performance improvement when using the parallelly mulitcast After digging into to code  I found we should create the enough thread for the parallel processing    ',0
'CamelTemplate should clear endpoint cache when stopping    Only the producer cache is stopped and cleared    start and stop in camel template protected void doStart   throws Exception   producerCache start      protected void doStop   throws Exception   producerCache stop         stop in producer cache protected void doStop   throws Exception   ServiceHelper stopServices producers values     producers clear        ',0
' patch  Make sure streams get closed    a couple places streams are opened and are not closed  patch fixes this    ',0
'Missing compile step in example readmes    I noticed that some examples that are run via mvn exec java require that the example be compiled first  I ve updated the readmes to include this step      ',0
'ResequencerType createProcessor could throw NPE as stream config does not get initialized     java lang NullPointerException at org apache camel model ResequencerType createStreamResequencer ResequencerType java      at org apache camel model ResequencerType createProcessor ResequencerType java      at org apache camel model ProcessorType createOutputsProcessor ProcessorType java       at org apache camel model ProcessorType createOutputsProcessor ProcessorType java     at org apache camel model InterceptorRef createProcessor InterceptorRef java     at org apache camel model ProcessorType makeProcessor ProcessorType java       at org apache camel model ProcessorType addRoutes ProcessorType java     at org apache camel model RouteType addRoutes RouteType java      at org apache camel model RouteType addRoutes RouteType java     at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java      at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java      at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel ContextTestSupport startCamelContext ContextTestSupport java      at org apache camel ContextTestSupport setUp ContextTestSupport java     at org apache camel processor ResequencerTest setUp ResequencerTest java     at junit framework TestCase runBare TestCase java      at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at org eclipse jdt internal junit runner junit  JUnit TestReference run JUnit TestReference java      at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java        ',0
'DeadLetterChannel default redelivery policy eclipsed expected transactional behaviour in a transacted route    Camel routes get a DLC processor with a redelivery policy  which defaults to redeliverying a message to a destination processor up to   times  In case of a transacted route it is preferable that DLC s delivery policy be reset to a single attempt  so that a fan out transacted route would not hold tx locks on destinations for too long  The DLC s default redelivery policy has also made transactional tests not really testing tx behavior of Camel Components backed runtimes  jms brokers  etc   rather DLC would catch the exception and try to redeliver the message to destination processor and not letting the components to rollback native transactions initiated by components backed runtimes  jms  db The attached patch installs a property into Camel Exchange that indicates weather a route is transacted  This is done in org apache camel spring spi TransactionInterceptor javaDLC then checks if the flow is transacted and sets its redelivery policy to  With this change JMS transactions are actually rolled back and messages are put back into the queue and then consumed again  verifying that brokers support transactions and can redeliver messages into Camel routes that were previously rolled back    ',0
'ResolverUtil can t resolve converter annotations in WebSphere        I have a simple hello world file based ESB that scans a folder for files  invoke a POJO and store the output as a file in another folder Deployed as a WAR file in WebSphere it seems as if Camel     SNAPSHOT can not load the converters needed to converter to String to InputStream for the FileProducer when it is about to store the file The logging output where the ResolverUtil can t find the annotated converters in camel jar itself                 DEBUG ResolverUtil  Thread    org apache camel component file FileComponent  ade ade   Searching for annotations of org apache camel Converter in packages   org apache camel spring converter  org apache camel converter                  DEBUG ResolverUtil  Thread    org apache camel component file FileComponent  ade ade   Found    And the stacktrace org apache camel InvalidPayloadException  No in body available of type  java io InputStream but has value  This is important work temp camel in README txtDone by me  of type  java lang String on  Message  This is important work temp camel in README txtDone by me  on the exchange  Exchange Message  This is important work temp camel in README txtDone by me   at org apache camel util ExchangeHelper getMandatoryInBody ExchangeHelper java      at org apache camel component file FileProducer process FileProducer java     at org apache camel component file FileProducer process FileProducer java     at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java     at org apache camel processor SendProcessor process SendProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor DeadLetterChannel process DeadLetterChannel java        ',0
'jms aggregation does not work    I found this issue when I test Camel       RC  kit  I just add a test case to show the error https   svn apache org repos asf activemq camel trunk components camel jms src test java org apache camel component jms AggregratedJmsRouteTest javaYou can reproduce the error if you remove the x character from xtestJmsMulticastAndAggregration   method BTW the test case works with the Camel       RC     ',0
'camel cxf example build xml is out of date    Need to update the build xml of example camel cxf to support run the examples of camel transport and web service provider API    ',0
'Bean method lost when sending a message from one JMS queue to another    I noticed a problem in JmsBinding java  If Camel has read a JMS message from a queue and that message has a bean method specified in the header   org apache camel MethodName    the method header will removed if that message is written to another queue  Here s the offending code   protected boolean shouldOutputHeader org apache camel Message camelMessage  String headerName   Object headerValue    return headerValue    null  amp  amp   getIgnoreJmsHeaders   contains headerName   amp  amp  ObjectHelper isJavaIdentifier headerName      org apache camel MethodName  fails the check isJavaIdentifier and is excluded from the headers written to the new message  I m not sure the purpose of this check  but this might be an unintended side effect  The call chain is something like this  JmsProducer process JmsBinding makeJmsMessage JmsBinding appendJmsProperties JmsBinding shouldOutputHeader Update  Experimenting later with WebLogic s JMS  I noticed that WebLogic       does not allow this header name  Maybe this was the original motivation for this check  In order to be compatible with WebLogic  perhaps the method header name should changed to something like  CamelMethod   I believe this would correct both problems    ',0
'CXF   Feedback from Eduard on problems with CXF over JMS    See user forum http   www nabble com Fwd  A Using Apache Camel as Transport for Apache CXF with SOAP over JMS td        s      html   ',0
'process method of should check ExchnagePAttern before setting out       ',0
'ProducerTemplate doenst honor exchange pattern when it extracts the result    The code the extracts the result that is returned when you use the sendXXX  requestXXX methods on the producer template doens t honor the exchange pattern  protected Object extractResultBody E result    Object answer   null  if  result    null    Message out   result getOut false   if  out    null    answer   out getBody      else   answer   result getIn   getBody        return answer   It defaults to preferring out messages all the time  But in some circumstances the out body could be set to null but the real response is in the in body Setting the exchange pattern to InOnly doesn t honor this Maybe this ticket is a symptom of the MEP problem that we have in Camel  See the discussion on the dev forum    ',0
'transform   doesnt propogate headers    The new transform   DSL doesn t propogate headers so you can not do  from  direct four    transform   constant  London    to  mock result   And expect that any headers on the exchange at direct four is received after the transform   ',0
'JMX Instrumentation   Nodeid can be null    The processors that is registered in JMX can have null in their id  So the JMX path is processor   gt  null   gt    Either we should replace null with unknown as we do for endpoints  Or try to fix that the id is generated    ',0
'FileProducer   consumes file instead of producing     The strange code in the FileProducer that if the exchange is out capable it will poll the file instead bites us big time James must have had a beer and a fancy moment when he created the code  Something with a dynamic receipentlist where the endpoints should be polled from a file but the expression uses a Producer when the endpoints is created  For the file it should consume instead but it doesn t  Any basically it should consume instead It also bites us when we send an InOut exchange to the FileProducer it will not produce the file but consume it and there is no file so nothing happens This codepublic class FileBackupTest extends ContextTestSupport   public void testMailGeneration   throws Exception   MockEndpoint mock   getMockEndpoint  mock result    mock expectedMessageCount     template requestBody  seda mails    Hello World    mock assertIsSatisfied      protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder     public void configure   throws Exception   from  seda mails    to  file target mails    to  mock result          Would not create a file in target mails folder as we are using template request that is an InOut MEP I will fix it by removing the strange consumer code in the FileProducer and change the fancy dynamic recepientlist test  SimulatorTest   to not use file based endpoints It could be a blocker for the     release and we should consider creating a new RC    ',0
'Exception on using WS Addressing with Apache Camel as Transport    Not sure if this is a bug in CXF or Camel  Please see attached sample project                                                   INFO  Interceptor has thrown exception  unwinding noworg apache cxf binding soap SoapFault  A header representing a Message Addressing Property is not valid and the message cannot be processed at org apache cxf ws addressing MAPAggregator mediate MAPAggregator java      at org apache cxf ws addressing MAPAggregator handleMessage MAPAggregator java      at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java      at org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java     at org apache camel component cxf transport CamelDestination incoming CamelDestination java      at org apache camel component cxf transport CamelDestination ConsumerProcessor process CamelDestination java      at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java     at org apache camel component direct DirectProducer process DirectProducer java     at org apache camel processor SendProcessor process SendProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor DeadLetterChannel process DeadLetterChannel java      at org apache camel processor DeadLetterChannel process DeadLetterChannel java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel component jms EndpointMessageListener onMessage EndpointMessageListener java     at org springframework jms listener AbstractMessageListenerContainer doInvokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer invokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer doExecuteListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer doReceiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer receiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener DefaultMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java      at java lang Thread run Thread java        ',0
'Propagated CXF header s value should not include quotes    CAMEL     fixed the issue of not propagating transport headers  e g  SOAPAction  but it looks like we added quotes around the value  i e  getCustomer becomes  getCustomer    I updated the CustomerServicesTest to illustrate the problem  Also  I cleaned up the client server application xml    ',0
'When getContext   addInterceptorStrategy new Tracer      is added in a RouteBuilder class  then the timer component does not work    When getContext   addInterceptorStrategy new Tracer    is added in a RouteBuilder Class  then the timer component does not start e g  public class RouteBuilder extends RouteBuilder   getContext   addInterceptorStrategy new Tracer     public void configure     from  timer   export    to  bean myBean         ',0
'After the downloading process  the layout of the remote file system doesn t match the local s one    When downloading a directory with a complex layout  mutli level directory   the downloaded files do not reflect the local onemore info here http   www nabble com FTP component  A Possible bug td        s      html   ',0
'CamelConduit s should check the TargetReference when create its instance    CAMEL     shows a ws address error when using Camel transport for CXF After running the code   I found there is no To address tag generated in the soap header  It was caused by the CamelConduit can set right targe reference    ',0
'xpath expression with  header and the header doesnt exist on the in message results in NPE    Using the  headerkey shorthand for xpath expression throws a NPE if the headerkey doesn t exists on the in message We should try to find a better workaround for key doesn t exists  The NPE is thrown by SUN in their xpath engine Check nabble http   www nabble com Camel XPath and no variables found in MessageVariableResolver   What should Camel do  td        s      html   ',0
'AMQP Tests are disabled    The AMQP tests are currently disabled  Adding an older version of MINA  than Camel uses   amp  commons lang to the classpath got the tests passing except for ObjectMessage type test Sending a TextMessage and BytesMessage work fine so I m opening up a separate JIRA for the ObjectMessage issue    ',0
'CamelContext s setErrorHandler is not effect when the jmx agent is disabled    The example applications from Camel     source distribution work correctly on my machine  After comparing the sample Spring XML configuration and my Spring configuration  I noticed there is no jmxAgent element in the sample XML where my configuration has this element  The problem I noticed was that when the disabled attribute of the jmxAgent element is set to true  the redelivery policy does not work  http   www nabble com DeadLetterChannel Configuration Camel     td        s      html a           ',0
'InstrumentationProcessor should catch Throwable    The InstrumentationProcessor currently only catches exception and sets it in the exception  Runtime errors and throwables can be thrown all the way out of the DeadLetterChannel s process method  out of the reach of exception policy    ',0
'Pipeline with thread   processor also redelivers following the default policy independently from the preset  errorhadling    When using the thread processor in a simple pipeline  the exchange will be redelivered   times  default policy  along with the preset errorhandler settings  The code below will re deliver   times to the default DeadLetterChannel and once to the log errorTester  errorHandler deadLetterChannel  log errorTester level ERROR   maximumRedeliveries      from  seda whatEver    thread     process new Processor     public void process Exchange exchange  throws Exception   System out println      Exchg       exchange getExchangeId     throw new Exception  Kaboom               ',0
'MinaConsumerTest failure    The test fails with the following error junit framework ComparisonFailure  expected  lt      Bye World      gt  but was  lt    gt  at junit framework Assert assertEquals Assert java     at junit framework Assert assertEquals Assert java     at org apache camel component mina MinaConsumerTest testSendTextlineSyncText MinaConsumerTest java       One test sends sync the text  World  and the should receive  Bye World  in response                         DEBUG MinaProducer   Message received  Bye World                         DEBUG MinaProducer   Message received                          DEBUG MinaProducer   Message received  Bye                         DEBUG MinaProducer   Message received  There are actually not one  but two messages received which causes the reply to be overridden by the second message  The problem is with the test itself that actually returns  Bye     body     n   Because the test uses the  textline  mina codec  the encoder actually adds another   n   With the textline codec there s one message per line  so the extra  n makes it two lines and hence the extra message  The decoder at the other end suppresses the LineDelimiter   n   so the extra message is actually an empty string Removing the extra  n in the message fixes the test  but the notes above should be considered when camel mina is used with the textline codec    ',0
'HttpProducer premature out message creation    I believe there is incorrect flow in the HttpProducer which can subvert error handling in the route in Camel       in HttpProducer on line    a  blank  out message is set on the exchange Message out   exchange getOut true   try   int responseCode   httpClient executeMethod method        If an IO error occurs on connect  the out message will be passed to the error handling code and if the originating endpoint was a JmsMessage it will cause an NPE when JmsMessage getMessageId   is called  It also obscures the offending message I believe    A similar situation will happen if the HTTP service returned an error code  the out message will contain a reply message even though the processing resulted in an error  e g  HTTP Status         Also  shouldn t this code test whether the exchange expects an  out  altogether  and if not  perhaps  put just put the return HTTP status into the  in  message header   Bill   ',0
'delayer pattern doesn t work in Spring DSL    You can t configure the delayer pattern properly in the Spring DSL currently  I will be attaching a patch for this shortly    ',0
'Should preserve the exchange type in the routing slip    Currently  the routing slip will create a new InOut exchange for each target based on the target endpoint type  This means that someone calling from a jbi endpoint  or other endpoint with custom exchange  into the routing slip will have their exchange type changed  to mostly likely DefaultExchange   I will be including a patch to fix this issue shortly    ',0
'Trailing slash missing in SftpConsumer    When this route   lt camel route gt   lt camel from uri  sftp   someuser hostname path to directory  password secret amp amp directory true amp amp binary true amp amp consumer useFixedDelay false amp amp consumer setNames true amp amp consumer recursive false    gt   lt camel to uri  file    C  camel output     gt   lt  camel route gt is configured the files in the remote directory are download  but subsequent calls of the method  pollDir  result in this exception   Thread    RemoteFileComponent  SftpConsumer WARN Caught SftpException    No such file  Thread    RemoteFileComponent  SftpConsumer WARN Doing nothing for now  need to determine an appropriate action  Thread    RemoteFileComponent  ScheduledPollConsumer WARN An exception occured while polling  Endpoint sftp   someuser hostname path to directory  password secret amp amp directory true amp amp binary true amp amp consumer useFixedDelay false amp amp consumer setNames true amp amp consumer recursive false   No such file    No such fileAs you can see the slash is definitely in the configured route  If I check for the missing slash and add it to the dir variable  line     in SftpConsumer  then the consumer works  if  dir startsWith         dir         dir   Didn t have the time to have a closer look  The root cause of the missing slash is somewhere else    ',0
'Current mina component can t tansfer the exchange fault message body    I just found MinaTransferExchangeOptionTest don t show how to set fault message and the fault message is not a part of MinaPayloadHolder You can t set the exception on the exchange in the processor   sine the camel DeadLetterChannel will try to redeliver the message So we just need to support put the exception which need to send back to the camel client into the fault message body    ',0
'camel mina   codec options should fail if not possible to find i registry    If you configure the codec option on camel mina and you eg make a spelling mistake camel will default to Mina default protocol if not found  We should throw an exception instead so end user knows about this and can fix his spelling mistake    ',0
'SftpEndpoint ignores custom ssh port    SftpEndpoint ignores custom ssh port  It works only if server runs on port       ',0
'element should not require contextPath attribute    In the Java DSL  you can say from  foo   marshal   jaxb   to  bar  In XML I think it would look like this  lt from uri         gt  lt marshal gt   lt jaxb   gt  lt  marshal gt  lt to uri         gt The problem is that you can t use the  lt jaxb   gt  element without the contextPath attribute  which the XSD says is required    ',0
'The should throw the exception if there is some thing wrong with  type attribute    If you specify an invalided class name in the convertBodyTo type  you will get a NPE error  but no detail log information for the type attribute We need to throw the exception for user to locate the error    ',0
'JmsProducer   option requestTimeout isn t configured properly    When sending a JMS message to a destination using camel jms  JMSProducer  I can t get it to use my requestTimeout option in the endpoint configuration  It always default to       template requestBody  activemq queue slow requestTimeout         Hello World   This doesn t work as expected with a timeout of only   sec    ',0
'camel cxf component is not passing request context through correctly    CxfProducer process   is not setting up the request context correctly during createCxfMessage  so later in that method propagateContext has no request data to propagate  Also  we need the exchange properties to be added to the request context  so that non camel components can pass properties into the cxf request context I have coded a fix for this  along with a unit test of course  I ll attach the patch to this JIRA    ',0
'file component consumer regexPattern does not work as expected  matching is applied not only to file  but also to directory     file component consumer regexPattern does not work as expectedexample   from  file   d  the input dir consumer regexPattern     xml   to whatever  should match only files  that has extention  xml the result of the above regexPattern is  that no file will be proccessed  regardless if an existing filename matches the pattern FileConsumer pollFileOrDirectory   applies the regexPattern on the starting directory  the input dir  which will not match    ',0
'Remove deps on persistence api jar  non compliant with the spec    I mentioned a while ago a warning I couldn t explain in eclipse related to the use of  UniqueConstraint in camel jpa It turned out to be due to the fact that camel jpa has a dependency on persistence api  but used for testing openjpa that has a dependency on geronimo jpa     spec  So camel jpa pulls in two different implementation of the same spec  So far so good  It also turns out that the definition of the  UniqueConstraint annotation is different in the two jars  the persistence api  and the camel jpa code as implemented  being non spec compliant  I found other inconsistencies in the persistence api impl and it seems to be based on an older version of the spec  More precisely persistence api annotates the  interface UniqueConstraint with  Target  TYPE   whereas the spec and the geronimo impl use   Target     My recommendation is to replace the dependency on persistence api with the geronimo version  I will commit a change for this in the next hour or so  but leave this issue open  If anybody has any objections please shout and I will revert the change    ',0
'camel spring rest does not build on HP UX    I m getting the following error from camel spring on the HP UX platform  I should be able to reuse a fix I made to a similar problem in CAMEL                             ERROR      FATAL ERROR                         INFO                                                                                                       INFO      com sun mirror apt AnnotationProcessorFactory                         INFO                                                                                                       INFO      Trace                    java lang NoClassDefFoundError  com sun mirror apt AnnotationProcessorFactory                    at com sun tools jxc maven  SchemaGenMojo execute SchemaGenMojo java                         at org apache maven plugin DefaultPluginManager executeMojo DefaultPluginManager java        ',0
'Inconsistency in recipient list documentation     The mail thread at http   tinyurl com   bqre seems to contradict the documentation at http   activemq apache org camel recipient list html         not sure if this is a doc issue  or a camel behavioural issue    ',0
'CamelContext setRoutes   documentation is misleading    The javaDoc for CamelContext setRoutes   states  Sets the routes for this context  replacing any current routes Yet when used  and the context started  startRouteDefinitions   is used first  causing any existing routes created through the definitions  such as those from RouteBuilders  to be re created and started before the new routes provided to setRoutes   are started    ',0
'createConnector attribute for CamelJMXAgentType should default to  true        ',0
'TypeConverter Exception is thrown in the latest build of camel    I have upgraded to the latest of Camel and when I attempt to use the content based router pattern   its now throwing an error The contents of the Message passed is a StringSource object and from debugging camel   the BodyType is a StringSource but it is attempting to convert from a StreamCache to a StringSource  I will try and put a testcase together but if anyone has any ideas of its cause in the meantime  The error it throws it below thanks  Edell No type converter available to convert from type  class org apache servicemix camel JbiMessage to the required type  org w c dom Document with value JbiMessage  org apache servicemix jbi runtime impl NormalizedMessageImpl  d  b borg apache camel NoTypeConversionAvailableException  No type converter available to convert from type  class org apache servicemix camel JbiMessage to the required type  org w c dom Document with value JbiMessage  org apache servicemix jbi runtime impl NormalizedMessageImpl  d  b b at org apache camel impl converter DefaultTypeConverter convertTo DefaultTypeConverter java      at org apache camel impl converter DefaultTypeConverter convertTo DefaultTypeConverter java     at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel builder xml XPathBuilder getDocument XPathBuilder java      at org apache camel builder xml XPathBuilder evaluateAs XPathBuilder java      at org apache camel builder xml XPathBuilder matches XPathBuilder java     at org apache camel builder xml XPathBuilder matches XPathBuilder java     at org apache camel processor ChoiceProcessor process ChoiceProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor DeadLetterChannel process DeadLetterChannel java      at org apache camel processor DeadLetterChannel process DeadLetterChannel java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache servicemix camel CamelProviderEndpoint handleActiveProviderExchange CamelProviderEndpoint java      at org apache servicemix camel CamelProviderEndpoint process CamelProviderEndpoint java     at org apache servicemix common AsyncBaseLifeCycle doProcess AsyncBaseLifeCycle java      at org apache servicemix common AsyncBaseLifeCycle processExchange AsyncBaseLifeCycle java      at org apache servicemix common AsyncBaseLifeCycle processExchangeInTx AsyncBaseLifeCycle java      at org apache servicemix common AsyncBaseLifeCycle   run AsyncBaseLifeCycle java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'BeanInfo   should consider overridden methods when selecting method from operations list    See nabble http   www nabble com BeanInfo chooseMethodWithMatchingBody throws an AmbiguousMethodCallException when there   s no ambiguity td        s      html   ',0
'Component spring  event  is not auto registered by Camel  Add a Event file in the folder META INF services org apache camel compoment of camel spring    Component spring  event  is not auto registered by Camel  Add a Event file in the folder META INF services org apache camel compoment of camel spring    ',0
'camel dot   pipeline is drawn as a multicast    And it has a few other areas as well that could be polished    ',0
'spring integration xsd change breaks component    Thread is here http   www nabble com  HEADS UP  camel spring integration issue td        s      html   ',0
'XQuery creates an empty out message that makes it impossible to chain more processors behind it    When using XQuery the getOut   function is called on the message so if it is not used at a place where the out is filled an empty out message will be created  With this xquery cannot be used for example in setBody  setHeader    and anywhere where the out is not filled An example where this causes real trouble  lt choice gt   lt when gt   lt xquery gt     lt  xquery gt   lt to uri  direct follow    gt   lt  when gt  lt  choice gt     lt from uri  direct follow  gt  lt to     gt  lt to     gt In the patch the out property in the xquery context is filled only if it is not null  With it all of my pipelines seem to work well for me    ',0
'PipelineConcurrentTest java fails randomly    The test fails with an IllegalStateException  Queue full  I believe the reason for this is that there are       messages sent  but the default queue size is       On a fast machine  the queue fills up before the consumer gets a chance to pop the messages from the queue    ',0
'org apache camel Message   hasAttachments is buggy    I must use if  exchange getIn   getAttachments   size    gt      Instead of if  exchange getIn   hasAttachments     As the latter always returns false  Or at least returns false even though the size is  gt      ',0
' unmarshal new JaxbDataFormat  com foo bar    returning JAXBElement    using  unmarshal new JaxbDataFormat  com foo bar   is returning a JAXBElement instead of the desired object that was generated by xjc    ',0
'Can t get the soap header when the camel cxf endpoint working in the PAYLOAD data fromat    When I added a unit test to show how to get the SOAP header from a PAYLOAD camel cxf endpoint   I found the soap header stuff is not working    ',0
'ThroughputLogger incorrectly reports duration      from the apache camel load test                              mponent     d d      INFO aset myDataSet produceDelay      Sent      messages so far  Last group took    millis which is         messages per second  average        The ThroughputLogger used by DataSet resets the duration before reporting it    ',0
'jetty endpoints ignore host specified in URI and expose an endpoint on all interfaces    http   www nabble com Jetty and Mina  A how to bind to    anylocal    AKA    wildcard    address  tp        s     p         html   ',0
'camel jetty   Exchange failures should not be returned as        The code below  protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder     public void configure   throws Exception   errorHandler noErrorHandler     from  jetty http   localhost      myapp myservice   process new MyBookService            public class MyBookService implements Processor   public void process Exchange exchange  throws Exception   throw new IllegalArgumentException  Damm       Will return http response code      We should let end users easily set what response code they want and in case of route failures we should probably return     and return the stracktrace in the body   ',0
'Delayer not working as expected     The delayer expression is not evaluated in my route builder from waitQueueName  delayer header HEADER EXECUTION TIME   bean routerBean  recipientList header HEADER TARGET ROUTE   While the recipientList expression is working the header expression is always ignored  I stepped through the code and saw that in DelayerType createAbsoluteTimeDelayExpression    expr getLanguage    is always null  private Expression createAbsoluteTimeDelayExpression RouteContext routeContext    ExpressionType expr   getExpression    if  expr    null    if  ObjectHelper isNotNullAndNonEmpty expr getLanguage       return expr createExpression routeContext       return null   I have seen that this was changed in        http   issues apache org activemq browse CAMEL         ',0
'camel http   does not remove httpClient xxx URI options    When using the options to configure httpClient using URI option  they should be removed from the uri that is left over to the HTTPProducer http   someserver httpClient soTimeOut     should remove the httpClient xxx so it shttp   someserver   ',0
'ParallelProcessing and executor flags are ignored in Multicast processor    The parallelProcessing and executor arguments are ignored in the constructor of MulticastProcessor  Here is a call that MulticastType makesorg apache camel model MulticastType java return new MulticastProcessor list  aggregationStrategy  isParallelProcessing    threadPoolExecutor  MulticastProcessor ignores parallelProcessing and executor arguments and invokes a chain constructor with     false  null    org apache camel processor MulticastProcessor java public MulticastProcessor Collection lt Processor gt  processors  AggregationStrategy aggregationStrategy  boolean parallelProcessing  ThreadPoolExecutor executor    this processors  aggregationStrategy  false  null  false     public MulticastProcessor Collection lt Processor gt  processors  AggregationStrategy aggregationStrategy  boolean parallelProcessing  ThreadPoolExecutor executor  boolean streaming    notNull processors   processors    this processors   processors  this aggregationStrategy   aggregationStrategy  this isParallelProcessing   parallelProcessing  if  isParallelProcessing    if  executor    null    this executor   executor    else      setup default Executor this executor   new ThreadPoolExecutor processors size    processors size       TimeUnit MILLISECONDS  new ArrayBlockingQueue lt Runnable gt  processors size          this streaming   streaming   Attached a patch but have not tested it  Also need a unit test for this    ',0
'Camel should propagate exception cause in InOnly scenarios    In the case an exception is handled by the DeadLetterChannel  Camel will currently set the exception to null and add an exchange property containing the exception  We should also add this as a message header so that it will be propagated to external services  like a JBI service    ',0
'CxfExchange does not copy unit of work and thus its null and thus NPE is thrown    William could you check this error reported by end userSee nabble http   www nabble com UnitOfWork td        s      html   ',0
'camel mina adds two versions of slf j on the classpath    One version comes from camel mina  version        and one from mina core  version         This causes problems as seen when trying to use camel mina at runtime or in my case deploying to ServiceMix  This is the error I getorg apache xbean kernel ServiceRegistrationException  java lang NoSuchFieldError  name at org apache xbean kernel standard ServiceManagerRegistry registerService ServiceManagerRegistry java      at org apache xbean kernel standard StandardKernel registerService StandardKernel java      at org apache xbean server spring loader SpringLoader load SpringLoader java      at org apache servicemix common xbean AbstractXBeanDeployer deploy AbstractXBeanDeployer java     at org apache servicemix camel CamelSpringDeployer deploy CamelSpringDeployer java     at org apache servicemix common BaseServiceUnitManager doDeploy BaseServiceUnitManager java     at org apache servicemix common BaseServiceUnitManager deploy BaseServiceUnitManager java     at org apache servicemix jbi framework DeploymentService deployServiceAssembly DeploymentService java      at org apache servicemix jbi framework AutoDeploymentService checkPendingSAs AutoDeploymentService java      at org apache servicemix jbi framework AutoDeploymentService checkPendingComponents AutoDeploymentService java      at org apache servicemix jbi framework AutoDeploymentService updateSharedLibrary AutoDeploymentService java      at org apache servicemix jbi framework AutoDeploymentService updateArchive AutoDeploymentService java      at org apache servicemix jbi framework AutoDeploymentService monitorDirectory AutoDeploymentService java      at org apache servicemix jbi framework AutoDeploymentService access     AutoDeploymentService java     at org apache servicemix jbi framework AutoDeploymentService   run AutoDeploymentService java      at java util TimerThread mainLoop Timer java      at java util TimerThread run Timer java     Caused by  java lang NoSuchFieldError  name at org slf j impl SimpleLogger  lt init gt  SimpleLogger java     at org slf j impl SimpleLoggerFactory getLogger SimpleLoggerFactory java     at org slf j LoggerFactory getLogger LoggerFactory java      at org apache mina util NamePreservingRunnable  lt init gt  NamePreservingRunnable java     at org apache mina transport socket nio SocketAcceptor startupWorker SocketAcceptor java      at org apache mina transport socket nio SocketAcceptor bind SocketAcceptor java      at org apache camel component mina MinaConsumer doStart MinaConsumer java     at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext addService DefaultCamelContext java      at org apache camel impl DefaultCamelContext startRoutes DefaultCamelContext java      at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java      at org apache camel spring SpringCamelContext maybeDoStart SpringCamelContext java      at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java     at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org springframework context event SimpleApplicationEventMulticaster   run SimpleApplicationEventMulticaster java     at org springframework core task SyncTaskExecutor execute SyncTaskExecutor java     at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org apache xbean server spring configuration SpringConfiguration  lt init gt  SpringConfiguration java     at org apache xbean server spring configuration SpringConfigurationServiceFactory createService SpringConfigurationServiceFactory java      at org apache xbean kernel standard ServiceManager start ServiceManager java      at org apache xbean kernel standard ServiceManager initialize ServiceManager java      at org apache xbean kernel standard RegistryFutureTask RegisterCallable call RegistryFutureTask java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at org apache xbean kernel standard ServiceManagerRegistry registerService ServiceManagerRegistry java        ',0
'The Mina VM protocol is not recognising codec and other options    Use of the vm protocol appears to ignore any codec options  There could be other options that are missed also Using the same URI but for tcp works fine    ',0
'camel velocity   log j is needed at runtime    See nabble http   www nabble com velocity  A Couldn   t find class org apache velocity runtime log SimpleLog JLogSystem td        s      htmlJon do you mind taking a look at this  you are are good at maven pom s   ',0
'MockEndpoint   sleep for empty test doesnt work    See nabble http   www nabble com MockEndpoint   sleep for empty tests is flawed  td        s      html   ',0
'Throttler appears to  throttle  per thread instead of throttling across multiple threads       ',0
' EndpointInject can not lookup bean if endpoint is defined directly as a consumer  from     I was messing with camel spring and routes using spring DSLI had this part of unit test code  EndpointInject name    myFileEndpoint   protected Endpoint inputFile To lookup an endppoint with the given name myFileEndpointBut if I define it directly then it cannot be found  lt route gt   lt from id  myFileEndpoint  uri  file   target antpathmatcher consumer recursive true amp amp filter  myFilter   gt   lt to uri  mock result   gt   lt  route gt So I have to define it as a loose endpoint as   lt endpoint id  myFileEndpoint  uri  file   target antpathmatcher consumer recursive true amp amp filter  myFilter   gt   lt route gt   lt from ref  myFileEndpoint   gt   lt to uri  mock result   gt   lt  route gt    ',0
'ConcurrentModificationException when stop the camel osgi bundle    ERROR  Error stopping mvn org apache camel camel osgi        org osgi framework BundleException  Activator stop error  java util ConcurrentModificationException at java util HashMap HashIterator nextEntry HashMap java      at java util HashMap ValueIterator next HashMap java      at org apache camel osgi Activator mayBeRemoveComponentFor Activator java     at org apache camel osgi Activator stop Activator java      at org apache felix framework util SecureAction stopActivator SecureAction java      at org apache felix framework Felix  stopBundle Felix java       at org apache felix framework Felix stopBundle Felix java       at org apache felix framework Felix setFrameworkStartLevel Felix java       at org apache felix framework StartLevelImpl run StartLevelImpl java      at java lang Thread run Thread java        ',0
'Pipeline could change the MEP unintended    When exchanges is processed from pipeline they result is copyed as input to the next exchange  However during this copy Camel could potentially change the MEP to InOut  It should respect the original MEP The flaw is in ExchangeHelper copyResultsFixing this also forces end users to use the correct send request method on ProducerTemplate  Now Camel will keep the MEP So if you are using send then its inOnly and then you the there is no result  Use request for InOut MEP s This breaks a few of our own unit testing that was using the wrong method    ',0
'SFTP   Polling   Cannot list directory Error    http   www nabble com SFTP   A Polling   Cannot list directory to        s      html   ',0
'Starting Camel using Main from camel run or Main class   countdown latch is hanging    The countdown latch in MainSupport is not completed when Main is stopping Then we have a hanging thread  Can bee seen using ctrl       ',1
'Can only interact with servicemix http if logging is at DEBUG    Given the following camel DSL from  activemq queue testJms in     to  jbi service urn oms testHttp mep in out     to  activemq queue testJms out    and the following xbean xml for the smx       SU  lt http endpoint  service  oms testHttp   endpoint  testHttp   role  provider   locationURI  http   localhost      testP   gt   lt  http endpoint gt  then Camel operates correctly  or at least as desired  only if DEBUG logging is enabled in the org apache servicemix http package  This seems to be because a DOMSource is returned  which Camel can convert   If the log level is reduced  say to WARN  then a StreamSource object is returned instead which Camel appears unable to convert  This results in stack traces such as ERROR   DeadLetterChannel   Failed delivery for exchangeId  ID davisond laptop                          On delivery attempt    caught  org apache camel RuntimeCamelException  javax xml transform TransformerException  java io IOException  Attempted read on closed stream  org apache camel RuntimeCamelException  javax xml transform TransformerException  java io IOException  Attempted read on closed stream   at org apache camel util ObjectHelper invokeMethod ObjectHelper java       at org apache camel impl converter InstanceMethodTypeConverter convertTo InstanceMethodTypeCo nverter java       ',0
'Jetty HTTP SelectChannelConnector is not closed when CamelContext is stopped    When the camel jetty component is shut down  it leaves Jetty SelectChannelConnector instances active    ',0
'Apache camel example reportincident dependency removed from pom xml    Hi Someone has removed the following dependency from the camel pom xml file    lt dependency gt   lt groupId gt org apache camel lt  groupId gt   lt artifactId gt camel example reportincident lt  artifactId gt   lt version gt   project version  lt  version gt   lt  dependency gt    ',0
'SQL component doesn t handle wrong number of parameters    NPE thrown when null body sent to to SQL endpoint  When to many parameters are set then exception is thrown but nothing wrong happens when to less parameters are set It should be possible to set null as a body as there might be parameterless statement to execute  There should be consistent Exception thrown when wrong number of parameters is set    ',0
'camel ftp   uri set on endpoint has stripped all parameters  that is wrong as they should be there as well    See nabblehttp   www nabble com Camel Remote File Producer   Recipient List Password Issue td        s      htmlThe bug is introduced with CAMEL       ',0
'Two more NullPointerExceptions when context classloader is null    When I applied the CAMEL      fix  thanks Claus  I hit two more NullPointerExceptions caused by code that assumes that the context classloader will never be null Here s the relevant part of one stack trace java lang NullPointerException at org apache camel impl converter AnnotationTypeConverterLoader findPackages AnnotationTypeConverterLoader java     at org apache camel impl converter AnnotationTypeConverterLoader findPackageNames AnnotationTypeConverterLoader java    And the other java lang NullPointerException at org apache camel util ResolverUtil getResources ResolverUtil java      at org apache camel util ResolverUtil find ResolverUtil java      at org apache camel util ResolverUtil find ResolverUtil java     A patch is attached    ',0
'EndpointMessageListener should respect ExchangePattern    In all current releases  org apache camel component jms EndpointMessageListener onMessage   has the following logic  line    in       code     send the replyif  rce    null  amp  amp  body    null  amp  amp   disableReplyTo    sendReply replyDestination  message  exchange  body   This logic should also respect ExchangePattern of the exchange  so I propose a change to    send the replyif  rce    null  amp  amp  body    null  amp  amp  exchange isOutCapable      sendReply replyDestination  message  exchange  body   This change allows a processing pattern where the route may change the ExchangePattern using methods like RouteBuilder inOnly   to switch the MEP at will so that the reply is send at a later time  true asynchronous exchange   This processing pattern is particularly useful for integrating long running services  For example    Java DSLfrom  activemq my queue exchangePattern InOnly   to  predict weather    reply later true      orfrom  activemq my queue    inOnly   to  predict weather    reply later true   The flaw of the current logic makes it impossible to do true asynchronous exchange  because    it does not respect the ExchangePattern     if property  disableReplyTo  is used  the  org apache camel jms replyDestination  property will not be set  see method createExchange in the same file   thus downstream cannot find the reply destination The proposed change can also deprecate the disableReplyTo property and put the MEP concept into good use    ',0
'ExchangeHelper should respect ExchangePattern InOptionalOut    The utility method org apache camel util ExchangeHelper copyResults   is use by many core classes  However  this method does not properly support MEP InOptionalOut Assuming in an InOptionalOut exchange  having no out message means just that         no out message should be sent  then the following lines in this method   Message out   source getOut false   if  out    null    result getOut true  copyFrom out     else      no results so lets copy the last inputshould be changed to    Message out   source getOut false   if  out    null    result getOut true  copyFrom out     else if  result getPattern      ExchangePattern InOptionalOut    result setOut null     else      no results so lets copy the last input   ',1
'JaxbDataFormat is not thread safe    JaxbDataFormat reuses the Marshaller Unmarshaller instances However  according to the https   jaxb dev java net faq index html threadSafety  Marshaller Unmarshaller instances are NOT thread safe  so you can t use them from separate threads at the same time Due to this we are getting exceptions from the JAXB implementation  like ClassCastException or  org xml sax SAXException  FWK    parse may not be called while parsing     Everything works nice with our custom JaxbDataFormat that creates new Unmarshaller Marshaller instance on every request Also  lazy creating instances  like JAXBContext  in getter methods is not thread safe as well  because explicit synchronization is required     ',0
'File component   better support for absolute path    See nabble http   www nabble com File  A using absolute file paths with moveExpressions td         html   ',0
'CamelContext   Add ClassResolver to be used when you need to load a class instead of ObjectHelper loadClass to work in OSGi environments    Add the skeleton and let Willem add the stuff in camel osgi   ',1
'Can not load the QueueBrowserStrategy in OSGI environment    Here is the mail thread which discusses about it http   www nabble com Classloading and OSGI to         html a           ',0
'JMSMessage vanishes attachments    When using this kind of route lt from uri  activemq queue test   gt  lt camel process ref  mailProcessor    gt  lt to uri  smtp   localhost    to user localhost    gt and trying to enrich the message in the mailProcessor withexchange getIn   addAttachment  attachement txt   new DataHandler  Hello world    text plain    The received mail doesn t contains any attachment If the input  from  is a  direct  instead of activemq  it works fine Inspecting source code  MessageSupport copyFrom Message that  doesgetAttachments   putAll that getAttachments    but the child class JmsMessage doesn t    ',0
'StreamCache causes to many type converters not possible    Since StreamCache is default turned on it cause to many convters attempt that fails in MessageSupport No type converter available to convert from type  java lang Integer to the required type  org apache camel StreamCache with value  It hurts performance to much  See nabble http   www nabble com Performance and MessageSupport getBody             td        s      html   ',0
'unmarshaling of data always send the last occurence of the stream    The unmarshaling method of BindyDataFormat  CSV or Key Value Pair  does not create a new model object for each new line of the stream readed   ',0
'Unable to resolve scripting languages in OSGi environment    The OsgiLanguageResolver java created since CAMEL      does not resolve scripting languages by using the default resolver declared in camel script  The DefaultLanguageResolver  however in the non osgi context  handles it properly This leads to NullPointerException while launching a route in an OSGi container using a scripting language  e g  javascript Exception in thread  SpringOsgiExtenderThread    java lang NullPointerException at org apache camel model language ExpressionType createPredicate ExpressionType java      at org apache camel model ExpressionNode createFilterProcessor ExpressionNode java     at org apache camel model WhenType createProcessor WhenType java     at org apache camel model ChoiceType createProcessor ChoiceType java          ',0
'A request route with a topic node incurs a    second wait and refers to the wrong MEP     If a route contains a node that publishes to a topic  the route is incorrectly suspended for a default    seconds at the topic node  Further  JmsProducer java checks the MEP of the original request Exchange and not the endpoint of the topic For example  say I have a route built like this from  activemq queue request    to  generate news    to  activemq topic news    to  do something else   The original request is expecting a reply  However  after the  news  is pumped into the news topic  there is a default    second wait  requestTimeout   This wait always results in the exception   The OUT message was not received within        millis on the exchange     After reading the JmsProducer code  I changed the route to the following from  activemq queue request    to  generate news    to  activemq topic news exchangePattern InOnly    to  do something else   This reveals the root of the bug  which is in the first few lines of method org apache camel component jms JmsProducer process Exchange     public void process final Exchange exchange    final org apache camel Message in   exchange getIn    if  exchange getPattern   isOutCapable     The above if statement checks the MEP of the original request s Exchange and not the new endpoint of the news topic  This makes the above   exchangePattern InOnly  configuration useless  because the original request MEP is InOut  The result is that after that    second time out  the temporary queue for the original request has expired  so the whole request failed  Note that the next node  do something else  is never reached due to the time out exception    ',0
'JMX instrumentation   will add DeadLetterChannel even if you have defined to use NoErrorHandler    See nabble http   www nabble com StreamCaching in Camel     td        s      htmlI will add an unit test that demonstrates this org apache camel processor ChoiceNoErrorHandlerTestThe route should at all time not contain any error handler at all  regardless wether JMX is enabled or not    ',0
'JMS   Sending a message with jmsTemplate    true fails    See nabble http   www nabble com Apache Camel     M  java lang ClassCastException  A org apache camel component jms JmsConfiguration   CamelJmsTeemplate    td        s      htmlThe ClassCastException is because of the old JMS API is used Camel should test whether the template is     or       and cast to correct type    ',0
'Allow parementer append for jms bindings with no endpoint    See test failures in https   issues apache org activemq browse AMQ        ',0
'JmsPollingConsumer   receive does not work    The timeout values to set on Spring JmsTemplate is wrong  We should uses the provided constants on JmsTemplate for this       Timeout value indicating that a receive operation should   check if a message is immediately available without blocking     public static final long RECEIVE TIMEOUT NO WAIT             Timeout value indicating a blocking receive without timeout     public static final long RECEIVE TIMEOUT INDEFINITE WAIT     Is the correct values  Looks like the values was reverted in the camel jms code   ',0
'HTTP URI and HTTP PATH message headers not concatenated when sending messages to http endpoint    When a message is sent to an http endpoint  the path specified in the HTTP PATH header is ignored In the HttpProducer createMethod   of the camel http component  the URI is taken from the HTTP URI header or the endpoint  but the HTTP PATH header is not concatenated  See also the discussion on the mailing list  http   www nabble com Setting a path in message header with Camel http    M  td         html   ',0
'deploy the CamelContext with velocity endpoint into the Servicemix     will get the  NoClassDefFoundError         trace                                                                               debug      Starting Apache Velocity v     compiled                            trace      RuntimeInstance initializing       debug      Default Properties File  org apache velocity runtime defaults velocity properties      debug      Trying to use logger class org apache velocity runtime log Log JLogChute      debug      Couldn t find class org apache velocity runtime log Log JLogChute or necessary supporting classes in classpath org apache log j Layoutjava lang NoClassDefFoundError  org apache log j Layout at java lang Class forName  Native Method  at java lang Class forName Class java      at org apache velocity util ClassUtils getClass ClassUtils java     at org apache velocity util ClassUtils getNewInstance ClassUtils java     at org apache velocity runtime log LogManager createLogChute LogManager java     We can get around this issue by replacing the org apache velocity runtime log Log JLogChute withorg apache velocity runtime log Log JLogChute  and also need to update the Servicemix Velocity bundle to        ',0
'Recursively scan multipart nodes of an email for attachments   not just top level nodes    The current code will only scan the top level of a multipart message  This misses any attachments that are under another node All unit tests still run for me after applying this patch    ',0
'ErrorHandler to be wrapped at every node incl children       ',0
'Converting from stream reader to string changes line breaks other than   n     The IOConverter toString Reader Stream  copies the input data line by line  A line is considered to be terminated by any one of a line feed    n    a carriage return    r    or a carriage return followed immediately by a linefeed  Unfortunately  the lines are always concatenated with   n   so that HL  messages  which use   r   become unusable after conversion Also see http   www nabble com HL  messages become unusable after convertBodyTo   String class    td         html   ',0
'ClassCastException when using camel cxf and camel jms in the InOut same flow    As per thread on FUSE forum http   fusesource com forums thread jspa threadID     amp tstart     I have a camel route that listens on a CXFEndpoint  for MESSAGE data as DOMSource  and routes the message to a JMS queue  Something like  lt route gt  lt from uri  cxf bean passportRequestWS dataFormat MESSAGE   gt  lt to uri  soapProcessor   gt  lt convertBodyTo type  java lang String   gt  lt to uri  activemq queue blah   gt  lt convertBodyTo type  javax xml transform dom DOMSource   gt  lt  route gt My understanding is that the JMS producer will realize that the exchange is InOut  create a temporary queue for the response  and then wait for the response to arrive on the temporary queue before sending the original CXFExchange on along the pipeline  Indeed  this is what I observe  However  I ve discovered a little nasty When the JMSProducer gets in the incoming message  it sets the Out message of the original CXFExchange to a JmsMessage  Then  the pipeline processor calls exchange getOut on the CXFExchange and BANG  we get a class cast exception  Turns out that the CXFExchange getOut   method always casts the message to a CxfMessage  Ouch  Surely this means then that camel cxf can t talk to any producer that does not produce a CXFMessage   very limiting   The response on the form from davsclaus was   Well spotted If just the damn Exchange was final so we had one implementation of it  But I guess we have to thank Java generics for that so the first API had generics for per component Could you create a ticket in JIRA for this As a workaround you can add a processor where you have full access to the Exchange so you can set a CxfMessage as the payload      ',0
'SFTP GenericFileProducer createFileName produces OS normalized file name  that doesn t work with SFTP    The use of File separator and FileUtil normalizePath in GenericFileProducer createFileName produce a OS normalized file name  that doesn t work with SFTPe g  outboundout                 ACC txt which will not work produce a file called outboundout                 ACC txtThe proper name should be outbound out                 ACC txt   ',0
'camel cxf producer loses the content type    camel cxf doesn t put the Protocol Header into the camel message header  so we lost the content type message Here is the mail thread for the discussion http   www nabble com camel cxf content type response header tt         html   ',0
'Warning  Disabling JMSReplyTo as this Exchange is not OUT capable  on false positives in JBossAS     see  http   www nabble com Disabling JMSReplyTo as this Exchange is not OUT capable td        s      html   ',0
'Race condition in IdempotentConsumer    A possible possible race condition exists in the IdempotentConsumer implementation The code first checks in the MessageIdRepository if the message was already processed  If not then it processes the message andafterwards adds the id to the repository   See also http   issues apache org activemq browse CAMEL        There is no lockingbetween the check with  contains  and the insert with  add   So if multiple threads instances try this in parallel for the same id  thenit might happen that more than one finds the id not yet contained in the repository and the same message is processed multipletimes I enclose an extended version of IdempotentConsumerTest which illustrates the problem It is important to note that even if the test demonstrates the issue with an MemoryIdempotentRepository a solution should alsoaddress the case of a database based respository in a clustered environment  So this might imply that some locking mechanism on thedatabase is required    ',1
'JMS Headers are ignored in Producer    Camel jms producer ignores some JMSHeaders  For example the header JMSPriority is ignored   due to the comment in the code  because it is set by the producer  But it should not only be set by the produer due to the received message  it should also be possible to set a priority using the JMSPriority header on the consumer   See also the option preserveMessageQos on the jms endpoint   if every JMSHeader is ignored by the producer it is impossible to set Qos Properties on the message  The reason for the bug is in org apache camel component jms JmsBinding appendJmsProperty  The follwoing JMS message headers are useful for sending messages and therefore should be copied to the jms message  JMSDestination JMSDeliveryMode JMSExpiration JMSPriority JMSMessageID JMSTimestamp   ',0
'Java DSL for multicast  split  aggregate does not use block explicit    When using one of the EIP that uses a nested route for sub processing  typically EIPs that does some sort of aggregation such as multicast  for aggregating a response  split aggregateAnd maybe a few othersThey should use pushBlock so the end   DSL to indicate end of sub route works correctly in Java DSL    ',0
'Simple language support for AND   OR to concat multiple expressions fails if string constants are enclosed in single quotation marks    The current implementation for CAMEL      fails if the string constants in the two expressions are enclosed in single quotation marks as given in the following example   in header foo      abc  and   in header bar          This is due to an issue with the GROUP PATTERN regular expression in SimpleLanguageSupport java  The matching pattern in between the single quotes is greedy and thus does not match correctly    ',0
'bean component should thrown NoTypeConverterException when bean parameter binding cannot convert to method signature type    See nabble http   www nabble com Error not raised by Camel if the    Header type define in a bean is not  correct td        s      html   ',0
'camel example etl   bug in sample about type converter       ',0
'camel cxf defaultHeaderFilterStrategy doesn t filter the Camel releates headers    Here is the mailing thread            which discuss this issue             http   www nabble com  camel cxf  Stripping headers td         html   ',0
'SpringCamelContext will get into endless loop of calling start method if the route service calling the ApplicationContext refresh method in it s initial method    Here is the mail thread which discusses this issue http   www nabble com StackOverFlow error with Camel       tp        p         html   ',0
'Failover load balancer   should prepare exchange before failover    When the failover load balancer does a fail over it only clears the exception When you use dead letter channel or default error handler with redeliveries enabled they will have such information This should also be cleared before failover  So we have a clean and fresh start    ',0
'Unable to read post params from request    If consuming messsages from jetty endpoint there is no way to read post parameters from HttpServletRequest  In example getting HttpServletRequest from body  HttpServletRequest req   exchange getIn   getBody HttpServletRequest class  req getParameterMap   returns allways empty mapThe problem is that jetty Request extractParameters   method is trying to read post parameters from Request getInputStream    But unfortunately someone strips the input stream before and req getInputStream   returns allways   bytesThe workaround for me is to extend DefaultHttpBinding as described in  http   camel apache org jetty htmlMyHttpBinding  javapublic class MyHttpBinding extends DefaultHttpBinding   public void readRequest HttpServletRequest request  HttpMessage message    request getParameterMap    super readRequest request message     calling request getParameterMap   will cache parameters inside jetty Request and it s possible to query params later  without having inputStream   ',0
'Camel builds should not use platform specific encoding    The builds on my Mac use the platform specific encoding thus leading to the following warngin  WARNING  Using platform encoding  MacRoman actually  to copy filtered resources  i e  build is platform dependent We should use the  lt project build sourceEncoding gt  property to specify a project specific encoding  UTF       ',0
'License for One JAR classes not included in camel example spring one jar artifact  Also apache legal files missing    The license for the com simontuffs onejar files is at http   one jar sourceforge net index php page documents amp file license When I build camel example spring neither this license nor the apache license nor apache notice file is in the one jar jar artifact I d suggest disabling the one jar plugin until someone can figure out how to include these files    ',0
'camel irc parsing of channel name and parameters is incorrect    If you try and pass some parameters to camel irc it turns out that camel joins a different IRC channel than expected  for example a URI like irc   camel con irc codehaus org       camel test nickname camel concauses camel to join  camel test nickname camel con and not  camel test with a nickname of camel con  Will attach a patch that addresses this and updates the unit test    ',0
'CustomerServicesWsAddressingTest hangs sometimes    Sometimes I get the following error                    Running org apache camel itest customerrelations CustomerServicesWsAddressingTest                    Exception in thread  DefaultMessageListenerContainer    java lang NullPointerException                    at java lang String indexOf String java                          at java lang String indexOf String java                          at org springframework jms support JmsUtils buildExceptionMessage JmsUtils java                         at org springframework jms listener DefaultMessageListenerContainer handleListenerSetupFailure DefaultMessageListenerContainer java                         at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java                         at java lang Thread run Thread java         which then causes a hang  Its a known issue in spring jms        http   jira springframework org browse SPR        Happens when we try to do a shutdown of the context  Reverting back to       fixes this issue  but we probably don t want to do that   ',0
'camel jms   wrong defaults causes message listener to use new thread when receiving a message    JmsConfiguratiuon have a bad defaultmaxMessagesPerTask  It should be    as we do not want to strict the DefaultMessageListenerContainer to only handle   message per thread    ',0
'jaxb prettyPrint does not work    Here is the mail thread with discuss about it  http   www nabble com JAXB pretty print marshaling td         html   ',0
'camel ftp   Recover from lost connection issue    See nabblehttp   www nabble com FTP Component Network Failure Recovery Problem td         html   ',0
'camel web can t process the endpoint with       schema  like  endpoints mock   results    After improving the endpoint URI schema on http   issues apache org activemq browse CAMEL       camel web s endpoint request URL is changed from http   localhost      endpoints mock results into http   localhost      endpoints mock   results while      is a separator for URL  so camel web will use only the  mock   to get the expected endpoint  which will throw an exception org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  mock  due to  Expected scheme specific part at index    mock  at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      at org apache camel web resources EndpointsResource getEndpoint EndpointsResource java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at com sun jersey server impl uri rules SubLocatorRule invokeSubLocator SubLocatorRule java      at com sun jersey server impl uri rules SubLocatorRule accept SubLocatorRule java     at com sun jersey server impl uri rules RightHandPathRule accept RightHandPathRule java      at com sun jersey server impl uri rules SubLocatorRule accept SubLocatorRule java      at com sun jersey server impl uri rules RightHandPathRule accept RightHandPathRule java      at com sun jersey server impl uri rules ResourceClassRule accept ResourceClassRule java     at com sun jersey server impl uri rules RightHandPathRule accept RightHandPathRule java      at com sun jersey server impl uri rules RootResourceClassesRule accept RootResourceClassesRule java     at com sun jersey server impl application WebApplicationImpl  handleRequest WebApplicationImpl java      at com sun jersey server impl application WebApplicationImpl handleRequest WebApplicationImpl java      at com sun jersey server impl application WebApplicationImpl handleRequest WebApplicationImpl java      at com sun jersey spi container servlet WebComponent service WebComponent java      at com sun jersey spi container servlet ServletContainer service ServletContainer java      at com sun jersey spi container servlet ServletContainer doFilter ServletContainer java      at com sun jersey spi container servlet ServletContainer doFilter ServletContainer java      at org mortbay jetty servlet ServletHandler CachedChain doFilter ServletHandler java       at com opensymphony module sitemesh filter PageFilter parsePage PageFilter java      at com opensymphony module sitemesh filter PageFilter doFilter PageFilter java     at org mortbay jetty servlet ServletHandler CachedChain doFilter ServletHandler java       at org mortbay jetty servlet ServletHandler handle ServletHandler java      at org mortbay jetty security SecurityHandler handle SecurityHandler java      at org mortbay jetty servlet SessionHandler handle SessionHandler java      at org mortbay jetty handler ContextHandler handle ContextHandler java      at org mortbay jetty webapp WebAppContext handle WebAppContext java      at org mortbay jetty handler HandlerCollection handle HandlerCollection java      at org mortbay jetty handler HandlerWrapper handle HandlerWrapper java      at org mortbay jetty Server handle Server java      at org mortbay jetty HttpConnection handleRequest HttpConnection java      at org mortbay jetty HttpConnection RequestHandler headerComplete HttpConnection java      at org mortbay jetty HttpParser parseNext HttpParser java      at org mortbay jetty HttpParser parseAvailable HttpParser java      at org mortbay jetty HttpConnection handle HttpConnection java      at org mortbay io nio SelectChannelEndPoint run SelectChannelEndPoint java      at org mortbay thread QueuedThreadPool PoolThread run QueuedThreadPool java     Caused by  java net URISyntaxException  Expected scheme specific part at index    mock  at java net URI Parser fail URI java       at java net URI Parser failExpecting URI java       at java net URI Parser parse URI java       at java net URI  lt init gt  URI java      at org apache camel util URISupport normalizeUri URISupport java      at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java             more   ',0
'CachedOutputStream not cleaning up tmp files when using file based caching    A recent feature of Camel s CachedOutputStream is to serialize any messages over   k to disk  In some cases the  tmp message files are not being cleaned up    ',0
'Route JMX attributes not being updated    Some routes are not getting instrumented using JMX and we get the following WARN for those on startup InstrumentationLifecycleStrategy  Route has not been instrumented for endpoint     It turns out that its only those routes that have an onException handler as the first processor in the route  e g  lt route id  per msg route  errorHandlerRef  RouteErrorHandler  gt   lt from uri  jms MSG IN   gt   lt onException gt   lt exception gt can retry Exception lt  exception gt   lt redeliveryPolicy ref  UnlimitedRedeliveryPolicyConfig   gt   lt handled gt  lt constant gt true lt  constant gt  lt  handled gt   lt  onException gt   lt bean ref  Formatter  method  formatInput   gt      lt     More info and proposed fix at http   www nabble com Routes JMX attributes not updated in     M  td         html a           ',0
'camel cxf bundle doesn t specify any Import Package version    The camel cxf component is currently generated against CXF version       As a result  the camel cxf module as well as the camel cxf bundle require CXF      More importantly  that bundle does not work correctly with CXF      note that this is an expected behavior  CXF has had API changes with its     version  Now  the trouble is that the camel cxf JAR s MANIFEST has an Import Package on org apache cxf   components without specifying any version  As a result  when it looks for CXF and both CXF     and     are present on the platform  it sometimes chooses the wrong one To solve this issue  version specifiers should be added to the Import Package declarations of the camel cxf bundle  I guess an import on version     would be enough  we don t need to specify       explicitely  CheersS  Ali Tokmenhttp   ali tokmen com    ',0
'NPE thrown when DEBUG logging on    Stack trace org apache camel language bean RuntimeBeanExpressionException  Failed to invoke method  doSplit on MySplitter due to  java lang NullPointerException at org apache camel language bean BeanExpression evaluate BeanExpression java     at org apache camel language bean BeanExpression evaluate BeanExpression java     at org apache camel processor Splitter createProcessorExchangePairs Splitter java       Caused by  java lang NullPointerException at org apache camel util MessageHelper extractBodyForLogging MessageHelper java      at org apache camel impl DefaultMessage toString DefaultMessage java     at java lang String valueOf String java       at java lang StringBuilder append StringBuilder java      at java util AbstractCollection toString AbstractCollection java      at java lang String valueOf String java       at java lang StringBuilder append StringBuilder java      at org apache camel component bean BeanProcessor process BeanProcessor java     Steps to reproduce    Create simple route with splitter pattern  e g  lt route gt   lt from uri  jms IN QUEUE   gt   lt split gt  lt method bean  MySplitter  method  doSplit   gt   lt to uri  log route log   gt   lt  split gt  lt  route gt    Set DEBUG logging on for org apache camel classes  e g log j logger org apache camel DEBUG   Fire message into route   message fails with NPE inside Camel   ',0
'JmsKeyFormatStrategy not used consistently and JmsMessage getHeader   not returning correct value    On entry to a route from a JMS endpoint configured with PassthroughJmsKeyFormatStrategy the headers with underscores     are passed through correctly However  when any header value in the message is then changed  the original headers are added back into the message using the DefaultJmsKeyFormatStrategy  For example  sending a JMS message with headers HEADER   VALUE  HEADER   VALUE  we do see just these two headers in the message received into the route However  if we then set a header value in the route  say HEADER   VALUE    we now see the headers HEADER   VALUE  HEADER   VALUE  HEADER   VALUE  HEADER   VALUE  For some reason in the set header process the original message headers and values get added into the message after being passed through the DefaultJmsKeyFormatStrategy  This has the implication of unnecessary duplication of the headers Also  when a message header is accessed using the getHeader key  method it also goes through the DefaultJmsKeyFormatStrategy to decode the key that is passed  In the example above  if after we have updated  HEADER    to  VALUE     we do message getHeader  HEADER     this goes through the DefaultJmsKeyFormatStrategy and actually gets executed as message getHeader  HEADER     which returns VALUE    wrong   Note  if instead we lookup the header through message getHeaders   which returns the all headers in a Map  we can correctly access the  HEADER    key   Why is getHeader key  even going through the KeyFormatStrategy anyway if setHeader   isn t     ',0
'template   consumerTemplate  service  proxy can t be set with right camel context if there are more than one camel context in the spring application context    Current camel support to define a producer template OUTSIDE a camel context  I think it works well just like the autowire function which is provided in Spring If there more than two Camel context in the Spring Application context   the user should specify the camel context which the template should use But I have a concern that even we put the template INSIDE the camel context  the template will not be set with a right version of camel context  since we use a CamelPostProcessor to inject CamelContext So I did a quick test on the current Camel code and found there is a bug if there are more one CamelContext         CamelPostProcessor will inject the last create camel context into the CamelContextAware object  Since it is not easy to add the camelContext referece id into the template element attribute  we d better just support to parser these elements inside the camel context    ',0
'Bean component   invokes onMessage from javax jms MessageListener even though a specific method name have been provided    This is only an issue when your bean implements javax jms MessageListener and then specify a specific method to use  then Camel will still prefer to use the onMessage method    ',0
'Xmpp consumer stops consuming after some time    Noticed after creating some more complicated routes that my xmpp consumers would stop receiving messages  This patch sorts that out  I also improved some of the logging in the producer and consumer classes and tweaked the XmppRouteChatTest to work properly    ',0
'Unit test failures on Windows in       release      failures in camel core that do not seem to occur on linux and mac Failure Details testCannotDeleteFile junit framework AssertionFailedError  Should have thrown an exceptionorg apache camel component file strategy GenericFileDeleteProcessStrategyTest     testCacheStreamToFileAndNotCloseStream junit framework AssertionFailedError  we should have no temp file expected  lt   gt  but was  lt   gt org apache camel converter stream CachedOutputStreamTest     testRouteIsCorrectAtRuntime junit framework AssertionFailedError  expected  lt   gt  but was  lt   gt org apache camel processor ChoiceWithEndTest      ',0
'HTTP component throwing IllegalArgumentException in M  release while bridging between jetty and http    The CamelHttpUri header is not set to the right value while routing between jetty and http components  Because of which the construction of the HttpMethod in the http component fails and throws up an IllegalArgumentException Detailed discussion regarding this issue can be found in this following thread http   www nabble com HTTP component throwing IllegalArgumentException in M  release  tt         html a           ',0
'Unit test failure in Windows for StreamCache  Temp file is not deleted    The temporary file is not deleted  I think the file is still open in some other stream  The problem is I have no idea how to find this place  Like in issue CAMEL      this only happens on windows as on unix you can delete a file even if there are open streams testStreamCacheToFileShouldBeDeletedInCaseOfException java lang AssertionError  There should be no files expected  lt   gt  but was  lt   gt org apache camel component jetty HttpStreamCacheFileTest      ',0
'ServiceSupport   incorrect state after restart    This hampers restart of services by example the overhauled JMX in CAMEL      When a service was restarted it had the following incorrect state  started   true starting   false stopped   true stopping   falseThe stopped should have been changed to false as its started    ',0
'Graceful shutdown problem    While running camel example spring jms in    M   I ve noticed that GracefulShutdownService can t stop Camel  It calls Main getInstance   stop   but this call blocks and never returns  With enabled debug logging for org springframework jms  console outputs     aultMessageListenerContainer        efaultMessageListenerContainer DEBUG Waiting for shutdown of message listener invokers     aultMessageListenerContainer        efaultMessageListenerContainer DEBUG Still waiting for shutdown of   message listener invokersRelated forum thread http   www nabble com Garceful shutdown bug in    M   td         htmlDado   ',0
'camel jpa exports the org apache camel processor interceptor which leads to a split package    The package is already exported by camel core  so the class in this package needs to be moved to another package    ',0
'NPE when the bundle is camel osgi bundle is inactive    The stack trace  java lang NullPointerException atorg apache camel osgi OsgiFactoryFinder getResource OsgiFactoryFinder java     atorg apache camel osgi OsgiFactoryFinder findClass OsgiFactoryFinder java     atorg apache camel component file GenericFileEndpoint createGenericFileStrategy GenericFileEndpoint java      atorg apache camel component file GenericFileEndpoint getGenericFileProcessStrategy GenericFileEndpoint java      atorg apache camel component file GenericFileConsumer processExchange GenericFileConsumer java      atorg apache camel component file GenericFileConsumer processBatch GenericFileConsumer java      atorg apache camel component file GenericFileConsumer poll GenericFileConsumer java     atorg apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java     at java util concurrent Executors RunnableAdapter call Executors java      atjava util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      atjava util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      atjava util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Here is the mail thread            which discusses about this issue            http   www nabble com Error using camel file with windows tt         html a           ',0
'XmppMessages don t get converted to strings    This has been bugging me for awhile  when you have a route using XMPP you get instances of XmppMessage in your route rather than just a string containing the body of the XmppMessage  Tracked that down and took out the work arounds I had previously put in my contributed xmpp tests    ',0
'Improper configuration of MINA connector and acceptor instances  Better producer    A sample scenario where both MINA producer s  and consumer s  are used in the same route  e g  some kind of dispatching or proxying  from  mina tcp   localhost      lazySessionCreation true amp sync true    to  mina tcp   localhost      lazySessionCreation true amp sync true   from  mina tcp   localhost      lazySessionCreation true amp sync true    process  prepare answer   Due to improper configuration of MINA acceptor and connector instances in MinaComponent createSocketEndpoint    no more than    incoming threads can be served at port              the producer becomes unable to open an outgoing session  This is actually an issue of MINA  not of Camel         a test application written using  raw  MINA shows the same behaviour A solution is to apply configuration rules described  e g   at http   mina apache org configuring thread model html  as done in the attached patch Moreover  the standard Camel MINA producer is not thread safe         actually a well known point  A second attached file contains a thread pool based reentrant version  which can be efficiently used for TCP endpoints with both parameters  lazySessionCreation  and  sync  set to true    ',0
'Camel Bean component should not remember the last called method name if the bean s method name is not explicitly specified     Here is the mail thread which discuses this issue  http   www nabble com Bean endpoint in a route is holding reference to the last used methodName and does not invoke Camel   s Bean binding tp        p         html   ',0
'Redundant interceptions when using interceptSendToEndpoint    See http   www nabble com Issue with interceptSendToEndpoint to        s      html   ',0
'Dynamic Recipient List   Comma is always delimiter even if custom specified    See nabblehttp   www nabble com Dynamic RecipientList delimeter issue td         html   ',0
'camel mail   extracting mails with headers using multi values inserts duplicates    Sending a message with headers that contains   values such a String   with   values will result on the other side when consuming that mail message to contain a header with   entries  There should only be   entry with the   values    ',0
'http polling consumer does not support timeout    When using the consumer template to receive from a remote http service using camel http the method receive       that uses a   sec timeout does not work as expected Camel does not use the      value    ',0
'velocity endpoint should not remember the last used template uri    If there are two velocity endpoint linked with the pipeline  you will find the last velocity will not effect anymore    ',0
'Support Issue  Routing a TextMessage from a  to a JMS queue    I did not find any example or documentation for using the  lt camel proxy gt  with a simple send String textMessage  method and a route sending the textMessage String as body to a JMS queue  for example  The thing is that  lt camel proxy gt  creates a messages with body of type BeanInvocation  I would expect that Camel provides some builtin transformer converter to change the body to the String argument  so that the message on the queue is of type TextMessage Did I miss something    ',0
'camel jms   Sending Object message should fail if payload cannot be converted to serializable    If not a null message is created and send See nabble http   old nabble com JPA  A Could not pass Object from jpa to jms to         html   ',0
'The converter s MandatoryConvert method doesn t throw the exception when the value is null       ',0
'Some methods of SftpOperations create streams that are never closed    Where SftpOperations creates streams for storing or retrieving files via ChannelSftp  these streams are not always closed  For example  the retrieveFileToStreamInBody method creates an OutputStream object  but never closes it    ',0
'Type converter   Should respect Future ExecutionException as not failed to convert but some other error       ',0
'RSS Component   parameter filtering not working    I have tried to sort RRS feeds or to split the entries as described in the documentation  The problem is that the parameters that are to be consumed by Camel are passed through to the endpoint  who does not understand the parameters Here is my code  from  rss     feedLocation    sortEntries true amp feedHeader true   marshal   rss     where feedLocation    http   www iafrica com pls cms grapevine xml It results in java io FileNotFoundException  http   www iafrica com pls cms grapevine xml feedHeader true amp sortEntries true at sun net www protocol http HttpURLConnection getInputStream HttpURLConnection java       at java net URL openStream URL java       at org apache camel component rss RssUtils createFeed RssUtils java     at org apache camel component rss RssEntryPollingConsumer createFeed RssEntryPollingConsumer java     at org apache camel component feed FeedEntryPollingConsumer poll FeedEntryPollingConsumer java     at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'FTP Component issue with tempPrefix or tempFileName    using FTP component to push files via FTP I am facing issues pushing a file on subfolder when using tempPrefix or tempFileName  route sample  from  direct start   to  ftp   username ipaddress password mypass amp fileName   camel test message txt amp tempFileName   file name noext  tmp   no errors are raised if the final destination file doesn t exists  if it exists following error is raised  Exception in thread  main  org apache camel CamelExecutionException  Exception occurred during execution on the exchange  Exchange     Message  Message content       at org apache camel util ObjectHelper wrapCamelExecutionException ObjectHelper java        at org apache camel util ExchangeHelper extractResultBody ExchangeHelper java       at org apache camel impl DefaultProducerTemplate extractResultBody DefaultProducerTemplate java       at org apache camel impl DefaultProducerTemplate extractResultBody DefaultProducerTemplate java       at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java       at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java       at com opta camel test FTPTester main FTPTester java     Caused by  java lang NullPointerException  at org apache camel component file remote FtpOperations existsFile FtpOperations java      at org apache camel component file GenericFileProducer processExchange GenericFileProducer java      at org apache camel component file remote RemoteFileProducer process RemoteFileProducer java      at org apache camel processor SendProcessor   doInProducer SendProcessor java      at org apache camel processor SendProcessor   doInProducer SendProcessor java      at org apache camel impl ProducerCache doInProducer ProducerCache java       at org apache camel processor SendProcessor process SendProcessor java      at org apache camel management InstrumentationProcessor process InstrumentationProcessor java      at org apache camel processor DelegateProcessor processNext DelegateProcessor java      at org apache camel processor DelegateProcessor proceed DelegateProcessor java      at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java      at org apache camel management InstrumentationProcessor process InstrumentationProcessor java      at org apache camel processor RedeliveryErrorHandler processExchange RedeliveryErrorHandler java       at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java       at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor DefaultErrorHandler process DefaultErrorHandler java      at org apache camel processor DefaultChannel process DefaultChannel java       at org apache camel processor UnitOfWorkProcessor processNext UnitOfWorkProcessor java      at org apache camel processor DelegateProcessor process DelegateProcessor java      at org apache camel management InstrumentationProcessor process InstrumentationProcessor java      at org apache camel component direct DirectProducer process DirectProducer java      at org apache camel impl ProducerCache   doInProducer ProducerCache java       at org apache camel impl ProducerCache   doInProducer ProducerCache java       at org apache camel impl ProducerCache doInProducer ProducerCache java       at org apache camel impl ProducerCache sendExchange ProducerCache java       at org apache camel impl ProducerCache send ProducerCache java      at org apache camel impl DefaultProducerTemplate send DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java             more   ',0
'ActivityMonitorEngine uses    parameters in JPAQL  which don t work with  at least  the hibernate JPA provider     Trying to just replace my RouteBuilder with a ProcessBuilder to start moving towards using BAM  I converted everything over to JPA  to make bam happy  but then found that it still explodes   Full stack trace below Line    of ActivityMonitorEngine has this JPAQL  List lt ActivityState gt  list   template find  select x from     ActivityState class getName       x where x timeOverdue  lt       timeNow  The    named numbered parameter seems to not be supported by hibernate s JPA provider I can t find much of any documentation on this  could this just be made a normal positional  I can t even try out the BAM module without this                         ERROR      org apache camel bam processor ActivityMonitorEngine ActivityMonitorEngine         lt Caught  org springframework dao InvalidDataAccessApiUsageException  org hibernate QueryParameterException  could not locate named parameter              nested exception is java lang IllegalArgumentException  org hibernate QueryParameterException  could not locate named parameter             gt org springframework dao InvalidDataAccessApiUsageException  org hibernate QueryParameterException  could not locate named parameter              nested exception is java lang IllegalArgumentException  org hibernate QueryParameterException  could not locate named parameter             at org springframework orm jpa EntityManagerFactoryUtils convertJpaAccessExceptionIfPossible EntityManagerFactoryUtils java      at org springframework orm jpa vendor HibernateJpaDialect translateExceptionIfPossible HibernateJpaDialect java     at org springframework dao support DataAccessUtils translateIfNecessary DataAccessUtils java      at org springframework orm jpa JpaAccessor translateIfNecessary JpaAccessor java      at org springframework orm jpa JpaTemplate execute JpaTemplate java      at org springframework orm jpa JpaTemplate executeFind JpaTemplate java      at org springframework orm jpa JpaTemplate find JpaTemplate java      at org apache camel bam processor ActivityMonitorEngine   doInTransactionWithoutResult ActivityMonitorEngine java     at org springframework transaction support TransactionCallbackWithoutResult doInTransaction TransactionCallbackWithoutResult java     at org springframework transaction support TransactionTemplate execute TransactionTemplate java      at org apache camel bam processor ActivityMonitorEngine run ActivityMonitorEngine java     at java lang Thread run Thread java     Caused by  java lang IllegalArgumentException  org hibernate QueryParameterException  could not locate named parameter             at org hibernate ejb QueryImpl setParameter QueryImpl java      at org hibernate ejb QueryImpl setParameter QueryImpl java      at org springframework orm jpa JpaTemplate   doInJpa JpaTemplate java      at org springframework orm jpa JpaTemplate execute JpaTemplate java            moreCaused by  org hibernate QueryParameterException  could not locate named parameter             at org hibernate engine query ParameterMetadata getNamedParameterDescriptor ParameterMetadata java     at org hibernate engine query ParameterMetadata getNamedParameterExpectedType ParameterMetadata java      at org hibernate impl AbstractQueryImpl determineType AbstractQueryImpl java      at org hibernate impl AbstractQueryImpl setParameter AbstractQueryImpl java      at org hibernate ejb QueryImpl setParameter QueryImpl java             moreLine      ',0
'ftp uploads can fail  File operation failed   Connection closed without indication   Code         Looks like something that was fixed for CAMEL     didn t make it into     On        this is not a warning  this is a fatal SEVERE  Exception occured during execution on the exchange  Exchange     Message  XXXXXX     org apache camel CamelExecutionException  Exception occured during execution on the exchange  Exchange     Message  XXXXX      at org apache camel util ObjectHelper wrapCamelExecutionException ObjectHelper java       at org apache camel util ExchangeHelper extractResultBody ExchangeHelper java      at org apache camel impl DefaultProducerTemplate extractResultBody DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate requestBody DefaultProducerTemplate java      at    into my code here   Caused by  org apache camel component file GenericFileOperationFailedException  File operation failed  Connection closed without indication   Code      at org apache camel component file remote FtpOperations disconnect FtpOperations java      at org apache camel component file remote RemoteFileProducer disconnect RemoteFileProducer java     at org apache camel component file remote RemoteFileProducer handleFailedWrite RemoteFileProducer java     at org apache camel component file GenericFileProducer processExchange GenericFileProducer java      at org apache camel component file remote RemoteFileProducer process RemoteFileProducer java     at org apache camel processor SendProcessor   doInProducer SendProcessor java     at org apache camel processor SendProcessor   doInProducer SendProcessor java     at org apache camel impl ProducerCache doInProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor RedeliveryErrorHandler processExchange RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java     at org apache camel processor DefaultErrorHandler process DefaultErrorHandler java     at org apache camel processor DefaultChannel process DefaultChannel java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor UnitOfWorkProcessor processNext UnitOfWorkProcessor java     at org apache camel processor DelegateProcessor process DelegateProcessor java     at org apache camel component direct DirectProducer process DirectProducer java     at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache doInProducer ProducerCache java      at org apache camel impl ProducerCache sendExchange ProducerCache java      at org apache camel impl ProducerCache send ProducerCache java      at org apache camel impl DefaultProducerTemplate send DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java             moreCaused by  org apache commons net ftp FTPConnectionClosedException  Connection closed without indication  at org apache commons net ftp FTP   getReply FTP java     This is  not what I want  and there doesn t seem to be any keep alive or other option on the ftp  component    ',0
'Logger logs INFO level messages at DEBUG level    The Camel logger logs INFO level messages at the DEBUG level  CAMEL      fixed the problem in one of two cases  logging without an exception   but it is still broken for logging with an exception  Patch to fix this is attached    ',0
'camel cxf   Empty body causes http error     even for GET when using cxfbean    CxfSoapBinding has a bug that it mandates a body to exist  But when you send a GET then there is of course no body The code below fixed this in the method getCxfInMessage    body can be empty in case of GET etc  InputStream body   message getBody InputStream class   if  body    null    answer setContent InputStream class  body     else if  message getBody      null       fallback and set the body as what it is answer setContent Object class  body    Willem Tam can you review if that is okay  Maybe the code can be more finer to check the HTTP method and in cases of GET etc  it allows no body I will commit my fix to get the unit tests passing    ',0
'JcrProducer node creation throws javax jcr PathNotFoundException when using exchange ID as node name    To reproduce  use the camel jcr component without specifying a node name in the message properties  JcrProducer will attempt to use the exchange ID as the node name  but in ServiceMix    this ID contains path separator characters  which results in a PathNotFound exception when the producer attempts to create the node  IMHO  the producer should attempt to create parent nodes as needed when the value of either the exchange ID or the property named JcrConstants JCR NODE NAME contain path separators    ',0
'RedeliveryPolicy   Setting delay   maxDelay should should also set max value    See nabblehttp   old nabble com maximumRedeliveryDelay applies even if you are not using exponential back off to         html   ',0
'CaseInsensitiveMap should be serializable    CaseInsensitiveMap should be fully serializableSee nabblehttp   old nabble com DataSet header   BCamelDataSetIndex  D   D causes failure to         html   ',0
'camel bean   Classes enhanced by CGLIB should skip cglib methods    See nabblehttp   old nabble com AmbiguousMethodCallException on transactional spring bean to         html   ',0
'Mock component   expectedBodiesReceived List  does not work as expected    Java chooses the varargs methods always instead of the List method    ',0
'Exception during mail connection requires folder to be reset    I think that this problem may still be around with     SNAPSHOT http   fusesource com forums thread jspa threadID     amp tstart  I noticed that I had a pop  server outage and then subsequently had a similar problem i e  IllegalStateException  folder not open Here s when the outage started                            MailComponent  WARN ultPollingConsumerPollStrategy   Consumer Consumer pop         could not poll endpoint  pop        caused by  Connect failedjavax mail MessagingException  Connect failed  nested exception is  java net NoRouteToHostException  No route to host at com sun mail pop  POP Store protocolConnect POP Store java      at javax mail Service connect Service java      at org apache camel component mail MailConsumer ensureIsConnected MailConsumer java      at org apache camel component mail MailConsumer poll MailConsumer java     at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java      at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Caused by  java net NoRouteToHostException  No route to host at java net PlainSocketImpl socketConnect Native Method  at java net PlainSocketImpl doConnect PlainSocketImpl java      at java net PlainSocketImpl connectToAddress PlainSocketImpl java      at java net PlainSocketImpl connect PlainSocketImpl java      at java net SocksSocketImpl connect SocksSocketImpl java      at java net Socket connect Socket java      at java net Socket connect Socket java      at com sun mail util SocketFetcher createSocket SocketFetcher java      at com sun mail util SocketFetcher getSocket SocketFetcher java      at com sun mail pop  Protocol  lt init gt  Protocol java     at com sun mail pop  POP Store getPort POP Store java      at com sun mail pop  POP Store protocolConnect POP Store java             moreThis went on for about a minute or so and there was no more in the log file until several hours later   in fact when an email appeared in the INBOX  I know this because my personal email account was copied on the email and so I have the timestamp I then get the following message every time I poll the server and have to re start my application to get over it                            MailComponent  ERROR MailConsumer   Folder not openjava lang IllegalStateException  Folder not open at javax mail Folder getMessages Folder java      at javax mail Folder search Folder java       at org apache camel component mail MailConsumer poll MailConsumer java      at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java      at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     I took a look at MailConsumer java and note the following code     if   connected       if  LOG isDebugEnabled         LOG debug  Connecting to MailStore      endpoint getConfiguration   getMailStoreLogInformation             store   sender getSession   getStore config getProtocol        store connect config getHost    config getPort    config getUsername    config getPassword         If you re not connected then how is it possible to have a folder  Following this logic my recommendation is to insert the following at line         store connect config getHost    config getPort    config getUsername    config getPassword     folder   null         ',0
'Improper ordering of MINA filters    When we want to use SSL on the consumer side  MINA s SSLFilter must be inserted as the very first filter into the chain  or  at least  as the second one after an ExecutorFilter   but it is currently not possible  because MinaComponent createSocketEndpoint   always inserts a ProtocolCodecFilter at the very beginning by calling configureCodecFactory   A proposed workaround is to introduce an additional URL parameter noDefaultCodec which prohibits the installation of the default protocol codec filter  The protocol codec must be then configured manually  e g  using Spring  lt bean id  sslFilter  class  org apache mina filter SSLFilter  gt   lt constructor arg gt   lt bean class  javax net ssl SSLContext  factory method  getDefault    gt   lt  constructor arg gt  lt  bean gt  lt bean id  codecFilter  class  org apache mina filter codec ProtocolCodecFilter  gt   lt constructor arg ref  hl codec    gt  lt  bean gt  lt bean id  hl codec  class  org apache camel component hl  HL MLLPCodec    gt  lt bean id  minaFilters  class  java util ArrayList  gt   lt constructor arg gt   lt list value type  org apache mina common IoFilter  gt   lt ref bean  sslFilter    gt    lt ref bean  codecFilter    gt    lt  list gt   lt  constructor arg gt  lt  bean gt After that  the consumer endpoint URL can look likefrom  mina tcp                sync true amp lazySessionCreation true amp noDefaultCodec true amp filters  minaFilters   I am not sure whether this approach is optimal  therefore I call it  workaround  and not  solution   The corresponding patch is attached    ',0
'Routing slip does not stop when Exchange is failed       ',0
'camel example etl throw error when running it     Here is the stack trace   Camel thread    JpaComponent  JuelExpression DEBUG Noimpl class for juel ExpressionFactory defined in META INF services org apache camel component el org apache camel NoFactoryAvailableException  Could not find factory classfor resource  META INF services org apache camel component juel atorg apache camel impl DefaultFactoryFinder doFindFactoryProperties DefaultFactoryFinder java      atorg apache camel impl DefaultFactoryFinder findClass DefaultFactoryFinder java     atorg apache camel language juel JuelExpression getExpressionFactory JuelExpression java     atorg apache camel language juel JuelExpression evaluate JuelExpression java     atorg apache camel builder ProcessorBuilder   process ProcessorBuilder java     atorg apache camel management InstrumentationProcessor process InstrumentationProcessor java     atorg apache camel processor DelegateProcessor processNext DelegateProcessor java     atorg apache camel processor DelegateProcessor proceed DelegateProcessor java     atorg apache camel processor interceptor TraceInterceptor process TraceInterceptor java     atorg apache camel management InstrumentationProcessor process InstrumentationProcessor java     atorg apache camel processor RedeliveryErrorHandler processExchange RedeliveryErrorHandler java      atorg apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      atorg apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java     atorg apache camel processor DefaultErrorHandler process DefaultErrorHandler java     atorg apache camel processor DefaultChannel process DefaultChannel java      at org apache camel processor Pipeline process Pipeline java     atorg apache camel processor UnitOfWorkProcessor processNext UnitOfWorkProcessor java     atorg apache camel processor DelegateProcessor process DelegateProcessor java     atorg apache camel management InstrumentationProcessor process InstrumentationProcessor java     atorg apache camel component jpa JpaConsumer processBatch JpaConsumer java      atorg apache camel component jpa JpaConsumer   doInJpa JpaConsumer java     atorg apache camel component jpa JpaTemplateTransactionStrategy     doInJpa JpaTemplateTransactionStrategy java     atorg springframework orm jpa JpaTemplate execute JpaTemplate java      atorg springframework orm jpa JpaTemplate execute JpaTemplate java      atorg apache camel component jpa JpaTemplateTransactionStrategy   doInTransaction JpaTemplateTransactionStrategy java     atorg springframework transaction support TransactionTemplate execute TransactionTemplate java      atorg apache camel component jpa JpaTemplateTransactionStrategy execute JpaTemplateTransactionStrategy java     atorg apache camel component jpa JpaConsumer poll JpaConsumer java     atorg apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java      atjava util concurrent Executors RunnableAdapter call Executors java      atjava util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      atjava util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      atjava util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      atjava util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'doCatch     Without any exception given should report that as a problem    Code like this  doTry    to  mock b    throwException new IllegalArgumentException  Damn     doCatch    to  mock catch    end   Should report a failure in the route as doCatch must have at least   exception as parameter It should correctly be  doCatch Exception class We could also consider using Excpetion class as default but in Java you must also provide the exception to catch and thus its more intuitive if its      like Java   ',0
'RejectedExecutionException after restarting camel context    User reported over the  camel channel the following exception trying to send a message after the context was stopped and restarted  Failed to create Producer for endpoint    Thats the exception I m gettingReason  java util concurrent RejectedExecutionExceptionException in thread  core  org apache camel FailedToCreateProducerException  Failed to create Producer for endpoint  Endpoint activemq   queue request lavaOrderProducer powerTraderServer   Reason  java util concurrent RejectedExecutionException at org apache camel component jms JmsProducer testAndSetRequestor JmsProducer java      at org apache camel component jms JmsProducer processInOut JmsProducer java      at org apache camel component jms JmsProducer process JmsProducer java      at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache doInProducer ProducerCache java      at org apache camel impl ProducerCache sendExchange ProducerCache java      at org apache camel impl ProducerCache send ProducerCache java     at org apache camel impl DefaultProducerTemplate send DefaultProducerTemplate java     at com wjb producer lavaData dispatcher ServerRequestDispatcher requestSymbolSectorArray ServerRequestDispatcher java      at com wjb producer core LavaDataManager initialize LavaDataManager java     at com wjb producer core ProducerCore run ProducerCore java     at java lang Thread run Thread java     Caused by  java util concurrent RejectedExecutionException at java util concurrent ThreadPoolExecutor AbortPolicy rejectedExecution ThreadPoolExecutor java       at java util concurrent ThreadPoolExecutor reject ThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor delayedExecute ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor schedule ScheduledThreadPoolExecutor java      at org apache camel util DefaultTimeoutMap schedulePoll DefaultTimeoutMap java      at org apache camel util DefaultTimeoutMap  lt init gt  DefaultTimeoutMap java     at org apache camel component jms requestor Requestor  lt init gt  Requestor java     at org apache camel component jms JmsProducer testAndSetRequestor JmsProducer java     The following unit tests seems to reproduce the problem ublic final class StartStopTest   private final GenericApplicationContext applicationContext   new GenericApplicationContext    private final int testCount       Test public void test   throws Exception     Initialize final File propertiesFile   new File Constants RESOURCE DIRECTORY NAME  Constants PROPERTIES FILE NAME   PropertyConfigurator configure propertiesFile getPath     final File applicationContextFile   new File Constants RESOURCE DIRECTORY NAME  Constants CONTEXT FILE NAME   final Resource applicationContextResource   new FileSystemResource applicationContextFile   final AbstractBeanDefinitionReader beanDefinitionReader   new XmlBeanDefinitionReader this applicationContext   beanDefinitionReader loadBeanDefinitions applicationContextResource   this applicationContext refresh      Begin Testing for  int i      i  lt  this testCount  i      this startSendStop    Thread sleep            private void startSendStop   throws Exception   final SpringCamelContext springCamelContext    SpringCamelContext this applicationContext getBean Constants CAMEL CONTEXT NAME   final ProducerTemplate producerTemplate  final Endpoint serverRequestQueue  springCamelContext start    producerTemplate   springCamelContext createProducerTemplate    serverRequestQueue   springCamelContext getEndpoint  serverRequestQueue    final Exchange exchange   producerTemplate send serverRequestQueue  new Processor     public void process final Exchange exchange  throws Exception   exchange setPattern ExchangePattern InOut   exchange getIn   setHeader ServerJmsServices REQUEST  ServerJmsServices GET SYMBOL INFO   exchange getIn   setBody            final String responseString    String exchange getOut   getBody    Assert assertTrue responseString length    gt      springCamelContext stop       lt  xml version       encoding  UTF     gt  lt beans xmlns  http   www springframework org schema beans   xmlns xsi  http   www w  org      XMLSchema instance  xmlns camel  http   camel apache org schema spring  xsi schemaLocation  http   www springframework org schema beans http   www springframework org schema beans spring beans     xsd http   camel apache org schema spring http   camel apache org schema spring camel spring xsd  gt   lt     ActiveMQ component for Camel to use    gt   lt bean id  activemq  class  org apache activemq camel component ActiveMQComponent   gt   lt property name  connectionFactory  gt   lt bean class  org apache activemq ActiveMQConnectionFactory  gt   lt property name  brokerURL  value  tcp                      daemon true    gt   lt  bean gt   lt  property gt   lt  bean gt   lt     Camel Context    gt   lt camelContext id  camelContext  xmlns  http   camel apache org schema spring  autoStartup  false  gt    lt camel endpoint id  serverRequestQueue  uri  activemq queue request lavaOrderProducer powerTraderServer    gt   lt  camelContext gt  lt  beans gt    ',0
'GroupedExchange in Aggregator is not working correctly    See nabblehttp   old nabble com Help    org apache camel impl GroupedExchange does not exist in the latest download ts         html   ',0
'camel bindy dataformat KeyValue DSL can t work    When you set the bindy dataformat with below DSL   you will get the error that camel can t find the DataFormat    public void configure     from  direct start   marshal    bindy BindyType KeyValue   org apache camel dataformat bindy model fix simple    to  mock result        ',0
'camel cache   Missing some classes in  jar    See nabblehttp   old nabble com Camel Cache  A Processors not released  ts         html   ',0
'JDBC component doesn t preserve headers    JDBC component doesn t preserve any of the headers that are sent into it   ',0
'The NP check of the remote service is wrong in CamelServiceExporter    We should check the export service instead of the camelContext         components camel spring src main java org apache camel spring remoting CamelServiceExporter jav revision            components camel spring src main java org apache camel spring remoting CamelServiceExporter jav working copy                     Endpoint endpoint   CamelContextHelper getMandatoryEndpoint camelContext  uri   notNull camelContext   service     notNull getService     service    Object proxy   getProxyForService    consumer   endpoint createConsumer new BeanProcessor proxy  camelContext      ',0
'Remove sample caches from Camel Cache component    Camel Cache has sample caches created by the component via its ehCache settings These should not be created in order to avoid unnecessary taking up of ports by the sample caches    ',0
'file component   Using fileName option should better detect constant vs dynamic name    eg using fileName header txt makes Camel think its header with the name txt you want to use    ',0
'BeanProcessor   Should differentiate between void and method returning null values    When invoking a bean method it should better detect whether the bean is a void or has a return type And if it returns null it should be regarded as a valid response and set as body See nabblehttp   old nabble com filtering messages ts         html   ',0
'cxfbean should  propagate CONTENT TYPE for other camel component to use    There is no  content type  header return from the below route  lt route gt   lt from uri  jetty http   localhost      employeesBase matchOnUriPrefix true   gt   lt to uri  cxfbean EmployeesPOJO   gt   lt  route gt    ',0
'HttpHeaderFilterStrategy dosn t filters out  Cache Control    Connection    Pragma    Trailer    Transfer Encoding    Upgrade    Via  and  Warning  in method applyFilterToCamelHeaders    HttpHeaderFilterStrategy uses the HTTP headers with upper case characters on the beginning  e  g   Transfer Encoding  instead of  transfer encoding      ',0
'WARNING log of JmsTemporaryTopicEndpoint   JmsTemporaryQueueEndpoint don t have the ManagedResource annotation    Here is the mail thread which discusses about this issue http   old nabble com Attemp to send message to activemq temporary queue using producerTemplate  A InvalidMetadataException tp        p         html   ',0
'HttpHeaderFilterStrategy should filter the HTTP  Date  header when applyFilterToCamelHeaders is called    See rfc        ',0
'Camel Velocity  change the case of all fields properties Header    Using the velocity component doesn t respect the case matching of all fields of the header For example  the exchange of properties CorrelationID change the case matching  after using velocity component  it puts the property in lowercase correlationid    ',0
'Camel Freemarker  change the case of all fields properties Header    Using the Freemarker component doesn t respect the case matching of all fields of the header For example  the exchange of properties CorrelationID change the case matching  after using Freemarker component  it puts the property in lowercase correlationid    ',0
'DefaultCamelContext throws NPE in start   for route with no destination    Not easy to track down when you have a lot of routes  This might be new with the introduction of StartupRouteHolder  I think that was introduced in      right  public class TriggerNPETest extends CamelTestSupport    Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder     public void configure        This will generate an NPE on DefaultCamelContext start    line         If this is an invalid route a proper message should be given far before     this and or NPE should be tested on line     from  direct psd nowhere            Test public void testme   throws Exception   Thread sleep           java lang NullPointerException at org apache camel impl DefaultCamelContext start DefaultCamelContext java      at org apache camel test junit  CamelTestSupport startCamelContext CamelTestSupport java      at org apache camel test junit  CamelTestSupport setUp CamelTestSupport java        now start the inputs for all the route services as we have prepared Camel    yeah open the floods so messages can start flow into Camel for  Map Entry lt Integer  StartupRouteHolder gt  entry   inputs entrySet      Integer order   entry getKey    Route route   entry getValue   getRoute        lt  lt  lt         Right here    ',0
'karaf features xml  should use servicemix commons pool bundle    as commons pool commons pool       osgi manifest header isn t correct  which shouldn t import org apache commons pool package SMX                 create servicemix wrapper bundle to fix this issue  so the karaf features xml should use servicemix wrapper bundle           https   issues apache org activemq browse SMX        ',0
'should use servicemix jaxws     spec bundle but not the geronimo one    otherwise will see the exception like javax xml ws spi FactoryFinder ConfigurationError  Provider org apache axis  jaxws spi Provider not foundat javax xml ws spi FactoryFinder   run FactoryFinder java     at javax xml ws spi FactoryFinder doPrivileged FactoryFinder java     at javax xml ws spi FactoryFinder newInstance FactoryFinder java     at javax xml ws spi FactoryFinder access     FactoryFinder java    at javax xml ws spi FactoryFinder   run FactoryFinder java     at javax xml ws spi FactoryFinder doPrivileged FactoryFinder java     at javax xml ws spi FactoryFinder find FactoryFinder java     at javax xml ws spi Provider provider Provider java    at javax xml ws Service  lt init gt  Service java       ',0
'ConsumerTemplate don t support the jms uri with selector    This unit test can shows the issue that selector option don t work for ConsumerTemplate Test public void testConsumerTemplate   throws Exception   template sendBodyAndHeader  activemq queue consumer    Message     SIZE NUMBER          template sendBodyAndHeader  activemq queue consumer    Message     SIZE NUMBER          template sendBodyAndHeader  activemq queue consumer    Message     SIZE NUMBER             process every exchange which is ready  If no exchange is left break    the loop while  true    Exchange ex   consumer receiveNoWait  activemq queue consumer selector SIZE NUMBER lt         if  ex    null    Message message   ex getIn    int size   message getHeader  SIZE NUMBER   int class   assertTrue  The message header SIZE NUMBER should be less than        size  lt         assertEquals  The message body is wrong    Message    message getBody       else   break       And here is mail thread which discusses about it    ',0
'async route not working with Mina    here is my route  from  mina tcp   localhost      textline true amp sync true   process new Processor     public void process Exchange exchange  throws Exception   String body   exchange getIn   getBody String class   Thread sleep        exchange getOut   setBody  Bye      body         from  file    test test response    convertBodyTo String class    threads     toAsync  mina tcp   localhost      sync true amp textline true       to  log     reply        here is the output  you can see all reply logs have a same message body and async process is releasing all threads at the first response  this is probably Mina component bug in the context of aync route                              Camel thread     FileComponent      FileConsumer DEBUG Total   files to consume                             Camel thread     FileComponent      FileConsumer DEBUG About to process file  GenericFile     C  test test response Copy     of New Text Document     txt      using exchange  Exchange GenericFileMessage with file  GenericFile     C  test test response Copy     of New Text Document     txt                                   Camel thread     FileComponent      DefaultManagementAgent DEBUG Registered MBean with objectname  org apache camel context tamlft spj  cameltest type producers name MinaProducer  x e c                                Camel thread     FileComponent      MinaProducer DEBUG Starting producer  Producer     mina   tcp   localhost      sync true amp textline true                                  Camel thread     FileComponent      ProducerCache DEBUG Adding to producer service pool with key  Endpoint     mina   tcp   localhost      sync true amp textline true      for producer  Producer     mina   tcp   localhost      sync true amp textline true                                     SendAsyncProcessor Producer      MinaProducer DEBUG Creating connector to address  localhost                using connector  org apache mina transport socket nio SocketConnector   cefa  timeout        millis                              Camel thread     FileComponent      FileConsumer DEBUG About to process file  GenericFile     C  test test response Copy of New Text Document     txt      using exchange  Exchange GenericFileMessage with file  GenericFile     C  test test response Copy of New Text Document     txt                                      SendAsyncProcessor Producer      MinaProducer DEBUG Creating connector to address  localhost                using connector  org apache mina transport socket nio SocketConnector   cefa  timeout        millis                              Camel thread     FileComponent      FileConsumer DEBUG About to process file  GenericFile     C  test test response New Text Document     txt      using exchange  Exchange GenericFileMessage with file  GenericFile     C  test test response New Text Document     txt                                      SendAsyncProcessor Producer      MinaProducer DEBUG Creating connector to address  localhost                using connector  org apache mina transport socket nio SocketConnector   cefa  timeout        millis                              SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                         SocketAcceptorIoProcessor      ExecutorFilter DEBUG Launching thread for                                          SocketAcceptorIoProcessor      ExecutorFilter DEBUG Launching thread for                                             SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                         SocketAcceptorIoProcessor      ExecutorFilter DEBUG Launching thread for                                             SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                            amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for                                             amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for                                             amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                               SendAsyncProcessor Producer      MinaProducer DEBUG Writing body   hello                                 SendAsyncProcessor Producer      MinaProducer DEBUG Writing body   hello                              amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for                                             amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                            amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                               SendAsyncProcessor Producer      MinaProducer DEBUG Writing body   hello                              SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                               SendAsyncProcessor Producer      MinaProducer DEBUG Waiting for response                                SendAsyncProcessor Producer      MinaProducer DEBUG Waiting for response                                SendAsyncProcessor Producer      MinaProducer DEBUG Waiting for response                          SocketAcceptorIoProcessor      ExecutorFilter DEBUG Launching thread for                                             amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                            amel thread     MinaThreadPool      MinaConsumer DEBUG Received body  hello                              amel thread     MinaThreadPool      MinaConsumer DEBUG Writing body  Bye  hello                              SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                            amel thread     MinaThreadPool      MinaProducer DEBUG Message received  Bye  hello                              amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                            amel thread     MinaThreadPool      MinaConsumer DEBUG Received body  hello                                    sync true amp textline true       SendProcessor DEBUG Async reply received now routing the Exchange  Exchange     Message  Bye  hello                                         sync true amp textline true       SendProcessor DEBUG Async reply received now routing the Exchange  Exchange     Message  Bye  hello                                         sync true amp textline true       SendProcessor DEBUG Async reply received now routing the Exchange  Exchange     Message  Bye  hello                                         sync true amp textline true       DefaultManagementAgent DEBUG Registered MBean with objectname  org apache camel context tamlft spj  cameltest type producers name Producer  x     e                                     sync true amp textline true       ProcessorEndpoint   DEBUG Starting producer  Producer     log       reply                                            sync true amp textline true       ProducerCache DEBUG Adding to producer cache with key  Endpoint     log       reply          for producer  Producer     log       reply                                            sync true amp textline true           reply     INFO Exchange     BodyType String  Body Bye  hello                                         sync true amp textline true       GenericFileOnCompletion DEBUG Done processing file  GenericFile     C  test test response Copy     of New Text Document     txt      using exchange  Exchange     Message  Bye  hello                                         sync true amp textline true           reply     INFO Exchange     BodyType String  Body Bye  hello                                         sync true amp textline true       GenericFileOnCompletion DEBUG Done processing file  GenericFile     C  test test response Copy of New Text Document     txt      using exchange  Exchange     Message  Bye  hello                                         sync true amp textline true       FileUtil DEBUG Tried   to delete file  C  test test response Copy     of New Text Document     txt camelLock with result  true                                   sync true amp textline true           reply     INFO Exchange     BodyType String  Body Bye  hello                                         sync true amp textline true       GenericFileOnCompletion DEBUG Done processing file  GenericFile     C  test test response New Text Document     txt      using exchange  Exchange     Message  Bye  hello                                         sync true amp textline true       FileUtil DEBUG Tried   to delete file  C  test test response Copy of New Text Document     txt camelLock with result  true                                   sync true amp textline true       nericFileRenameProcessStrategy DEBUG Renaming file  GenericFile     C  test test response Copy     of New Text Document     txt      to  GenericFile     C  test test response  camel Copy     of New Text Document     txt                                        sync true amp textline true       FileUtil DEBUG Tried   to delete file  C  test test response New Text Document     txt camelLock with result  true                                   sync true amp textline true       nericFileRenameProcessStrategy DEBUG Renaming file  GenericFile     C  test test response Copy of New Text Document     txt      to  GenericFile     C  test test response  camel Copy of New Text Document     txt                                        sync true amp textline true       nericFileRenameProcessStrategy DEBUG Renaming file  GenericFile     C  test test response New Text Document     txt      to  GenericFile     C  test test response  camel New Text Document     txt                                        sync true amp textline true       FileUtil DEBUG Tried   to rename file  C  test test response Copy     of New Text Document     txt to  C  test test response  camel Copy     of New Text Document     txt with result  true                                   sync true amp textline true       FileUtil DEBUG Tried   to rename file  C  test test response Copy of New Text Document     txt to  C  test test response  camel Copy of New Text Document     txt with result  true                                   sync true amp textline true       FileUtil DEBUG Tried   to rename file  C  test test response New Text Document     txt to  C  test test response  camel New Text Document     txt with result  true                             amel thread     MinaThreadPool      MinaConsumer DEBUG Writing body  Bye  hello                              amel thread     MinaThreadPool      MinaConsumer DEBUG Received body  hello                              SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                            amel thread     MinaThreadPool      MinaProducer DEBUG Message received  Bye  hello                              amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                                            amel thread     MinaThreadPool      MinaConsumer DEBUG Writing body  Bye  hello                              SocketConnectorIoProcessor          ExecutorFilter DEBUG Launching thread for localhost                                            amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for                                             amel thread     MinaThreadPool      MinaProducer DEBUG Message received  Bye  hello                              amel thread     MinaThreadPool      ExecutorFilter DEBUG Exiting since queue is empty for localhost                  ',0
'IndexOutOfBoundsException occur in UnsafeUriCharactersEncoder class    Here is the mail thread for the detail discussion    ',0
'camel http component should set Transfer Encoding as chunked header for response message when checkChunked is true    so that the client side which send request will know this is a chunked message It s important when the response http headers is more than      and we want to use chunked response message   ',0
'CXFRS Routing in       does not behave like in          CXFRS Routing in Camel       works well with these endPoints  lt cxf rsServer id  restRouter  address   restRouter    serviceClass  com project service impl ServiceManagerImpl    gt   lt cxf rsClient id  restEndpoint  address  http   localhost      services rest  serviceClass  com project service impl ServiceManagerImpl    gt In Camel        Routing fails with error causing the CXF Client to invoke a     not found Rest Service which is  http   localhost      services rest restRouter Path  The address of cxf rsClient is being appended by the cxf rsServer s address   ',0
'Invocation of hasNext   on org apache camel util ObjectHelper createIterator      new Iterator         return different results    public boolean hasNext        empty string should not be regarded as having next return   idx       amp  amp  ObjectHelper isNotEmpty s     public String next     return s   This is incorrect  Should be  public boolean hasNext        empty string should not be regarded as having next return idx         amp  amp  ObjectHelper isNotEmpty s     public String next     idx    return s      ',0
'Aggregator   Completion by batch consumer should trigger completion for the batch group if multiple correlation keys was used    Yeah its really an odd use case if you use multiple correlation keys for the same batch consumer  but its still possible to do    ',0
'IOException  Bad file descriptor and FileNotFoundException    When I try to stream BINARY  pdf  file using camel http I get the java io IOException  Bad file descriptorThe pdf isn t recieved succesfully by reciever   kb This seems to be caused by a bug in java  on linux systems   closing inputstream twice causes problems  It seemed to me this is exactly what is happening  see also link http       com gray docs misc java bad file descriptor close bug shtmlI fixed this by  checking out apache camel core and camel http        In FileInputStreamCache java In method close   wrapped getInputStream   close   in if if  stream    null  amp  amp  stream instanceof FileInputStream  amp  amp    FileInputStream  stream  getChannel   isOpen     getInputStream   close     In method reset   also if  stream    null  amp  amp  stream instanceof FileInputStream  amp  amp    FileInputStream  stream  getChannel   isOpen     getInputStream   close     Second I needed to fix a filenotfoundexception  the tempfile created by camel was deleted to early I changed CachedOutputStream java Reimplemented constructor public CachedOutputStream Exchange exchange    String hold   exchange getContext   getProperties   get THRESHOLD   String dir   exchange getContext   getProperties   get TEMP DIR   if  hold    null    this threshold   exchange getContext   getTypeConverter   convertTo Long class  hold     if  dir    null    this outputDir   exchange getContext   getTypeConverter   convertTo File class  dir        add on completion so we can cleanup after the exchange is done such    as deleting temporary files exchange addOnCompletion new SynchronizationAdapter      Override public void onDone Exchange exchange    try      close the stream and FileInputStreamCache    close       for  FileInputStreamCache cache   fileInputStreamCaches          cache close            cleanup temporary file if  tempFile    null    System err println                                                          System err println  DISABLED tempFile delete       System err println                                                             boolean deleted   tempFile delete       if   deleted       LOG warn  Cannot delete temporary cache file         tempFile        else if  LOG isTraceEnabled         LOG trace  Deleted temporary cache file         tempFile        tempFile   null      catch  Exception e    LOG warn  Error deleting temporary cache file      tempFile  e        Override public String toString     return  OnCompletion CachedOutputStream           Reimplemented close   public void close   throws IOException   System err println                                                          System err println  outputStream close       gt  delete tempFile    System err println                                                          new Exception   printStackTrace    currentStream close    boolean deleted   tempFile delete    if   deleted    LOG warn  Cannot delete temporary cache file      tempFile     else if  LOG isTraceEnabled      LOG trace  Deleted temporary cache file      tempFile         ',0
'Inconsistency between IntrospectionSupport getProperties   and IntrospectionSupport getProperty      IntrospectionSupport getProperties   and IntrospectionSupport getProperty   work in an inconsistency way ExampleBean bean   new ExampleBean   Date date   new Date    bean setDate date  assertSame date  IntrospectionSupport getProperty bean   date        succeedMap lt String  Object gt  map   new HashMap lt String  Object gt    IntrospectionSupport getProperties bean  map  null  assertSame date  map get  date        fails   ',0
'DefaultPackageScanClassResolver can t read entries in an eclipse rcp app because it can t handle bundleresource   protocol    scenario I have an eclipse rcp based app and use the apache camel libs within my plugin  i e  the libs are one classpath of the plugin  I use a route using camel mail to process some mailqueues CamelContext context   new DefaultCamelContext   context addRoutes new RouteBuilder     public void configure     from  imaps   mailserver username user amp password password amp consumer delay      amp delete false amp unseen true    to  log  new mail         context start   When I start my app all seems to be ok  But in my log I get a lot of error messages regarding the loading of converters  If I ask my context to find a converter f i  to converty to byte   form inputstream  as I did see in another mail example reagding attachments  I get null because the context can t find one I debugged deeper into the camel code and it seems that the DefaultPackageScanClassResolver can t load from urls starting with bundleresource like  bundleresource       fwk           org apache camel component file  using camel osgi didn t worked because all camel libs are loaded as inner libs of my single plugin and not as plugins   loading as plugins didn t worked but thats another problem bug LOG Messages                         DEBUG org apache camel impl converter DefaultTypeConverter loadTypeConverters   Loading type converters                            DEBUG org apache camel impl DefaultPackageScanClassResolver findAnnotated   Searching for annotations of org apache camel Converter in packages       org apache camel component file  org apache camel component bean  org apache camel converter  org apache camel component mail  org apache camel component spring integration converter                             DEBUG org apache camel impl DefaultPackageScanClassResolver getClassLoaders   The thread context class loader  org eclipse core runtime internal adaptor ContextFinder  a  eff is used to load the class                        DEBUG org apache camel impl DefaultPackageScanClassResolver find   Searching for  annotated with  Converter in package  org apache camel component file using classloader  org eclipse core runtime internal adaptor ContextFinder                        DEBUG org apache camel impl DefaultPackageScanClassResolver getResources   Getting resource URL for package  org apache camel component file with classloader  org eclipse core runtime internal adaptor ContextFinder  a  eff                        DEBUG org apache camel impl DefaultPackageScanClassResolver find   URL from classloader  bundleresource       fwk           org apache camel component file                         DEBUG org apache camel impl DefaultPackageScanClassResolver find   Decoded urlPath   org apache camel component file  with protocol  bundleresource                        DEBUG org apache camel impl DefaultPackageScanClassResolver find   isLocalFileSystem  false                        DEBUG org apache camel impl DefaultPackageScanClassResolver find   Scanning for classes in       org apache camel component file       matching criteria  annotated with  Converter                        DEBUG org apache camel impl DefaultPackageScanClassResolver find   Loading from jar using http https   org apache camel component file                         DEBUG org apache camel impl DefaultPackageScanClassResolver find   Cannot read entries in url  bundleresource       fwk           org apache camel component file java net MalformedURLException  no protocol   org apache camel component file  at java net URL  lt init gt  URL java      at java net URL  lt init gt  URL java      at java net URL  lt init gt  URL java      at org apache camel impl DefaultPackageScanClassResolver find DefaultPackageScanClassResolver java      at org apache camel impl DefaultPackageScanClassResolver find DefaultPackageScanClassResolver java      at org apache camel impl DefaultPackageScanClassResolver findAnnotated DefaultPackageScanClassResolver java      at org apache camel impl converter AnnotationTypeConverterLoader load AnnotationTypeConverterLoader java     at org apache camel impl converter DefaultTypeConverter loadTypeConverters DefaultTypeConverter java      at org apache camel impl converter DefaultTypeConverter doStart DefaultTypeConverter java      at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel util ServiceHelper startService ServiceHelper java     at org apache camel impl DefaultCamelContext startServices DefaultCamelContext java       at org apache camel impl DefaultCamelContext addService DefaultCamelContext java      at org apache camel impl DefaultCamelContext getTypeConverter DefaultCamelContext java      at org apache camel util CamelContextHelper convertTo CamelContextHelper java       ',0
'HttpEntityConverter should not create a InputStreamEntity by using the GZIPHelper toGZIPInputStream      GZIPHelper toGZIPInputStream   is used for uncompress the zip date and not for compress the data    ',0
'cxfbean component should ignore the wsdlLocation in the POJO    cxfbean component should ignore the wsdlLocation in the annotation in the POJO when starting the service  It should be using the JAXWS bean to create the service  Came across this bug when I  mistakenly  set the wsdlLocation to the http one published by the service  which of course wasn t up yet and I got the exception below  Fix for this coming soon For Googlers out there  this ticket may fix this error message you may be getting Caused by  org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  cxfbean   jaxwsBean due to  Failed to create service  at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      at org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java     at org apache camel model RouteDefinition resolveEndpoint RouteDefinition java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel model SendDefinition resolveEndpoint SendDefinition java     at org apache camel model SendDefinition createProcessor SendDefinition java     at org apache camel model ToDefinition createProcessor ToDefinition java     at org apache camel model ProcessorDefinition makeProcessor ProcessorDefinition java      at org apache camel model ProcessorDefinition addRoutes ProcessorDefinition java      at org apache camel model RouteDefinition addRoutes RouteDefinition java             moreCaused by  org apache cxf service factory ServiceConstructionException  Failed to create service  at org apache cxf wsdl   WSDLServiceFactory  lt init gt  WSDLServiceFactory java     at org apache cxf service factory ReflectionServiceFactoryBean buildServiceFromWSDL ReflectionServiceFactoryBean java      at org apache cxf service factory ReflectionServiceFactoryBean initializeServiceModel ReflectionServiceFactoryBean java      at org apache cxf service factory ReflectionServiceFactoryBean create ReflectionServiceFactoryBean java      at org apache cxf jaxws support JaxWsServiceFactoryBean create JaxWsServiceFactoryBean java      at org apache cxf frontend AbstractWSDLBasedEndpointFactory createEndpoint AbstractWSDLBasedEndpointFactory java      at org apache cxf frontend ServerFactoryBean create ServerFactoryBean java      at org apache cxf jaxws JaxWsServerFactoryBean create JaxWsServerFactoryBean java      at org apache camel component cxf cxfbean CxfBeanEndpoint createServer CxfBeanEndpoint java      at org apache camel component cxf cxfbean CxfBeanEndpoint init CxfBeanEndpoint java     at org apache camel component cxf cxfbean CxfBeanComponent createEndpoint CxfBeanComponent java     at org apache camel impl DefaultComponent createEndpoint DefaultComponent java     at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java             moreCaused by  javax wsdl WSDLException  WSDLException  faultCode PARSER ERROR  java lang IllegalArgumentException  InputSource must have a ByteStream or CharacterStream at org apache cxf wsdl   WSDLManagerImpl loadDefinition WSDLManagerImpl java      at org apache cxf wsdl   WSDLManagerImpl getDefinition WSDLManagerImpl java      at org apache cxf wsdl   WSDLServiceFactory  lt init gt  WSDLServiceFactory java            moreCaused by  java lang IllegalArgumentException  InputSource must have a ByteStream or CharacterStream at org apache cxf staxutils StaxUtils createXMLStreamReader StaxUtils java      at org apache cxf wsdl   WSDLManagerImpl loadDefinition WSDLManagerImpl java             more   ',0
'File name lost when it starts with the same characters as the relative directory on the endpoint    When polling file from a directory using a relative file URI  the file name gets lost when it starts with the same characters as the directory name E g  a directory  orders  containing  orders      xml  and  orders      xml from  file orders   process new Processor     public void process Exchange exchange       there s no file name on the message here  exchange getIn   getHeader Exchange FILE NAME  returns null         ',0
'Incomplete cleanup of jmx mbeans after context stop    There is a fair amount of cleanup on context stop  but it is incomplete  Most of it has to do with JMX and if one creates and starts a new CamelContext she may end up with managed objects pointing nowhere or have duplicates or other minor side effects  One of the nasty side effects is that we are pretty much forced to use   lt forkMode gt pertest lt  forkMode gt   in our surefire plugin configuration  ensuring a clean slate for every test For long running apps in which you may have multiple CamelContext running at various times during the lifetime of the application we must properly cleanup when stopping the context  I have a series of patches fixing that which I hope to finish before      Once we re comfortable and tested with multiple jdk implementations and versions  I d change the forkMode to  once   In my local copy this reduces the test time in core from     mins to under    mins  Since interactions between tests is still possible and might lead us on a wild goose we could add another profile that uses the safer yet time consuming  pertest  forkMode    ',0
'HttpProducer should not sending the Http headers with low case    Here is the mail thread which discusses about it http   old nabble com camel http converts headers to lower case tp        p         html   ',0
'AggregationStrategy returning null causes NPE    When the AggregationStrategy s aggregate method returns null  the AggregateProcessor throws an NPE  While this is a result of user error  I think it would be easy to provide a more useful error indicating what the true problem is  This is the  not very helpful  error the user sees ERROR   Caused by   org apache camel RuntimeCamelException   java lang NullPointerException org apache camel RuntimeCamelException  java lang NullPointerException at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel component jms EndpointMessageListener onMessage EndpointMessageListener java      at org springframework jms listener AbstractMessageListenerContainer doInvokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer invokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer doExecuteListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer doReceiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer receiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener DefaultMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker executeOngoingLoop DefaultMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java      at java lang Thread run Thread java     Caused by  java lang NullPointerException at org apache camel processor aggregate AggregateProcessor doAggregation AggregateProcessor java      at org apache camel processor aggregate AggregateProcessor process AggregateProcessor java      at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor DelegateProcessor processNext DelegateProcessor java     at org apache camel processor DelegateProcessor proceed DelegateProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel processor RedeliveryErrorHandler processExchange RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java     at org apache camel processor DefaultErrorHandler process DefaultErrorHandler java     at org apache camel processor DefaultChannel process DefaultChannel java      at org apache camel processor UnitOfWorkProcessor processNext UnitOfWorkProcessor java     at org apache camel processor DelegateProcessor process DelegateProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel component jms EndpointMessageListener onMessage EndpointMessageListener java           more   ',0
'camel cxf feature doesn t include all cxf needs bundles    Current camel cxf features doesn t include wss j  saaj imple  opensaml  fastinfoset bundle We need to add these bundle into camel cxf features    ',0
'VM endpoints with same name do not communicate if args don t match    If you send to a VM endpoint from one route and consume from the same endpoint in another route  but include an argument on only one of the routes  Camel sees them as two different routes  Therefore  the messages are never consumed  For example  lt camelContext id  sendNotifyContext  xmlns  http   camel apache org schema spring  errorHandlerRef  errorHandler  gt   lt route id  sendToNotify  gt   lt from uri         gt        lt to uri  vm myNotify    gt   lt  route gt  lt  camelContext gt  lt camelContext id  receiveNotifyContext  xmlns  http   camel apache org schema spring  errorHandlerRef  errorHandler  gt   lt route id  receiveNotify  gt   lt from uri  vm myNotify size         gt        lt to uri         gt   lt  route gt  lt  camelContext gt The producer appears to send to vm myNotify while the consumer is listening to a separate endpoint named vm myNotify size       so the messages build up and are never received    ',0
'MailBinding can t handle the subject header with NO ASCII code rightly     Here is the mail thread which discusses about it    ',0
'Bindy   No  Section causes a null key being generated which causes a NumberFormatException    See nabblehttp   old nabble com Bindy CSV not Marshaling ts         html   ',0
'Escaped characters in http  URLs do not work    There is a bug in http  HttpProducer that is unescaping URL query and path components too early  Patch fix attached    ',0
'Aggregation raises NullPointerException if last file in batch is not to be aggregated     When trying to aggregate files from a directory  it seems that camel core raises a NullPointerException if the last file of the batch is a single file  That is it doesn t match the correlationExpression with any other files and therefore should just pass through  If such a file is the first file or in the middle of the files  alphabetically  this issue is not present See http   old nabble com Aggregator problem with files  Camel      td         html a           ',0
'It is impossible to put   sign in SQL statement in camel sql    SqlProducer implementation turns all   characters into   making it impossible to have   in the SQL statement    ',0
'camel castor relies on specific  out of date version of Castor    camel castor specifies a non flexible version dependency on Castor        Ideally should be changed to             to allow later versions of Castor to be deployed  Castor     was released in Feb           was first released in Feb        ',0
'camel ftp   SFTP in fileExists should handle exception being thrown with id code stating no such file    See nabblehttp   camel        n  nabble com camel ftp cannot create directory using sftp tp      p       html   ',0
'Deadlock in org apache camel util DefaultTimeoutMap    After running a camel route with a camel Aggregator for a while  I get a deadlock in org apache camel util DefaultTimeoutMap  A full processdump is attached to this bug I have also tried to recreate this as failing testcase  but without any luck so far    ',0
'No consumers available on  direct   xyz  endpoint    The following warning in log j log shows up with no predictable reason                         WARN      DefaultMessageListenerContainer   DirectProducer java         No consumers available on endpoint  Endpoint     direct   UserCancelJobRequest      to process  Exchange JmsMessage  RunnerBase locationToRunId  DV  YcABTE  HTRPATEGCBFk m    jobrun id       requestOrigId  null   secretKey  null   replyToQueueOrTopic  null   corrolationId  null   requestCreationTime Thu Jun             PDT       The endpoint      direct   UserCancelJobRequest      could be a number of different endpoints in our application and all of them are of  direct   type  When this happens  all messages that run through that endpoint will fail  and it will never recover unless the application is restarted Also  if I restart the application and use that route immediately  that warning will not occur and the request will finish successfully  It seems to happen to routes that have not been used for a while after startup When this happens  I can find the exact Camel endpoint route processor in JConsole  and nothing seems to be wrong  How can a  direct   endpoint runs out of consumer  Isn t the thread that product this warning THE thread to process the message We recently upgraded from     to       and this starts to show up randomly  It is a show stopper   Michael   ',0
'convertBodyTo should handle null bodies    If the body is null and you use convertBodyTo you will get a no type converter exception due body is null  Instead it should accept the null body and continue routing    ',0
'Oracle AQ does not support the JMSReplyTo property and therefore throws a  JMS      Feature not supported  exception when the JMS provider tries to get it     Oracle AQ does not support the JMSReplyTo property and therefore throws a  JMS      Feature not supported  exception when the JMS provider tries to get it    ',0
'Broken failure reporting via DefaultProucerTemplate asyncCallback and Synchronization onFailure    The recent change in ProducerCache sendProducerCache java public void send Endpoint endpoint  Exchange exchange    try   sendExchange endpoint  null  null  exchange      RECENT CHANGE HERE     ensure that CamelExecutionException is always thrown if  exchange getException      null    exchange setException wrapCamelExecutionException exchange  exchange getException          catch  Exception e    throw wrapCamelExecutionException exchange  e      that throws a CamelExecutionException if exchange getException is not null  makes it impossible for DefaultProducerTemplate asyncCallback to report failures  other than fault messages  asynchronously via Synchronization onFailureDefaultProducerTemplate java public Future lt Exchange gt  asyncCallback final Endpoint endpoint  final Exchange exchange  final Synchronization onCompletion    Callable lt Exchange gt  task   new Callable lt Exchange gt      public Exchange call   throws Exception      FIXME  exception is thrown in Camel     where a normal return with answer getException    null was done in Camel     Exchange answer   send endpoint  exchange   if  answer isFailed      onCompletion onFailure answer     else            return answer               This was working in Camel      but unfortunately there wasn t any test case for it   I attached a patch for DefaultProducerTemplateAsyncTest that demonstrates the problem  I didn t commit a fix yet because I m unsure at the moment about the best way to fix that  Of course I tried a naive fix in the DefaultProducerTemplate asyncCallback methods which causes the test  in the patch  to pass but I d like to hear other opinions before I continue    ',0
'StreamProducer does not close stream in camel stream    Since the stream could be System out or System err  the producer does not close the stream ever  It should close all streams with the noted exceptions    ',0
'org apache camel component test package is imported in camel spring component   generates error on OSGI platform           Installed             camel spring        SNAPSHOT karaf root gt  start   Error executing command  Unresolved constraint in bundle org apache camel camel spring       Unable to resolve       missing requirement        package    amp  package org apache camel component test  version gt           version gt                    package    amp  package org apache camel component test  version gt           version gt          karaf root gt  headers   camel spring                      Bnd LastModified                Build Jdk           Built By   CharlesmBundle Activator   org apache camel osgi ActivatorBundle Description   Camel Spring supportBundle DocURL   http   www apache org Bundle License   http   www apache org licenses LICENSE     txtBundle ManifestVersion    Bundle Name   camel springBundle SymbolicName   org apache camel camel springBundle Vendor   The Apache Software FoundationBundle Version         SNAPSHOTCreated By   Apache Maven Bundle PluginExport Package   org apache camel spring spi uses   org springframework context org apache camel spi org springframework beans factory org apache camel org springframework beans factory config org apache camel builder org springframework transaction org apache commons logging org apache camel processor exceptionpolicy org apache camel processor org apache camel util org apache camel model org springframework transaction support  version        SNAPSHOT  org apache camel spring util uses   org apache camel org springframework context org apache camel util org apache commons logging org springframework beans factory org springframework util  version        SNAPSHOT  org apache camel spring remoting uses   org apache camel util org springframework remoting support org apache camel component bean org apache camel org springframework beans org springframework context org apache camel spi org apache camel spring util org springframework beans factory  version        SNAPSHOT  org apache camel spring uses   org apache camel impl org apache camel util org apache commons logging org apache camel org springframework beans org springframework context org springframework util org springframework beans factory config org apache camel spring util javax xml bind annotation org springframework beans factory org apache camel builder org apache camel model dataformat org springframework context event org apache camel model config org apache camel model org apache camel spi org apache camel spring spi org apache camel view org springframework context support org apache camel spring handler javax xml bind org apache camel component bean org apache camel component event org springframework transaction org springframework transaction support  version        SNAPSHOT  org apache camel spring handler uses   org springframework beans factory support org springframework core org springframework util org springframework beans factory xml org w c dom org springframework beans org springframework beans factory config org springframework beans factory parsing org apache camel model dataformat org apache camel model config org apache camel util org apache camel model org apache camel spring javax xml bind org springframework beans factory org apache camel view org apache commons logging org apache camel model loadbalancer org apache camel builder xml org apache camel spring remoting org apache camel spi org apache camel org apache camel model language org apache camel processor  version        SNAPSHOT  org apache camel osgi uses   org osgi framework org apache camel impl org springframework osgi context org apache commons logging javax xml bind annotation org springframework context org apache camel spring org apache camel model org apache camel model loadbalancer org apache camel org apache camel model language org springframework beans factory xml org apache camel model dataformat org apache camel spring handler org apache camel model config org apache camel spi  version        SNAPSHOT  org apache camel component uses   org apache camel impl org apache commons logging org springframework core io org apache camel org apache camel converter org apache camel spi  version        SNAPSHOT  org apache camel component event uses   org apache camel org springframework context org apache camel impl org springframework beans org apache camel util org apache camel processor loadbalancer  version        SNAPSHOT  org apache camel component test uses   org apache camel impl org apache camel util org apache camel org apache commons logging org apache camel component mock  version        SNAPSHOT  org apache camel component validator uses   javax xml transform org springframework core io javax xml transform stream org apache camel processor validation org apache camel impl org apache camel component org apache commons logging org apache camel  version        SNAPSHOT  org apache camel component xslt uses   org apache camel impl org apache camel component org apache commons logging org apache camel org springframework core io org apache camel builder xml org apache camel util javax xml transform org apache camel converter jaxp org apache camel spi  version        SNAPSHOT Ignore Package   org apache camel spring remoting org apache camel component org apache camel component validator org apache camel component xslt org apache camel spring spi org apache camel spring org apache camel osgi org apache camel spring handler org apache camel component event org apache camel spring utilImplementation Title   Camel    SpringImplementation Vendor   The Apache Software FoundationImplementation Vendor Id   org apache camelImplementation Version       SNAPSHOTImport Package   javax xml bind javax xml bind annotation javax xml bind annotation adapters javax xml transform javax xml transform stream org apache camel version                 org apache camel builder version                 org apache camel builder xml version                 org apache camel component bean version                 org apache camel component mock version                 org apache camel component properties version                 org apache camel component test version                 org apache camel converter version                 org apache camel converter jaxp version                 org apache camel impl version                 org apache camel impl converter version                 org apache camel management version                 org apache camel model version                 org apache camel model config version                 org apache camel model dataformat version                 org apache camel model language version                 org apache camel model loadbalancer version                 org apache camel processor version                 org apache camel processor exceptionpolicy version                 org apache camel processor interceptor version                 org apache camel processor loadbalancer version                 org apache camel processor validation version                 org apache camel spi version                 org apache camel util version                 org apache camel view version                 org apache commons logging org osgi framework version           org osgi util tracker version           org springframework beans version           org springframework beans factory version           org springframework beans factory config version           org springframework beans factory parsing version           org springframework beans factory support version           org springframework beans factory xml version           org springframework context version           org springframework context event version           org springframework context support version           org springframework core version           org springframework core io version           org springframework osgi context version           org springframework remoting support version           org springframework transaction version           org springframework transaction support version           org springframework util version           org w c domManifest Version      Specification Title   Camel    SpringSpecification Vendor   The Apache Software FoundationSpecification Version       SNAPSHOTTool   Bnd           ',0
'java util ConcurrentModificationException in Method org apache camel util CaseInsensitiveMap putAll      Every now and then I m facing the ConcurrentModificationException  It very hard to reproduce  This is my stack trace Failed delivery for exchangeId  ba                 bc   ca  aafb a    Exhausted after delivery attempt    caught  java util ConcurrentModificationExceptionjava util ConcurrentModificationException  null at java util HashMap HashIterator nextEntry HashMap java           na               at java util HashMap KeyIterator next HashMap java           na               at org apache camel util CaseInsensitiveMap putAll CaseInsensitiveMap java          camel core       jar            at org apache camel impl MessageSupport copyFrom MessageSupport java           camel core       jar            at org apache camel impl DefaultMessage copyFrom DefaultMessage java          camel core       jar            at org apache camel util ExchangeHelper copyResults ExchangeHelper java           camel core       jar            at org apache camel processor Pipeline process Pipeline java           camel core       jar            at org apache camel processor DelegateProcessor processNext DelegateProcessor java          camel core       jar            at org apache camel processor ChoiceProcessor process ChoiceProcessor java          camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java          camel core       jar            at org apache camel processor DelegateProcessor processNext DelegateProcessor java          camel core       jar            at org apache camel processor DelegateProcessor proceed DelegateProcessor java          camel core       jar            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java          camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java          camel core       jar            at org apache camel processor RedeliveryErrorHandler processExchange RedeliveryErrorHandler java           camel core       jar            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java           camel core       jar            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java          camel core       jar            at org apache camel processor DefaultErrorHandler process DefaultErrorHandler java          camel core       jar            at org apache camel processor DefaultChannel process DefaultChannel java           camel core       jar            at org apache camel processor Pipeline process Pipeline java          camel core       jar            at org apache camel processor UnitOfWorkProcessor processNext UnitOfWorkProcessor java          camel core       jar            at org apache camel processor DelegateProcessor process DelegateProcessor java          camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java          camel core       jar            at org apache camel component http CamelServlet service CamelServlet java          camel http       jar            at javax servlet http HttpServlet service HttpServlet java           javaee jar            Looks like CaseInsensitiveMap isn t enough thread save  But I have no idea what other thread is modifies the map  Most of the time everything is ok    ',0
'onException not working correctly when using routeContext    When using a routeContext  the last  in the xml file  defined route scoped  lt onException gt  configuration is shared by the other routes in the context http   camel        n  nabble com possible onException bug when using routeContext td        html a          ',0
'java net SocketException  Too many open files with Apache Camel Netty TCP            I ve got a unit test that works fine with Apache Camel        but as soon as I upgraded to       it consistently started to fail It performs a number of concurrent requests using this url netty tcp   localhost      sync trueIn both the client and server side of the unit test There s also a sister test which does the same thing with Netty directly and that works in isolation  so it would appear something has been broken in the transition to        Previously this code was also using a beta version of Netty  but even updating that specific dependency has made no difference    ',0
'FtpComponent  If login fails and disconnect true another connection is opened     In a route such as below a second connection to the ftp server is opened if the login fails  lt route gt    lt from uri  ftp localhost inbox  username usr amp password pwd amp disconnect true amp consumer delay   s amp maximumReconnectAttempts      gt    lt to uri  file test data    gt   lt  route gt  Further description  http   camel        n  nabble com FTP Try login once and disconnect if failure td        html a          ',0
'camel jpa doesn t use EntityManager merge entity  in the right way    The EntityManager merge entity  method returns the merged entity  The exchange in message body should be updated with the merged entity  what camel jpa currently not do  I running into this problem  because after saving an entity in the database  the id field was still null  So  we don t know  which entity in the database is the corresponding to this entity    Have a look in the process method of JpaProducer and the Java doc from the EntityManager Christian   ',0
'IllegalStateException in CamelContinuationServlet under heavy load    Reason is a race between continuation suspend   and continuation resume    It can occur that continuation resume   is executed before continuation suspend   leading to an IllegalStateException thrown by Jetty java lang IllegalStateException  DISPATCHED initial at org eclipse jetty server AsyncContinuation dispatch AsyncContinuation java      at org eclipse jetty server AsyncContinuation resume AsyncContinuation java      at org apache camel component jetty CamelContinuationServlet   done CamelContinuationServlet java     at org apache camel management InstrumentationProcessor   done InstrumentationProcessor java     at org apache camel processor UnitOfWorkProcessor   done UnitOfWorkProcessor java      at org apache camel processor DefaultChannel   done DefaultChannel java      at org apache camel processor RedeliveryErrorHandler   done RedeliveryErrorHandler java      at org apache camel management InstrumentationProcessor   done InstrumentationProcessor java     at org apache camel management InstrumentationProcessor   done InstrumentationProcessor java    This is the case when an async completion callback is faster than the thread that is concurrently executing the if  continuation isInitial    block  I ll commit a fix soon that also follows the recommendations in http   wiki eclipse org Jetty Feature Continuations to always call continuation suspend   before registering the continuation with a callback handler    ',0
'Flatpack component   unable to set the delimiter parameter in spring config file    It s not possible to set the delimiter parameter in spring configuration file or I don t find the way to do it  For example    lt route id  routeA  gt   lt from uri  file src test resources csv move done  amp fileName testfileRouteA csv    gt   lt to uri  flatpack delim META INF Delimited pzmap xml delimiter      gt  lt  route gt I get the following error  Exception in thread  main  org apache camel RuntimeCamelException  org apache camel FailedToCreateRouteException  Failed to create route routeA at   gt  gt  gt  To     flatpack delim META INF Delimited pzmap xml ignoreFirstRecord false amp splitRows true amp delimiter         lt  lt  lt  in route  Route  From file src test resources csv move done  amp fileName     because of Failed to resolve endpoint  flatpack   delim META INF Delimited pzmap xml delimiter   B amp ignoreFirstRecord false amp splitRows true due to  Could not find a suitable setter for property  delimiter as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  char with value   at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework context support ClassPathXmlApplicationContext  lt init gt  ClassPathXmlApplicationContext java      at org springframework context support ClassPathXmlApplicationContext  lt init gt  ClassPathXmlApplicationContext java     at org apache camel spring Main createDefaultApplicationContext Main java      at org apache camel spring Main doStart Main java      at org apache camel impl ServiceSupport start ServiceSupport java     at org apache camel impl MainSupport run MainSupport java      at org apache camel impl MainSupport run MainSupport java      at org apache camel spring Main main Main java    If it s a bug  to solve it  it s just necessary to change the class org apache camel component flatpack DelimitedEndpoint as below   change the flied definition like this  and getter setter to   private String delimiter        private String textQualifier         and the the method createParser like this   public Parser createParser Exchange exchange  throws InvalidPayloadException  IOException Unknown macro    Reader bodyReader   ExchangeHelper getMandatoryInBody exchange  Reader class   Resource resource   getResource    if  delimiter    null    delimiter equals  quot  quot    delimiter    quot   quot   if  textQualifier    null    textQualifier equals  quot  quot    textQualifier    quot  quot  quot   if  resource    null    return getParserFactory   newDelimitedParser bodyReader  delimiter charAt     textQualifier charAt        else   return getParserFactory   newDelimitedParser new InputStreamReader resource getInputStream     bodyReader  delimiter charAt     textQualifier charAt     ignoreFirstRecord         ',0
'JettyHttpComponent doStop   shuts down all servers in the VM  not just those associated with the component    We are running several bundles in Karaf with separate Camel contexts  each of which uses the camel jetty component to expose services over HTTP  Each bundle has an assigned port and may listen on multiple URIs  We noticed that when we updated or shut down one of these bundles  all of the Jetty servers in the other bundles would stop listening on their respective ports The problem is that the map of ConnectorRef objects in JettyHttpComponent is static  and therefore shared across the entire VM  Changing this from static to an instance variable fixed the issue for us    ',0
'RouteBuilderRef should work out of the box with Spring   and dependency injection    Spring   changed internally how dependency resolution works  Its now worse as we have to play tricks in the Camel namespace handler to tell Camel the various pieces you can ref  should depend on Camel  Otherwise the dependency resolution in Spring is not working properly This used to work like a charm in Spring          ',0
'Out of Heap memory issues with Camel File processing large files    Camel File component throws heap memory issue when processing csv file which is about   MB with    k Lines  http   camel        n  nabble com Java heap space issue with reading large CSV file tt        html a          ',0
'Cache Component needs to check for null values during GET operations    EhCache often has a bit of lag time when invalidating expired cache elements  first setting the Element value to null and then removing the key  If you are hitting a cache rapidly one often will run across a key that is present in the cache that still has a null element entry The logic for successfully key retrieval just needs to be slightly tweaked to check for null values    ',0
'netty timeout exception    eventhough message was received by netty procuder  it thows a timeout exception after    secs  here is the route and log  as this is a basic functionality I think this is critical priority  from  netty tcp   localhost      textline true amp sync true   process new Processor     int i    public void process Exchange exchange  throws Exception   String body   exchange getIn   getBody String class   Thread sleep        exchange getOut   setBody  Bye      body      if i         throw new IOException  custom exception          from  file    test test response    convertBodyTo String class   threads     to ExchangePattern InOut  netty tcp   localhost      textline true amp sync true    to  log     reply                                        file    test test response      FileConsumer DEBUG Total   files to consume                                 file    test test response      FileConsumer DEBUG About to process file  GenericFile     C  test test response hello  txt      using exchange  Exchange GenericFileMessage with file  GenericFile     C  test test response hello  txt                                Camel Thread     Threads  SendProcessor DEBUG  gt  gt  gt  gt  Endpoint     tcp   localhost           Exchange     GenericFileMessage with body  hello                                Camel Thread     Threads  NettyProducer DEBUG Creating connector to address  localhost                               Camel Thread     Threads  NettyProducer DEBUG Writing body  hello                           New I O client worker       NettyProducer DEBUG Operation complete org jboss netty channel DefaultChannelFuture    dbd                          New I O server worker       ServerChannelHandler DEBUG Incoming message  hello                           New I O server worker       ServerChannelHandler DEBUG Writing body  Bye  hello                           New I O client worker       ClientChannelHandler DEBUG Message received  Bye  hello                           New I O client worker       SendProcessor DEBUG  gt  gt  gt  gt  Endpoint     log       reply          Exchange     GenericFileMessage with body  Bye  hello                                New I O client worker           reply     INFO Exchange     ExchangePattern InOut  BodyType String  Body Bye  hello                                New I O client worker       GenericFileOnCompletion DEBUG Done processing file  GenericFile     C  test test response hello  txt      using exchange  Exchange     GenericFileMessage with body  Bye  hello                                New I O client worker       FileUtil DEBUG Tried   to delete file  C  test test response hello  txt camelLock with result  true                          New I O client worker       nericFileRenameProcessStrategy DEBUG Renaming file  GenericFile     C  test test response hello  txt      to  GenericFile     C  test test response  camel hello  txt                               New I O client worker       FileUtil DEBUG Tried   to rename file  C  test test response hello  txt to  C  test test response  camel hello  txt with result  true                          Hashed wheel timer     DefaultErrorHandler DEBUG Failed delivery for exchangeId  f eb   d a         a  f   c       d   On delivery attempt    caught  org apache camel ExchangeTimedOutException  The OUT message was not received within        millis  Exchange     GenericFileMessage with body  Bye  hello                                Hashed wheel timer     DefaultErrorHandler ERROR Failed delivery for exchangeId  f eb   d a         a  f   c       d   Exhausted after delivery attempt    caught  org apache camel ExchangeTimedOutException  The OUT message was not received within        millis  Exchange     GenericFileMessage with body  Bye  hello      org apache camel ExchangeTimedOutException  The OUT message was not received within        millis  Exchange     GenericFileMessage with body  Bye  hello         ',0
'BeanConveter didn t try to covert the bean invocation argument rightly    Here is the mail thread about it http   camel        n  nabble com Bug in the BeanConverter class td        html a          ',0
'QuartzEndpoint does not set the job name properly    Looks like the job name argument is not se properly on the endpoint and defaults to the uri path Another nastier issue  for which I should have probably created a separate issue  is that the uri gets messed up if it does not have the double slashes after the scheme  as in  quartz  lt uri gt   vs  quartz    lt uri gt    and the  cron argument contains      The workaround  arguably  is to start the uri with  quartz        See nabble thread  Many thanks to SK for reporting this    ',0
' QueryParam doesn t work for CxfBeans    Charle report an issue             after tracing the code I found the DefaultCxfBeanBinding doesn t put the http query string into the cxf message So the  QueryParam will not take effect on the resource beans            http   camel        n  nabble com camel cxfbean JAX Rs QueryParam td        html a          ',0
'hawtdb   Should work in OSGi    The decode method in ObjectCodec should wrap the causes stacktrace in the wrapped IOException For example OSGi frameworks may be pesky and we want to be able to see whatever stacktrace it may thrown on you  public T decode DataInput dataIn  throws IOException   int size   dataIn readInt    byte   data   new byte size   dataIn readFully data   ByteArrayInputStream bytesIn   new ByteArrayInputStream data   ObjectInputStream objectIn   new ObjectInputStream bytesIn   try   return  T  objectIn readObject      catch  ClassNotFoundException e    throw new IOException e getMessage        For being JDK     compatible you need to do it like public static IOException createIOException String message  Throwable cause    IOException answer   new IOException message   answer initCause cause   return answer      ',0
'Splitter EIP   The sub exchanges should not contains on completions from original Exchange    See nabblehttp   camel        n  nabble com Camel calling commit too early when using split seda file endpoint tp       p        html   ',0
'polling of feeds in FeedEntryPollingConsumer is broken     The FeedEntryPollingConsumer class implements the poll   method for the  splitEntries  mode of the RssEndpoint is broken You can think of two ways that polling feeds could work    A feed is created  then one item is processed  then the delay  then process another item  This way the feed is kept between calls to poll      A feed is created  then all the items are processed  the feed is cleared  and then the delay But the way it presently works A feed is created  one items is processed  and the feed is cleared  then the delay  and again the feed is created and the next item is cleared This is clearly wrong  Feed entries can be missed  because the index of the next item to process is stored over polls but the list isn t  Also this creates a big network overhead when polling very active feeds such as twitter search   This is easy to fix  In the below code public void poll   throws Exception   Object feed   createFeed    populateList feed   while  hasNextEntry      Object entry   list get entryIndex     boolean valid   true  if  entryFilter    null    valid   entryFilter isValidEntry endpoint  feed  entry     if  valid    Exchange exchange   endpoint createExchange feed  entry   getProcessor   process exchange      return and wait for the next poll to continue from last time  this consumer is stateful  return     The return  at line    of org apache camel component feed FeedEntryPollingConsumer  should be deleted    ',0
'Using   in endpoint uri causes thread name parser to fail    See nabblehttp   camel        n  nabble com How to specify route to folder with in actual name tp       p        html   ',0
'cxfbean creates another instance of the class instead of directly using the referenced bean        this makes it impossible to inject properties to the  WebService class lt camelContext gt   lt route gt   lt from uri          gt   lt to uri  cxfbean handler    gt   lt  route gt  lt  camelContext gt  lt bean id  handler  class  a b c Handler  gt   lt property name  prop   value       gt  lt  bean gt when  handler  is created by Spring  its  prop   is set to    when the cxfbean handler is triggered  the  prop   is null  because CXF created another instance of Handler instead of using the one created by Spring   ',0
'Route autoStartup configurable through Property    Using Camel     I want to make the usage of a certain route configurable through properties   lt camelContext id  camel  trace  true  xmlns  http   camel apache org schema spring  gt   lt route id  configurable    autoStartup    startup      gt   lt from uri  direct start     gt   lt to uri  mock end     gt   lt  route gt   lt route id  configurable    autoStartup    startup      gt   lt from uri  direct start     gt   lt to uri  mock end     gt   lt  route gt  lt  camelContext gt But if I do use the PropertyPlaceholder on the CamelContext like below it works   lt camelContext id  camel  trace  true  autoStartup    startup context   So is this a bug or should this work this way    ',0
'OsgiDefaultCamelContext getTypeConverterRegistry   returns null    The showed up when using dozer as shown in http   camel apache org dozer type conversion html  whose DozerTypeConverterLoader tries to get the type converter registry using     TypeConverterRegistry registry   camelContext getTypeConverterRegistry      Plausible error OsgiDefaultCamelContext java  Override protected TypeConverter createTypeConverter     return new OsgiTypeConverter bundleContext  getInjector      DefaultCamelContext javapublic TypeConverterRegistry getTypeConverterRegistry     if  typeConverterRegistry    null       init type converter as its lazy if  typeConverter    null    getTypeConverter         type converter is usually the default one that also is the registry if  typeConverter instanceof DefaultTypeConverter    typeConverterRegistry    DefaultTypeConverter  typeConverter      return typeConverterRegistry   Error getTypeConverter   returns an OsgiTypeConverter OsgiTypeConverter does not inherit from DefaultTypeConverter  thus the instanceof returns false  gt  null is returnedSolution Lots of different ways to do this  and it s getting late here  In this case  maybe it s OsgiDefaultCamelContext s responsibility to also override getTypeConverterRegistry with something along the lines of  Overridepublic TypeConverterRegistry getTypeConverterRegistry     if  typeConverterRegistry    null       init type converter as its lazy if  typeConverter    null    getTypeConverter         type converter is usually the default one that also is the registry if  typeConverter instanceof OsgiDefaultTypeConverter    typeConverterRegistry     OsgiDefaultTypeConverter  typeConverter  getRegistry        return typeConverterRegistry   We ve employed an  ugly  workaround in a local version of DozerTypeConverterLoader java  TypeConverter typeConverter   camelContext getTypeConverter    DefaultTypeConverter registry   null  if  typeConverter instanceof DefaultTypeConverter    registry    DefaultTypeConverter typeConverter    else if  typeConverter instanceof OsgiTypeConverter    OsgiTypeConverter osgiTypeConverter    OsgiTypeConverter typeConverter  registry   osgiTypeConverter getRegistry        ',0
'camel ftp  fileExist Fail not honored when producer works in FTP root path    when using a route with ftp producer such as    lt to uri  ftp   user host  fileExist Fail amp fileName test amp password mypass    gt The route will not correctly fail if the fileName already exists It will work in any sub directory   lt to uri  ftp   user host mydir fileExist Fail amp fileName test amp password mypass    gt The root cause of the bug is an incorrect test in org apache camel util FileUtil onlyPath   in component camel core This method returns null when the parameter string is      It should return     The attached patch fixes the issue    ',0
'camel ftp   Setting password and username using UserInfo on uri does not work    You should be able to set ftp endpoint uri as  ftp   scott localhost     getPort       deletefile password tiger amp binary false amp delete true And when using password and username in the userinfo part of the uri  ftp   tiger scott localhost     getPort       deletefile binary false amp delete true The latter didn t work   ',0
'Confusing IllegalArgumentException when address attribute isn t specified on CXF endpoint     If you create CXF endpoint  like this  without the address attribute    lt cxf cxfEndpoint id  greeting  wsdlURL  greeting wsdl  serviceClass  tutorial hanbo webservice Greeting   gt   lt  cxf cxfEndpoint gt      then you get a really confusing error when you deploy the endpoint in ServiceMix  the error is Caused by  java lang IllegalArgumentException  endpointUri is not specified and org apache camel component cxf CxfSpringEndpoint does not implement createEndpointUri   to create a default value at org apache camel impl DefaultEndpoint getEndpointUri DefaultEndpoint java     at org apache camel management DefaultManagementLifecycleStrategy onEndpointAdd DefaultManagementLifecycleStrategy java      at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      We find that if you explicitly set the address then the problem goes away  see below   lt cxf cxfEndpoint id  greeting  wsdlURL  greeting wsdl  address  http   localhost      GreeterContext SOAPMessageService  serviceClass  tutorial hanbo webservice Greeting   gt   lt  cxf cxfEndpoint gt  On camel cxf web page  the  address  attribute is not mentioned anywhere in the table of URI properties  so you might be lead to believe that it s not necessary    ',0
'Concurrent consumers on seda endpoint can cause content routing to mismatch    When consuming concurrently from a seda endpoint  when the route contains a content router based on the header  it will randomly route through the wrong choice In my specific case  I was consuming from an activemq queue  which would receive messages with a header that would then determine which route it would follow  It would randomly send messages down the wrong path  When I turned on tracing  it would behave itself  It also behaved itself when I limited it to only a single consumer  I was  however  able to duplicate it with the unit test below  Due to the concurrency issue  the test can occasionally pass  but run it a couple times and it should fail  It ll either receive   messages when it should have only gotten    or it will get no messages when it should have gotten   ConcurrencyTest javaimport org apache camel EndpointInject import org apache camel Produce import org apache camel ProducerTemplate import org apache camel builder RouteBuilder import org apache camel component mock MockEndpoint import org apache camel test CamelTestSupport public class ConcurrencyTest extends CamelTestSupport    EndpointInject uri    mock result   protected MockEndpoint resultEndpoint   EndpointInject uri    mock otherResult   protected MockEndpoint otherResultEndpoint   Produce uri    seda start   protected ProducerTemplate template  public void testSendMatchingMessage   throws Exception   String expectedBody     lt matched  gt    resultEndpoint expectedBodiesReceived expectedBody   otherResultEndpoint expectedBodiesReceived expectedBody   template sendBodyAndHeader expectedBody   myDirection    send    template sendBodyAndHeader expectedBody   myDirection    received    resultEndpoint assertIsSatisfied       Override protected RouteBuilder createRouteBuilder     return new RouteBuilder     public void configure     from  seda start concurrentConsumers        from  seda start concurrentConsumers      choice    when header  myDirection   isEqualTo  send    to  mock result    when header  myDirection   isEqualTo  received    to  mock otherResult              ',0
'request reply over JMS using temporary queues   if connection lost the temporary queue is not re created which causes the producer to not work anymore    To recreate the problem you need a route with a jms inout endpoint that is configured to use a temporary destination for replies  Till now I was only able to show the problem with tibco ems  Start broker Start the jms consumer that replies to the request Start the route Send a request reoply exchange  should work  Stop the broker Wait long enough for the client to do a full reconnect  I used connectionFactory setReconnAttemptCount    on the client so I do not have to wait so long  Start the broker   gt  The jms component will do a full new connect Send a request reoply exchange   gt  Now a InvalidDestination Exception happensThe client route will not work anymore until a restart as it creates the temporary destination only once and it is invalid now    ',0
'The CxfConsumer s getContinuation method might throw NPE    HelloWhen trying the latest CAMEL       SNAPSHOT  I got a NPE java lang NullPointerException at org apache camel component cxf CxfConsumer   getContinuation CxfConsumer java      at org apache camel component cxf CxfConsumer   invoke CxfConsumer java     at org apache cxf interceptor ServiceInvokerInterceptor   run ServiceInvokerInterceptor java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRun FutureTask java           ',0
'Threads   Should allow using   in core pool size    See nabblehttp   camel        n  nabble com ThreadPoolExecutor configuration tp       p        html   ',0
'GenericFileProducer writeFile method creates instance of un used InputStream    org apache camel component file GenericFileProducerMethod  writeFileThis method has the following statement InputStream payload   exchange getIn   getBody InputStream class  This internally results in calling a TypeConverter to convert an object into InputStream type  However this InputStream has not been used and is eventually closed in the finally block  In the same method calling method storeFile on FileOperations  boolean success   operations storeFile fileName  exchange  also opens an InputStream on the same message    ',0
'JMX MBeans not registered for initiators    registering the Initiator before it has been started will not register the sessions mbeans with JMX  So the acceptors are ther  but no initiators    ',0
'XmppEndPoint   setting login to false when creating an account results in no action    XmppEndPoint myXmppEndPoint   new XmppEndPoint        myXmppEndPoint setCreateAccount true  myXmppEndPoint  setLogin false       This will result in  no action  in xmpp server  if setLogin true the account is created and the user stays online I believe it s because of the logic used in createConnection   method of XmppEndPoint that could be changed to if   connection isAuthenticated      if  user    null    if  LOG isDebugEnabled      LOG debug  Logging in to XMPP as user      user     on connection      getConnectionMessage connection      if  password    null    LOG warn  No password configured for user      user     on connection      getConnectionMessage connection      if  createAccount    AccountManager accountManager   new AccountManager connection   accountManager createAccount user  password     if login   if  resource    null    connection login user  password  resource     else   connection login user  password         else   if  LOG isDebugEnabled      LOG debug  Logging in anonymously to XMPP on connection      getConnectionMessage connection      connection loginAnonymously        ',0
'Multicast with pipeline may cause wrong aggregated exchange    This is a problem when using   set of nested pipeline and doing a transform as the first processor in that pipeline from  direct start   multicast new SumAggregateBean     pipeline   transform bean IncreaseOne class   bean new IncreaseTwo    to  log foo   end    pipeline   transform bean IncreaseOne class   bean new IncreaseTwo    to  log bar   end    end    to  mock result      ',0
'cxfEndpoint of camel cxf doesn t support  the shcemaLocation element    Here is the mail thread            which discusses about it            http   camel        n  nabble com camel cxf exception when parsing cxf schemaLocation element td        html a          ',0
'NPE occurs without  Entity annotation    Here is code from the org apache camel component jpa JpaConsumer classprotected String getEntityName Class lt   gt  clazz    Entity entity   clazz getAnnotation Entity class      Check if the property name has been defined for Entity annotation if   entity name   equals           line     return entity name      else   return null    When trying to consume entities from jpa endpoint exception occursjava lang NullPointerException at org apache camel component jpa JpaConsumer getEntityName JpaConsumer java      at org apache camel component jpa JpaConsumer createQueryFactory JpaConsumer java      at org apache camel component jpa JpaConsumer getQueryFactory JpaConsumer java      at org apache camel component jpa JpaConsumer   doInJpa JpaConsumer java     at org apache camel component jpa JpaTemplateTransactionStrategy     doInJpa JpaTemplateTransactionStrategy java     at org springframework orm jpa JpaTemplate execute JpaTemplate java      at org springframework orm jpa JpaTemplate execute JpaTemplate java      at org apache camel component jpa JpaTemplateTransactionStrategy   doInTransaction JpaTemplateTransactionStrategy java     at org springframework transaction support TransactionTemplate execute TransactionTemplate java      at org apache camel component jpa JpaTemplateTransactionStrategy execute JpaTemplateTransactionStrategy java     at org apache camel component jpa JpaConsumer poll JpaConsumer java     at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     This is because there is no  Entity annotation and persistence is configured by means of orm xml To fix the problem change line     toif  entity    null  amp  amp   entity name   equals        ',0
'CxfRsInvoker produces NullpointerException when no ContinuationProvider is set in the InMessage    In my usage of CXF RS with Camel through the camel cxf component I ran into a NullpointerException  the specific case is described in some detail on StackOverflow  http   stackoverflow com questions         why do i get a nullpointerexception when invoking the cxf rs endpoint of a camel Specifically I run into a NullpointerException Caused by  java lang NullPointerException at org apache camel component cxf jaxrs CxfRsInvoker getContinuation CxfRsInvoker java     at org apache camel component cxf jaxrs CxfRsInvoker performInvocation CxfRsInvoker java     at org apache cxf service invoker AbstractInvoker invoke AbstractInvoker java            moreI was assuming I was misconfiguring something but didn t find any alternative way so I started digging in the camel cxf source code I found that such a  getContinuation  method also exists for the org apache camel component cxf CxfConsumer as well as for the CxfRsInvoker  where it was failing for me   However in the case of the CxfConsumer there is a guard on the ContinuationProvider so that if it is null  then null is returned return provider    null   null   provider getContinuation   CxfRsInvoker does not have this guard  but it does have code to deal with a  null  Continuation at the calling site  line     in performInvocation   Therefore I assumed this was a bug and patched the guard into the CxfRsInvoker as well My program now seems to work correctly  I assume this is a bug For completeness sake  this is what getContinuation now looks like for me  private Continuation getContinuation Exchange cxfExchange    ContinuationProvider provider    ContinuationProvider cxfExchange getInMessage   get ContinuationProvider class getName     return provider    null   null   provider getContinuation        ',0
'camel irc component silently fails on nick collision    When the camel irc component connects to an irc server and there s a nick collision it silently fails  Also note there is no camel irc component in Jira    ',0
'Hard coded locale in Bindy DatePatternFormat    As reported by a user from the community  http   camel        n  nabble com Bindy Dateformat Parsing exception td        html   the locale of SimpeDateFormat in bindy s DatePatternFormat class is hard coded to FRANCE    ',0
'spring integration   Should have better configuration validation    See nabblehttp   camel        n  nabble com Integration camel and spring integration tp       p        html   ',0
'PackageHelper   issue with version numbers which contains non decimal    See more herehttp   fusesource com forums thread jspa threadID      amp tstart     ',0
'InterceptSendToEndpoint should check for if stop DSL has been used    See nabblehttp   camel        n  nabble com InterceptSendToEndpoint Http Component tp       p        html   ',0
'CamelContext is started twice when using camel blueprint    For example if you run the testRouteWithAllComponents test in CamelBlueprintTest in tests camel itest osgi you will see a lot of logging  But notice RMI TCP Connection              INFO org apache camel core osgi OsgiDefaultCamelContext   Apache Camel     SNAPSHOT  CamelContext     camel    is starting RMI TCP Connection              INFO org apache camel core osgi OsgiDefaultCamelContext   Apache Camel     SNAPSHOT  CamelContext     camel    started in       secondsThen blueprint does something Blueprint Extender     INFO org apache camel blueprint BlueprintCamelContext   Apache Camel     SNAPSHOT  CamelContext    camel    is starting Blueprint Extender     INFO org apache camel blueprint BlueprintCamelContext   Apache Camel     SNAPSHOT  CamelContext    camel    started in       secondsAnd likewise both CamelContext s is shutdown when the test completes  There are logging events for that as well Pay attention to the name of the  st CamelContext    camel    This is the correct name as its based on the bundle id  our end user Camel application is given  This ensures that the CamelContext from his application has a name which is unique and refers to the bundle id as well Now if you look at the  nd CamelContext being started its given another name   camel    That id is most likely using a shared bundle id with a low number  For example camel blueprint or camel core bundle  or something like that  In essence camel blueprint should only create one CamelContext and it should use the    camel   as the name of the CamelContext  eg  include the bundle id of the end user application     ',0
'InterceptSendToEndpoint has issues with interception http endpoints which has multiple parameters    See nabblehttp   camel        n  nabble com interceptSendToEndpoint with dynamic endpoint tp       p        htmlThe issue is when any endpoints have parameters which may be re ordered when the endpoint is normalized    ',0
'Bindy should support clipping fields if they exceed maximum length allowed when using fixed length    Adding a new option to bindy annotation       Indicates to clip data in the field if it exceeds the allowed length when using fixed length     boolean clip   default false Then if enabled it will clip the data so it can fit the length Also now Camel throws an exception if the data is too long and you have clip set as false    ',0
'BindyCsvDataFormat broken for pipe delimited files    Attempting to unmarshall a pipe delimited CSV file into a POJO using Bindy causese the first and last character the the line processed to be dropped  It appears that the BindyCsvDataFormat class removes the first and the last character from the line read from the CSV if the seperator is  gt    characters in length  see below or line         in BindyCsvDataFormat   For pipe delimited files  you need to specify   as the seperator  as   is not evaluated correctly as a java regex by the split fuction  This leads to the first and last character for the line being parsed being dropped  From the comments it appears a  fix  was added to remove the first and last character of the line when the seperator contains quotes or double quotes  Making this determination using the length of the seperator  rather than evaluating using a regex seems to be a poor solution that breaks other CSV delimiters See Attached for an code example    ',0
'ConcurrentModificationException in DefaultCamelContext removeRouteDefinitions      I get the following exception in DefaultCamelContext removeRouteDefinitions    We are removing route definitions from multiple threads  I see synchronization in various other methods  but not this one  Caused by  java util ConcurrentModificationException at java util AbstractList Itr checkForComodification AbstractList java      at java util AbstractList Itr next AbstractList java      at java util AbstractCollection removeAll AbstractCollection java      at org apache camel impl DefaultCamelContext removeRouteDefinitions DefaultCamelContext java        ',0
'scala   xpath not working together with choice when    When using the Scala DSL  xpath expressions inside when   do not work as expected  As an example   direct a     gt    choice   when  xpath    hello    to   mock english   when  xpath    hallo      to   mock dutch   to   mock german     otherwise to   mock french         Send messages direct a       lt hello  gt      lt hallo  gt      lt hellos  gt   Here we should receive   message in each of the mocks  For whatever reason  all   messages go to mock english  Similar routes work as expected with the Java DSL    ',0
'Aggregation fails to call onComplete for exchanges if the aggregation is after a bean or process     When creating a route that contains an aggregation  if that aggregation is preceded by a bean or process  it will fail to call AggregateOnCompletion onComplete    I ve attached a unit test that can show you the behavior  Trace level loggging will need to be enabled to see the difference  With the call to the bean  it won t show the following log entry TRACE org apache camel processor aggregate AggregateProcessor   Aggregated exchange onComplete  Exchange Message  ab If you remove the bean call  it ll start calling onComplete   again What I ve noticed is that if this call is not made  it ends up in a memory leak since the inProgressCompleteExchanges HashSet in AggregateProcessor never has any exchange ID s removed    ',1
'Jt   DataQueueConsumer incorrectly implements timeout semantics  jt    component     Jt   DataQueueConsumer implementation of receive long  passes the timeout argument directly to com ibm as    access DataQueue read int   not performing unit conversion  However  Jt   DataQueueConsumer receive long  accepts milliseconds  whereas DataQueue read int  accepts seconds as the time unit Also  invoking Jt   DataQueueConsumer receive   results in a call to DataQueue read    which is not a blocking call  on the contrary  it will not wait for entries Code snippet below Jt   DataQueueConsumer java DataQueue queue   endpoint getDataQueue    try   DataQueueEntry entry  if  timeout  gt        entry   queue read  int timeout     else   entry   queue read     Note that the submitted patch floors the timeout value when converting to seconds  but different rounding might be desired  which should be specified in the class documentation    ',0
'Aggregator   The completionFromBatchConsumer option dont aggregate the last incoming exchange    See nabblehttp   camel        n  nabble com Last Aggregated Exchange lost Aggregator with a Batch Consumer and persistent AggregationRepository tp       p        html   ',0
'Detect uncaught exceptions in UoWProcessor to ensure UoW is done even for those uncaught exceptions    The Camel routing engines will handle this in       of the cases  but when you shutdown a Spring AC then Spring may stop beans in whatever order and this can cause those beans to fail operating during a graceful shutdown  And in worst case exceptions is thrown in situations where they are not normally done To cater for that and other situations the UoWProcessor should detect this and act accordingly This ensure the in flight registry will be tracked and we are not stuck with a missing inflight message  causing Camel to wait for the     sec timeout to shutdown For example just try hitting ctrl   c in that camel example management and you can see such an example    ',0
'Concurrent writes to the same file has race condition    See nabblehttp   camel        n  nabble com Using Splitter and file producer with option fileExist Append failed tp       p        htmlWe need to synchronize on the file name to avoid concurrent writes to the same file    ',0
'FTP rename fails     This is related to the user group discussion http   camel        n  nabble com Problem renaming existing file in FTP td        html When using a tmpPrefix when uploading  the rename from the tmp file to the destination file fails  if the destination file is already present  even though the option fileExist Override is used We have the problem on just a few destination servers which all seems to be windows machines I have fetched the     branch of camel ftp to find out why it does not work  since the unit test you refer to in your previous post do excercise the problem It appears that the cause of the problem is  that the FtpOperations existsFile fails to return true  which then causes the code not to enter the part where it deletes the exisiting file The reason for the FtpOperations existsFile to return false  is  that the list of existing files has the directoryname prepended  e g  I m trying to upload Test REN to folder test rename  and in the code  if  existing equals onlyName    existing test rename Test REN and onlyName Test REN   which returns false   but causes the later rename to fail as the target folder did contain the Test REN  My guess is that it is server dependent whether the returned list of names in the directory include the directory name or not To fix this I have added the following line of code before the if statementexisting   FileUtil stripPath FileUtil normalizePath existing   So it will strip the path part of the file name before comparing it to onlyName    ',0
'camel josql doesnot export org apache camel language sql         ',0
'Inconsistent filename value when move attribute is used with File component    Unless I miss a point  when I use the following endpoint  the file name value is incorrect and is equal to file absolute path lt endpoint id  fileEndpoint  uri  file   queue input folder  recursive true amp include     dat amp move   queue done folder   simple file name  amp moveFailed   queue failed folder   simple file name     gt   queue input folder     queue done folder  and   queue failed folder  are absolute paths resolved by Spring In fact  Camel tries to move the file to   queue done folder    queue input folder   simple file name I ve also tried using  simple header CamelFileName  instead of  simple file name  and it gives the same result For now  I ve found a workaround using a processor which put the CamelFileName header value into a  destFile  property  lt endpoint id  fileEndpoint  uri  file   queue input folder  recursive true amp include     dat amp move   queue done folder   simple property destFile  amp moveFailed   queue failed folder   simple property destFile     gt    ',0
'Mistake in camel eventAdmin feature    The Camel Karaf feature camel eventAdmin is not correct The features is described as follow  lt feature name  camel eventAdmin  version         gt   lt feature version         gt camel core lt  feature gt   lt bundle gt mvn org apache camel camel eventAdmin       lt  bundle gt  lt  feature gt but the camel eventAdmin artifact correct name is camel eventadmin http   repo  maven org maven  org apache camel camel eventadmin       camel eventadmin       jarThis typo mistake provides Downloading  http   repo  maven org maven  org apache camel camel eventAdmin       camel eventAdmin       jar     INFO      Unable to find resource  org apache camel camel eventAdmin jar        in repository central  http   repo  maven org maven       INFO                                                                                   ERROR      BUILD FAILURE     INFO                                                                                   INFO      Can t resolve bundle org apache camel camel eventAdmin jar           INFO                                                                              I m gonna submit a patch to fix that    ',0
'Make Content Type HTTP Header Optional    As per section       of RFC       any HTTP     message containing an entity body SHOULD  not MUST  include a Content  Type header field defining the media type of that body The populateExchangeFromRestletRequest method of the DefaultRestletBinding class  unlike others in the same class  needs to be changed if  request getEntity   getMediaType   equals MediaType APPLICATION WWW FORM          else   inMessage setBody request getEntity   getStream        ',0
'Endpoints may be shutdown twice as they are tracked in two lists in CamelContext    Endpoint is a Service which means they are listed in both a endpoint and service list  They should only be listed in the endpoint list This avoids issues with endpoints may be shutdown twice when Camel shutdown See nabblehttp   camel        n  nabble com QuartzComponent do not delete quartz worker threads when shutdown Camel tp       p        html   ',0
'interceptFrom and from Endpoint  don t work together    When using interceptFrom String  together with from Endpoint   the below Exception occurs during the routes building process  Looking at RoutesDefinition java     reveals  that the FromDefintion just created has no URI  That causes the comparison to all the interceptFroms  URIs to fail  As far as I can tell  the way to fix this would be to add setUri myEndpoint getEndpointUri    in the constructor FromDefinition Endpoint endpoint  Below the stack trace  there is a unit test that demonstrates the issue  Until it if fixed  it can be easily circumvented by adding the commented out line  and then change to from  myEndpoint   org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  null due to  null at org apache camel util EndpointHelper matchEndpoint EndpointHelper java      at org apache camel model RoutesDefinition route RoutesDefinition java      at org apache camel model RoutesDefinition from RoutesDefinition java      at org apache camel builder RouteBuilder from RouteBuilder java      at dk mobilethink adc  endpoint UnsetUriTest   configure UnsetUriTest java     at org apache camel builder RouteBuilder checkInitialized RouteBuilder java      at org apache camel builder RouteBuilder configureRoutes RouteBuilder java      at org apache camel builder RouteBuilder addRoutesToCamelContext RouteBuilder java      at org apache camel impl DefaultCamelContext addRoutes DefaultCamelContext java      at org apache camel test CamelTestSupport setUp CamelTestSupport java      at junit framework TestCase runBare TestCase java      at org apache camel test TestSupport runBare TestSupport java     at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at org junit internal runners JUnit  ClassRunner run JUnit  ClassRunner java     at org eclipse jdt internal junit  runner JUnit TestReference run JUnit TestReference java     at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java     Caused by  java lang NullPointerException at org apache camel util UnsafeUriCharactersEncoder encode UnsafeUriCharactersEncoder java     at org apache camel util URISupport normalizeUri URISupport java      at org apache camel util EndpointHelper matchEndpoint EndpointHelper java             morepackage dk mobilethink adc  endpoint import org apache camel Endpoint import org apache camel builder RouteBuilder import org apache camel test CamelTestSupport public class UnsetUriTest extends CamelTestSupport    Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder     public void configure   throws Exception   interceptFrom  URI    to  irrelevantURI    Endpoint myEndpoint   getContext   getComponent  direct   createEndpoint  ignoredURI       getContext   addEndpoint  myEndpoint   myEndpoint   from myEndpoint   inOnly  log foo           public void testNothing          ',0
'OnException   The order they are defined in the RouteBuilder   XML should be preserved when you have multiple of the same exception type    When you have    of onException MyExcpetion class  then the order may get reversed  in the logic which prepares the routes  The logic should cater for clashes and ensure orders is preserved This currently only occurs for XML based routes  The Java DSL works    ',0
'Sending to http endpoint may double encoding parameters    See nabbleThe workaround is to use either HTTP URI or HTTP QUERY as a header with the parameters  Then they are not double encoded Also the HTTP URI should be placeholder resolved  so we can use port or the likes to inject the port number dynamic    ',0
'JAXB marshaling broken in          This used to work in       but in       it throws Caused by  javax xml bind JAXBException  class com ask ugc camel Jask     Foo nor any of its super class is known to this context  at com sun xml bind v  runtime JAXBContextImpl getBeanInfo JAXBContextImpl java      at com sun xml bind v  runtime XMLSerializer childAsRoot XMLSerializer java      at com sun xml bind v  runtime MarshallerImpl write MarshallerImpl java      at com sun xml bind v  runtime MarshallerImpl marshal MarshallerImpl java      at javax xml bind helpers AbstractMarshallerImpl marshal AbstractMarshallerImpl java     at org apache camel converter jaxb JaxbDataFormat marshal JaxbDataFormat java      at org apache camel converter jaxb JaxbDataFormat marshal JaxbDataFormat java        ContextConfiguration  locations    foo bar JaxbBug ContextConfig   loader   JavaConfigContextLoader class public class JaxbBug extends AbstractTestNGSpringContextTests    EndpointInject uri    mock end   protected MockEndpoint mockEndpoint   Produce uri    direct test   protected ProducerTemplate producer   Test  DirtiesContext public void testJaxbMarshalling   throws InterruptedException   mockEndpoint expectedMessageCount     producer sendBody new Foo     mockEndpoint assertIsSatisfied       Configuration public static class ContextConfig extends SingleRouteCamelConfiguration    Bean public RouteBuilder route     return new RouteBuilder      Override public void configure   throws Exception   JaxbDataFormat jaxb   new JaxbDataFormat JAXBContext newInstance Foo class    from  direct test   marshal jaxb  to  mock end              XmlRootElement public static class Foo   String bar  public String getBar     return bar    public void setBar String bar    this bar   bar         ',0
'sftp producer runs in exception fileName does not contain any path information    When the fileName uri option does not contain any folder information  ie   fileName filename txt  the producer runs in exceptionThe exception is thrown when the producer calls ls method of jsch ChannelSftp passing an empty string as directory parameter in org apache camel component file remote SftpOperations existsFile line    sample URI  sftp   user hostname    disconnect true amp eagerDeleteTargetFile false  Bstepwise  Dfalse amp fileName SYSTEM   amp password        amp soTimeout       amp tempFileName      Bfile  Aname noext  D tmpStack trace                           RecipientList  thread      ERROR  org apache camel processor DefaultErrorHandler    Failed delivery for exchangeId  ID                                  Exhausted after delivery attempt    caught  org apache camel component file GenericFileOperationFailedExcept on  org apache camel component file GenericFileOperationFailedException  at org apache camel component file remote SftpOperations existsFile SftpOperations java      at org apache camel component file GenericFileProducer processExchange GenericFileProducer java      at org apache camel component file remote RemoteFileProducer process RemoteFileProducer java     at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      at org apache camel processor MulticastProcessor doProcessParallel MulticastProcessor java      at org apache camel processor MulticastProcessor access     MulticastProcessor java     at org apache camel processor MulticastProcessor   call MulticastProcessor java      at org apache camel processor MulticastProcessor   call MulticastProcessor java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java      Caused by     at com jcraft jsch ChannelSftp ls ChannelSftp java       at org apache camel component file remote SftpOperations existsFile SftpOperations java             more Caused by  java lang StringIndexOutOfBoundsException  String index out of range    at java lang String charAt String java      at com jcraft jsch ChannelSftp remoteAbsolutePath ChannelSftp java       at com jcraft jsch ChannelSftp ls ChannelSftp java              more   ',0
'Mail component issue with starttls option    The problem occurs when I read from a pop  endpoint and send to an smtp endpoint in the same camel context with the mail pop  starttls enable true and mail smtp starttls enable true options Required Java options for starttls are set  Djavax net ssl trustStore D  test xxx jks Djavax net ssl trustStorePassword yyyWhen I only configure one of either route  everything works fine  When I configure both  I get the following exception AUTH LOGINC  STAT    Must issue STARTTLS command firstSTARTTLSS   OK    C  NOOP    begin TLS negotiationS   OKC  RSETS   OKC  QUITAUTH LOGINS   OK POP  server closing connection    wrong state for AUTH command                             foo      ERROR DefaultErrorHandler   Failed delivery for exchangeId  ID E     ahi                          Exhausted after delivery attempt    caught  org springframework mail MailAuthenticationException  Authentication failed  nested exception is javax mail AuthenticationFailedException      wrong state for AUTH commandorg springframework mail MailAuthenticationException  Authentication failed  nested exception is javax mail AuthenticationFailedException      wrong state for AUTH command at org springframework mail javamail JavaMailSenderImpl doSend JavaMailSenderImpl java          org springframework context support       RELEASE jar       RELEASE      at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java          org springframework context support       RELEASE jar       RELEASE      at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java          org springframework context support       RELEASE jar       RELEASE      at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java          org springframework context support       RELEASE jar       RELEASE      at org apache camel component mail MailProducer process MailProducer java         camel mail       jar            at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java          camel core       jar            at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java          camel core       jar            at org apache camel processor SendProcessor process SendProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java          camel core       jar            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java          camel core       jar            at org apache camel processor DefaultChannel process DefaultChannel java          camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor Pipeline process Pipeline java          camel core       jar            at org apache camel processor Pipeline process Pipeline java         camel core       jar            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java          camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel processor RoutePolicyProcessor process RoutePolicyProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel component timer TimerConsumer sendTimerExchange TimerConsumer java          camel core       jar            at org apache camel component timer TimerConsumer   run TimerConsumer java         camel core       jar            at java util TimerThread mainLoop Unknown Source                     at java util TimerThread run Unknown Source                    The problem seems to be in org apache camel component mail MailConfiguration createJavaMailSender   where it uses the same mail session for both connection  see Session getDefaultInstance below if  session    null    answer setSession session     else      use our authenticator that does no live user interaction but returns the already configured username and password Session session  try   session   Session getDefaultInstance answer getJavaMailProperties    getAuthenticator       catch  Throwable t       fallback as default instance may not be allowed on some systems session   Session getInstance answer getJavaMailProperties    getAuthenticator       answer setSession session    This is because getDefaultInstance creates a Session object the first time it is called  Then it caches that Session and returns it for all subsequent calls  It also ignores the new and different properties for the second route See also http   camel        n  nabble com Mail component with starttls td        html   ',0
'HttpProducer drops authentification parameters     Hi  I run into the following problem with Camel       An HTML file contain an URI lists of files to be downloaded from a web server to the local file system The HTML file is parsed via a Java Bean Splitter  The Java Bean Splitter produces a Set of URI strings These files should be downloaded from a web server to the local file system  The files are protected with BASIC authentification The extraction and the splitting of the download URIs works quite well with the Java Bean Splitter The Java Bean Splitter produces URI like  http    download acme com file   txt username foo amp password baaHere s the setup  lt route gt   lt from uri  file    tmp files to retrieve     gt   lt method bean  prepareDownLoadUri  method  parseIndexHtml    gt   lt setHeader headerName  CamelHttpMethod  gt   lt constant gt GET lt  constant gt   lt  setHeader gt   lt setHeader headerName  CamelHttpUri  gt   lt simple gt   body  lt  simple gt   lt  setHeader gt   lt to uri  http    download acme com     gt   lt to uri  bean saveFileProcessor    gt  lt  route gt  lt bean id  prepareDownLoadUri  class  com acme PrepareDownLoadUri    gt  lt bean id  saveFileProcessor  class  com acme SaveFileProcessor    gt The injection of the URIs from the Splitter into the HttpProducer  works quite well  I debugged into the HttpProducer and it seems  that the HttpProducer does not provide the unterlying http client  in this case Apache HttpClient    with the authentification settings from the URI At first  the queryString is extracted from the Exchange Header  if provided HttpProducer createMethod    line    String url   HttpHelper createURL exchange  getEndpoint    The url string contains the URI produces by the splitter including the authentification parameters  http    download acme com file   txt username foo amp password baaThen the HttpProducer assembles a new URI for the requests  The new URI is assembled from parts of the string url  line      and other parameters from the Exchange Header  HttpProducer createMethod    lines            is a query string provided in the endpoint URI or in a header  header overrules endpoint  String queryString   exchange getIn   getHeader Exchange HTTP QUERY  String class   if  queryString    null    queryString   getEndpoint   getHttpUri   getRawQuery      StringBuilder builder   new StringBuilder uri getScheme    append        append uri getHost     if  uri getPort            builder append      append uri getPort       if  uri getPath      null    builder append uri getRawPath       if  queryString    null    builder append       builder append queryString     HttpRequestBase httpRequest   methodToUse createMethod builder toString    The problem is  in the assembling of the new URI  the authentification parameters are dropped  One possible solution could be   check for authentification parameters in the url  line      and extract them  build the credentials  AuthScheme and provide it to the underlying http client thanks in advance ben   ',0
'HTTP Producer seems to send an empty body request on redelivery when the original request fails due to a connection timeout    Camel HTTP Producer is throwing an exception when it encounters a connection timeout  However instead of preserving the original message it is treating it processing the exception output  When connected to a redelivery meachanism  this results in an exception message being sent as input to the HTTP Consumer  The older versions of Camel behaved differently on read timeout  In Camel   x  in a read timeout  the Exception is thrown and the input message to the producer is passed through the pipeline  Now there is a difference  An exception is thrown and the output of the HTTP Producer is passed through the pipeline  Need to study why and what changed since Camel   x and ensure that the above does not happen For more details  please check out the following nabble entryhttp   camel        n  nabble com Http route returning with     but also getting read timed out td        html a       Cheers Ashwin      ',0
'org apache camel component file strategy MarkerFileExclusiveReadLockStrategy is not thread safe    MarkerFileExclusiveReadLockStrategy is not thread safe  When I run a File endpoint with more than one thread the MarkerFileExclusiveReadLockStrategy only deletes the last file to start being processed  The MarkerFileExclusiveReadLockStrategy uses global variables  private File lock  private String lockFileName  and gives them values on the acquireExclusiveReadLock method  When another thread calls the releaseExclusiveReadLock method it uses the global variables to delete the locked file  That means that if another thread came and called the acquireExclusiveReadLock it would have changed the values on the global variables  If lock and lockFileName are not global variables the problem seems to disappear and I can a multithreaded File endpoint and not locked file is left undeleted    ',0
'Web Console  NPE when browsing routes with no description    When some of the routes does not have a description NPE will be thrown  because of the code  i getDescription getText To prevent it  just use  i getDescriptionText    ',0
'maven eclipse goal failure    The error is  ERROR  BUILD ERROR INFO                                                                           INFO  Request to merge when  filtering  is not identical  Original resource src main resources  output target classes  include     exclude       java   test false  filtering false  merging with resource src main resources  output target classes  include     archetype metadata xml   exclude       java   test false  filtering trueand it seems to be resolved in the upcoming maven eclipse plugin        see MECLIPSE       An update to the new release of the plugin  once available  should resolve this    ',0
'BeanInfo not reset when new bean looked up    In camel bean  when a bean is looked up and it is not the same bean as the previous one beanInfo has to be reset This is done in getBean   method of org apache camel component bean RegistryBean but the test is placed after setting bean value so beanInfo is never reset  if  value    bean     bean   value   processor   null   if   ObjectHelper equal ObjectHelper type bean   ObjectHelper type value      beanInfo   null      ',0
'camel jms default cache level should be CACHE NONE when transaction is enabled    I lost a huge amount of time chasing the problem as the default value just screw the whole transaction  the session is created outside the transaction and cached  so usually not enlisted in the tx     ',0
'SmppProducer sends incorrect data coding parameter    The dataCoding parameter on the SMPP uri allows for a value of      or    Our aggregator expects the data coding parameter on the SMPP request from the SmppProducer to be   SMSC Default Alphabet  However  when       or   is specified for the dataCoding parameter  the actual value sent on the smpp request is       or    It appears the MessageClass Class  on the GeneralDataCoding object in SmppProducer is masking an additional   to the byte value It seems the dataCoding parameter should allow you to specify the actual value that is needed as defined by the SMPP Protocol specification    ',0
'OSGi   No possibility to enable ehcache clustering as  ehcache xml is ignored and there is no possibility to set cacheManagerFactory described camel cache docs    This bug is caused by more than one problem as    camel cache bundle provides ehcache xml config which is ignored so then default ehcache failsafe xml is taken by ehcache bundle    according to camel cache docs there is a way to set cacheManagerFactory but it seems to be not implemented asa  default CacheManagerFactory instance is created when when CacheComponent is instantiated b  setter method  public void setCacheManagerFactory CacheManagerFactory cacheManagerFactory  is used just nowhere c  there is no suitable filed in class CacheConfigurationAll above problems cause camel cache to be not able to work in java  clustered world as default failsafe config  is really failsafe  w o clustering    ',0
'camel web   Cannot browse endpoints if messages was consumed from jms queue    You get a NPE if you brows the endpoint Caused by  java lang NullPointerException at org apache camel web resources  scalate ExchangeResource index ssp  anonfun  scalate render   apply ExchangeResource index ssp scala     at org apache camel web resources  scalate ExchangeResource index ssp  anonfun  scalate render   apply ExchangeResource index ssp scala     at scala collection Iterator class foreach Iterator scala        ',0
'camel xmpp   Should stop and clean session  so hot deploy works    See this stacktrace               ERROR   ExtenderThread     ContextLoaderListener        org springframework osgi extender           Application context refresh failed  OsgiBundleXmlApplicationContext bundle qbus camel osgi  config osgibundle  META INF spring   xml  org apache camel FailedToCreateProducerException  Failed to create Producer for endpoint  Endpoint xmpp   articleRoute localhost password        amp room mechatron   conference mw pc   Reason  java lang NullPointerException at org apache camel impl ProducerCache doGetProducer ProducerCache java         org apache camel camel core       fuse        at org apache camel impl ProducerCache acquireProducer ProducerCache java        org apache camel camel core       fuse        at org apache camel impl ProducerCache startProducer ProducerCache java         org apache camel camel core       fuse        at org apache camel processor SendProcessor doStart SendProcessor java         org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor DelegateAsyncProcessor doStart DelegateAsyncProcessor java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor DelegateAsyncProcessor doStart DelegateAsyncProcessor java        org apache camel camel core       fuse        at org apache camel processor interceptor TraceInterceptor doStart TraceInterceptor java         org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor RedeliveryErrorHandler doStart RedeliveryErrorHandler java         org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor DefaultChannel doStart DefaultChannel java         org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor MulticastProcessor doStart MulticastProcessor java         org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor DelegateAsyncProcessor doStart DelegateAsyncProcessor java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startServices ServiceHelper java        org apache camel camel core       fuse        at org apache camel processor DelegateAsyncProcessor doStart DelegateAsyncProcessor java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel impl RouteService startChildService RouteService java         org apache camel camel core       fuse        at org apache camel impl RouteService warmUp RouteService java         org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext doWarmUpRoutes DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext safelyStartRouteServices DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext doStartOrResumeRoutes DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel spring SpringCamelContext doStart SpringCamelContext java         org apache camel camel spring       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl DefaultCamelContext start DefaultCamelContext java          org apache camel camel core       fuse        at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java         org apache camel camel spring       fuse        at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java         org apache camel camel spring       fuse        at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java         org apache camel camel spring       fuse        at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java        org springframework context       RELEASE  at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java         org springframework context       RELEASE  at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java         org springframework context       RELEASE  at org springframework osgi context support AbstractOsgiBundleApplicationContext finishRefresh AbstractOsgiBundleApplicationContext java         org springframework osgi core        at org springframework osgi context support AbstractDelegatedExecutionApplicationContext   run AbstractDelegatedExecutionApplicationContext java         org springframework osgi core        at org springframework osgi util internal PrivilegedUtils executeWithCustomTCCL PrivilegedUtils java        org springframework osgi core        at org springframework osgi context support AbstractDelegatedExecutionApplicationContext completeRefresh AbstractDelegatedExecutionApplicationContext java         org springframework osgi core        at org springframework osgi extender internal dependencies startup DependencyWaiterApplicationContextExecutor CompleteRefreshTask run DependencyWaiterApplicationContextExecutor java         org springframework osgi extender        at java lang Thread run Thread java                Caused by  java lang NullPointerException at org jivesoftware smackx muc MultiUserChat   connectionCreated MultiUserChat java         org apache servicemix bundles smack          at org jivesoftware smack XMPPConnection initConnection XMPPConnection java          org apache servicemix bundles smack          at org jivesoftware smack XMPPConnection connectUsingConfiguration XMPPConnection java          org apache servicemix bundles smack          at org jivesoftware smack XMPPConnection connect XMPPConnection java           org apache servicemix bundles smack          at org apache camel component xmpp XmppEndpoint createConnection XmppEndpoint java          org apache camel camel xmpp       fuse        at org apache camel component xmpp XmppGroupChatProducer doStart XmppGroupChatProducer java         org apache camel camel xmpp       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel impl ServiceSupport start ServiceSupport java        org apache camel camel core       fuse        at org apache camel util ServiceHelper startService ServiceHelper java        org apache camel camel core       fuse        at org apache camel impl ProducerCache doGetProducer ProducerCache java         org apache camel camel core       fuse               more   ',0
'Consumer URI parameters ignored after Route Restart    The URI parameters for a consumer appear to be ignored or disappear when the route where this consumer defined gets restarted One example could be JPA query passed in the URI and is used to filter the results from the consumer The attached test case shows this Look at the Readme txt  camel context xml  and JPARouteRestartTest class for more information Also  took a stab at fixing the problem and provided a patch with a possible solution  I ran the unit tests after that change and all passed    ',0
'CxfPayloadConverter may start failing to convert a CxfPayload to a Node    There is an issue with CxfPayloadConverter that can lead to a failure in converting the CxfPayload into something which is actually convertible  This problem happens when you try to convert a CxfPayload instance that has an empty body list into a Node instance  This returns null and subsequently registers this type mapping key  CxfPayload  gt Node  in org apache camel impl converter BaseTypeConverterRegistry s conversion misses table  Because of this  a subsequent conversion using a CxfPayload instance with an non empty body list will permanently fail I am attaching a modified CxfPayloadConversionTest that includes testCxfPayloadToNode that illustrates this problem  Currently  the last assertion of this test is failing when this issue is present I think we can fix this problem by returning Void TYPE instead of a null for this case In this way  the conversion is regarded as a success and there will be no entry in the conversion misses table So  I am also attaching the modiefied CxfPayloadConverter class that can handle this test case    ',0
'JdbcAggregationRepository count     is not working with MySQL        The JdbcAggregationRepository makes a   SELECT COUNT     FROM      SQL request at line     in the source code  This appears to be incorrect with MySQL because theire is a space between COUNT and    By replacing the request with   SELECT COUNT    FROM       without the white space  the bug is corrected for MySQL  I think it should be tested with other database without the space   This request can be tested with Mysql Query Browser  the returned error is the same as the one encountered when we execute the JdbcAggregationRepository with Camel   The exception returned is the following   ERROR DefaultErrorHandler   Failed delivery for exchangeId  ID COE WRKST                                 Exhausted after delivery attempt    caught  org springframework jdbc BadSqlGrammarException  PreparedStatementCallback  bad SQL grammar  SELECT COUNT     FROM aggregation repo   WHERE id       nested exception is com mysql jdbc exceptions jdbc  MySQLSyntaxErrorException  You have an error in your SQL syntax  check the manual that corresponds to your MySQL server version for the right syntax to use near     FROM aggregation repo   WHERE id         at line  org springframework jdbc BadSqlGrammarException  PreparedStatementCallback  bad SQL grammar  SELECT COUNT     FROM aggregation repo   WHERE id       nested exception is com mysql jdbc exceptions jdbc  MySQLSyntaxErrorException  You have an error in your SQL syntax  check the manual that corresponds to your MySQL server version for the right syntax to use near     FROM aggregation repo   WHERE id         at line   at org springframework jdbc support SQLErrorCodeSQLExceptionTranslator doTranslate SQLErrorCodeSQLExceptionTranslator java      at org springframework jdbc support AbstractFallbackSQLExceptionTranslator translate AbstractFallbackSQLExceptionTranslator java     at org springframework jdbc core JdbcTemplate execute JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate query JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForObject JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForObject JdbcTemplate java      at org springframework jdbc core JdbcTemplate queryForInt JdbcTemplate java      at org apache camel processor aggregate jdbc JdbcAggregationRepository   doInTransaction JdbcAggregationRepository java      at org apache camel processor aggregate jdbc JdbcAggregationRepository   doInTransaction JdbcAggregationRepository java      at org springframework transaction support TransactionTemplate execute TransactionTemplate java      at org apache camel processor aggregate jdbc JdbcAggregationRepository add JdbcAggregationRepository java      at org apache camel processor aggregate AggregateProcessor doAggregation AggregateProcessor java      at org apache camel processor aggregate AggregateProcessor process AggregateProcessor java      at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor DefaultChannel process DefaultChannel java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel component jms EndpointMessageListener onMessage EndpointMessageListener java     at org springframework jms listener AbstractMessageListenerContainer doInvokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer invokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer doExecuteListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer doReceiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer receiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker executeOngoingLoop DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java      at java lang Thread run Thread java     Caused by  com mysql jdbc exceptions jdbc  MySQLSyntaxErrorException  You have an error in your SQL syntax  check the manual that corresponds to your MySQL server version for the right syntax to use near     FROM aggregation repo   WHERE id         at line   at sun reflect GeneratedConstructorAccessor   newInstance Unknown Source  at sun reflect DelegatingConstructorAccessorImpl newInstance DelegatingConstructorAccessorImpl java     at java lang reflect Constructor newInstance Constructor java      at com mysql jdbc Util handleNewInstance Util java      at com mysql jdbc Util getInstance Util java      at com mysql jdbc SQLError createSQLException SQLError java       at com mysql jdbc MysqlIO checkErrorPacket MysqlIO java       at com mysql jdbc MysqlIO checkErrorPacket MysqlIO java       at com mysql jdbc MysqlIO sendCommand MysqlIO java       at com mysql jdbc MysqlIO sqlQueryDirect MysqlIO java       at com mysql jdbc ConnectionImpl execSQL ConnectionImpl java       at com mysql jdbc PreparedStatement executeInternal PreparedStatement java       at com mysql jdbc PreparedStatement executeQuery PreparedStatement java       at org apache commons dbcp DelegatingPreparedStatement executeQuery DelegatingPreparedStatement java     at org apache commons dbcp DelegatingPreparedStatement executeQuery DelegatingPreparedStatement java     at org springframework jdbc core JdbcTemplate   doInPreparedStatement JdbcTemplate java      at org springframework jdbc core JdbcTemplate execute JdbcTemplate java             more   ',0
'AnnotationTypeConverterLoader fails for folders containing spaces    This problem appears when jar dependencies with type converters have path containing space characters In my case  the camel mail       jar jar is located in my local maven repository I get this error during my project startup       Caused by  java net URISyntaxException  Illegal character in opaque part at index     jar file  D  Documents and Settings            m  repository org apache camel camel mail       camel mail       jar  META INF services org apache camel TypeConverter at java net URI Parser fail URI java       at java net URI Parser checkChars URI java       at java net URI Parser parse URI java       at java net URI  lt init gt  URI java      at java net URL toURI URL java      at org apache camel impl converter AnnotationTypeConverterLoader findPackages AnnotationTypeConverterLoader java      at org apache camel impl converter AnnotationTypeConverterLoader findPackageNames AnnotationTypeConverterLoader java      at org apache camel impl converter AnnotationTypeConverterLoader load AnnotationTypeConverterLoader java            moreFIX findPackages method in AnnotationTypeConverterLoader shouldn t use URIs to store already visited jars    ',0
'Route cannot be started within web console  if autoStartup  false  is set in camel xml    When a route has autoStartup  false  set in the camel xml  it cannot be started anymore in the web  console In the logfile  an entry is generated  similar to this  Cannot start route route  as its configured with autoStartup false   org apache camel spring SpringCamelContext   qtp           If a route does not have autoStartup  false   it can be stopped and started normally  as before with ActiveMQ         Camel       Reproduce steps  Configure a route with   lt route autoStartup  false  gt   Start the ActiveMQ Service Navigate to  http   server domain tld      camel routes try to start the route with the button  Start  check the logfile  activemq log    ',0
'Dumping route to XML created by Java DSL using an expression may not output the actual used expression    See this unit testManagedCamelContextDumpRoutesAsXmlTestThe route in Java DSL from  seda bar   routeId  myOtherRoute    filter   header  bar    to  mock bar    end   And the output in XML  lt route group  org apache camel management ManagedCamelContextDumpRoutesAsXmlTest    id  myOtherRoute  gt   lt from uri  seda bar   gt   lt filter id  filter   gt   lt expressionDefinition  gt   lt to uri  mock bar  id  to    gt   lt  filter gt   lt  route gt The same example created by Spring XML  outputs the XML correct   ',0
'Spring WS producer doesn t propagate headers    The Spring WS producer only sets the body of the exchange  headers aren t propagated See Nabble  http   camel        n  nabble com spring ws component not propagating in headers to out message td        html   ',0
'Camel FTP component fails to process multiple files at once from a specified folder    Camel FTP component fails to process multiple files at once from a specified folder  let s assume the folder is  in  When the consumer connects to a ftp account and finds a list of  let s say    files  it will try to retrieve them in parallel but this is not handled properly As you can see from the below FTP server log  this is what Camel FTP does  it changes the current directory to  in retrieves the file it changes the current directory to   the second  probably  thread changes the directory to  in retreives the second file the first  probably  thread sends a delete command but it sends it as if it were in the root folder but it is actually in the  in folder the FTP gives an error that the file doesn t exist somehow the FTP Component blocks itself on the first file   See my comments in the following log starting with                                 PM   sftp test                 gt          is current directory                            PM   sftp test                 gt  CWD in                           PM   sftp test                 gt      CWD successful    in  is current directory                            PM   sftp test                 gt  PASV                           PM   sftp test                 gt      Entering Passive Mode                                                  PM   sftp test                 gt  RETR WS        xml                           PM   sftp test                 gt      Connection accepted                           PM   sftp test                 gt  SSL connection for data connection established                           PM   sftp test                 gt      Transfer OK                           PM   sftp test                 gt  CWD                             PM   sftp test                 gt      CWD successful      is current directory                            PM   sftp test                 gt  PWD                           PM   sftp test                 gt          is current directory                            PM   sftp test                 gt  CWD in                           PM   sftp test                 gt      CWD successful    in  is current directory                            PM   sftp test                 gt  PASV                           PM   sftp test                 gt      Entering Passive Mode                                                  PM   sftp test                 gt  RETR WS        xml                           PM   sftp test                 gt      Connection accepted                           PM   sftp test                 gt  DELE in WS        xml       The location is already  in  should be DELE WS        xml                           PM   sftp test                 gt      File not found                           PM   sftp test                 gt  PASV                           PM   sftp test                 gt      Entering Passive Mode                                                  PM   sftp test                 gt  NLST in                           PM   sftp test                 gt      Directory not found                           PM   sftp test                 gt  PWD                           PM   sftp test                 gt        in  is current directory                            PM   sftp test                 gt  CWD in       Current directory is already  in                           PM   sftp test                 gt      CWD failed    in in   directory not found For the whole FTP server logs go here  http   pastie org private kknnkxpbyzqmai gsm z gFor the Servicemix Camel Trace  log  http   pastie org private eulookxiepan nkjyu  aA workaround that seems to work is to use the maxMessagesPerPoll   option    ',0
'ConcurrentModificationException at DefaultCamelContext getRouteDefinition      Similar to CAMEL      there is also a race in getRouteDefinition  java util ConcurrentModificationException at java util AbstractList Itr checkForComodification AbstractList java                 at java util AbstractList Itr next AbstractList java                 at org apache camel impl DefaultCamelContext getRouteDefinition DefaultCamelContext java       cih core     jar      at com tieto cih core main GatewayRouteSetup startGatewayRoutes GatewayRouteSetup java     cih core     jar      at com tieto cih core main GatewayRouteSetup process GatewayRouteSetup java     cih core     jar     As route count could be quite large  it would be nice to have them stored in synchronized map or something like that instead of list    ',0
'Issue using errorBuilderRef with the xml dsl    While fixing issues around the errorHandler I noticed that  lt onException gt  definitions defined in the camel context are ignored if a route specifies its own errorHandlerRef  The reason is that we set the onException definition on the default error handler  I have a fix for that  but I discovered a different issue  I think  for which I would like to discuss the solution When we have an onException definition that looks kinda like this  lt onException gt   lt exception gt  java lang IllegalArgumentException lt  exception gt   lt to uri  mock illegalArgumentException   gt  lt  onException gt     something happens  the IAE exception is caught  we do something  but in that process another exception is thrown  Currently  that would be caught by the default error handler  which may not be what we want What error handler  if any  should handle exceptions thrown while in onException The onException mechanism is somewhat similar to a try catch  I don t think the exceptions thrown while handling onException should be handled by the same error handler configured for the route  or even the context scoped one  The processing should be very simple  predictable and immutable  Since the default  CamelDefaultErrorHandlerBuilder  can be replaced  it is not imho a solution and we need one global one that does as little as possible  the problem would be agreeing what that is  no redeliveries  logging or not  etc  Thoughts    ',0
'ChoiceProcessor   unable to find the mBeans processor    Using the jconsole  we are not able to locate some processors after a ChoiceProcessor For example  from  direct start   to  mock test    id  mock    choice   when predicate  to  mock test    id  test    otherwise   to  mock test    id  test    end   to  mock outOfChoice   id  outOfChoice   The processors mock  and outOfChoice are well found but not the processors test  and test     ',0
'javax script dependency in camel core    The OSGi imports for camel core ends up with a non optional dependency on javax script due to it being used in the Activator  However  the karaf feature for camel core doesn t have a dependency on org apache servicemix specs scripting api      One of two things should be done    mark javax script as optional  This MAY require some updates to the Activator to work when it s not available    Update the karaf features file to add  lt bundle dependency  true  gt mvn org apache servicemix specs org apache servicemix specs scripting api       servicemix specs version  lt  bundle gt    ',0
'continued true  doesn t work when is invoked for the second time in the Camel flow    When Camel flow contains error handling as continued true   it is not invoked when the error occurs for the second time  even in different onException  What is more the exception is not handled even by global onException and Camel flow is interruped    ',0
'Test failures in camel hdfs on windows as Streams are not closed correctly    On windows some hdfs tests fail as the streams are not correctly being closed  The first stacktrace looks like below  This is a bit misleading as in fact the problem is that not all exchanges could be processed  The reason is that the file component can t rename the file as it is still open  This is because an inputStream is opened for the file but never closed junit framework AssertionFailedError  expected  lt    gt  but was  lt    gt  at junit framework Assert fail Assert java     at junit framework Assert failNotEquals Assert java      at junit framework Assert assertEquals Assert java     at junit framework Assert assertEquals Assert java      at junit framework Assert assertEquals Assert java      at org apache camel component hdfs HdfsProducerFileWriteTest testSimpleWriteFile HdfsProducerFileWriteTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org junit runners model FrameworkMethod   runReflectiveCall FrameworkMethod java     at org junit internal runners model ReflectiveCallable run ReflectiveCallable java     at org junit runners model FrameworkMethod invokeExplosively FrameworkMethod java     at org junit internal runners statements InvokeMethod evaluate InvokeMethod java     at org junit internal runners statements RunBefores evaluate RunBefores java     at org junit internal runners statements RunAfters evaluate RunAfters java     at org junit rules TestWatchman   evaluate TestWatchman java     at org junit runners BlockJUnit ClassRunner runChild BlockJUnit ClassRunner java     at org junit runners BlockJUnit ClassRunner runChild BlockJUnit ClassRunner java     at org junit runners ParentRunner   run ParentRunner java      at org junit runners ParentRunner   schedule ParentRunner java     at org junit runners ParentRunner runChildren ParentRunner java      at org junit runners ParentRunner access     ParentRunner java     at org junit runners ParentRunner   evaluate ParentRunner java      at org junit internal runners statements RunAfters evaluate RunAfters java     at org junit runners ParentRunner run ParentRunner java      at org eclipse jdt internal junit  runner JUnit TestReference run JUnit TestReference java     at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java        ',0
'FileIdempotentRepository fileStore does not get loaded on bootrapping  therefore files are processed again    I am using JVM based initialization of Camel using Spring I use the documented Camel initialization procedure of main setApplicationContext  my spring camel config xml   main start  I also use the documented FileIdempotentRepository that points to a FileStore However  when Camel initializes this filestore is not loaded up  Hence  the LRU cache contained within this is empty As a result  all my files are FTPed again from the remote server This happens everytime I start my JVM resulting in expensive FTP of files    ',0
'Error using multiple error handlers and onException  java lang IllegalStateException  SendProcessor has not been started     When we use more than one errorHandler in our routes and onException  we face test failures with the following exception java lang IllegalStateException  SendProcessor has not been started  sendTo Endpoint     mock   custom       at org apache camel processor SendProcessor process SendProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java          camel core       jar            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java          camel core       jar            at org apache camel processor DefaultChannel process DefaultChannel java          camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor RedeliveryErrorHandler deliverToFailureProcessor RedeliveryErrorHandler java          camel core       jar            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java          camel core       jar            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java          camel core       jar            at org apache camel processor DefaultChannel process DefaultChannel java          camel core       jar            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java          camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core       jar            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core       jar            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java         camel core       jar            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core       jar            at org apache camel component seda SedaConsumer sendToConsumers SedaConsumer java          camel core       jar            at org apache camel component seda SedaConsumer run SedaConsumer java          camel core       jar            at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java                         at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java                           ',0
'ThrottlingInflightRoutePolicy can deadlock    Using ThrottlingInflightRoutePolicy can deadlock a route in some situations  The unit test pasted in below shows one such situation What happens is that the bottom route processes its first exchange  then suspends  Since it is suspended it will not take the next exchange from the seda queue  and so it will never check whether it should re enable the route Perhaps it will work by putting the check to re enable the route in the onExchangeBegin method  if that is called even when the route is suspended import org apache camel Exchange import org apache camel Produce import org apache camel ProducerTemplate import org apache camel builder RouteBuilder import org apache camel component mock MockEndpoint import org apache camel impl DefaultInflightRepository import org apache camel impl ThrottlingInflightRoutePolicy import org apache camel impl ThrottlingInflightRoutePolicy ThrottlingScope import org apache camel test CamelTestSupport public class ThrottleTest extends CamelTestSupport    Produce uri    direct input   protected ProducerTemplate input  protected MockEndpoint resultEndpoint   Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder     public void configure     resultEndpoint   new MockEndpoint  mock result    resultEndpoint setCamelContext getContext     getContext   setInflightRepository new DefaultInflightRepository      Override public void add Exchange exchange    super add exchange   System out println   add     this size        Override public void remove Exchange exchange    super remove exchange   System out println   remove     this size           ThrottlingInflightRoutePolicy throttler   new ThrottlingInflightRoutePolicy    throttler setMaxInflightExchanges     throttler setScope ThrottlingScope Context   from  direct input    inOnly  seda hey    seda hey    seda hey    seda hey    seda hey    delay        inOnly  log inputDone    from  seda hey    routePolicy throttler   inOut  log outputDone    to resultEndpoint          public void testThatAllExchangesAreReceived   throws Exception   input sendBody  hello    resultEndpoint expectedMessageCount     resultEndpoint assertIsSatisfied         ',0
'LoanBroker example have some issues when it is deployed into osgi container like ServiceMix    When you deploy the camel example loanbroker bundle into OSGi container  the osgi container only load the WebService route because there are some confliction of the bean ids    ',0
'Label of marshal and unmarshal processors do not appear in trace output    My route is defined as following  from mqIn   routeId Helper getRouteId this getClass   getName      errorHandler deadLetterChannel  log DEAD   maximumRedeliveries    retryAttemptedLogLevel LoggingLevel WARN    onException EAIException class  maximumRedeliveries    handled true  to  bean AuditBO method handleException   end      transacted  PROPAGATION REQUIRES NEW    setHeader  UBS ID  new AuditId     wireTap  seda auditNew    unmarshal  SwiftDataFormat    setHeader  MT   getMT   setHeader  SWIFTAddress   getSwiftAddress   to mqOut  The tracing output is the following  main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift in IcgToCore  wireTap seda   auditNew     gt   lt  lt  lt  Pattern InOnly  Headers  UBS ID     bc    f e   cf a b  ef   ff   d    BodyType String       main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift in IcgToCore     gt  setHeader     MT       lt  lt  lt  Pattern InOnly  Headers  UBS ID     bc    f e   cf a b  ef   ff   d    BodyType com ubs eai wmswift SwiftDataMessage  Body com ubs eai wmswift SwiftDataMessage   b b   main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift in IcgToCore  setHeader     MT         gt  setHeader     SWIFTAddress       lt  lt  lt  Pattern InOnly  Headers  MT      UBS ID     bc    f e   cf a b  ef   ff   d    BodyType com ubs eai wmswift SwiftDataMessage  Body com ubs eai wmswift SwiftDataMessage   b b   main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift in IcgToCore  setHeader     SWIFTAddress         gt  direct   core  lt  lt  lt  Pattern InOnly  Headers  SWIFTAddress ZYAMCHZ XXXX  MT      UBS ID     bc    f e   cf a b  ef   ff   d    BodyType com ubs eai wmswift SwiftDataMessage  Body com ubs eai wmswift SwiftDataMessage   b b   main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift core CoreToMQ  direct   core    gt   lt  lt  lt  Pattern InOnly  Headers  SWIFTAddress ZYAMCHZ XXXX  MT      UBS ID     bc    f e   cf a b  ef   ff   d    BodyType com ubs eai wmswift SwiftDataMessage  Body com ubs eai wmswift SwiftDataMessage   b b   main  Tracer INFO ID w  b bc                          gt  gt  gt   wmswift core CoreToMQ     gt  choice  lt  lt  lt  Pattern InOnly  Headers  MT      UBS ID     bc    f e   cf a b  ef   ff   d   SWIFTAddress ZYAMCHZ XXXX   The bug I found is the missing label of the unmarshal processor    ',0
'Groovy language   classNotFoundException in OSGi environment    The problem is in the following method of the GroovyLanguage SuppressWarnings  unchecked  protected Class lt Script gt  parseExpression String expression    return new GroovyClassLoader   parseClass expression   It uses the default constructor to create GroovyClassLoader  which uses Thread context classloader  which may not be equal to the classloader of the bundle where the camel context is defined Caused by  java lang NoClassDefFoundError  groovy lang Script at java lang ClassLoader defineClass  Native Method                     at java lang ClassLoader defineClassCond ClassLoader java                         at java lang ClassLoader defineClass ClassLoader java                         at java security SecureClassLoader defineClass SecureClassLoader java                         at groovy lang GroovyClassLoader access     GroovyClassLoader java     at groovy lang GroovyClassLoader ClassCollector createClass GroovyClassLoader java      at groovy lang GroovyClassLoader ClassCollector onClassNode GroovyClassLoader java      at groovy lang GroovyClassLoader ClassCollector call GroovyClassLoader java      at org codehaus groovy control CompilationUnit    call CompilationUnit java      at org codehaus groovy control CompilationUnit applyToPrimaryClassNodes CompilationUnit java      at org codehaus groovy control CompilationUnit doPhaseOperation CompilationUnit java      at org codehaus groovy control CompilationUnit processPhaseOperations CompilationUnit java      at org codehaus groovy control CompilationUnit compile CompilationUnit java      at groovy lang GroovyClassLoader doParseClass GroovyClassLoader java      at groovy lang GroovyClassLoader parseClass GroovyClassLoader java      at groovy lang GroovyClassLoader parseClass GroovyClassLoader java      at groovy lang GroovyClassLoader parseClass GroovyClassLoader java      at groovy lang GroovyClassLoader parseClass GroovyClassLoader java      at org apache camel language groovy GroovyLanguage parseExpression GroovyLanguage java     at org apache camel language groovy GroovyLanguage createExpression GroovyLanguage java     at org apache camel language groovy GroovyLanguage createExpression GroovyLanguage java     at org apache camel component language LanguageProducer process LanguageProducer java            org apache camel camel core       fuse            at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java            org apache camel camel core       fuse                   moreCaused by  java lang ClassNotFoundException  groovy lang Script at java net URLClassLoader   run URLClassLoader java                         at java security AccessController doPrivileged Native Method                     at java net URLClassLoader findClass URLClassLoader java                         at java lang ClassLoader loadClass ClassLoader java                         at groovy lang GroovyClassLoader loadClass GroovyClassLoader java              groovy all            at groovy lang GroovyClassLoader InnerLoader loadClass GroovyClassLoader java      at groovy lang GroovyClassLoader loadClass GroovyClassLoader java              groovy all            at java lang ClassLoader loadClass ClassLoader java                                 more   ',0
'Nullpointer in camel mail when body is null    When trying to send a mail with an empty body  null  then we get the following NullPointer exception We should instead either complain about the null body or send the mail with an empty body                INFO   tp                 ache camel processor CamelLogger           org apache camel camel core           Exchange ExchangePattern InOut  BodyType org apache cxf message MessageContentsList  Body      com ier ebo servicerequest ServiceRequestType   e                          ERROR   tp                 ache camel processor CamelLogger            org apache camel camel core           Failed delivery for exchangeId  ID MacBook Pro de bahaaldine local                          Exhausted after delivery attempt    caught  org springframework mail MailPreparationException  Could not prepare mail  nested exception is java lang NullPointerExceptionorg springframework mail MailPreparationException  Could not prepare mail  nested exception is java lang NullPointerException at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE      at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE      at org apache camel component mail MailProducer process MailProducer java             org apache camel camel mail            at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java             org apache camel camel core            at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java             org apache camel camel core            at org apache camel processor SendProcessor process SendProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor DefaultChannel process DefaultChannel java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor Pipeline process Pipeline java             org apache camel camel core            at org apache camel processor Pipeline process Pipeline java            org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel component direct DirectProducer process DirectProducer java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor MulticastProcessor doProcessSequential MulticastProcessor java             org apache camel camel core            at org apache camel processor MulticastProcessor doProcessSequential MulticastProcessor java             org apache camel camel core            at org apache camel processor MulticastProcessor process MulticastProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RecipientList sendToRecipientList RecipientList java             org apache camel camel core            at org apache camel processor RecipientList process RecipientList java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java            org apache camel camel core            at org apache camel processor DefaultChannel process DefaultChannel java             org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java             org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel component cxf CxfConsumer   syncInvoke CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   invoke CxfConsumer java             org apache camel camel cxf            at org apache cxf interceptor ServiceInvokerInterceptor   run ServiceInvokerInterceptor java             org apache cxf bundle            at java util concurrent Executors RunnableAdapter call Executors java                         at java util concurrent FutureTask Sync innerRun FutureTask java                         at java util concurrent FutureTask run FutureTask java                         at org apache cxf workqueue SynchronousExecutor execute SynchronousExecutor java             org apache cxf bundle            at org apache cxf interceptor ServiceInvokerInterceptor handleMessage ServiceInvokerInterceptor java              org apache cxf bundle            at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java              org apache cxf bundle            at org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java              org apache cxf bundle            at org apache cxf transport http AbstractHTTPDestination invoke AbstractHTTPDestination java              org apache cxf bundle            at org apache cxf transport servlet ServletController invokeDestination ServletController java              org apache cxf bundle            at org apache cxf transport servlet ServletController invoke ServletController java              org apache cxf bundle            at org apache cxf transport servlet CXFNonSpringServlet invoke CXFNonSpringServlet java              org apache cxf bundle            at org apache cxf transport servlet AbstractHTTPServlet handleRequest AbstractHTTPServlet java              org apache cxf bundle            at org apache cxf transport servlet AbstractHTTPServlet doPost AbstractHTTPServlet java              org apache cxf bundle            at javax servlet http HttpServlet service HttpServlet java             org apache geronimo specs geronimo servlet     spec            at org apache cxf transport servlet AbstractHTTPServlet service AbstractHTTPServlet java              org apache cxf bundle            at org eclipse jetty servlet ServletHolder handle ServletHolder java             org eclipse jetty servlet       v              at org eclipse jetty servlet ServletHandler doHandle ServletHandler java             org eclipse jetty servlet       v              at org ops j pax web service jetty internal HttpServiceServletHandler doHandle HttpServiceServletHandler java            org ops j pax web pax web jetty            at org eclipse jetty server handler ScopedHandler handle ScopedHandler java             org eclipse jetty server       v              at org eclipse jetty security SecurityHandler handle SecurityHandler java             org eclipse jetty security       v              at org eclipse jetty server session SessionHandler doHandle SessionHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandler doHandle ContextHandler java             org eclipse jetty server       v              at org ops j pax web service jetty internal HttpServiceContext doHandle HttpServiceContext java             org ops j pax web pax web jetty            at org eclipse jetty servlet ServletHandler doScope ServletHandler java             org eclipse jetty servlet       v              at org eclipse jetty server session SessionHandler doScope SessionHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandler doScope ContextHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ScopedHandler handle ScopedHandler java             org eclipse jetty server       v              at org ops j pax web service jetty internal JettyServerHandlerCollection handle JettyServerHandlerCollection java            org ops j pax web pax web jetty            at org eclipse jetty server handler HandlerWrapper handle HandlerWrapper java             org eclipse jetty server       v              at org eclipse jetty server Server handle Server java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection handleRequest HttpConnection java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection RequestHandler content HttpConnection java              org eclipse jetty server       v              at org eclipse jetty http HttpParser parseNext HttpParser java             org eclipse jetty http       v              at org eclipse jetty http HttpParser parseAvailable HttpParser java             org eclipse jetty http       v              at org eclipse jetty server HttpConnection handle HttpConnection java             org eclipse jetty server       v              at org eclipse jetty io nio SelectChannelEndPoint handle SelectChannelEndPoint java             org eclipse jetty io       v              at org eclipse jetty io nio SelectChannelEndPoint   run SelectChannelEndPoint java            org eclipse jetty io       v              at org eclipse jetty util thread QueuedThreadPool   run QueuedThreadPool java             org eclipse jetty util       v              at java lang Thread run Thread java                        Caused by  java lang NullPointerException at javax mail util ByteArrayDataSource  lt init gt  ByteArrayDataSource java             javax mail            at org apache camel component mail MailBinding populateContentOnMimeMessage MailBinding java              org apache camel camel mail            at org apache camel component mail MailBinding populateMailMessage MailBinding java              org apache camel camel mail            at org apache camel component mail MailProducer   prepare MailProducer java             org apache camel camel mail            at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE             more               WARN   tp                 ache cxf common logging LogUtils             Interceptor for  http   www ier com WS ServiceRequest WSServiceRequestService  http   www ier com WS ServiceRequest createServiceRequest has thrown exception  unwinding noworg apache cxf interceptor Fault  Could not prepare mail  nested exception is java lang NullPointerException at org apache camel component cxf CxfConsumer   checkFailure CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   setResponseBack CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   syncInvoke CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   invoke CxfConsumer java             org apache camel camel cxf            at org apache cxf interceptor ServiceInvokerInterceptor   run ServiceInvokerInterceptor java             org apache cxf bundle            at java util concurrent Executors RunnableAdapter call Executors java                         at java util concurrent FutureTask Sync innerRun FutureTask java                         at java util concurrent FutureTask run FutureTask java                         at org apache cxf workqueue SynchronousExecutor execute SynchronousExecutor java             org apache cxf bundle            at org apache cxf interceptor ServiceInvokerInterceptor handleMessage ServiceInvokerInterceptor java              org apache cxf bundle            at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java              org apache cxf bundle            at org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java              org apache cxf bundle            at org apache cxf transport http AbstractHTTPDestination invoke AbstractHTTPDestination java              org apache cxf bundle            at org apache cxf transport servlet ServletController invokeDestination ServletController java              org apache cxf bundle            at org apache cxf transport servlet ServletController invoke ServletController java              org apache cxf bundle            at org apache cxf transport servlet CXFNonSpringServlet invoke CXFNonSpringServlet java              org apache cxf bundle            at org apache cxf transport servlet AbstractHTTPServlet handleRequest AbstractHTTPServlet java              org apache cxf bundle            at org apache cxf transport servlet AbstractHTTPServlet doPost AbstractHTTPServlet java              org apache cxf bundle            at javax servlet http HttpServlet service HttpServlet java             org apache geronimo specs geronimo servlet     spec            at org apache cxf transport servlet AbstractHTTPServlet service AbstractHTTPServlet java              org apache cxf bundle            at org eclipse jetty servlet ServletHolder handle ServletHolder java             org eclipse jetty servlet       v              at org eclipse jetty servlet ServletHandler doHandle ServletHandler java             org eclipse jetty servlet       v              at org ops j pax web service jetty internal HttpServiceServletHandler doHandle HttpServiceServletHandler java            org ops j pax web pax web jetty            at org eclipse jetty server handler ScopedHandler handle ScopedHandler java             org eclipse jetty server       v              at org eclipse jetty security SecurityHandler handle SecurityHandler java             org eclipse jetty security       v              at org eclipse jetty server session SessionHandler doHandle SessionHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandler doHandle ContextHandler java             org eclipse jetty server       v              at org ops j pax web service jetty internal HttpServiceContext doHandle HttpServiceContext java             org ops j pax web pax web jetty            at org eclipse jetty servlet ServletHandler doScope ServletHandler java             org eclipse jetty servlet       v              at org eclipse jetty server session SessionHandler doScope SessionHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandler doScope ContextHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ScopedHandler handle ScopedHandler java             org eclipse jetty server       v              at org ops j pax web service jetty internal JettyServerHandlerCollection handle JettyServerHandlerCollection java            org ops j pax web pax web jetty            at org eclipse jetty server handler HandlerWrapper handle HandlerWrapper java             org eclipse jetty server       v              at org eclipse jetty server Server handle Server java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection handleRequest HttpConnection java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection RequestHandler content HttpConnection java              org eclipse jetty server       v              at org eclipse jetty http HttpParser parseNext HttpParser java             org eclipse jetty http       v              at org eclipse jetty http HttpParser parseAvailable HttpParser java             org eclipse jetty http       v              at org eclipse jetty server HttpConnection handle HttpConnection java             org eclipse jetty server       v              at org eclipse jetty io nio SelectChannelEndPoint handle SelectChannelEndPoint java             org eclipse jetty io       v              at org eclipse jetty io nio SelectChannelEndPoint   run SelectChannelEndPoint java            org eclipse jetty io       v              at org eclipse jetty util thread QueuedThreadPool   run QueuedThreadPool java             org eclipse jetty util       v              at java lang Thread run Thread java                        Caused by  org springframework mail MailPreparationException  Could not prepare mail  nested exception is java lang NullPointerException at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE      at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE      at org apache camel component mail MailProducer process MailProducer java             org apache camel camel mail            at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java             org apache camel camel core            at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java             org apache camel camel core            at org apache camel processor SendProcessor process SendProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor DefaultChannel process DefaultChannel java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor Pipeline process Pipeline java             org apache camel camel core            at org apache camel processor Pipeline process Pipeline java            org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel component direct DirectProducer process DirectProducer java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java             org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor MulticastProcessor doProcessSequential MulticastProcessor java             org apache camel camel core            at org apache camel processor MulticastProcessor doProcessSequential MulticastProcessor java             org apache camel camel core            at org apache camel processor MulticastProcessor process MulticastProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor RecipientList sendToRecipientList RecipientList java             org apache camel camel core            at org apache camel processor RecipientList process RecipientList java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java            org apache camel camel core            at org apache camel processor DefaultChannel process DefaultChannel java             org apache camel camel core            at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java             org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java            org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel management InstrumentationProcessor process InstrumentationProcessor java            org apache camel camel core            at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java             org apache camel camel core            at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java            org apache camel camel core            at org apache camel component cxf CxfConsumer   syncInvoke CxfConsumer java              org apache camel camel cxf                   moreCaused by  java lang NullPointerException at javax mail util ByteArrayDataSource  lt init gt  ByteArrayDataSource java             javax mail            at org apache camel component mail MailBinding populateContentOnMimeMessage MailBinding java              org apache camel camel mail            at org apache camel component mail MailBinding populateMailMessage MailBinding java              org apache camel camel mail            at org apache camel component mail MailProducer   prepare MailProducer java             org apache camel camel mail            at org springframework mail javamail JavaMailSenderImpl send JavaMailSenderImpl java             org springframework context support       RELEASE             more   ',0
'Using adviceWith   times or more in Java DSL with a context scoped onException causing the  st advised route to not work as expected    See nabblehttp   camel        n  nabble com intercept using adviceWith tp       p        html   ',0
'Archetypes fail to build in offline mode    If build tooling archetypes with the   offline Maven argument you may see an error like     ERROR      Unresolveable build extension  Error resolving version for plugin  org apache maven archetype archetype packaging Seems the version for archetype packaging in the dependencyManagement section defined in the parent pom is not propagating down to build extension    when Maven is not in offline mode it can simply grab the latest version from the metadata at central  I m committing a simple fix shortly    ',0
'TraceInterceptor does not work correctly for AsyncProcessing    TraceEventHandlers are not called correctly when a node is processed asynchronously From org apache camel processor interceptor TraceInterceptor  try      special for interceptor where we need to keep booking how far we have routed in the intercepted processors if  node getParent   instanceof InterceptDefinition  amp  amp  exchange getUnitOfWork      null    TracedRouteNodes traced   exchange getUnitOfWork   getTracedRouteNodes    traceIntercept  InterceptDefinition  node getParent    traced  exchange        process the exchange try   sync   super process exchange  callback     catch  Throwable e    exchange setException e       finally      after  trace out  if  shouldLog  amp  amp  tracer isTraceOutExchanges      logExchange exchange   traceExchangeOut exchange  traceState      As it is this results in traceExchangeOut being called before the callback  which is wrong The call to super process needs to wrap the callback to call traceExchangeOut  and the finally block shouldn t run if the process is asynch  This isn t a regression  but the change to make more routes asynchronous makes it more noticeable    ',0
'camel ftp   Using tempFileName option should use the separator option to allow control of path separators in the generated file name    See nabblehttp   camel        n  nabble com FTP temp file not being created correctly on Windows Camel       tp       p        html   ',0
'Missing setter or constructor argument for elementNameStrategyRef in SoapJaxbDataFormat    Because the variable  elementNameStrategyRef  in org apache camel dataformat soap SoapJaxbDataFormat can t be set  it is always null  Therefore declaring the data format with spring dsl leads to an automatic fallback to the default strategy  TypeNameStrategy  in org apache camel dataformat soap SoapJaxbDataFormat checkElementNameStrategy Exchange exchange   This further leads to wrong results when marshalling So the following declararion does not work correctly      lt bean id  myStrategy  class  org apache camel dataformat soap name ServiceInterfaceStrategy  gt   lt constructor arg value  my package MyServiceInterface   gt   lt constructor arg value  true   gt   lt  bean gt      lt camelContext xmlns  http   camel apache org schema spring  gt      lt dataFormats gt   lt soapjaxb id  mySoap   contextPath  my package   elementNameStrategyRef  myStrategy   gt   lt  dataFormats gt      lt route gt   lt from uri  cxf  MyService serviceClass my package MyServiceInterface    gt      lt convertBodyTo type  my package MyType   gt   lt marshal ref  mySoap   gt       ',0
'Properties component   Cached locations may add duplicates    See nabblehttp   camel        n  nabble com LRUCache memory leak when using camel properties file tp       p        htmlThe internal cache should be a soft cache and we should use a key holder to ensure equals hashCode   ',0
'The routeContext stack of DefaultUnitOfWork should be thread safe    Here is the stack tracejava util EmptyStackException at java util Stack peek Stack java     at java util Stack pop Stack java     at org apache camel impl DefaultUnitOfWork popRouteContext DefaultUnitOfWork java      at org apache camel processor DefaultChannel   done DefaultChannel java      at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor aggregate AggregateProcessor   run AggregateProcessor java      at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     You can find more information in this mail thread                      http   camel        n  nabble com EmptyStackException in DefaultUnitOfWork popRouteContext td        html   ',0
'Connection to sftp server occasionally don t want to come back    Problem appear if somebody kill logged on user on sftp server while you are connected with consumer Camel is not able to reconnect on next poll even if it says that it will do this RemoteFileConsumer is not connected but it thinks that it is still logged in I think  loggedIn  flag should be down after each disconnecting action like in attached patch                         WARN      RemoteFilePollingConsumerPollStrategy         Trying to recover by disconnecting from remote server forcing a re connect at next poll  sftp   test host                         WARN      RemoteFilePollingConsumerPollStrategy         Consumer Consumer     sftp   test host test delay       amp delete true amp localWorkDirectory   Fvar  Ftest  Ftemp amp password xxxx amp throwExceptionOnConnectFailed true      could not poll endpoint  sftp   test host test delay       amp delete true amp localWorkDirectory   Fvar  Ftest  Ftemp amp password xxxx amp throwExceptionOnConnectFailed true caused by  Cannot change directory to  test org apache camel component file GenericFileOperationFailedException  Cannot change directory to  test at org apache camel component file remote SftpOperations doChangeDirectory SftpOperations java      at org apache camel component file remote SftpOperations changeCurrentDirectory SftpOperations java      at org apache camel component file remote SftpConsumer doPollDirectory SftpConsumer java     at org apache camel component file remote SftpConsumer pollDirectory SftpConsumer java     at org apache camel component file GenericFileConsumer poll GenericFileConsumer java     at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Caused by      at com jcraft jsch ChannelSftp cd ChannelSftp java      at org apache camel component file remote SftpOperations doChangeDirectory SftpOperations java             moreCaused by  java io IOException  Pipe closed at java io PipedInputStream read PipedInputStream java      at java io PipedInputStream read PipedInputStream java      at com jcraft jsch ChannelSftp fill ChannelSftp java       at com jcraft jsch ChannelSftp header ChannelSftp java       at com jcraft jsch ChannelSftp  realpath ChannelSftp java       at com jcraft jsch ChannelSftp cd ChannelSftp java             more   ',0
'MDCUnitOfWork behaviour incorrect with nested routes    MDCUnitOfWork clear   removes any content set by MDCUnitOfWork from MDC If there are two separate exchange running at the same time in the same thread  as happens when a ProduceTemplate is used from Java  this is incorrect because the MDC of the parent is cleared after the child completes Conceptually the MDC should be a stack  but MDC only accepts strings so the simplest thing to do is for MDCUnitOfWork to replace the previous values in clear      ',0
'dump as xml fails if message body is already xml    MessageHelper dumpAsXml has a problem if the message body is already xml    ',0
'camel aws won t build offline    If you build camel aws in Maven s offline mode   o   you may get the following error No versions available for org codehaus jackson jackson core asl jar        within specified rangeThis will occur even if you have the libs locally  This is happening because Maven cannot download the remote metadata to get a list of versions for jackson core asl  Specifying a hard version for this  not a range  gets around the issue  Committing a fix shortly    ',0
' Bean method name is ignored    Since       Exchange BEAN METHOD NAME is always used instead of  Bean method name  see BeanInfo createInvocation Object pojo  Exchange exchange    As a consequence  the wrong method is choosen when I use a beanref invokation on a method that uses  Bean parameter binding I built a simple test case as a zip file containing an Eclipse Helios maven project  see attachment   The test fails with camel       and succeeds with       and earlier  at least until        regards Vincent MATHON   ',0
'Camel CXF Endpoint creates incomplete WSDL    The dynamically created WSDL for a cxf cxfEndpoint declaration is malformed when using a complex type as parameter Please see as well the discussion here http   camel        n  nabble com Camel CXF Endpoint creating incomplete WSDL td        htmlUse attached test project to run mvn test with version       and        this should show the error    ',0
'xslt component   Cannot load xslt file from file system    See nabblehttp   camel        n  nabble com Custom URIResolver for Camel tp       p        htmlThe Spring IO resource is a bit pants  as you ask for it to give an input stream  and then it fails doing that for a plain file url Instead it gives you an URL connection  and you get a unknown host exception    ',0
'Camel Bindy Parser One to Many KvP Unmarshall Issue    Bindy KvP unmarshall issue  While unmarshalling FIX messages  camel bindy causing inconsistencies if the incoming fix messages are defined to map using  OneToMany  annotations In a given route for eg  BindyKeyValuePairDataFormat kvpBindyDataFormat   new BindyKeyValuePairDataFormat  org apache camel dataformat bindy model fix complex onetomany    public void configure     from URI DIRECT START  unmarshal kvpBindyDataFormat  to URI MOCK RESULT    kvpBindyDataFormat is single instance for multiple threads and with in  BindyKeyValuePairFactory  class instance varialbe below is shared across multiple threads causing data inconsistencies private Map lt String  List lt Object gt  gt  lists   new HashMap lt String  List lt Object gt  gt     Values from previous thread messages are retained in the current thread causing issues For eg in the test case  public class BindyComplexOneToManyKeyValuePairUnMarshallTest extends CommonBindyTest if we send another message with no repeating groups are sent String message       FIX                   INVMGR   BRKR       BE CHM       CHM          this is a camel   bindy test              The output message has repeating group data from message processed in earlier thread are pouplated causing data inconsistencies Please suggest the fix considering multi threading scenario  I am willing to volunteer for the fix Regards Surya   ',0
'Example feature  wrong spring version    Featureapache camel       zip apache camel       examples camel example etl src main resources features xml contains  lt bundle gt mvn org springframework spring jdbc       SEC   lt  bundle gt   lt bundle gt mvn org springframework spring orm       SEC   lt  bundle gt  Exception during  hibernate feauture  feature installation                INFO   l Console Thread   araf shell console jline Console            org apache karaf shell console           Exception caught while executing command java lang Exception  Could not start bundle mvn org springframework spring jdbc       SEC   in feature s  hibernate feauture        The bundle  org springframework jdbc       SEC                  could not be resolved  Reason  Missing Constraint  Import Package  org springframework dao  version             SEC         SEC         at org apache karaf features internal FeaturesServiceImpl installFeatures FeaturesServiceImpl java             org apache karaf features core              Caused by  org osgi framework BundleException  The bundle  org springframework jdbc       SEC                  could not be resolved  Reason  Missing Constraint  Import Package  org springframework dao  version             SEC         SEC         at org eclipse osgi framework internal core AbstractBundle getResolverError AbstractBundle java           osgi       v         jar       at org eclipse osgi framework internal core AbstractBundle getResolutionFailureException AbstractBundle java           osgi       v         jar       at org eclipse osgi framework internal core BundleHost startWorker BundleHost java          osgi       v         jar       at org eclipse osgi framework internal core AbstractBundle start AbstractBundle java          osgi       v         jar       at org eclipse osgi framework internal core AbstractBundle start AbstractBundle java          osgi       v         jar       at org apache karaf features internal FeaturesServiceImpl installFeatures FeaturesServiceImpl java             org apache karaf features core                   moreSolution Change version for bundles org springframework spring jdbc and org springframework spring orm to       RELEASE instead       SEC      ',0
'Wrong exception uri when an HTTP error code is returned    When a REST service returns an HTTP error code  e g        the URI property of the exception is incorrect The URI is the URI of the origin endpoint of the route It should be instead the URI of the endpoint that threw the exception For instance  in the following route   lt route id  restproxy  gt   lt from uri  restlet http   localhost      oe ws offre  id    gt   lt doTry gt   lt to uri  restlet http   bla dot com      oe ws offre  id    gt   lt doCatch gt   lt exception gt org apache camel CamelException lt  exception gt   lt log message  URI   exception uri    gt   lt  doCatch gt   lt  doTry gt  lt  route gt The logged URI is  restlet http   localhost      oe ws offre  id   but should be instead the real URI used  e g   restlet http   bla dot com      oe ws offre    This bug might be fixed by the following code change in class org apache camel component restlet RestletProducer  method populateRestletProducerException     String uri   exchange getFromEndpoint   getEndpointUri      String uri   response getRequest   getResourceRef     ',0
'Ftp consumer using done file should cater for if stepwise has been enabled  and thus the done file path is to be calculated differently    The workaround is to use   file onlyname  or not using stepwise    ',0
'Bug in parsing of JPA uri    According to http   camel apache org jpa html entityName is optional When configuring with the following uri  e g  w o entityName   lt camel endpoint id  jpaEndpoint  uri  jpa  persistenceUnit journalPersistenceUnit amp usePersist true    gt the following warning will be displayed                             main                    WARN org apache camel util ObjectHelper   Cannot find class  persistenceUnitjournalPersistenceUnitusePersisttruepersistenceUnitjournalPersistenceUnitusePersisttruedue to the incorrect if test in the JpaComponent    lets interpret the next string as a class if  path    null       provide the class loader of this component to work in OSGi environments as camel jpa must be able    to resolve the entity classes Class lt   gt  type   getCamelContext   getClassResolver   resolveClass path  JpaComponent class getClassLoader     if  type    null    endpoint setEntityType type      path is not null  but it is the rest of the string and not the entityname  e g it should not start with   if it is an entityname   else it is the options    ',0
'Freemarker   Loading template from file system fails    This only affects Camel        ',0
'Camel netty option  encoder  and  decoder  does not work    Contrary to the documentation  the  encoder  and  decoder  option is unusable as it s value is taken as is instead of resolving the references using the registry This bug was introduced in the revision        as part of CAMEL      Patch can be found at https   github com szabolcsberecz camel commit b bcc dd      c      ea   c        e  dd   ',0
'It s hardly possible to use all expression of the Simple language to create file names in the file component    Sometimes it can be necessary to use custom headers to create a file name For example  I declare my file endpoint in the following manner  lt route id  fileReader  gt   lt from uri  file   rootFolder move  backup amp amp moveFailed  error   header CustomHeader     gt   lt to uri  file   out   gt  lt  route gt The header  CustomHeader  cannot be read because of the following snippets of code in the org apache camel component file GenericFile      Bind this GenericFile to an Exchange   public void bindToExchange Exchange exchange    exchange setProperty FileComponent FILE EXCHANGE FILE  this   GenericFileMessage lt T gt  in   new GenericFileMessage lt T gt  this   exchange setIn in   populateHeaders in         Populates the   link GenericFileMessage  relevant headers      param message the message to populate with headers   public void populateHeaders GenericFileMessage lt T gt  message    if  message    null    message setHeader Exchange FILE NAME ONLY  getFileNameOnly     message setHeader Exchange FILE NAME  getFileName     message setHeader  CamelFileAbsolute   isAbsolute     message setHeader  CamelFileAbsolutePath   getAbsoluteFilePath     if  isAbsolute      message setHeader Exchange FILE PATH  getAbsoluteFilePath       else      we must normalize path according to protocol if we build our own paths String path   normalizePathToProtocol getEndpointPath     File separator   getRelativeFilePath     message setHeader Exchange FILE PATH  path     message setHeader  CamelFileRelativePath   getRelativeFilePath     message setHeader Exchange FILE PARENT  getParent     if  getFileLength    gt        message setHeader  CamelFileLength   getFileLength       if  getLastModified    gt       message setHeader Exchange FILE LAST MODIFIED  new Date getLastModified          As you can see a new  in  message is created and not all the headers from the original message are copied to it    ',0
'Exeptions cannot be propagated to the parent route when using LogEIP    Here is unit test that demonstrates the problem For the unit test pass successfully it s necessary to delete LogEIP from the route package org apache camel impl import org apache camel Exchange import org apache camel Processor import org apache camel builder RouteBuilder import org apache camel test junit  CamelTestSupport import org junit Test public class PropagateExceptionTest extends CamelTestSupport    Test public void failure   throws Exception   getMockEndpoint  mock handleFailure   whenAnyExchangeReceived new Processor      Override public void process Exchange exchange  throws Exception   throw new RuntimeException  TEST EXCEPTION          getMockEndpoint  mock exceptionFailure   expectedMessageCount     sendBody  direct startFailure    Hello World    assertMockEndpointsSatisfied       Test public void success   throws Exception   getMockEndpoint  mock handleSuccess   whenAnyExchangeReceived new Processor      Override public void process Exchange exchange  throws Exception   throw new RuntimeException  TEST EXCEPTION          getMockEndpoint  mock exceptionSuccess   expectedMessageCount     sendBody  direct startSuccess    Hello World    assertMockEndpointsSatisfied       Override protected RouteBuilder   createRouteBuilders   throws Exception   return new RouteBuilder     new RouteBuilder     public void configure   throws Exception   from  direct startFailure    onException Throwable class   to  mock exceptionFailure    end    to  direct handleFailure    to  mock resultFailure    from  direct handleFailure    errorHandler noErrorHandler     log  FAULTY LOG    to  mock handleFailure         new RouteBuilder     public void configure   throws Exception   from  direct startSuccess    onException Throwable class   to  mock exceptionSuccess    end    to  direct handleSuccess    to  mock resultSuccess    from  direct handleSuccess    errorHandler noErrorHandler     to  mock handleSuccess                ',0
'Error in camel restlet feature definition    The current contents of the camel features xml file reads  lt feature name  camel restlet  version        fuse        resolver   obr   gt   lt feature version        fuse        gt camel core lt  feature gt   lt bundle dependency  true  gt mvn org apache camel camel restlet       fuse       lt  bundle gt   lt bundle gt mvn http   maven restlet org org restlet jse org restlet       lt  bundle gt  lt  feature gt It actually should read http   fernandoribeiro eti br            bug in fuse       Thanks to Fernando Ribeiro for the heads up     ',0
'Wrong slash in FTP component for doneFile    I tried to use the doneFile with FTP component When I used it to my FTP on my windows machine everything goes fine When I tried to act the same with a FTP host on a Linux machine  I got an issue I sniff the packet to see what goes wrong and I see this  the doneFile DELE public Test in myFile txt the file to processDELE public Test in myFile xmlAfter a Quick look on the code org apache camel component file GenericFileEndpoint line     String answer   pattern  if  ObjectHelper isNotEmpty path   amp  amp  ObjectHelper isNotEmpty pattern        done file must always be in same directory as the real file name answer   path   File separator   pattern    if  getConfiguration   needToNormalize         must normalize path to cater for Windows and other OS answer   FileUtil normalizePath answer    We use the  File Separator  but in this case  it should get a kind of  FTP Separator  or the FTP component should return true to the needToNormalize method and change the narmalizePath method to manage this case    ',0
'camel bindy   Marshaling using CSV will insert wrong char separator if using an escaped separator char such as a pipe    When using bindy in CSV format with a separator in the model as     to denote a pipe character  then it does not work consistent for marshal and unmarshal  In marshal it will insert   as separator  but it should use   instead See nabblehttp   camel        n  nabble com bindy different behavior between marshal and unmarshal with pipe separator tp       p        html   ',0
'NullPointerException when unmarshalling using serialization data format    Spring configuration   lt     A custom CamelContext    gt   lt camel camelContext id  camel  gt   lt     JSON data format marshalling    gt   lt camel dataFormats gt   lt camel serialization id  serialization   gt   lt  camel dataFormats gt   lt     RawOffer input route    gt   lt camel route gt   lt camel from uri  kestrel   etl  f feeds   gt   lt camel unmarshal ref  serialization   gt   lt camel to uri  bean shard method consume   gt   lt  camel route gt   lt  camel camelContext gt Exception run   java  log j WARN No appenders could be found for logger  org springframework context support ClassPathXmlApplicationContext    java  log j WARN Please initialize the log j system properly   java  log j WARN See http   logging apache org log j     faq html noconfig for more info   java                main  INFO o a c s h CamelNamespaceHandler   OSGi environment not detected   java                main  INFO o a camel spring SpringCamelContext   Apache Camel        CamelContext  camel  is starting  java                main  INFO o a camel spring SpringCamelContext   JMX enabled  Using ManagedManagementStrategy   java                main  INFO o a c i c AnnotationTypeConverterLoader   Found   packages with     Converter classes to load  java                main  INFO o a c i c DefaultTypeConverter   Loaded     core type converters  total     type converters   java                main  INFO o a c i c DefaultTypeConverter   Loaded additional   type converters  total     type converters  in       seconds  java                main  INFO o a c c kestrel KestrelComponent   Creating endpoint for queue  feeds  on etl  f  parameters     java                main  INFO o a c c kestrel KestrelComponent   Creating MemcachedClient for etl  f feeds  java                          INFO net spy memcached MemcachedConnection  Added  QA sa etl  f                        Rops     Wops     iq    topRop null  topWop null  toWrite    interested    to connect queue  java                          INFO net spy memcached MemcachedConnection  Connection state changed for sun nio ch SelectionKeyImpl    b  a   java                main  INFO o a c c kestrel KestrelConsumer   Starting consumer for kestrel   etl  f feeds  java                main  INFO o a camel spring SpringCamelContext   Route  route  started and consuming from  Endpoint kestrel   etl  f feeds   java                main  INFO o a camel spring SpringCamelContext   Total   routes  of which   is started   java                main  INFO o a camel spring SpringCamelContext   Apache Camel        CamelContext  camel  started in       seconds  java                Camel  camel  thread      Poller kestrel   etl  f feeds  ERROR o a c processor DefaultErrorHandler   Failed delivery for exchangeId  ID incubos osx local                          Exhausted after delivery attempt    caught  java lang NullPointerException  java  java lang NullPointerException  null  java  at org apache camel impl SerializationDataFormat unmarshal SerializationDataFormat java       camel core       jar         java  at org apache camel processor UnmarshalProcessor process UnmarshalProcessor java       camel core       jar         java  at org apache camel impl converter AsyncProcessorTypeConverter ProcessorToAsyncProcessorBridge process AsyncProcessorTypeConverter java       camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java      camel core       jar         java  at org apache camel management InstrumentationProcessor process InstrumentationProcessor java      camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java      camel core       jar         java  at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java       camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      camel core       jar         java  at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java       camel core       jar         java  at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java       camel core       jar         java  at org apache camel processor DefaultChannel process DefaultChannel java       camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      camel core       jar         java  at org apache camel processor Pipeline process Pipeline java       camel core       jar         java  at org apache camel processor Pipeline process Pipeline java      camel core       jar         java  at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java       camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java      camel core       jar         java  at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java      camel core       jar         java  at org apache camel management InstrumentationProcessor process InstrumentationProcessor java      camel core       jar         java  at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java       camel core       jar         java  at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java      camel core       jar         java  at org apache camel component kestrel KestrelConsumer Poller run KestrelConsumer java       camel kestrel       jar         java  at java util concurrent Executors RunnableAdapter call Executors java       na            java  at java util concurrent FutureTask Sync innerRun FutureTask java       na            java  at java util concurrent FutureTask run FutureTask java       na            java  at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java       na            java  at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java       na            java  at java lang Thread run Thread java       na          It seems that ExchangeHelper convertToType   method returned null because camelContext getTypeConverter   returned null    ',0
'Unable to use cxf binding configuration for the endpoint    Caused by  org springframework beans factory BeanCreationException  Error creating bean with name  service   Error setting property values  nested exception is org springframework beans NotWritablePropertyException  Invalid property  bindingConfig  of bean class  org apache camel component cxf CxfSpringEndpoint   Bean property  bindingConfig  is not writable or has an invalid setter method  Does the parameter type of the setter match the return type of the getter  at org springframework beans factory support AbstractAutowireCapableBeanFactory applyPropertyValues AbstractAutowireCapableBeanFactory java       at org springframework beans factory support AbstractAutowireCapableBeanFactory populateBean AbstractAutowireCapableBeanFactory java       at org springframework beans factory support AbstractAutowireCapableBeanFactory doCreateBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractAutowireCapableBeanFactory createBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractBeanFactory   getObject AbstractBeanFactory java      at org springframework beans factory support DefaultSingletonBeanRegistry getSingleton DefaultSingletonBeanRegistry java      at org springframework beans factory support AbstractBeanFactory doGetBean AbstractBeanFactory java      at org springframework beans factory support AbstractBeanFactory getBean AbstractBeanFactory java      at org springframework beans factory support DefaultListableBeanFactory preInstantiateSingletons DefaultListableBeanFactory java      at org springframework context support AbstractApplicationContext finishBeanFactoryInitialization AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework test context support AbstractGenericContextLoader loadContext AbstractGenericContextLoader java     at org springframework test context support AbstractGenericContextLoader loadContext AbstractGenericContextLoader java    at org springframework test context TestContext loadApplicationContext TestContext java      at org springframework test context TestContext getApplicationContext TestContext java             moreCaused by  org springframework beans NotWritablePropertyException  Invalid property  bindingConfig  of bean class  org apache camel component cxf CxfSpringEndpoint   Bean property  bindingConfig  is not writable or has an invalid setter method  Does the parameter type of the setter match the return type of the getter  at org springframework beans BeanWrapperImpl setPropertyValue BeanWrapperImpl java       at org springframework beans BeanWrapperImpl setPropertyValue BeanWrapperImpl java      at org springframework beans AbstractPropertyAccessor setPropertyValues AbstractPropertyAccessor java     at org springframework beans AbstractPropertyAccessor setPropertyValues AbstractPropertyAccessor java     at org springframework beans factory support AbstractAutowireCapableBeanFactory applyPropertyValues AbstractAutowireCapableBeanFactory java              more   ',0
'file  consumer does not create directory    According to http   camel apache org file  html autoCreate is true by default and should for a consumer create the directory autoCreate true Automatically create missing directories in the file s pathname  For the file consumer  that means creating the starting directory  For the file producer  it means the directory the files should be written to  This does not happen and thus a route startup would fail    ',0
'Because local PrintService objects on Windows have a name which is not their UNC path  the PrinterProducer can never find them     In org apache camel component printer PrinterProducer  the line setPrinter          config getHostname          config getPrintername    reconstructs a UNC path which is expected to match the name of a PrintService on the system  For local printers on Windows  the name of the PrintService is simply the name of the printer without the host and any backslashes  so the PrinterProducer is never able to find them So when config getHostname   is  localhost   at least on Windows  the line should be simply setPrinter config getPrintername   so that we d have code like if   localhost  equalsIgnoreCase config getHostname       setPrinter config getPrintername      else   setPrinter          config getHostname            config getPrintername     This can only work if issue CAMEL      about the error in parseURI   in PrinterConfiguration is also fixed    ',0
'Exceptions are not propagated to the parent route when endpoint cannot be resolved in the RoutingSlip EIP    Here is the unit test to reproduce the issuepackage org test import org apache camel builder RouteBuilder import org apache camel component mock MockEndpoint import org apache camel test junit  CamelTestSupport import org junit Test public class RecipientListTest extends CamelTestSupport   public static class Router   public String findEndpoint     return  unresolved   endpoint        Test public void recipientList   throws Exception   MockEndpoint endpoint   getMockEndpoint  mock   error    endpoint expectedMessageCount     sendBody  direct   parent    Hello World     assertMockEndpointsSatisfied       Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder      Override public void configure   throws Exception   from  direct   parent    onException Throwable class   to  mock   error    end    to  direct   child    from  direct   child    errorHandler noErrorHandler     routingSlip bean Router class              ',0
'Recipient List cannot vary destination by changing property in an expression    This is probably due to producers being cached based on unresolved endpoint URI  rather than the resolved endpoint URI  Haven t tested this theory out though See message on user list http   markmail org message sdysp sspq lomf    ',0
'Unable to convert jms textmessage to bytemessage    When receiving a jms textmessage and just forward it to a another queue as a jms bytemessage the original textmessage is sendt without being converted to a jms bytemessage  JmsBinding makeJmsMessage seems to use the exchange headers to determine of a new jms message should be created or the original send Exchange headers seems to be populated if you do routing or set a dummy header See http   camel        n  nabble com Convert jms message from textmessage to bytemessage tc        html preben   ',0
'Can t find splitter bean in registry using multiple camel contexts with  vm  endpoint    The splitter component can use a bean with a  split method   It seems that this  split bean  is handled as expression and resolved lately using Camel Context from current exchange If I send an exchange using a separate CamelContext   client   lt camelContext id  client  xmlns  http   camel apache org schema spring  gt  lt  camelContext gt to a route defined in another CamelContext   server   using in memory transport like  direct  or  vm  lt camelContext id  server  xmlns  http   camel apache org schema spring  gt   lt route id  route    trace  false  streamCache  false  gt   lt from uri  vm route     gt   lt split gt   lt method bean   stringLineSplitter  method  split   gt   lt log message  before sending    body    gt   lt inOut uri   vm route     gt   lt log message  after sending   gt   lt  split gt   lt to uri  mock route     gt   lt  route gt  lt  camelContext gt the test fails with  Cannot find class  stringLineSplitter   Camel          org apache camel NoSuchBeanException   No bean could be found in the registry for  stringLineSplitter   Camel     SNAPSHOT If I understood Camel right it failsbecause it tries to resolve this bean based on client Camel Contextwhich is still set at the current exchange send from  client  to  server  but itdoesn t contain the bean If I send an exchange using same  client  CamelContext to another route in server  CamelContext involving  external  components like  jms   ActiveMQ  lt camelContext id  server  xmlns  http   camel apache org schema spring  gt   lt route id  route    trace  false  streamCache  false  gt   lt from uri  jms queue route     gt   lt split gt   lt method bean   stringLineSplitter  method  split   gt   lt log message  before sending    body    gt   lt inOut uri   vm route     gt   lt log message  after sending   gt   lt  split gt   lt to uri  mock route     gt   lt  route gt  lt  camelContext gt the test passed successfully  It seems that  jms  component creates anew exchange using  server  CamelContext    ',0
'NettyProducer creating new connection on every message    Using a NettyProducer without the disconnect true configuration is causing the route to block after    messages on the to  netty   tcp       call It appears that a new socket connection is created for every message  and then after    connections no new connection is allowed  must be a default thread pool limit   Using the disconnect true option fixes the problem as a socket is connected  message sent  then disconnected  But this does not seem viable for implementations where that overhead is undesirable or where more than one response is expected on a channel        This is a small Unit Test that shows the problem  http   camel        n  nabble com Camel Netty Producer creating new connection on every message td        html none  package netty  import java util Arrays  import java util Collection  import java util concurrent TimeUnit  import java util concurrent atomic AtomicBoolean  import java util concurrent atomic AtomicInteger  import junit framework TestCase  import org apache camel CamelContext  import org apache camel Exchange  import org apache camel ExchangePattern  import org apache camel Processor  import org apache camel builder RouteBuilder  import org apache camel impl DefaultCamelContext  import org junit Before  import org junit BeforeClass  import org junit Test  import org junit runner RunWith  import org junit runners Parameterized  import org junit runners Parameterized Parameters  import org slf j Logger  import org slf j LoggerFactory   RunWith Parameterized class  public class NettyTest extends TestCase    private final static Logger logger   LoggerFactory getLogger NettyTest class    private final static CamelContext serverContext   new DefaultCamelContext     private final CamelContext clientContext   new DefaultCamelContext     private final AtomicInteger responseCounter   new AtomicInteger      private final AtomicBoolean passedTen   new AtomicBoolean false    private Boolean disconnectClient   public NettyTest Boolean disconnectClient     this disconnectClient   disconnectClient      Parameters  public static Collection lt Object   gt  configs       return Arrays asList new Object         true      false            BeforeClass  public static void createServer   throws Exception     serverContext addRoutes new RouteBuilder        Override  public void configure   throws Exception     from  netty tcp   localhost      sync true amp disconnectOnNoReply false amp allowDefaultCodec true amp tcpNoDelay true amp reuseAddress true amp keepAlive false     setExchangePattern ExchangePattern InOut    process new Processor       Override  public void process Exchange exchange  throws Exception     Object body   exchange getIn   getBody     logger info  Request received   Value        body            transform constant     stop             serverContext start         Before  public void createClient   throws Exception     clientContext addRoutes new RouteBuilder        Override  public void configure   throws Exception        Generate an Echo message and ensure a Response is sent  from  timer   echoTimer delay  s amp fixedRate true amp period  s     setExchangePattern ExchangePattern InOut    transform     constant      to ExchangePattern InOut   netty tcp   localhost      allowDefaultCodec true amp tcpNoDelay true amp reuseAddress true amp keepAlive false amp sync true amp disconnect     disconnectClient toString      process new Processor        Override  public void process Exchange exchange  throws Exception     Object body   exchange getIn   getBody     logger info  Response number      Value         responseCounter incrementAndGet    body    if  responseCounter get    gt        passedTen set true            stop                 Test  public void test   throws Exception     clientContext getShutdownStrategy   setTimeout      clientContext start     logger info  Disconnect        this disconnectClient    Thread sleep TimeUnit SECONDS toMillis        clientContext stop     assertTrue  More than    responses have been received   passedTen get            ',0
'Need to specify the sl j api version in the camel maven archetypes    There are some third part dependencies will introduce other version of sl j api as CAMEL      shows  we need to specify the sl j api in the pom xml resource    ',0
'camel file component does not close a file when it s used with camel xslt    Here are the steps to reproduce  Create the directory target in  Put the file  file xml  into the directory target in  Note  the end tag in this file is not closed properly  Run the test  The test should fail  The file  file xml  remains in the target in but it should not FileLockedTest javapackage org apache camel import org apache camel builder RouteBuilder import org apache camel component mock MockEndpoint import org apache camel test junit  CamelTestSupport import org junit Test public class FileLockedTest extends CamelTestSupport    Test public void testFileLocked   throws Exception   MockEndpoint result   getMockEndpoint  mock result    result setAssertPeriod         result expectedMessageCount     result assertIsSatisfied       Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder      Override public void configure   throws Exception   from  file target in delay     amp moveFailed  error    onException Throwable class   to  mock result    end    to  xslt FileLockedTest xsl           FileLockedTest xsl lt  xml version       encoding  UTF     gt  lt xsl stylesheet xmlns xsl  http   www w  org      XSL Transform  xmlns  http   schemas computershare ru codex           version       gt   lt xsl output method  xml  encoding  UTF    omit xml declaration  yes    gt   lt xsl preserve space elements      gt   lt xsl template match     gt   lt xsl apply templates   gt   lt  xsl template gt   lt xsl template match       node    gt   lt xsl copy gt   lt xsl apply templates select       node      gt   lt  xsl copy gt   lt  xsl template gt  lt  xsl stylesheet gt file xml  Note  the end tag is not closed properly lt root gt  lt  root   ',0
'SLF JLog does not work with JdbcDriver for Quickfix J    I discovered that to use SLF J log  JdbcDriver cannot be present in the Quickfix J config file  Otherwise  the default LogFactory   ScreenLogFactory will be used  We need JdbcDriver setting as it is used for persisting FIX messages into database for FIX session management After debugging the code  I found out that this could be fixed by swapping those two lines in QuickfixjEngine java     isJdbcLog settings  impliedLogFactories       isSL JLog settings  impliedLogFactories  Can we please have this fixed for the next release    ',0
'Add option on XSLT to allow StAX    With the new StAX converters you may convert to a StAXSource which is not supported by the XSLT transformer  and you get this exceptionCaused by  org apache xml dtm DTMException  Not supported  javax xml transform stax StAXSource   d   e at org apache xml dtm ref DTMManagerDefault getDTM DTMManagerDefault java      at org apache xalan transformer TransformerImpl transform TransformerImpl java      at org apache xalan transformer TransformerImpl transform TransformerImpl java       at org apache xalan transformer TransformerImpl transform TransformerImpl java       at org apache camel builder xml XsltBuilder process XsltBuilder java     We should add option on XSLT component to explicit enable StAX if the end user wants it    ',0
'XQuery component does not work with StAXSource out of the box    The new STaXSource type converters cause camel saxon to fail unit tests as reported by CI serversCaused by  net sf saxon trans XPathException  Unknown source class at net sf saxon Configuration buildDocument Configuration java       at net sf saxon query StaticQueryContext buildDocument StaticQueryContext java      at org apache camel component xquery XQueryBuilder createDynamicContext XQueryBuilder java     We should implement the same optimized logic as we did today in XSLT to convert to Source if StAX is allowed  as well to avoid leaking resources we need to ensure if InputStream is in use  we should ensure it gets closed    ',0
'XPath will lock File input in case of an exception during xpath evaluation    We have a similar issue with XPath  as we had with XSLT and XQuery If the message is a java io File and an exception occurs during evaluation  then that file is locked on Windows platforms We need to close the FileInputStream to unlock the file  and allow Windows to access the file    ',0
'Stop or shutdown a route with a custom timeout value  will still log using the default timeout in the logs    If you stop a route with a custom time out value  then the graceful shutdown strategy will still use the default timeout value in the logs  so that information is not correct  For example if you have a short default value  but provide a higher timeout value  then you can have the log show negative timeout values INFO DefaultShutdownStrategy   Waiting as there are still   inflight and pending exchanges to complete  timeout in     seconds    ',0
'Simple expression does not find method toString      In a route builder  we have a log definition  from  direct testSimple    log    body toString    The body contains an object  that implements a public toString   method  But the problem is  that the simple expression does not find the method toString   and route processing stops without throwing an exception The funny thing is  that when we just rename the method  e g  toInfoString    then it works from  direct testSimple    log    body toInfoString    Why does simple expression have a problem with a method named  toString     ',0
'NPE from DefaultCxfBinding when  is null    when got soap message from CXF component like this  lt soap Envelope xmlns soap  http   schemas xmlsoap org soap envelope   gt  lt soap Header gt        lt  soap Header gt  lt soap Body  gt  lt  soap Envelope gt the NPE will be thrown                 WARN   tp                 ache cxf common logging LogUtils             Interceptor for  http   airportsoap sopera de airport  http   airportsoap sopera de getAirportInformationByISOCountryCode has thrown exception  unwinding nowjava lang NullPointerException at org apache camel component cxf DefaultCxfBinding getResponsePayloadList DefaultCxfBinding java              org apache camel camel cxf            at org apache camel component cxf DefaultCxfBinding populateCxfResponseFromExchange DefaultCxfBinding java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   setResponseBack CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   asyncInvoke CxfConsumer java              org apache camel camel cxf            at org apache camel component cxf CxfConsumer   invoke CxfConsumer java             org apache camel camel cxf            at org apache cxf interceptor ServiceInvokerInterceptor   run ServiceInvokerInterceptor java             org apache cxf bundle            at org apache cxf interceptor ServiceInvokerInterceptor handleMessage ServiceInvokerInterceptor java             org apache cxf bundle            at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java              org apache cxf bundle            at org apache cxf phase PhaseInterceptorChain resume PhaseInterceptorChain java              org apache cxf bundle            at org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java             org apache cxf bundle            at org apache cxf transport http jetty JettyHTTPDestination serviceRequest JettyHTTPDestination java              org apache cxf bundle            at org apache cxf transport http jetty JettyHTTPDestination doService JettyHTTPDestination java              org apache cxf bundle            at org apache cxf transport http jetty JettyHTTPHandler handle JettyHTTPHandler java             org apache cxf bundle            at org eclipse jetty server handler ContextHandler doHandle ContextHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandler doScope ContextHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ScopedHandler handle ScopedHandler java             org eclipse jetty server       v              at org eclipse jetty server handler ContextHandlerCollection handle ContextHandlerCollection java             org eclipse jetty server       v              at org eclipse jetty server handler HandlerWrapper handle HandlerWrapper java             org eclipse jetty server       v              at org eclipse jetty server Server handleAsync Server java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection handleRequest HttpConnection java             org eclipse jetty server       v              at org eclipse jetty server HttpConnection handle HttpConnection java             org eclipse jetty server       v              at org eclipse jetty io nio SelectChannelEndPoint handle SelectChannelEndPoint java             org eclipse jetty io       v              at org eclipse jetty io nio SelectChannelEndPoint   run SelectChannelEndPoint java            org eclipse jetty io       v              at org eclipse jetty util thread QueuedThreadPool   run QueuedThreadPool java             org eclipse jetty util       v              at java lang Thread run Thread java                        Looking into the source codes  before the line     of DefaultCxfBinding  the elements variable shoulde be checked if it s null    ',0
'NPE when using SEDA route and attaching an extra consumer    I m trying to construct a system for moving some seda queues over toActiveMQ during system shutdown  What I did was create a Route thatconnects to some of my seda queues and then drains the queue to activemq Basicly I got two routes  the drainer from  seda     sedaId     size         routeId routeName  sedaIs  noAutoStartup   to activeMQFailuresQueue  And the main route from  seda     sedaId     size         routeId routeName   sedaIs  to SomeProcessor  Now  sometimes the main route stalls for various reasons I need torestart the jvm process it is running in  so I start the first route But when trying this in production  I got  java lang NullPointerException atorg apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     atorg apache camel component seda SedaConsumer sendToConsumers SedaConsumer java      atorg apache camel component seda SedaConsumer doRun SedaConsumer java      atorg apache camel component seda SedaConsumer run SedaConsumer java      atjava util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      atjava util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Bvahdat added a comment just a very tiny pointer Looking at the source it seems that theSedaEndpoint getConsumerMulticastProcessor   method returns  null  causingthe NPE  as the condition multicastStarted    false    consumerMulticastProcessor    nullis true    ',0
'Bindy does not support quoted value with separator char in CSV datasource    i m currently writing a tuto on Camel         Showing HTTP  component usage by downloading US Gov public data  i found a problem   from  quartz   dataTimer cron       to  direct datas    from  direct datas    to  http    earthquake usgs gov earthquakes catalogs eqs day M  txt    unmarshal new BindyCsvDataFormat  net thejeearchitectcookbook camel earthquake     process new Processor     public void process Exchange exchange  throws Exception   Message message   exchange getIn                The data format is like and my separator char is     nc             Wednesday  November                  UTC                                 Central California I want to get all datas as java lang String but the date value raises exception  java lang IllegalArgumentException  No position    defined for the field      line    must be specified My separator is     but some values are nested inside      Unfortunately there are     inside the     Bindy get lost  How can i get String values nested inside     and containing      I can note that Camel CSV component deals with it without any problems Here is my pojo  package net thejeearchitectcookbook camel earthquake import java io Serializable import org apache camel dataformat bindy annotation CsvRecord import org apache camel dataformat bindy annotation DataField  CsvRecord  separator       public class EarthquakeInfos implements Serializable    DataField pos      private String src   DataField pos      private String eqid   DataField pos      private String version   DataField pos      private String datetime   DataField pos      private String lat   DataField pos      private String lon   DataField pos      private String magnitude   DataField pos      private String depth   DataField pos      private String nst   DataField pos       private String place  public String getSrc     return src    public void setSrc String src    this src   src    public String getEqid     return eqid    public void setEqid String eqid    this eqid   eqid    public String getVersion     return version    public void setVersion String version    this version   version    public String getLat     return lat    public void setLat String lat    this lat   lat    public String getLon     return lon    public void setLon String lon    this lon   lon    public String getDepth     return depth    public void setDepth String depth    this depth   depth    public String getNst     return nst    public void setNst String nst    this nst   nst    public String getDatetime     return datetime    public void setDatetime String datetime    this datetime   datetime    public String getMagnitude     return magnitude    public void setMagnitude String magnitude    this magnitude   magnitude    public String getPlace     return place    public void setPlace String place    this place   place     I can find that CSV Camel component performs well with the same datasource  from  direct datas   to  http    earthquake usgs gov earthquakes catalogs eqs day M  txt   unmarshal   csv   process new Processor     public void process Exchange exchange  throws Exception   Message message   exchange getIn    List lt List lt String gt  gt  datas    List lt List lt String gt  gt   message getBody       Skip header datas   datas subList    datas size            Process my data for  List lt String gt  row   datas       Process Row String datetime   row get     String region   row get     String magnitude   row get              ',0
'Bindy   CSV format   Should be able to marshal with quotes    See nabblehttp   camel        n  nabble com Bindy CSV marshal does not properly quote values defined by the CsvRecord separator td        htmlIts fairly common to marshal to from with quotes in CSV format We should make this easier by adding an attribute to  CsvRecord where you can define a quote char to use  either single or double etc    ',0
'When a route is removed from camel  LifecycleStrategy is called twice    DefaultCamelContext removeRoute method has these lines among others if  getRouteStatus routeId  isStopped      routeService setRemovingRoutes true   shutdownRouteService routeService   removeRouteDefinition routeId   ServiceHelper stopAndShutdownServices routeService  I think the last line from this snippet is not needed  because the route should be already stopped in order to pass the IF statement and then it is shutdown through this call shutdownRouteService routeService   ServiceHelper stopAndShutdownServices routeService  tries to stops again the route if not stopped  but the worse is it shutdown the rout again It seems to me like a bug  other thoughts    ',1
'Scala DSL does not support defining route scoped error handlers    The Scala DSL does not allow for defining error handlers at the route scope  The  errorHandler  method only sets the context scoped error handler    ',0
'Tokenize pair   evaluated as predicate should close input stream    If you read from a file and use the tokenize pair in a predicate such as a filter   content based router  then the input stream should be closed  Otherwise OS such as Windows keep a lock on the stream  and the file cannot be moved deleted after processing is done See nabblehttp   camel        n  nabble com Riding on org apache camel language TokenPairPredicateTest tp       p        htmlNote that using tokenizePair as a predicate is must likely very unusual  as its meant for splitting a stream into tokens  and thus most often only used with the splitter EIP    ',0
'Extra request parameters sent by the camel http  component    Described in http   camel        n  nabble com Extra Request Params sent in camel HTTP component GET request td        htmlRoute from  jetty http                myapp myservice    to  http    www google com  q camel amp bridgeEndpoint true amp throwExceptionOnFailure false    sends to the server the bridgeEndpoint true amp throwExceptionOnFailure false parameters while route from  jetty http                myapp myservice    to  http   www google com  q camel amp bridgeEndpoint true amp throwExceptionOnFailure false    behaves properly and removes them   ',0
'camel quartz   Using underscore in group name does not work    The group name is not properly resolved if people specify a invalid host name  such as with underscores If so we should fallback and grab the group name by grabbing the string until the first path separator char See nabblehttp   camel        n  nabble com Camel Quartz consumer doesn t allow underscores tp       p        html   ',0
'camel aws can allow SNAPSHOT transitive dependencies    The camel aws component depends on aws java sdk which has several dependencies defined using version ranges  The problem with version ranges is that they can introduce SNAPSHOT versions if they are available on your system which is not so good    in my case I had this http   download java net maven   com sun mail javax mail       SNAPSHOT javax mail       SNAPSHOT jar jar in my local repo so camel aws promptly used that SNAPSHOT lib    ',0
'After restarting route a camel quartz component fires right away  and it shouldn t     I am adding a new QuartzRouteRestartTest that demonstrates this issue  Not only a message is fired right after restart  but the scheduled times are messed up as well  I tried to keep the fire interval as low as possible  but it has to be large enough to demonstrate the problem  So I went down to      fire every five sec   but it s more obvious with      or       the trigger starts firing at the wrong time    ',0
'camel eventadmin do not work    Christian Muellers MacBook Pro bin cmueller    karaf cleankaraf root gt  features addurl mvn org apache camel karaf apache camel       xml featureskaraf root gt  features install camel eventadminError executing command  Could not start bundle mvn org apache camel camel eventadmin       in feature s  camel eventadmin        Unresolved constraint in bundle org apache camel camel eventadmin               Unable to resolve       missing requirement                package    amp  package org osgi service event  version gt           version gt          We have to install the feature eventadmin  from Karaf  first   ',0
'Remove ProducerCache from CamelContext service list when shutting down a route    If people add routes dynamic and remove the routes later on  we need to remove services which may have been added to the CamelContext services list  For example the ProducerCache by SendProcessor etc This will ensure that the ProducerCache can be GC ed    ',0
'BAM   database constraint violation when restaring application    Take BAM example from http   camel apache org bam example html  or any other one  it doesn t matter  Here is the one I m using  ActivityBuilder request   activity  eaiBroker topic SOME TOPIC concurrentConsumers     name  Request    correlate xpath   MessageRequest  Id   stringResult     ActivityBuilder response   activity  eaiBroker topic SOME OTHER TOPIC concurrentConsumers     name  Response    correlate xpath  MessageResponse  Id   stringResult     response  starts   after request completes     expectWithin seconds       errorIfOver seconds       to  log com eai level error    First run of the application and everything works  Restart application and try to activate one of BAM rules  there will be an exception that database constraint has been violated  Every time application is started  Camel tries to do following sql insertinsert into CAMEL ACTIVITYDEFINITION  name  processDefinition id  id  values          but name columne must be unique in CAMEL ACTIVITYDEFINITION  Workaround for this is to purge BAM tables every time you want to restart the application  but it s not a solution    ',0
'xpath expression with  header with saxon may throw exception if header did not exist    See CAMEL    We should return an empty String instead of a Void class  as this works with both JDK   Saxon XPathEngine Saxon does not work with the Void class    ',0
'Timed out Exchanges should be removed from seda queues    When the SedaProducer times out and stops waiting for an Exchange to be processed it should remove it from the queue as well  Same applies to the vm  component    ',0
'CamelContext autoStartup false and starting context programmatically doesnt work    If a  lt camelContext gt  is set to autoStartup false and then later tried to start it via code or JMX doesn t start routes associated with it    ',0
'Parameter binding not working with BeanExpression    The parameter binding options available in camel       do not work for BeanExpression  The reason is the fake ognl parser that gets confused about the syntax  We need to align the two scenarios and probably replace the ognl like parsing    ',0
'camel blueprint   Using namespaces with xpath does not work as the namesapces is not parsed and injected into the camel model    Using xpath predicates in a blueprint xml file does not work if you use custom namespaces  as the camel blueprint component does not detect the custom namespaces  as camel spring does    ',0
'ManagedBrowsableEndpoint are broken    ManagedeBrowsableEndpoint are broken which means any component that inherit ManagedBrowsableEndpoint have errors as well  Please see the link below which will have error screen shot of queueSize JMX operations http   camel        n  nabble com JMX queue size operation fails Camel       td        html   ',0
'exchange getIn   getBody  class  throws an exception for Jaxb model objects    exchange getIn   getBody Foo class  should return a Foo instance or null  if no suitable type converter is available  The java doc says   return the body of the message as the specified type  or  lt tt gt null lt  tt gt  if not possible to convert If Foo is an Jaxb object model  this method call  throws an org xml sax SAXParseException if the body content is a string throws a javax xml bind UnmarshalException if the body content is another Jaxb model objectPlease have a look on the attached sample eclipse project    ',0
'Camel       incapable of working with   in endpoint URIs    In the class org apache camel util URISupport which will be used to resolve endpoints  DefaultCamelContext normalizeEndpointUri  the method parseParameters will be called At first the java net Uri getQuery will be called with according to the javadoc  Returns the decoded query component of this URI  returns a decoded URI  If that fails the java net Uri getSchemeSpecificPart method will be called which according to the javadoc  Returns the decoded scheme specific part of this URI   returns a decoded URI So to summarize we get in any case a decoded URI This URI will then be than in the method org apache camel util URISupport parseQuery String  again decoded with java net URLDecoder decode String String  This code leads to the following behaviour  If a   is properly encoded with    test the    test will be substituted by the first call to  test and the decoded again which leads to an Exception In the http   svn apache org viewvc view revision amp revision         commit you can see that the   was uncommented from org apache camel util UnsafeUriCharactersEncoder  Maybe this is related However    Double encoding of URIs seems quite odd  With any URI char there is no issue with that  But with   the   will be decoded again  which makes a   unusable in Camel    ',0
'Cannot use xquery predicate in filter after an xpath splitter     After upgrading from       to       using xqury predicate after an xpath filter throws java lang ClassCastException  net sf saxon tinytree TinyElementImpl cannot be cast to net sf saxon om DocumentInfo   Attached unit test doesn t fail in camel       from  direct xpath    split xpathsplitter   filter   xquery    record     type           to  mock result    See nabble discussion http   camel        n  nabble com Unit test fails after upgrading to       Cannot use xquery expression after xpath td        html   ',0
'Problem Removing Endpoints     see context on the users  list When using removeEndpoints String  with a pattern  some endpoints  like jms topics  are reported as removed but they are not    ',0
'Spring security example does not work    When you try to run the spring security example and access it from a browser you get      I debugged into it and the reason is that the camel context does not attach to the camel http servlet    ',0
'ManagedPerformanceCounterMBean should extend ManagedCounterMBean    ManagedPerformanceCounterMBean does not extend ManagedCounterMBean  while ManagedPerformanceCounter does extend ManagedCounter    ',0
'BindyDataFormat should not use the default encoding    Here is the mail thread            which discuss about it            http   camel        n  nabble com Bindy CSV parser uses default encoding tp       p        html   ',0
'DigitalSignatureEndpoint not clearing headers after verify    The DigitalSignatureEndpoint has a clearHeaders option that is supposed to clear headers after a verify operation  However that is not working because the headers cleared are not the actual header values  but the name of the java String fields  which is irrelevant at runtime The default value of the clearHeaders should also be true  so that Camel does not leave debris in the Exchange after a verify operation    ',0
'Error handler not called when recipient list has non existing endpoint    Given this route onException Exception class   handled true   to  mock dead    from  direct start    recipientList constant  fail endpoint     to  mock result   You would assume the on exception will handle the exception from the recipient list with the non existing endpoint This is not the case  We should let recipient list detect and let the error handler handle it    ',0
'Camel simple language wrong working with real number    I compute real number in route   lt setBody gt      lt  setBody gt After that I want to filter   lt filter gt  lt simple gt   body   gt     lt  simple gt       lt  filter gt This expression return false for value in body          ',0
'simple without embedded text results in an NPE    After switching to     the following results in a NPE lt camel setBody gt   lt camel simple gt  lt  camel simple gt  lt  camel setBody gt I m not sure if it is now required to have something in the content of the simple element  I used it for setting the body element to an empty string before  worked with          ',0
'Streaming splitter ignores exception handling    If an exception occurs on the next   call of an Iterator in a streaming splitter  the exception is never propagated to the exception or the error handler  This will lead to improper route termination  and inifite rollback retry cycles I attached the minimal test case demonstrating the issue    ',0
'CxfProducer should release the CXF when the Producer is stopped     CXF ClientImpl has the requestContext need to be cleaned when the CxfProducer is stopped If we don t call the Client destory   method  the requestContext will cause the memory leak    ',0
'Camel route with bean element sends on startup invalid message to target route that is represented by a proxy who exposes route    I expose a Camel route with a direct endpoint defined in an OSGi bundle with the  lt camel proxy gt  and  lt osgi service gt  tags  The reason for this is to be able to call this direct route in other routes  defined in other bundles  as a  sub route  directly as bean       bean routeproxy   quot method quot         This works as expected But on route startup the toString method is called on the route  for a description  which is propagated to the elements of the route  Therefore my bean element  which is the direct route proxy  receives the toString call and the CamelInvocationHandler converts this toString call to a message and sends it to the direct route  This more or less empty message is of course not valid for the target route and produces an error on bundle startup  Shouldn t the toString call be suppressed by the proxy  since toString is not part of the Interface the proxy represents  Or is my approach a not recommended or problematic approach Parts of stacktrace to show the way from route startup to the produced message  gt  route receives  empty  message     omitted      at org apache camel component direct DirectProducer process DirectProducer java     at org apache camel component bean CamelInvocationHandler invoke CamelInvocationHandler java     at  Proxy    toString Unknown Source  at sun reflect GeneratedMethodAccessor    invoke Unknown Source  at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java       gt  toString call is converted to message and sent to route     omitted      at org springframework aop framework ReflectiveMethodInvocation proceed ReflectiveMethodInvocation java      at org springframework aop framework JdkDynamicAopProxy invoke JdkDynamicAopProxy java      at  Proxy    toString Unknown Source  at org apache camel component bean ConstantBeanHolder toString ConstantBeanHolder java      gt  toString called on bean element in route  bean is a proxy for a route       omitted      at java lang String valueOf String java       at java lang StringBuilder append StringBuilder java      at org apache camel impl EventDrivenConsumerRoute toString EventDrivenConsumerRoute java     at org apache camel management mbean ManagedRoute  lt init gt  ManagedRoute java     at org apache camel management DefaultManagementLifecycleStrategy onRoutesAdd DefaultManagementLifecycleStrategy java      at org apache camel impl RouteService doStart RouteService java       gt  Route startup   ',0
'Memory leak in SedaComponent if adding and removing a lot of seda endpoints with different queue names    If you add and remove a lot of seda endpoints with different queue names  then the seda component may keep references to non used queues    ',0
'Memory leak in TimerListener if JMX enabled    If adding and removing a lot of routes  and you have JMX enabled with load statistics  then it may leak memory  as the route listener is not properly removed when the route is removed  due invalid equals hashCode    ',0
'Bug  Unique Endpoints Leaking in DefaultInflightRepository    If you have an endpoint protocol which uses unique URIs you will leak Strings in the HashMap stored in the DefaultInflightRepository  org apache camel impl DefaultInflightRepository It seems there is a reference counting scheme in place  but it doesn t do a remove until the  stop  method is called to shut the system down  We are running XMPP endpoints  which use a protocol like xmpp   someaccount domain password to someOtherAccountWhen there are    million accounts  not all of which are active  but all of which may message at some time or another  no references are removed to the endpointCount When the count becomes    the reference should be removed and the size method will still return the appropriate result Please be careful in the implementation to synchronize on some object  perhaps the AtomicInteger  reflecting a read write lock on the endpoint count modification    ',0
'npe in camel       validator    validator component seems broken in        Gives you a npe when loading xsd from classpath during unittesting See http   camel        n  nabble com npe in camel       validator tc        htmlprefixing with classpath eg   lt to uri  validator classpath BroadcastMonitor xsd    gt  doesn t help    ',0
'camel jt      Parameter length when doing Program Call issue    When the length of each parameter of a program PGM is greater than the length of his values  the parameters are setted incorrectly Example Input of program pgm param    gt  A   alphanumeric with length    param    gt  A   alphanumeric with length    When the String array is                the values are setted on each parameter as param         param        ',0
'Incorrect feature definition for camel fop       ',0
'Timer endpoint getState does not work in JMX    The getState attribute does not work    ',0
'CxfBeanDestination should copy the in message header to the out message    User complains about can not access any other headers after the cxfbean in this mail thread            We should let the CxfBeanDestination copy the in message header before it sends the message back            http   camel        n  nabble com Camel CXF Drops Headers tt        html   ',0
'RMI endpoint doesn t handle nested exception and raise CamelRuntimeException instead of RemoteException    When we have a route looking like  lt from uri  rmi       gt  lt to uri  myBean   gt if an exception is raised on myBean  the RMI endpoint ignores the exception described in the RemoteInterface and always raises a RuntimeCamelException nesting the original exceptions More over  RuntimeCamalException should not be raised by the RMI endpoint  It would make more sense to raise a RemoteException  as we are on a RMI endpoint    ',0
'bean component    Handler should take precedence in a bean that implements Predicate    If you use a bean in a Camel route  and have not specified the method name to invoke  Then Camel has to scan for suitable methods to use  And for that we have the  Handler annotation which should take precedence in this process  However if the bean implements Predicate  or Processor  then Camel will use that  However the  Handler should be used instead  as this is what the end user expects  And also what we tell in the docs    ',0
'OnException   Handler or Continued predicate is invoked twice per exception    See CAMEL     When using handled predicate  or continued predicate  those is evaluated twice per exception  We should only do this once  which is what the end user would normally except    ',0
'Backmerge CAMEL      to the Bindy component for non required fields    The issue  originally reported via CAMEL       is to backmerge the CAMEL      fix into the     x branch I merged revision         into my local     x branch that I had updated with two new test cases Before merge one test failed  after merge all tests were successfull Attaching the updated model and tabtest         Revision         Author  ningjiangDate  den    februari              Message CAMEL      support the set the default value on the field of bindy CVSModified    camel trunk components camel bindy src main java org apache camel dataformat bindy BindyCsvFactory javaModified    camel trunk components camel bindy src main java org apache camel dataformat bindy annotation DataField javaModified    camel trunk components camel bindy src test java org apache camel dataformat bindy csv BindySimpleCsvUnmarshallTest javaModified    camel trunk components camel bindy src test java org apache camel dataformat bindy model simple oneclass Order java   ',0
'JMX issues on WebSphere    While setting up a Camel web application for WebSphere     I encountered two issues   Documentation  the Camel JMX docs proposes the following settings for WebSphere  lt camel jmxAgent id  agent  createConnector  true  mbeanObjectDomainName  org yourname  mbeanServerDefaultDomain  WebSphere   gt This registers the beans with the PlatformMbeanServer instead of the WebSphere MBean server  The following setup works better  lt camel jmxAgent id  agent  createConnector  false  mbeanObjectDomainName  org yourname  usePlatformMBeanServer  false  mbeanServerDefaultDomain  WebSphere   gt    For each Camel route  the same Tracer and DefaultErrorHandler MBeans are tried to be registered over and over again  Because WebSphere changes the ObjectNames on registration  server isRegistered name   in DefaultManagementAgent registerMBeanWithServer always returns false  which causes the MBean to be re registered  which again cause Exceptions  e g               WebContainer         WARN   DefaultManagementLifecycleStrategy onErrorHandlerAdd        Could not register error handler builder  ErrorHandlerBuilderRef CamelDefaultErrorHandlerBuilder  as ErrorHandler MBean javax management InstanceAlreadyExistsException  org apache camel cell wdf lap     Node  Cell name  DefaultErrorHandlerBuilder ref CamelDefaultErrorHandlerBuilder   context wdf lap      camelContext type errorhandlers node wdf lap     Node   process server  at com sun jmx mbeanserver Repository addMBean Repository java      at com sun jmx interceptor DefaultMBeanServerInterceptor internal addObject DefaultMBeanServerInterceptor java       at com sun jmx interceptor DefaultMBeanServerInterceptor registerDynamicMBean DefaultMBeanServerInterceptor java      at com sun jmx interceptor DefaultMBeanServerInterceptor registerObject DefaultMBeanServerInterceptor java      at com sun jmx interceptor DefaultMBeanServerInterceptor registerMBean DefaultMBeanServerInterceptor java      at com sun jmx mbeanserver JmxMBeanServer registerMBean JmxMBeanServer java      at com ibm ws management PlatformMBeanServer registerMBean PlatformMBeanServer java      at org apache camel management DefaultManagementAgent registerMBeanWithServer DefaultManagementAgent java      at org apache camel management DefaultManagementAgent register DefaultManagementAgent java        The web application starts up  but with a lot of exceptions in the log Proposal Instead of using a Set lt ObjectName gt  for mbeansRegistered  use a Map lt ObjectName  ObjectName gt  where the key is the  Camel  ObjectName and the value is the actually deployed ObjectName I will provide a patch that illustrates the idea    ',0
'spring schema is not up to date    The URI of the Spring schema has been updated in Camel       and       http   camel apache org schema cxf We can see that starting from       and        we suffix the schema with  spring or  blueprint However  the spring schema resource file has not been updated with this suffix    ',0
'Strange warning appears  WARN  org apache camel processor DeadLetterChannel   Cannot determine current route from Exchange with id    The warning gets printed but other than that  everything seems to work   I hope                        drisCamelContext JmsConsumer dispatchHttpQueue      WARN org apache camel processor DeadLetterChannel   Cannot determine current route from Exchange with id  ID dris ixor be                                will fallback and use first error handler                        drisCamelContext JmsConsumer dispatchHttpQueue      WARN distribution kv   dispatch   Failed delivery  attempt          org apache http conn HttpHostConnectException  Connection to http                      refused       c d    KV passtimes                        queue dispatchHttpQueue ID dris ixor be                                  When looking up the log statement in RedeliveryErrorHandler  I find this else if   exceptionPolicy getErrorHandlers   isEmpty         note this should really not happen  but we have this code as a fail safe    to be backwards compatible with the old behavior log warn  Cannot determine current route from Exchange with id      will fallback and use first error handler    exchange getExchangeId     processor   exceptionPolicy getErrorHandlers   iterator   next     So it shouldn t happen but it happens after all   Here is the route causing the warning  I think it started when I made the route transacted  As shown in the log snippet above  the warning is printed when the HTTP endpoint throws an IOException  route ENDPOINT DISPATCH  from ENDPOINT DISPATCH QUEUE     cacheLevelName CACHE CONSUMER amp        necessary for message groups to work  concurrentConsumers   hermes dris distribution kv   concurrentOutgoingHttpDispatchers   amp      maxConcurrentConsumers   hermes dris distribution kv   maxConcurrentOutgoingHttpDispatchers      routeId ROUTE ID DISPATCH QUEUE   onException Throwable class     transacted routes override the default error handler    to avoid the message going to the the ActiveMQ DLQ  forward to our DLQ here  to ENDPOINT DLQ   handled true   end    transacted      determine action    the timingPointSequencer will check what needs to happen with the message  beanRef  timingPointSequencer    handleDispatch    choice      normal situation  the message can be sent  when header TimingPointSequencer HEADER ACTION  isEqualTo constant TimingPointSequencer ACTION PROCEED     to ENDPOINT DISPATCH     delay message  usually because of previous errors for this destination  when header TimingPointSequencer HEADER ACTION  isEqualTo constant TimingPointSequencer ACTION REENQUEUE     log LoggingLevel INFO   Re enqueuing    MESSAGE LOG FORMAT   to ENDPOINT DISPATCH QUEUE   otherwise    log LoggingLevel ERROR   No action header set        MESSAGE LOG FORMAT   to ENDPOINT DLQ   end    end    from ENDPOINT DISPATCH   routeId ROUTE ID DISPATCH   onException IOException class     in case of IO exceptions  the message is always re enqueued    reschedule parameters are set by the timingPointSequencer  beanRef  timingPointSequencer    handleFailure    log LoggingLevel WARN   Failed delivery  attempt     in header tpSecAttempt       in header CamelExceptionCaught     MESSAGE LOG FORMAT   to ENDPOINT DISPATCH QUEUE   handled true   end      clear http headers to avoid interference from other http endpoints  removeHeaders  CamelHttp     setHeader Exchange HTTP URI  simple  http     header     HEADER DESTINATION ADDRESS          setHeader Exchange HTTP PATH  simple    properties hermes dris distribution kv   controller urlpath      setHeader Exchange CONTENT TYPE  constant  application xml     setHeader Exchange CONTENT ENCODING  constant  gzip       use gzip compression  log verboseLoggingLevel   Sending request to   in header CamelHttpUri    in header CamelHttpPath     MESSAGE LOG FORMAT     use multicast instead of a pipeline  or the audit log will contain the http response   multicast    stopOnException    to ENDPOINT TIMINGPOINT HTTP     httpClientConfigurerRef timingPointHttpClientConfigurer amp headerFilterStrategy  distributionHttpHeaderFilterStrategy   ENDPOINT AUDIT OUTGOING   end    beanRef  timingPointSequencer    handleSuccess      ',0
'SftpChangedExclusiveReadLockStrategy does not check the correct field to determine if a file is changing    I have recently upgraded from Camel     to a more recent version  I can confirm that the bug is still in trunk  In Camel      there was a generic FileChangedExclusiveReadLockStrategy  This checked the modification time of the file using GenericFile lastModified  This field was set by SftpComponent asRemoteFile as file getAttrs   getMTime           In Camel     onwards  this behaviour is implemented by SftpChangedExclusiveReadLockStrategy  This incorrectly  to my mind  retrieves the timestamp on line    using  newLastModified   f getAttrs   getATime   Taking the atime of the file doesn t make a great deal of sense to me  on a POSIX compliant filesystem  the atime will be incremented every time the file is polled  meaning that this strategy will never be able to mark a file as unchanged  While some filesystems are mounted nowadays as noatime or relatime  the mtime is still absolutely the safest mechanism to determine if something is writing to a target file  The impact of this bug is that we cannot reliably poll files from a remote SFTP server    ',0
'initialDelay and idempotentRepository Endpoint URI parameters fail to be read from Camel context when Turkish language is set in host operating system     org apache camel util ObjectHelper capitalize   method uses native JAVA String toUpperCase   method  without parameters   which performs capitalization according to operating system current language and regional settings configuration  When these are set to Turkish  a call to capitalize   method  with a String starting with  i  as parameter  returns Turkish dotted  I  as capitalized  i   which is wrong according to programmatic language and expected behavior This behaviour impacts  at least  in Endpoint URI parameters which names start with char  i   such as  idempotentRepository  and  initialDelay  URI parameters  When setter getter methods lookup is performed for these parameters  wrong method names are returned due to ObjectHelper capitalize   method  This method uses standard Java String toUpperCase   function which returns a dotted  I  instead of dotless  I  for idempotentRepository and initialDelay parameters To solve this  the attached patch consists of refactoring ObjectHelper capitalize   method  Instead of calling toUpperCase   method  it is called toUpperCase Locale ENGLISH  to enforce  I  character  dotless  return    ',0
'Potential dead lock when shutting down Camel with NotifyBuilder doing notication    See nabblehttp   camel        n  nabble com Gracefull shutdown timeouts due to NotifyBuilder blocks on context tp       p        htmlWe should avoid the synchronized getRoutes method which is really not needed    ',0
'Loop causes NullPointerException on error    The following context will cause NullPointerException   lt routeContext id  myCamelContext  xmlns  http   camel apache org schema spring  gt    lt route gt   lt from uri  jms myQueue   gt   lt onException gt   lt exception gt org xml sax SAXParseException lt  exception gt   lt redeliveryPolicy maximumRedeliveries      gt   lt handled gt  lt constant gt true lt  constant gt  lt  handled gt   lt to uri  log camelfatal showAll true amp multiline true amp level ERROR   gt    lt  onException gt   lt loop copy  true  gt   lt constant gt   lt  constant gt   lt inOnly uri  smtp   you can leave this unchanged   gt   lt  loop gt   lt  route gt   lt  routeContext gt The callstack on the NullPointerException Daemon Thread  Camel  appServerCamelContext  thread      JmsConsumer     emailOutbox        Suspended  exception NullPointerException    DefaultErrorHandler RedeliveryErrorHandler  processErrorHandler Exchange  AsyncCallback  RedeliveryErrorHandler RedeliveryData  line       DefaultErrorHandler RedeliveryErrorHandler  process Exchange  AsyncCallback  line       RouteContextProcessor processNext Exchange  AsyncCallback  line      RouteContextProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      DefaultChannel process Exchange  AsyncCallback  line       AsyncProcessorHelper process AsyncProcessor  Exchange  AsyncCallback  line      LoopProcessor DelegateAsyncProcessor  processNext Exchange  AsyncCallback  line      LoopProcessor process Exchange  AsyncCallback  AtomicInteger  AtomicInteger  line       LoopProcessor process Exchange  AsyncCallback  line      AsyncProcessorHelper process AsyncProcessor  Exchange  AsyncCallback  line      InstrumentationProcessor DelegateAsyncProcessor  processNext Exchange  AsyncCallback  line      InstrumentationProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      InstrumentationProcessor process Exchange  AsyncCallback  line      AsyncProcessorHelper process AsyncProcessor  Exchange  AsyncCallback  line      TraceInterceptor DelegateAsyncProcessor  processNext Exchange  AsyncCallback  line      TraceInterceptor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      TraceInterceptor process Exchange  AsyncCallback  line      AsyncProcessorHelper process AsyncProcessor  Exchange  AsyncCallback  line      DefaultErrorHandler RedeliveryErrorHandler  processErrorHandler Exchange  AsyncCallback  RedeliveryErrorHandler RedeliveryData  line       DefaultErrorHandler RedeliveryErrorHandler  process Exchange  AsyncCallback  line       RouteContextProcessor processNext Exchange  AsyncCallback  line      RouteContextProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      DefaultChannel process Exchange  AsyncCallback  line       RouteContextProcessor processNext Exchange  AsyncCallback  line      RouteContextProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      UnitOfWorkProcessor processAsync Exchange  AsyncCallback  UnitOfWork  line       UnitOfWorkProcessor process Exchange  AsyncCallback  line       RouteInflightRepositoryProcessor processNext Exchange  AsyncCallback  line      RouteInflightRepositoryProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      AsyncProcessorHelper process AsyncProcessor  Exchange  AsyncCallback  line      InstrumentationProcessor DelegateAsyncProcessor  processNext Exchange  AsyncCallback  line      InstrumentationProcessor DelegateAsyncProcessor  process Exchange  AsyncCallback  line      InstrumentationProcessor process Exchange  AsyncCallback  line      AsyncProcessorHelper process AsyncProcessor  Exchange  line      InstrumentationProcessor DelegateAsyncProcessor  process Exchange  line      EndpointMessageListener onMessage Message  line       DefaultJmsMessageListenerContainer AbstractMessageListenerContainer  doInvokeListener MessageListener  Message  line       DefaultJmsMessageListenerContainer AbstractMessageListenerContainer  invokeListener Session  Message  line       DefaultJmsMessageListenerContainer AbstractMessageListenerContainer  doExecuteListener Session  Message  line       DefaultJmsMessageListenerContainer AbstractPollingMessageListenerContainer  doReceiveAndExecute Object  Session  MessageConsumer  TransactionStatus  line       DefaultJmsMessageListenerContainer AbstractPollingMessageListenerContainer  receiveAndExecute Object  Session  MessageConsumer  line       DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener   line        DefaultMessageListenerContainer AsyncMessageListenerInvoker executeOngoingLoop   line        DefaultMessageListenerContainer AsyncMessageListenerInvoker run   line       ThreadPoolExecutor Worker runTask Runnable  line       ThreadPoolExecutor Worker run   line       Thread run   line        ',0
'HazelcastComponent doStop bombing out    I am setting up an own hazelcast instance on HazelcastComponent  it is created by Spring the problem is when HazelcastComponent doStop is called  a NullPointerException is throw  becausecreateOwnInstance is null    ',0
'camel netty can t distinguish between Sharable and Unsharable codecs    Camel netty uses general configuration model for referenced encoders decoders for channel pipelines  see DefaultServerPipelineFactory  That is  create encoder decoder objects at configuration parsing time and store them in a list  then use them when a pipeline is established  However  this will make encoder decoder objects shared among different pipelines  that may cause data conflicts  when the encoder decoder is not Sharable has object status not annotated as  Sharable   e g  a LengthFieldBasedFrameDecoder Although we can avoid the problem by totally writing a new serverpipelinefactory for our apps  several problem still remains  please see detailed description and testcase for this bug at http   camel        n  nabble com camel netty bug and the need of best practice for creating referenced parameter object on looking up td        html   ',0
'Camel       jetty component no longer works with Jetty      When attempting to create a camel jetty endpoint in Camel        the following exception is thrown java lang NoSuchMethodError  org eclipse jetty servlet ServletContextHandler addFilter Lorg eclipse jetty servlet FilterHolder Ljava lang String Ljava util EnumSet  Vat org apache camel component jetty JettyHttpComponent enableMultipartFilter JettyHttpComponent java      at org apache camel component jetty JettyHttpComponent connect JettyHttpComponent java      at org apache camel component http HttpEndpoint connect HttpEndpoint java      at org apache camel component http HttpConsumer doStart HttpConsumer java     at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext startService DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartOrResumeRouteConsumers DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartRouteConsumers DefaultCamelContext java       at org apache camel impl DefaultCamelContext safelyStartRouteServices DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartOrResumeRoutes DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext start DefaultCamelContext java         This appears to be a regression of a caused by the this merge from trunk  which I suspect requires Jetty   to be used Creating the endpoint under       works fine    ',0
'LDAP Component lose headers    When we call to a LDAP endpoint  the result is returned in the Out body and we lose the IN headers  see http   camel        n  nabble com LDAP Component lose headers td        html   A fix seems relatively easy  The solution could be add this line inside the process   method in LdapProducer java exchange getOut   setHeaders exchange getIn   getHeaders       ',0
'Incorrect Content Length returned for converted result objects with Unicode characters    The camel servlet component responds with an incorrect http Content Length header  causing the HTTP client to retreive a incomplete response  when the body of the out message is of a POJO type and is converted into a string that contains unicode characters For example  the following route returns  B e W r   but should return  B e W rld  from  servlet    testUnicodeWithObjectResponse matchOnUriPrefix true     process new Processor     public void process Exchange exchange  throws Exception    String contentType   exchange getIn   getHeader Exchange CONTENT TYPE  String class   exchange getOut   setHeader Exchange CONTENT TYPE  contentType      charset UTF            transform constant  new Object     Override public String toString   Unknown macro    return  quot B e W rld quot           The attached patch contains a fix for the problem and a test to reproduce the problem    ',0
'Jetty client can corrupt streams if used in a bridge mode  proxy     The jetty http producer should favor streams over Strings  which otherwise could cause the payload to be corrupted if doing a bridge mode  eg from jetty to jetty    ',0
'camel stream overwrites files instead of appending    When a file stream is used with camel stream  the file is not opened in append mode  therefore the file is overwritten with every message  ending up with just the last message  all others are lost This contrasts with the documented behavior    ',0
'camel stream should not close stream after each write    The StreamProducer in camel stream closes the stream after every write  which significantly affects performance    ',0
'EventNotifiers don t work under Blueprint    EventNotifiers don t work with Blueprint Camel Contexts  Testing on latest      SNAPSHOT  updated on    May       GMT After some debugging  it looks like the bean lookup performed on line     of AbstractCamelContextFactoryBean afterPropertiesSet   triggers the initialization of the CamelContext as part of the lookup  As part of the init  all services are started  including the ManagementContext and its EventNotifiers  which we were just looking up  EventNotifiers are then added but never started because they came in late    ',0
'camel sql   Should support   sign in query    See nabbleWe should look into supporting the   sign in the sql component It should possible be less strict in uri validation as people can enter SQL queries  And to make it easy  they should just be able to dump in the SQL as is We should also consider adding an option to refer to a SQL that is enlisted in the registry Also people should be able to externalize their SQL in a  properties file and have Camel lookup that using the       notation   ',0
'Camel features file doesn t validate    If you execute camel platforms karaf gt mvn clean install  Pvalidateit fails in the feature definition validation for the following components camel quickfixcamel cxfcamel cdi   ',0
'camel jms   Exception thrown from destination resolver should trigger Camel exception handling    See nabblehttp   camel        n  nabble com Camel Error handling throwing exception not moving to error queue tp        htmlThe jms producer should catch unhandled exceptions from the Spring JMS  such as its destination resolver  And ensure the callback is invoked  to let Camel error handler be triggered    ',0
'Shutting down one of the contexts breaks async redeliveries in others  RedeliveryErrorHandler has static reference to a thread pool    ErrorRedeliveryHandler has static reference to a thread pool used for scheduling retries  thus when it s stopped it stops a pool used by other handler instances e g  from other contexts   thus they now can t redeliver    ',0
'Mail component does not work as expected  Email Deletion is partially broken et Disconnect does not work well     The way disconnect is implemented causes issues with some other options of the consumer  For instance  disconnect  option is not compatible with  delete  option The delete action is done in completion action  processCommit  line       On line      processCommit method checks if folder is open  but  disconnect  option force folder at null value at the end of poll method  Line      I guess disconnect method should be called on completion after any other completion actions occured  It is not possible to make completion actions if connection to mail server is closed The result of the usage of disconnect option and delete option is a NullPointerException on test   if   folder isOpen     statement on line     Issue should be always reproductible I let you fix the priority of the issue  but it is an annoying issue even if there is a workaround by disabling disconnect option       ',0
'CXF Transport loses HTTP Matrix parameters    DefaultCxfMesssageMapper  note the typo   to be fixed in a follow up JIRA  wrongly initializes CXF Message Message REQUEST URI property with the value of Camel Exchange HTTP PATH  even though Camel Exchange HTTP URI is available The net effect is that the HTTP matrix parameters if any attached to the last HTTP path segment are lost  Another side effect is that Exchange HTTP PATH will contain the decoded value  done at HTTPServletRequest level  which can lead to the matching issues at the JAX RS level A simple patch is attached   ',0
'Threads EIP hangs Junit  tests using adviceWith    If the  threds    DSL keyword is used in a route and a Junit  test is performed  the test hangs indefenitely The issue is descibed here http   camel        n  nabble com Threads EIP hangs Unit Tests JUnit  td        htmlplease find attached a self consistent sample project to reproduce it    ',0
'MQTT Endpoint does not correctly return the MQTT Payload    MQTT Endpoint does not correctly return the MQTT Payload  It returns the whole MQTT Message  header   payload  The bug is in line    of MQTTEndpoint java  version       but also in       exchange getIn   setBody body getData    must become exchange getIn   setBody body toByteArray     because getData   ignores the offset  to skip the MQTT header  set in the body byte array    ',0
'ObjectAlreadyExistsException when  redeploying  routes that uses CronScheduledRoutePolicy    When a route that has a CronScheduledRoutePolicy is removed it does not properly clean up the quartz jobs  The result  apart from possible memory leak  is that if the route is removed from the context and then readded with the same route id a ObjectAlreadyExistsException This is done using the following steps    Stop the route   Remove the route  and it s endpoints  from the context     Re add the route to the context using the same name Attached is a testcase that shows the problem I ve solved this by adding my own implementation of onRemove  that calls doStop    to CronScheduledRoutePolicy    ',0
'Simple does not handle empty values in predicates properly    Example code     lt choice gt   lt when gt   lt simple gt   property someProperty        lt  simple gt       lt  when gt    Error message  right must be specified   ',0
'Folder closed too early when working asynchronously    When using a MailConsumer connected with IMAP to a mailserver and routing the messages to SEDA or any other asynchronous endpoint  it can cause a com sun mail util FolderClosedIOException or javax mail FolderClosedException to happen if you are trying to process the mails messages attachments This is because the IMAP folder gets closed at the end of each MailConsumer poll  I propose to add a new MailConfiguration option  closeFolder   which can override this behaviour Here s an example on how to reproduce the problem   Scala code  sorry  But it should be self explanatory You need a couple of mails with attachments in your mailbox to test this      mails should be enough to cause the exceptions import javax mail internet MimeMultipartimport org apache camel impl DefaultCamelContextimport org apache camel scala dsl builder RouteBuilderimport scala io Sourceobject Main    def main args  Array     String        Unit     val camelContext   new DefaultCamelContext val host    imap gmail com  val username          gmail com  val password              this will cause com sun mail util FolderClosedIOException or javax mail FolderClosedException val endpoint    imaps    host  password  password  amp username  username  amp folderName INBOX amp unseen false amp disconnect false amp mapMailMessage true amp connectionTimeout           with fix   new feature  closeFolder  set to false   val endpoint    imaps    host  password  password  amp username  username  amp folderName INBOX amp unseen false amp disconnect false amp mapMailMessage true amp connectionTimeout       amp closeFolder false  camelContext addRoutes  new RouteBuilder   endpoint  to  seda process   from  seda process concurrentConsumers        gt    process   ex   gt  val att   ex getIn getBody asInstanceOf MimeMultipart  getBodyPart    println  Attachment Name     att getFileName  println  Attachment Content     att getDataHandler getContent  println  Attachment Content     Source fromInputStream att getDataHandler getInputStream  mkString  Thread sleep          simulate some work being done here with the attachment  takes time           camelContext start   Thread sleep            camelContext stop        ',0
'IOConverter toInputStream opens a BufferReader which will never be closed    If called with a non null charset IOConvert toInputStream returns a InputStream which will never close the opened BufferedReader    ',0
'camel jms consumer doesn t send back a reply in all cases    In a very simple route consuming from a Camel JMS endpoint receiving InOut exchanges  i e  JMSReplyTo header present   the endpoint will not send back replies This happens because Camel JMS only returns a reply if the OUT message is set  But if the route looks like  consumer   gt  processor  and Camel doesn t find the need to  weave in  an implicit Pipeline processor  no one will implicitly take care of mapping the IN message to an OUT message  unless the user knows about these internal aspects   but we shouldn t expect them too  As a result  these routes DON T WORK    lt route gt   lt from uri  timer foo fixedRate true amp amp period          gt   lt setBody gt  lt constant gt Hello Raul lt  constant gt  lt  setBody gt   lt to uri  log SendingRequest showAll true    gt   lt inOut uri  activemq queue test  requestTimeout         gt   lt to uri  log ReceivedReply showAll true    gt  lt  route gt   lt route gt   lt from uri  activemq queue test     gt   lt to uri  log ReceivedRequest showAll true    gt  lt  route gt     but just by adding an additional log endpoint to the second route  or any other thing  for that matter   it starts to work because Camel weaves in the Pipeline processor Other workarounds that work  explicitly wrapping the log endpoint in a  lt pipeline gt  DSL  lt setBody gt  lt simple gt   in body  lt  simple gt  lt  setBody gt Or simply introducing anything that will force Camel to insert a Pipeline processor IMHO  there are two solutions to avoid this issue  Always weave in a Pipeline processor  adds overhead in simple routes and may cause regressions  Adapt EndpointMessageListener to pick the IN message when the exchange is out capable and expectation of a reply existsI m happy to work on a patch for Camel        EDIT  Just wrapping the single endpoint in  lt pipeline   gt  doesn t function as a workaround    ',0
'camel mybatis should do a proper transaction demarcation while reading writing from to database     See http   camel        n  nabble com MyBatis Component Bug consumer onConsume hits error transactions are committed instead of rollback td        htmlOther than DefaultMyBatisProcessingStrategy the same issue exists by MyBatisProducer as well Another thing which is currently missing completley is that there s no transaction demarcation by the Producer at all while reading from the database  e g  by SelectOne or SelectList statement types    ',0
'file endpoints on windows without volume name in the path url not working in some cases    I am using file endpoints on Windows without the volume name just like the normal unix based paths look That means  I have something like file    tmp file in and file    tmp file outThe funny thing that I noticed is that each endpoint itself works fine  but when a route is set up from one to the other  it fails because there seems to be an inconsistency in the way the windows path is handled in the camel core s file component As mentioned  each file endpoint itself is working fine  For example  the consumer file endpoint configured in a routefrom  file    tmp file in   to  mock test  works fine Similarly  the produce file endpoint configured in a routefrom  direct test   to  file    tmp file out  works fine But when a route is setup to connect these two file endpoints  the producer endpoint fails to create the output file Concretely  there is the following code in GenericFileEndpoint configureMessage that determines the file name  String name   file isAbsolute     file getAbsoluteFilePath     file getRelativeFilePath       skip leading endpoint configured directory String endpointPath   getConfiguration   getDirectory     getFileSeparator   In this particular case  the name variable is set to  C  tmp file in sample xml  while the endpointPath variable is set to   tmp file in  So  the subsequent code to extract the file name part  shown below  fails to match the path  if  ObjectHelper isNotEmpty endpointPath   amp  amp  name startsWith endpointPath     name   ObjectHelper after name  endpointPath    As a result  the file name is not extracted as  sample xml  but remain unchanged as  C  tmp file in sample xml  Consequently  when the file producer endpoint tries to write this file in the file system  it tries to write a file as   tmp file out C  tmp file in sample xml   resulting in an error I modified FileComponent and FileEndpoint so that the endpoint path is stored correctly in this case to make the above extraction code find the file name part correctly Attached is this proposed patch and a test case which runs on windows and on non windows but this issue can only be demonstrated under windows testRouteToFileOnly and testRouteFromFileOnly work without this patch while testRouteFileToFile fails without this patch on windows Thanks for looking into this issue Regards  Aki   ',0
'camel testng   The spring base test class should use  AfterMethod on teardown as its parent does    See nabblehttp   camel        n  nabble com Problem with testng CamelSpringTestSupport several contexts runs simultaneously tp        html   ',0
' ThreadID is already used  exception under heavy load    In situations with heavy load or under load tests we rarely got exception                           ool    thread    ERROR DefaultErrorHandler   Failed delivery for  MessageId  ID atitov pc                              on ExchangeId  ID atitov pc                                Exhausted after delivery attempt    caught  java lang IllegalArgumentException  ThreadID is already usedjava lang IllegalArgumentException  ThreadID is already used at org jivesoftware smack ChatManager createChat ChatManager java      at org apache camel component xmpp XmppPrivateChatProducer getOrCreateChat XmppPrivateChatProducer java     at org apache camel component xmpp XmppPrivateChatProducer process XmppPrivateChatProducer java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel component direct DirectProducer process DirectProducer java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProducer process UnitOfWorkProducer java     at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache   doInProducer ProducerCache java    at org apache camel impl ProducerCache doInProducer ProducerCache java      at org apache camel impl ProducerCache sendExchange ProducerCache java      at org apache camel impl ProducerCache send ProducerCache java      at org apache camel impl DefaultProducerTemplate send DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel component xmpp XmppProducerConcurrentTest   call XmppProducerConcurrentTest java     at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java                              ool    thread    ERROR DefaultErrorHandler   Failed delivery for  MessageId  ID atitov pc                              on ExchangeId  ID atitov pc                                Exhausted after delivery attempt    caught  java lang IllegalArgumentException  ThreadID is already usedjava lang IllegalArgumentException  ThreadID is already used at org jivesoftware smack ChatManager createChat ChatManager java      at org apache camel component xmpp XmppPrivateChatProducer getOrCreateChat XmppPrivateChatProducer java     at org apache camel component xmpp XmppPrivateChatProducer process XmppPrivateChatProducer java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel component direct DirectProducer process DirectProducer java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProducer process UnitOfWorkProducer java     at org apache camel impl ProducerCache   doInProducer ProducerCache java      at org apache camel impl ProducerCache   doInProducer ProducerCache java    at org apache camel impl ProducerCache doInProducer ProducerCache java      at org apache camel impl ProducerCache sendExchange ProducerCache java      at org apache camel impl ProducerCache send ProducerCache java      at org apache camel impl DefaultProducerTemplate send DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel impl DefaultProducerTemplate sendBody DefaultProducerTemplate java      at org apache camel component xmpp XmppProducerConcurrentTest   call XmppProducerConcurrentTest java     at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java      After debugging and looking at source code we figured out  that smack use some sort of map with week references for chat cache  When memory is low java GC discards chat instances  but in Process   method they instantiated over and over again without synchronization XmppPrivateChatProducer java public void process Exchange exchange                              Chat chat   chatManager getThreadChat endpoint getChatId     if  chat    null    LOG trace  Creating new chat instance with thread ID      endpoint getChatId     chat   chatManager createChat getParticipant    endpoint getChatId    new MessageListener     public void processMessage Chat chat  Message message       not here to do conversation if  LOG isDebugEnabled      LOG debug  Received and discarding message from           getParticipant    message getBody                                          But smack implementation prohibits chat instances with same chatId    ',0
'Maven archetype   Generates wrong plugin for surefire plugin    The blueprint archetype creates wrong pom xml  The groupId for the surefire plugin is wrong    ',0
'Multiple restlet routes of the same restlet URI but different VERBs does not work in Apache Camel          both routes work in Apache Camel           Multiple restlet routes of the same restlet URI but different VERBs does not work in Apache Camel          both routes work in Apache Camel        Reproduce Steps                     Add a restlet route with a from uri of restlet    nimbus hello restlet     restletMethods get lt route xmlns  http   camel apache org schema spring  trace  true   gt   lt from uri  restlet    nimbus hello restlet     restletMethods get   gt   lt transform gt   lt simple gt Hello Restlet Method    header CamelHttpMethod  ID   header id  lt  simple gt   lt  transform gt   lt  route gt    Add a restlet route with a from uri of restlet    nimbus hello restlet     restletMethods post  lt route xmlns  http   camel apache org schema spring  trace  true   gt   lt from uri  restlet    nimbus hello restlet     restletMethods post   gt   lt transform gt   lt simple gt Hello Restlet Method    header CamelHttpMethod  ID   header id  lt  simple gt   lt  transform gt   lt  route gt    route  work fine  but    results in the following exception  both route work fine in Camel       Exception                             ERROR grails app service nimbus ComputeService localhost addRoute for hello restletpost failed   Failed to start route nimbus hello restletpost     because of Multiple consumers for the same endpoint is not allowed  Endpoint      nimbus hello restlet          Caused by  org apache camel FailedToStartRouteException  Failed to start route nimbus hello restletpost     because of Multiple consumers for the same endpoint is not allowed  Endpoint      nimbus hello restlet          at org apache camel impl DefaultCamelContext doStartOrResumeRouteConsumers       I ve already posted on http   camel        n  nabble com Apache Camel        multiple restlet routes of the same restlet URI but different VERBs does not work td        html   ',0
'Possible issue in camel apns   Reported on user forum    See nabblehttp   camel        n  nabble com Issue with ApnsServiceFactory tp        html   ',0
'Mina  Consumer doesn t reliably work with SSL    I ve been trying to write a service using Camel        which uses the mina  component to expose a service  and which uses SSL  using an endpoint of mina  tcp   localhost      sync true amp filters  hl SslFilterFactory  hl CodecFilter amp allowDefaultCodec falsehowever  what I found was that the SSL handshake was failing quite often for no apparent reason  Investigating further  it appeared that messages sent during the handshake were being processed out of order   specifically  when the client  which uses a standard java SSLSocket  sent a  TLSv  Change Cipher Spec  followed by a  TLSv  Handshake   the  TLSv  Handshake  was being processed before the  TLSv  Change Cipher Spec   breaking the process This appears to have been caused because when the the Mina Consumer configures MINA for tcp  in Mina Consumer setupSocketProtocol   it is using a UnorderedThreadPoolExecutor   which allows messages to be processed in any order  Switching this to use a OrderedThreadPoolExecutor instead has fixed the issue May I request that the use of UnorderedThreadPoolExecutor vs OrderedThreadPoolExecutor be configurable via endpoint parameters   or OrderedThreadPoolExecutor is used when SSL if configured   I m assuming the reason for the use of UnorderedThreadPoolExecutor is simply for performance    ',0
'File consumer   NPE if configured to consume from root directory    See nabblehttp   camel        n  nabble com Setting root folder as endpoint Could not poll endpoint NPE tp        html   ',0
'In ScheduledRoutePolicy a suspended route cannot be started    If a route is suspended using the ScheduledRoutePolicy and its subclasses  CronScheduledRoutePolicy   it cannot be resumed or started Looking at the code in ScheduledRoutePolicy onJobExecute    on start resume actions  the route status is first checked and must be stopped or suspended before any actions is taken Suspension of a route  only suspends the consumer and not the route  and hence the start resume after a suspend does nothing One solution could be to also check the status of the consumer on start resume  This would require adding a isSuspended   to serviceHelper and should be relatively straightforward    ',0
'camel beanio using beanio     should be using the         beanio namespace    camel beanio which uses beanio     x library should use the beanio     s namepsace  http   www beanio org          and not the     namespace   http   www beanio org          in its test cases The background to this is described in this mail thread http   camel        n  nabble com issue with camel beanio s version used in trunk td        html   ',0
'camel sftp s stepwise behavior to walk up and down relatively to avoid potential traversal issues    I am having a directory traversal problem using the stepwise mode of camel sftp at the producer side  Basically  it can walk down the path from the starting directory to the walking directory  but it cannot go back correctly to the original starting directly  The server is SSH     Cleo VLProxy       SSH FTP server I saw a related JIRA issue CAMEL      that describes some issues in the stepwise traversal and some background to this related problem My question is on the part that changes the working directory back to the original starting folder  I am wondering why we are using stepwise traversal from the ancestor directory towards the starting child directory  instead of moving upwards relatively from the working directory back to the starting directory  This reverse traversal does not require accessing the ancestry path above the staring directory  hence  not affected by the accessing problem   And in fact  I think this reverse stepwise traversal seems more natural order than doing stepwise traversal each time from top down  How do you think I have made a change that implements this reverse stepwise traversal in SftpOperations and also made a few minor improvement changes This changed version passes all the existing tests and works also against the above server I am attaching a patch file for this change  I would appreciate if you can comment on it Thanks regards  aki   ',0
'Logger Level is always at default level  ERROR   when error handler is LoggingErrorHandler    when logger level is set to other level  WARN  DEBUG or INFO  except for ERROR  but actually the log is always at ERROR level  it s the default level     ',0
'camel hl  bundle should specify the mina version    As there could be different version of mina or mina  exist in the OSGi platform  we need to specify the right version rang on camel hl  which has the dependency on the mina    ',0
'JmsToJmsTransactedSecurityTest in camel jms fails every now and then    Test JmsToJmsTransactedSecurityTest fails every now and then because of JMS message redelivery  When the entire test class is executed  it sometimes happens that the message that failed at testJmsSecurityFailure test method pops up in the assertions of testJmsSecurityOK    ',0
'EventHelper notifyRouteStarted skips all remaining notifiers if one if the notifiers ignores route events    Having two or more notifiers registered at the management strategy of a camel context  where one of the notifiers  not the last one  is set up to ignore route events  results in all remaining notifiers to be skipped when notifying a RouteStartedEvent Look at http   svn apache org viewvc camel branches camel      x camel core src main java org apache camel util EventHelper java revision         amp view markup  line      There s a  return  which actually should be a  continue  Note  CamelContextStoppingEvents are also affected    ',0
'ObjectHelper resolveUriPath is broken  can not handle            correctly    In my xsl files I have imports and includes that resides in folders a few levels up Ex   lt xsl include href        common myfunctions xsl   gt When camel starts up and tries to resolve the paths it crashes because of the current implementation in ObjectHelper resolveUriPath    Made a simple testcase that demonstrates my problem public void testResolveUriPath   throws Exception   assertEquals  xslt    ObjectHelper resolveUriPath  xslt one            OK assertEquals  xslt    ObjectHelper resolveUriPath  xslt one    two            OK assertEquals  xslt    ObjectHelper resolveUriPath  xslt         OK assertEquals     ObjectHelper resolveUriPath            OK assertEquals  xslt    ObjectHelper resolveUriPath  xslt one two               Fails  gives  xslt one    assertEquals  xslt    ObjectHelper resolveUriPath  xslt one two                Fails  gives  xslt one        ',0
'Enricher with async routing not handling exceptions thrown from AggregationStrategy    The Enricher does not handle exceptions thrown from the AggregationStrategy when the async routing engine has kicked in  It leads to the following thread dump  callback thread remains blocked forever  Camel  context  thread       JmsConsumer queue   daemon prio   tid           nid  x   c      waiting on condition     c       java lang Thread State  WAITING  parking  at sun misc Unsafe park Native Method    parking to wait for  lt  fd a de  gt   a java util concurrent CountDownLatch Sync  at java util concurrent locks LockSupport park LockSupport java      at java util concurrent locks AbstractQueuedSynchronizer parkAndCheckInterrupt AbstractQueuedSynchronizer java      at java util concurrent locks AbstractQueuedSynchronizer doAcquireSharedInterruptibly AbstractQueuedSynchronizer java      at java util concurrent locks AbstractQueuedSynchronizer acquireSharedInterruptibly AbstractQueuedSynchronizer java       at java util concurrent CountDownLatch await CountDownLatch java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java      at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel component jms EndpointMessageListener onMessage EndpointMessageListener java     at org springframework jms listener AbstractMessageListenerContainer doInvokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer invokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer doExecuteListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer doReceiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer receiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker executeOngoingLoop DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'EIPs using custom aggregation strategy should fail if not possible to find in registry    Some EIPs support using a custom aggregations strategy  And if you use XML DSL to refer to a custom strategy  then you may have typo  or the strategy do not implement the interface What we should do is to ensure to fail if the custom strategy could not be looked up  Some EIPs such as the content enricher will fallback and use a default strategy  This is wrong    ',0
'Camel Endpoint ignores camelContextId property in Spring configuration    Camel Endpoint  if configured outside camelContext element in Spring configuration  ignores camelContextId property  Steps to reproduce  Configure two contexts in spring configuration  Then in the same config file configure two endpoints outside camelContext  but with camelContextId specified  Both endpoints will be created pointing to the same  first  camel context  despite being configured to different contexts  Attempting to use them by reference results in failure  as endpoint camelContext doesn t match the expected one    ',0
'Recipient list EIP   Should shutdown thread pool if parallel mode enabled    We should shutdown the thread pool for recipient list if a pool was in use  and it can be shutdown The logic in doShutdown is missing that Camel would though have a fail safe when it shutdown itself to shutdown that pool otherwise  But we should shutdown when the EIP is shutdown itself    ',0
'camel mqtt   Nullpointer Exception when disconnected from broker    Hi  from time to time  we get the following exception when producing messages via camel mqtt Caused by  java lang NullPointerException at org fusesource mqtt client CallbackConnection publish CallbackConnection java      at org fusesource mqtt client CallbackConnection publish CallbackConnection java      at org apache camel component mqtt MQTTEndpoint publish MQTTEndpoint java      at org apache camel component mqtt MQTTProducer doProcess MQTTProducer java     at org apache camel component mqtt MQTTProducer process MQTTProducer java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         From looking at the source of both camel mqtt and the fusesource mqtt client  it looks like that this is caused by the mqtt client being disconnected and trying to invoke the onFailure method on the callback CallbackConnection javapublic void publish UTF Buffer topic  Buffer payload  QoS qos  boolean retain  Callback lt Void gt  cb    queue assertExecuting    if  disconnected     cb onFailure createDisconnectedError     return    PUBLISH command   new PUBLISH   qos qos  retain retain   command topicName topic  payload payload   send command  cb    camel mqtt passes in null for the callback though  Wouldn t it be better if a more fitting exception were thrown  or if camel passed in a Callback in order to receive the onFailure event when disconnected from the broker    ',0
'Using recipient list in a doTry     doCatch situation dont work properly    See nabblehttp   camel        n  nabble com Issue with doTry doCatch not routing correctly tp        htmlThe end user would expect that doTry    doCatch will overrule  However it gets a bit further more complicated if the try block routes to other routes and using EIPs such as recipient list    ',0
'camel jms   Should also allow multiple consumers from multiple routes from the same queue    If having    routes that consumes from the same queue  then that should be allowed Its a bit unusual though for queues in Camel as you most likely want to use the same route for the same queue  But there is nothing in the JMS spec that forbids this    ',0
'NotifyBuilder should be thread safe    In high concurrent tests the NotifyBuilder may miss a counter    ',0
'Rest route returns response with http Status code     Internal Server Error when response has Last Modified or Header expires in header as string     Rest route returns Response with http Status code     Internal Server Error and expected response headers body when response has Last Modified or Header expires in header as string  I found the issue in below code it try to convert string Wed     Dec               CS to Date and it fails  Is it posible to convert String Date without knowing Date format DefaultRestletBinding                        if  header equalsIgnoreCase HeaderConstants HEADER LAST MODIFIED     if  value instanceof Calendar    message getEntity   setModificationDate   Calendar  value  getTime       else if  value instanceof Date    message getEntity   setModificationDate  Date  value     else   Date date   exchange getContext   getTypeConverter   mandatoryConvertTo Date class  value      Here it try to convert String to Date it throws No type converter available to convert from type  java lang String to the required type  java util Date with value Wed     Dec               CS message getEntity   setModificationDate date      Stack trace             Oct                   WARN org restlet Component StatusFilter   Exception or error caught in status serviceorg apache camel RuntimeCamelException  Cannot process request at org apache camel component restlet RestletConsumer   handle RestletConsumer java     at org apache camel component restlet MethodBasedRouter handle MethodBasedRouter java     at org restlet routing Filter doHandle Filter java      at org restlet routing Filter handle Filter java      at org restlet routing Router doHandle Router java      at org restlet routing Router handle Router java      at org restlet routing Filter doHandle Filter java      at org restlet routing Filter handle Filter java      at org restlet routing Router doHandle Router java      at org restlet routing Router handle Router java      at org restlet routing Filter doHandle Filter java      at org restlet engine application StatusFilter doHandle StatusFilter java      at org restlet routing Filter handle Filter java      at org restlet routing Filter doHandle Filter java      at org restlet routing Filter handle Filter java      at org restlet engine ChainHelper handle ChainHelper java      at org restlet Component handle Component java      at org restlet Server handle Server java      at org restlet engine ServerHelper handle ServerHelper java     at org restlet engine http HttpServerHelper handle HttpServerHelper java      at org restlet ext servlet ServerServlet service ServerServlet java       at org apache shiro grails SavedRequestFilter doFilter SavedRequestFilter java     at org apache shiro web servlet AbstractShiroFilter executeChain AbstractShiroFilter java      at org apache shiro web servlet AbstractShiroFilter   call AbstractShiroFilter java      at org apache shiro subject support SubjectCallable doCall SubjectCallable java     at org apache shiro subject support SubjectCallable call SubjectCallable java     at org apache shiro subject support DelegatingSubject execute DelegatingSubject java      at org apache shiro web servlet AbstractShiroFilter doFilterInternal AbstractShiroFilter java      at org apache shiro web servlet OncePerRequestFilter doFilter OncePerRequestFilter java     at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Caused by  org apache camel NoTypeConversionAvailableException  No type converter available to convert from type  java lang String to the required type  java util Date with value Wed     Dec               CST at org apache camel impl converter BaseTypeConverterRegistry mandatoryConvertTo BaseTypeConverterRegistry java        ',0
'BlueprintCamelContext should not get started in the init   method but later when the blueprint container is fully initialized    The init   method in BlueprintCamelContext should not call maybeStart    but instead should be started when the blueprint container is done doing all its dance and initialization For example Spring sends on ContextRefreshedEvent when its done We need something similar for blueprint to tell us when its done doing its initialization et all The problem is that the CamelContext should not be started until all that other stuff is initialized as well    ',0
'Classloader mixup when consumers across bundles share the same camel jetty port    Happens in an OSGi environment  but it is also applicable in modular servers that build dynamic classloaders  e g  JBoss AS  per deployed artifacts  WAR  module  EAR  etc   If bundles A and B are both creating camel jetty consumers on the same TCP port  the consumers will share the underlying Jetty connector  Moreover  the Jetty connector is indeed created by the first consumer that initialises on that TCP port Since the Camel route executes on the Jetty Connector thread  all class resolutions will happen against the classloader of the bundle that initialises first This makes class resolution absolutely undeterministic and erratic  Quite a nasty bug IMHO Perhaps this can be fixed by adding a call to Thread setContextClassLoader   passing the classloader of the JettyHttpEndpoint  as soon as a request comes in    ',0
'HTTP     Host header not set correctly with camel http     The HTTP     Host header is not set correctly when using the camel http  component as a proxy with bridgeEnpoint true The original request Host header is set in the proxied request instead of the host of the service requested by the proxy  ref  http   www w  org Protocols rfc     rfc     sec   html section        This simple route shows the problem   lt route autoStartup  true  id  TestHost  xmlns ns   http   camel apache org schema web  xmlns  http   camel apache org schema spring  gt   lt from uri  jetty http                TestHost   gt   lt to uri  https    www google com bridgeEndpoint true amp throwExceptionOnFailure false   gt   lt  route gt  This is what I get in the log INFO   jvm                             qtp               TestHost  DefaultClientConnection DEBUG Sending request  GET   HTTP    INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   GET   HTTP          r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   breadcrumbId  ID localhost                             r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   User Agent  Mozilla      Windows NT      WOW    rv       Gecko          Firefox           r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   Accept Encoding  gzip  deflate      r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   Host  localhost           r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   Accept  text html application xhtml xml application xml q       q          r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   Accept Language  en us en q          r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt   Connection  Keep Alive      r           n      INFO   jvm                             qtp               TestHost  wire DEBUG  gt  gt         r           n         ',0
'Update SqsConsumer to extend Visibility Timeout correctly    Currently SqsConsumer will scheduled a future to happen start occruing     the visibility timeout  and reoccur again at the visibility timeout period  Because of the way SQS works  when you request a ChangeMessageVisibility timeout it does not add that to the time remaining on the message visibility  Instead it will set the message visibility to the time out given  This means that what actually happens in the camel code is that  we request the ChangeMessageVisibility timeout to be set to X seconds from now after X   seconds then every X seconds after that we we request the ChangeMessageVisibility timeout to be set to X from nowThis means that our message will become visible every now and again as the ChangeMessageVisibility timeout is not updated in time as period between successive executions is the same as the timeout period we request I ve attached two patches which would fix this issue   aws sqs visibility timeout simple patch    This patch changes the way we set up the future  The delay and period are now the same so that we call ChangeMessageVisibility every X   after the message has been pulled   aws sqs visibility timeout phased timeout patch    This one keeps the delay to     the period and requests ChangeMessageVisibility every period  This time though it requests the visibility to be       the period  This means that it behaves as originally planned  as if it was adding duration to the visibility duration left  This means we call Amazon less times and still keep the message hidden as expected This was looked at with Alex Hutter  both working on same project     ',0
'Configuring jetty component with a different name dont work with jetty consumer    For example if you do  lt route gt   lt from uri  jetty  http   localhost      myapp   gt   lt transform gt   lt simple gt Hello   body  lt  simple gt   lt  transform gt   lt  route gt Then it fails withjava net SocketException  Unresolved address at sun nio ch Net translateToSocketException Net java     at sun nio ch Net translateException Net java     at sun nio ch Net translateException Net java     at sun nio ch ServerSocketAdaptor bind ServerSocketAdaptor java     at org eclipse jetty server nio SelectChannelConnector open SelectChannelConnector java      at org eclipse jetty server AbstractConnector doStart AbstractConnector java      at org eclipse jetty server nio SelectChannelConnector doStart SelectChannelConnector java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server Server doStart Server java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org apache camel component jetty JettyHttpComponent connect JettyHttpComponent java      at org apache camel component http HttpEndpoint connect HttpEndpoint java      at org apache camel component http HttpConsumer doStart HttpConsumer java     at org apache camel support ServiceSupport start ServiceSupport java          ',0
'Camel JMS producer can block a thread under specific circumstances    This is an edge case  but when the following circumstances concur  the asynchronous routing engine in Camel become blocked  Sending an InOut exchange over JMS  request reply   where  Persistent messages are enabled  deliveryPersistent true  useMessageIDasCorrelationID is enabled replyToType is Temporary queues  default   using TemporaryQueueReplyManager  a timeout is setYou have to be really unlucky  but if the following condition is satisfied  a thread will become blocked time the broker takes to ACK the produced message  gt  message timeoutHence  if we have a timeout of     ms  and the broker takes     ms to ACK the message  e g  slow Disk I O while the journal is rotating   it happened to us   at some point we ll see this                           WARN   CorrelationMap        org apache camel camel core         fuse         Exception occurred during purge task  This exception will be ignored java lang NullPointerExceptionThe CorrelationMap is rendered useless  so if subsequent exchanges time out  the ReplyHandler may never get an onTimeout callback  thus leading to the waiting thread getting blocked forever if the async routing engine was in place    ',0
'ActiveMQ target endpoint with transferExchange true does not work together with source File endpoint with preMove option set    Got failure on a simple route reading from file and sending to ActiveMQ queue On source File endpoint set preMove option to some folder  and on target activemq endpoint set transferExchange true It fails with FileNotFound exception  trying to read file from original location  not from temporary preMoved one Without preMove all works perfect Simplified Spring application context with Camel routes looks like this  lt  xml version       encoding  UTF     gt  lt beans xmlns  http   www springframework org schema beans  xmlns xsi  http   www w  org      XMLSchema instance  xsi schemaLocation   http   www springframework org schema beans http   www springframework org schema beans spring beans     xsd http   camel apache org schema spring http   camel apache org schema spring camel spring xsd  gt   lt bean id  brokerService  class  org apache activemq broker BrokerService  init method  start  destroy method  stop  gt   lt property name  brokerName  value  localhost    gt   lt property name  useJmx  value  false    gt   lt property name  transportConnectorURIs  gt   lt list gt   lt value gt vm   localhost lt  value gt   lt  list gt   lt  property gt   lt  bean gt   lt bean id  jmsConnectionFactory  class  org apache activemq ActiveMQConnectionFactory  depends on  brokerService  gt   lt property name  brokerURL  value  vm   localhost   gt   lt property name  redeliveryPolicy  ref  redeliveryPolicyConfigActiveMQ   gt   lt  bean gt   lt bean id  pooledConnectionFactory  class  org apache activemq pool PooledConnectionFactory  init method  start  destroy method  stop  gt   lt property name  maxConnections  value       gt   lt property name  maximumActive  value         gt   lt property name  connectionFactory  ref  jmsConnectionFactory    gt   lt  bean gt   lt bean id  redeliveryPolicyConfigActiveMQ  class  org apache activemq RedeliveryPolicy  gt   lt property name  maximumRedeliveries  value      gt   lt property name  redeliveryDelay  value         gt   lt  bean gt   lt camelContext id  testCustomer  xmlns  http   camel apache org schema spring  gt   lt endpoint id  sourceEndpoint  uri  file e  work ids testCustomer input  preMove  tmp amp delay      amp readLock rename amp copyAndDeleteOnRenameFail false amp move  archive amp moveFailed  failed    gt   lt endpoint id  destJms  uri  activemq queue source transferExchange true amp connectionFactory  pooledConnectionFactory    gt   lt route id  testRoute  gt   lt from ref  sourceEndpoint    gt   lt to ref  destJms    gt   lt  route gt   lt  camelContext gt  lt  beans gt Exception trace org apache camel TypeConversionException  Error during type conversion from type  java io File to the required type  byte   with value e  work ids testCustomer input payment xml due java io FileNotFoundException  e  work ids testCustomer input payment xml  The system cannot find the file specified  at com it ids exceptions HandleException process HandleException java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor FatalFallbackErrorHandler processNext FatalFallbackErrorHandler java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler deliverToFailureProcessor RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel component file GenericFileConsumer processExchange GenericFileConsumer java      at org apache camel component file GenericFileConsumer processBatch GenericFileConsumer java      at org apache camel component file GenericFileConsumer poll GenericFileConsumer java      at org apache camel impl ScheduledPollConsumer doRun ScheduledPollConsumer java      at org apache camel impl ScheduledPollConsumer run ScheduledPollConsumer java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRunAndReset FutureTask java      at java util concurrent FutureTask runAndReset FutureTask java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java     at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask runPeriodic ScheduledThreadPoolExecutor java      at java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Caused by  org apache camel RuntimeCamelException  java io FileNotFoundException  e  work ids testCustomer input payment xml  The system cannot find the file specified  at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel util ObjectHelper invokeMethod ObjectHelper java      at org apache camel impl converter StaticMethodTypeConverter convertTo StaticMethodTypeConverter java     at org apache camel impl converter BaseTypeConverterRegistry doConvertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry mandatoryConvertTo BaseTypeConverterRegistry java      at org apache camel component file FileBinding loadContent FileBinding java     at org apache camel component file GenericFileConverter genericFileToInputStream GenericFileConverter java      at org apache camel component file GenericFileConverter genericFileToSerializable GenericFileConverter java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache camel util ObjectHelper invokeMethod ObjectHelper java      at org apache camel impl converter StaticMethodTypeConverter convertTo StaticMethodTypeConverter java     at org apache camel impl converter BaseTypeConverterRegistry doConvertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java      at org apache camel impl DefaultExchangeHolder checkMapSerializableObjects DefaultExchangeHolder java      at org apache camel impl DefaultExchangeHolder safeSetProperties DefaultExchangeHolder java      at org apache camel impl DefaultExchangeHolder marshal DefaultExchangeHolder java     at org apache camel impl DefaultExchangeHolder marshal DefaultExchangeHolder java     at org apache camel component jms JmsBinding createJmsMessage JmsBinding java      at org apache camel component jms JmsBinding makeJmsMessage JmsBinding java      at org apache camel component jms JmsProducer   createMessage JmsProducer java      at org apache camel component jms JmsConfiguration CamelJmsTemplate doSendToDestination JmsConfiguration java      at org apache camel component jms JmsConfiguration CamelJmsTemplate access     JmsConfiguration java      at org apache camel component jms JmsConfiguration CamelJmsTemplate   doInJms JmsConfiguration java      at org springframework jms core JmsTemplate execute JmsTemplate java      at org apache camel component jms JmsConfiguration CamelJmsTemplate send JmsConfiguration java      at org apache camel component jms JmsProducer doSend JmsProducer java      at org apache camel component jms JmsProducer processInOnly JmsProducer java      at org apache camel component jms JmsProducer process JmsProducer java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java             moreCaused by  java io FileNotFoundException  e  work ids testCustomer input payment xml  The system cannot find the file specified  at java io FileInputStream open Native Method  at java io FileInputStream  lt init gt  FileInputStream java      at org apache camel converter IOConverter toInputStream IOConverter java     at org apache camel converter IOConverter toByteArray IOConverter java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache camel util ObjectHelper invokeMethod ObjectHelper java             more   ',0
'regression   invalid SetQueueAttributesRequest created  works on           In org apache camel component aws sqs SqsEndpoint updateQueueAttributes if I don t have any configuration  the created SetQueueAttributesRequest contains a null atttribute collection and AWS emit an error In         no problem Workaround in          force the create SetQueueAttributesRequest to contain a valid attribute collection by defining a configuration in camel  For exemple  from  aws sqs    queue  amazonSQSClient  amazonSQSClient amp delay  pollCycle getMillis    amp maxMessagesPerPoll    amp deleteAfterRead false      gt  works on         fail on       if I add an argument to my URI  amp defaultVisibilityTimeout        gt  works on         works on       Exception     Caused by  org apache camel FailedToCreateRouteException  Failed to create route SQS to MongoDB EVENTS  Route  From aws sqs   EVENTS amazonSQSClient  amazonSQSClien    because of Failed to resolve endpoint  aws sqs   EVENTS amazonSQSClient    amazonSQSClient amp delay       amp deleteAfterRead false amp maxMessagesPerPoll    due to  The request must contain the parameter Attribute Name  at org apache camel model RouteDefinition addRoutes RouteDefinition java            camel core        jar             at org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java            camel core        jar             at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java             camel core        jar             at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java             camel core        jar             at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java             camel core        jar             at org apache camel support ServiceSupport start ServiceSupport java           camel core        jar             at org apache camel impl DefaultCamelContext start DefaultCamelContext java             camel core        jar             at com netceler iv measure contract impl sqs CamelRoutesLauncher start CamelRoutesLauncher java           webapp       SNAPSHOT jar       SNAPSHOT      at com netceler iv measure contract impl config ConfiguredStreamInitializer startStreams ConfiguredStreamInitializer java           webapp       SNAPSHOT jar       SNAPSHOT             common frames omittedCaused by  org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  aws sqs   EVENTS amazonSQSClient    amazonSQSClient amp delay       amp deleteAfterRead false amp maxMessagesPerPoll    due to  The request must contain the parameter Attribute Name  at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java            camel core        jar             at org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java           camel core        jar             at org apache camel model RouteDefinition resolveEndpoint RouteDefinition java            camel core        jar             at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java            camel core        jar             at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java            camel core        jar             at org apache camel model FromDefinition resolveEndpoint FromDefinition java           camel core        jar             at org apache camel impl DefaultRouteContext getEndpoint DefaultRouteContext java           camel core        jar             at org apache camel model RouteDefinition addRoutes RouteDefinition java            camel core        jar             at org apache camel model RouteDefinition addRoutes RouteDefinition java            camel core        jar                    common frames omittedCaused by  com amazonaws AmazonServiceException  The request must contain the parameter Attribute Name  at com amazonaws http AmazonHttpClient handleErrorResponse AmazonHttpClient java            aws java sdk        jar na      at com amazonaws http AmazonHttpClient executeHelper AmazonHttpClient java            aws java sdk        jar na      at com amazonaws http AmazonHttpClient execute AmazonHttpClient java            aws java sdk        jar na      at com amazonaws services sqs AmazonSQSClient invoke AmazonSQSClient java            aws java sdk        jar na      at com amazonaws services sqs AmazonSQSClient setQueueAttributes AmazonSQSClient java            aws java sdk        jar na      at com netceler infra aws sqs JMXSQS setQueueAttributes JMXSQS java            infra sqs       SNAPSHOT jar       SNAPSHOT      at com netceler infra aws sqs AmazonSQSClientProxy setQueueAttributes AmazonSQSClientProxy java           infra sqs       SNAPSHOT jar       SNAPSHOT      at org apache camel component aws sqs SqsEndpoint updateQueueAttributes SqsEndpoint java            camel aws        jar             at org apache camel component aws sqs SqsEndpoint doStart SqsEndpoint java           camel aws        jar             at org apache camel support ServiceSupport start ServiceSupport java           camel core        jar             at org apache camel impl DefaultCamelContext startService DefaultCamelContext java             camel core        jar             at org apache camel impl DefaultCamelContext doAddService DefaultCamelContext java            camel core        jar             at org apache camel impl DefaultCamelContext addService DefaultCamelContext java            camel core        jar             at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java            camel core        jar                    common frames omitted     ',0
'Regression in validator component in           I get CaughtExceptionType java lang NullPointerException  CaughtExceptionMessage null  StackTrace java lang NullPointerException at org apache camel converter jaxp XmlConverter toStreamSource XmlConverter java      at org apache camel converter jaxp XmlConverter toSAXSource XmlConverter java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache camel util ObjectHelper invokeMethod ObjectHelper java      at org apache camel impl converter InstanceMethodTypeConverter convertTo InstanceMethodTypeConverter java     at org apache camel support TypeConverterSupport convertTo TypeConverterSupport java     at org apache camel processor validation ValidatingProcessor getSource ValidatingProcessor java      at org apache camel processor validation ValidatingProcessor process ValidatingProcessor java      at org apache camel impl ProcessorEndpoint onExchange ProcessorEndpoint java      at org apache camel impl ProcessorEndpoint   process ProcessorEndpoint java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     atorg apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java      when I upgrade camel to        and use the validator component  lt camel to uri  validator META INF xsd transactiongatetransfertransaction xsd    gt this did not happen in        or versions before that    ',0
'Pre XSLT and Validator Type Conversions from byte   may easily fail    XsltBuilder getSource Exchange e  Object o  tries to convert the payload to a Source  If you have a byte   payload  then the following type converter will likely be picked InstanceMethodTypeConverter  public javax xml transform sax SAXSource org apache camel converter jaxp XmlConverter toSAXSource byte   org apache camel Exchange  throws java io IOException org xml sax SAXException javax xml transform TransformerExceptionThis type converter requires the Exchange  InstanceMethodTypeConverter useExchange    true   but line     of XsltBuilder doesn t pass it on Therefore  a NullPointerException happens because the conversion method tries to access the Exchange    ',0
'camel quickfix  QuickfixjEndpoint should adhere the InOut exchange pattern if you would ask for this MEP    See http   camel        n  nabble com camel quickfix RequestReplyExample java io IOException td        html   ',0
'File consumer   When using done file name then delete the file when batch is complete    When using doneFileName then the file is deleted on each completion of files in the batch  And you get WARN logs about the done file cannot be deleted  because the  st already deleted the file We should defer and only delete the done file on the last in the batch    ',0
'When call removeRouteDefinition the route doesn t removed from collection of route Definitions     When I call removeRouteDefinition for DefaultCamelContext  the route doesn t removed from collection of routes  public synchronized void removeRouteDefinition RouteDefinition routeDefinition  throws Exception   String id   routeDefinition idOrCreate nodeIdFactory   stopRoute id   removeRoute id    it is just remove it from running route service if context is running When we do restart context this route started again  Workaround for this issue is call removeRouteDefinitions and wrap single route into collection But when I call removeRouteDefinitions   it is process correctly  remove from collections of definitions and after removed from running route services  public synchronized void removeRouteDefinitions Collection lt RouteDefinition gt  routeDefinitions  throws Exception   this routeDefinitions removeAll routeDefinitions   for  RouteDefinition routeDefinition   routeDefinitions    removeRouteDefinition routeDefinition         ',0
'NPE when jaxb fallback converter is used with RequestEntityConverter    As the RequestEntityConverter toRequestEntity String str  Exchange exchange  doesn t has check if the exchange is null  it caused the NPE as the user complain in camel user mailing list                      http   camel        n  nabble com Content Enrich Error when upgrading Apache Camel from       to any higher version td        htmlHere is the stack trace CaughtExceptionType org apache camel TypeConversionException  CaughtExceptionMessage Error during type conversion from type  com ecc DamBean to the required type  org apache commons httpclient methods RequestEntity with value com ecc DamBean     a   due Error during type conversion from type  java lang String to the required type  org apache commons httpclient methods RequestEntity with value     The complete Stack Trace   Exchange ExchangePattern InOnly  BodyType String  Body   CaughtExceptionType org apache camel TypeConversionException  CaughtExceptionMessage Error during type conversion from type  com ecc DamBean to the required type  org apache commons httpclient methods RequestEntity with value com ecc DamBean     a   due Error during type conversion from type  java lang String to the required type  org apache commons httpclient methods RequestEntity with value due java lang NullPointerException  StackTrace org apache camel TypeConversionException  Error during type conversion from type  com ecc DamBean to the required type  org apache commons httpclient methods RequestEntity with value com ecc DamBean     a   due Error during type conversion from type  java lang String to the required type  org apache commons httpclient methods RequestEntity with value due java lang NullPointerException at org apache camel converter jaxb FallbackTypeConverter convertTo FallbackTypeConverter java     at org apache camel impl converter BaseTypeConverterRegistry doConvertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java      at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel component http HttpProducer createRequestEntity HttpProducer java      at org apache camel component http HttpProducer createMethod HttpProducer java      at org apache camel component http HttpProducer process HttpProducer java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Enricher process Enricher java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel component seda SedaConsumer sendToConsumers SedaConsumer java      at org apache camel component seda SedaConsumer doRun SedaConsumer java      at org apache camel component seda SedaConsumer run SedaConsumer java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java     Caused by  org apache camel TypeConversionException  Error during type conversion from type  java lang String to the required type  org apache commons httpclient methods RequestEntity with value due java lang NullPointerException at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java     at org apache camel converter jaxb FallbackTypeConverter marshall FallbackTypeConverter java      at org apache camel converter jaxb FallbackTypeConverter convertTo FallbackTypeConverter java            moreCaused by  org apache camel RuntimeCamelException  java lang NullPointerException at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel util ObjectHelper invokeMethod ObjectHelper java      at org apache camel impl converter StaticMethodTypeConverter convertTo StaticMethodTypeConverter java     at org apache camel impl converter BaseTypeConverterRegistry doConvertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java     at org apache camel converter jaxb FallbackTypeConverter marshall FallbackTypeConverter java      at org apache camel converter jaxb FallbackTypeConverter convertTo FallbackTypeConverter java     at org apache camel impl converter BaseTypeConverterRegistry doConvertTo BaseTypeConverterRegistry java      at org apache camel impl converter BaseTypeConverterRegistry convertTo BaseTypeConverterRegistry java      at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel component http HttpProducer createRequestEntity HttpProducer java      at org apache camel component http HttpProducer createMethod HttpProducer java      at org apache camel component http HttpProducer process HttpProducer java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Enricher process Enricher java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel component seda SedaConsumer sendToConsumers SedaConsumer java      at org apache camel component seda SedaConsumer doRun SedaConsumer java      at org apache camel component seda SedaConsumer run SedaConsumer java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java            moreCaused by  java lang NullPointerException at org apache camel component http RequestEntityConverter toRequestEntity RequestEntityConverter java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache camel util ObjectHelper invokeMethod ObjectHelper java             more    ',0
'camel netty   Producer should avoid blocking while waiting for connection    We should at most wait for the connection timeout to trigger    ',0
'camel jms   JmsPollingConsumer use the constant fields from JmsTemplate for receiveNoWait etc    See nabblehttp   camel        n  nabble com JmsPollingConsumer and method receiveNoWait has incorrect timeout value tp        html   ',0
'SJMS component s pom xml missing taskmanager package in camel osgi private pkg    Hi I know it s not out in the wild yet but with this tiny patch SJMS is usable in my spike project Sadly doesn t affect the number of passing failing tests The pom s  lt camel osgi private pkg gt  section is missing an entry for the org apache camel component sjms taskmanager package thanks Caspar   ',0
'Cache producer is not thread safe    from  direct causeFailure    split   body   parallelProcessing    setHeader CacheConstants CACHE OPERATION  constant CacheConstants CACHE OPERATION DELETEALL    to  cache   MyTestCache     String   body   new String      a    b     template sendBody body   net sf ehcache ObjectExistsException  Cache MyTestCache already exists at net sf ehcache CacheManager addCacheNoCheck CacheManager java       at net sf ehcache CacheManager addCache CacheManager java       at org apache camel component cache CacheEndpoint initializeCache CacheEndpoint java      at org apache camel component cache CacheProducer process CacheProducer java     at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor MulticastProcessor doProcessParallel MulticastProcessor java      at org apache camel processor MulticastProcessor access     MulticastProcessor java     at org apache camel processor MulticastProcessor   call MulticastProcessor java      at org apache camel processor MulticastProcessor   call MulticastProcessor java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at java util concurrent ThreadPoolExecutor runWorker ThreadPoolExecutor java       at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'ClassNotFoundException  weblogic jndi WLInitialContextFactory when starting the route via Karaf start route camel route start  command     We have a simple camel route definied in Java DSL from  wmq queue ESB TEST IN   routeId  IN   autoStartup true  log    body    This route receives JMS messages from a WebLogicJMS queue with name ESB TEST IN and logs the body to the log file The route works fine when autoStartup is set to true  But when autoStartup is set to false then the creation of the WebLogic InitialContext failed because of an ClassNotFoundException regarding weblogic jndi WLInitialContextFactory and the following message is written to the karaf log file                         WARN   DefaultJmsMessageListenerContainer   Setup of JMS message listener invoker failed for destination  ESB TEST IN    trying to recover  Cause  Destination      ESB TEST IN      not found in JNDI  nested exception is javax naming NoInitialContextException  Cannot instantiate class  weblogic jndi WLInitialContextFactory      Root exception is java lang ClassNotFoundException  weblogic jndi WLInitialContextFactory       org springframework jms listener DefaultMessageListenerContainer   mer     ESB TEST IN        org springframework jms       RELEASE id      This issue s related to https   jira talendforge org browse TESB        ',0
'Using annotations DSL in beans may cause async callback to be called twice    The bean processor and bean invocation logic may in cases when the EIP annotations is used on beans  cause the callback to be called twice Noticed this problem during investigation of See CAMEL        ',0
'CamelJob implementation rely on some inconsistent endpoints LRU cache   Camel endpoints may not be called on quartz fire after some days of uptime    CamelJobs rely on some endpoints LRU cache from camel context  If i m not wrong  since LRU Cache relies on SoftReferences  Garbage Collector can decide to evict some entries and especially QuartzEndpoints It happens that sometimes endpoints evicted from LRU Caches are QuartzEndpoints  Since QuartzEnpoints are searched from CamelJob in LRU cache  they are not reachable anymore The side effect  is that CamelJob isntance initializes a new QuartzEndpoint  but loadbalancer is not initialized since it is initialized from QuartzConsumer The result is that quartz triggers jobs that instanciate Quartz endpoints with unintialized load balancers which are unable to call processor from the routes associated I have joined a fix that rely on the search of QuartzEndpoints from initalized routes of Camel context Fundamentally  the search of endpoints should not rely on endpoints LRU cache  It is a broken design Hope it helps By the way  there are other issues related to QuartzEndpoint load balancer initalization  If quartz starts before startup of Camel routes you will have the same issue  Correctly initialized QuartzEndpoints are not in LRU cache since Camel has not started routes  and so endpoints and consumers   Quartz will trigger job  and camel job will search for QuartzEndpoint and put it in LRUCache with uninitialized load balancer    ',0
'RestletComponent component is not removing added route from routers list although route is removed from Context     In RestletComponent class add entry to instance variable  private final Map lt String  MethodBasedRouter gt  routers   new HashMap lt String  MethodBasedRouter gt     map while invoking getMethodRouter method  but it never remove in disconnect method  also disconnect method has local variable with same name as instance variable  routes  Camel Development Forums                         http   camel        n  nabble com Camel Restlet        RestletComponent component does not remove added route form routers although ro td        html   ',0
'NoRedeliveryOnShutdown doesn t work for DeadLetterChannel    See http   camel        n  nabble com Wrong test for allowRedeliveryWhileStopping possible bug td        html for details The assumption is if we use  allowRedeliveryWhileStopping false   in an error handler definition which use a dead letter channel  the message should be send to the configured dead letter channel if we are in a delivery by stopping Camel  instead of dropping the message     ',0
'Camel Email Component Missing Attachments    see http   camel        n  nabble com Camel Email Component Missing Attachments td        html a       The disposition field is optional see RFC        so it is possible that camel misses attachments  if  disposition    null  amp  amp   disposition equalsIgnoreCase Part ATTACHMENT     disposition equalsIgnoreCase Part INLINE         only add named attachments String fileName   part getFileName    if  fileName    null    LOG debug  Mail contains file attachment      fileName      Parts marked with a disposition of Part ATTACHMENT are clearly attachments CollectionHelper appendValue map  fileName  part getDataHandler        Adding the fileName check to the if should resolve the issue    ',0
'camel rss and camel atom   Not installable in Karaf    karaf root gt  features install camel rssError executing command  Manifest not present in the first entry of the zip mvn org apache ws commons axiom axiom impl       I think we got a JAR that is flawed          ',0
'CamelBlueprintContext may be wrongly started and this may lead to a deadlock    We observed a deadlock situation that seems to be caused by the change that came in with CAMEL       which changed the way how CamelBlueprintContext is started to solve another issue The current code listens to the service registered event for org osgi    BlueprintContainer  supposedly for its associated BP container  and decides to start itself if not started  From the description of the ticket  this change was intended to make sure the starting of the context occurs after its BP container is registered  In that case  should it be checking whether the received event belongs to the same bundle  This checking is missing in the current code and consequently  it may wrongly react to the event from another bundle s container registration event  When this happens under some specific timing situation  it may also lead to a deadlock So  should we be checking the event source in CamelBlueprintContext s serviceChanged method Regards  akiStack trace from                                                                               Name  Blueprint Extender   State  BLOCKED on java lang Object     b   owned by  Blueprint Extender   Total blocked     Total waited    Stack trace  org apache aries blueprint container BlueprintRepository createInstances BlueprintRepository java     org apache aries blueprint container BlueprintRepository createInstance BlueprintRepository java     org apache aries blueprint container BlueprintRepository create BlueprintRepository java     org apache aries blueprint container BlueprintContainerImpl getComponentInstance BlueprintContainerImpl java     org apache camel blueprint BlueprintContainerRegistry lookup BlueprintContainerRegistry java    org apache camel impl CompositeRegistry lookup CompositeRegistry java    org apache camel impl PropertyPlaceholderDelegateRegistry lookup PropertyPlaceholderDelegateRegistry java    org apache camel blueprint BlueprintComponentResolver resolveComponent BlueprintComponentResolver java    org apache camel impl DefaultCamelContext getComponent DefaultCamelContext java      locked java util HashMap     de  org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java     org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java    org apache camel model RouteDefinition resolveEndpoint RouteDefinition java     org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java     org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java     org apache camel model FromDefinition resolveEndpoint FromDefinition java    org apache camel impl DefaultRouteContext getEndpoint DefaultRouteContext java    org apache camel model RouteDefinition addRoutes RouteDefinition java     org apache camel model RouteDefinition addRoutes RouteDefinition java     org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java     org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java      org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java      org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       locked org apache camel blueprint BlueprintCamelContext     bafaorg apache camel support ServiceSupport start ServiceSupport java    org apache camel impl DefaultCamelContext start DefaultCamelContext java      org apache camel blueprint BlueprintCamelContext maybeStart BlueprintCamelContext java     org apache camel blueprint BlueprintCamelContext serviceChanged BlueprintCamelContext java    org eclipse osgi internal serviceregistry FilteredServiceListener serviceChanged FilteredServiceListener java     org eclipse osgi framework internal core BundleContextImpl dispatchEvent BundleContextImpl java     org eclipse osgi framework eventmgr EventManager dispatchEvent EventManager java     org eclipse osgi framework eventmgr ListenerQueue dispatchEventSynchronous ListenerQueue java     org eclipse osgi internal serviceregistry ServiceRegistry publishServiceEventPrivileged ServiceRegistry java     org eclipse osgi internal serviceregistry ServiceRegistry publishServiceEvent ServiceRegistry java     org eclipse osgi internal serviceregistry ServiceRegistrationImpl register ServiceRegistrationImpl java     org eclipse osgi internal serviceregistry ServiceRegistry registerService ServiceRegistry java     org eclipse osgi framework internal core BundleContextImpl registerService BundleContextImpl java     org apache aries blueprint container BlueprintContainerImpl registerService BlueprintContainerImpl java     org apache aries blueprint container BlueprintContainerImpl doRun BlueprintContainerImpl java     org apache aries blueprint container BlueprintContainerImpl run BlueprintContainerImpl java      locked java util concurrent atomic AtomicBoolean  cb ada locked java util concurrent atomic AtomicBoolean   b d   java util concurrent Executors RunnableAdapter call Executors java     java util concurrent FutureTask Sync innerRun FutureTask java     java util concurrent FutureTask run FutureTask java     java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java    java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java     java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java     java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java     java lang Thread run Thread java                                                                             Name  Blueprint Extender   State  BLOCKED onorg apache camel blueprint BlueprintCamelContext     bafa owned by  Blueprint Extender   Total blocked     Total waited    Stack trace  org apache camel impl DefaultCamelContext getTypeConverter DefaultCamelContext java      org apache camel util EndpointHelper setProperties EndpointHelper java     org apache camel impl DefaultComponent setProperties DefaultComponent java     org apache camel component file GenericFileComponent createEndpoint GenericFileComponent java    org apache camel component file GenericFileComponent createEndpoint GenericFileComponent java    org apache camel impl DefaultComponent createEndpoint DefaultComponent java    org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java     org apache camel core xml AbstractCamelEndpointFactoryBean getObject AbstractCamelEndpointFactoryBean java    sun reflect NativeMethodAccessorImpl invoke  Native Method sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java    sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java    java lang reflect Method invoke Method java     org apache aries blueprint utils ReflectionUtils invoke ReflectionUtils java     org apache aries blueprint container BeanRecipe invoke BeanRecipe java     org apache aries blueprint container BeanRecipe getInstance BeanRecipe java     org apache aries blueprint container BeanRecipe internalCreate BeanRecipe java     org apache aries blueprint di AbstractRecipe create AbstractRecipe java     locked java lang Object     b  org apache aries blueprint container BlueprintRepository createInstances BlueprintRepository java      locked java lang Object     b  org apache aries blueprint container BlueprintRepository createAll BlueprintRepository java     org apache aries blueprint container BlueprintContainerImpl instantiateEagerComponents BlueprintContainerImpl java     org apache aries blueprint container BlueprintContainerImpl doRun BlueprintContainerImpl java     org apache aries blueprint container BlueprintContainerImpl run BlueprintContainerImpl java      locked java util concurrent atomic AtomicBoolean   b      locked java util concurrent atomic AtomicBoolean     a   java util concurrent Executors RunnableAdapter call Executors java     java util concurrent FutureTask Sync innerRun FutureTask java     java util concurrent FutureTask run FutureTask java     java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask access     ScheduledThreadPoolExecutor java    java util concurrent ScheduledThreadPoolExecutor ScheduledFutureTask run ScheduledThreadPoolExecutor java     java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java     java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java     java lang Thread run Thread java        ',0
'SOAP over JMS does not work with camel cxf endpoint    If we would like to use SOAP over JMS using CXF  amp  Camel        that fails The CXF endpoint receives well the incoming request from the JMS queue aultMessageListenerContainer    HelloWorldServicePortType INFO Inbound Message                            ID   Content Type  text xmlHeaders   JMSMessageType  text  Payload   lt soapenv Envelope xmlns soapenv  http   schemas xmlsoap org soap envelope   xmlns hel  http   helloworld mycompany redhat com  gt   lt soapenv Header  gt   lt soapenv Body gt   lt hel sayHello gt   lt hel name gt fred lt  hel name gt   lt  hel sayHello gt   lt  soapenv Body gt  lt  soapenv Envelope gt                                        aultMessageListenerContainer    route  INFO SOAP Request received message aultMessageListenerContainer    route  INFO Mock service repliedbut the response is not returned by CXF neither published in a  reply  queue Here is the Camel Route  Override public void configure   throws Exception  from  cxf bean endpoint service worklist dataFormat MESSAGE    convertBodyTo String class   log  SOAP Request received message   setHeader  JMSReplyTo   constant  supervisorworklist response    transform   constant response     RESPONSE   SOAP MESSAGE  log  Mock service replied      amp  Config lt  xml version       encoding  UTF     gt  lt beans xmlns  http   www springframework org schema beans  xmlns xsi  http   www w  org      XMLSchema instance  xmlns camel  http   camel apache org schema spring  xmlns osgi  http   www springframework org schema osgi  xmlns cxf  http   camel apache org schema cxf  xmlns jms  http   cxf apache org transports jms  xsi schemaLocation   http   www springframework org schema beans http   www springframework org schema beans spring beans xsd http   www springframework org schema osgi http   www springframework org schema osgi spring osgi xsd http   camel apache org schema spring http   camel apache org schema spring camel spring xsd http   camel apache org schema cxf http   camel apache org schema cxf camel cxf        spring xsd http   cxf apache org transports jms http   cxf apache org schemas configuration jms xsd  gt   lt bean id  jms connectionFactory  class  org apache activemq ActiveMQConnectionFactory  gt   lt      lt property name  brokerURL  value  vm   myEmbeddedBroker broker persistent false    gt    gt   lt property name  brokerURL  value  tcp   localhost         gt   lt  bean gt   lt bean id  jms config service  class  org apache cxf transport jms JMSConfiguration  gt   lt property name  connectionFactory  ref  jms connectionFactory    gt   lt property name  targetDestination  value  supervisorworklist    gt   lt property name  replyDestination  value  supervisorworklist response   gt   lt  bean gt   lt bean id  logginOutInterceptor  class  org apache cxf interceptor LoggingOutInterceptor   gt   lt bean id  logginInInterceptor  class  org apache cxf interceptor LoggingInInterceptor   gt   lt     Producer Endpoint    gt   lt cxf cxfEndpoint id  endpoint service worklist  address  jms    serviceClass  com redhat mycompany helloworld HelloWorldService  serviceName  s HelloWorldService  endpointName  s HelloWorldOverJms  xmlns s  http   helloworld atos redhat com  gt   lt cxf features gt   lt bean xmlns  http   www springframework org schema beans class  org apache cxf transport jms JMSConfigFeature  gt   lt property name  jmsConfig  ref  jms config service    gt   lt  bean gt   lt  cxf features gt   lt cxf inInterceptors gt   lt ref bean  logginInInterceptor   gt   lt  cxf inInterceptors gt   lt cxf outInterceptors gt   lt ref bean  logginOutInterceptor   gt   lt  cxf outInterceptors gt   lt  cxf cxfEndpoint gt   lt camelContext xmlns  http   camel apache org schema spring  gt   lt package gt com redhat mycompany cxf lt  package gt   lt  camelContext gt  lt  beans gt    ',0
'CXFEndpoint blueprint config having binding element may lead to NPE    There seems to be an error in the EndpointpointDefinitionParser in parsing the binding element  Concretely speaking  that element is not parsed from the right element but wrongly from its parent element So  when you have something like  lt camel cxf cxfEndpoint id  routerEndpoint      gt       lt camel cxf binding gt   lt soap soapBinding mtomEnabled  true  version        gt   lt  camel cxf binding gt   lt  camel cxf cxfEndpoint gt you may get an NPE  as shown in java lang NullPointerException  null at org apache aries blueprint container RecipeBuilder getValue RecipeBuilder java            na na      at org apache aries blueprint container RecipeBuilder createBeanRecipe RecipeBuilder java            na na      at org apache aries blueprint container RecipeBuilder createRecipe RecipeBuilder java            na na      at org apache aries blueprint container RecipeBuilder createRepository RecipeBuilder java           na na      at org apache aries blueprint container BlueprintContainerImpl getRepository BlueprintContainerImpl java            na na      at org apache aries blueprint container BlueprintContainerImpl doRun BlueprintContainerImpl java            na na      at org apache aries blueprint container BlueprintContainerImpl run BlueprintContainerImpl java        na naFixing this line in EndpointDefinitionParser will fix this issue    ',0
'Race condition in AggregatorProcessor recovery sometimes causes duplicates    There seems to be a race condition in org apache camel processor aggregate AggregateProcessor s RecoverTask  That task calls recoverable scan   to find Exchanges that may need to be recovered  Since scan   might return Exchanges that are actually just in progress  the RecoverTask then checks to see if the Exchange really is in progress  It does this by calling inProgressCompleteExchanges contains exchangeId   However  that collection may have been modified during the time between when scan   returned and when contains   is called  This would happen if the in progress Exchange completes before contains   is called  In that situation  inProgress would evaluate to false  so the Exchange would be recovered  This results in a duplicate Exchange being output by the Aggregator component  One possible solution might be to prevent updating the inProgressCompleteExchanges during the critical section  Another possible solution might be to copy inProgressCompleteExchanges before calling scan    I m sure that there are other ways to deal with this also    ',0
'step in a  block runs when the  tag is closed in the wrong place    Example route  lt doTry gt   lt to      gt  lt  doTry gt  lt doCatch gt   lt exception gt java lang Exception lt  exception gt   lt to uri  log        gt  lt  doCatch gt The  lt to uri  log      gt  line will execute every time  regardless if there is an exception or not I believe the preferred behavior would be that the route should fails to load validate  Alternatively  the  lt to uri  log      gt  should not run when there is not an exception Thanks    ',0
'camel jms  InOut exchange can time out even if response was received    When performing an InOut JMS exchange with a certain requestTimeout  if the reply message is received in time  but the following formula stands true  T    T   gt   T   where T    JMS response timeT    remaining route processing time following the replyT    requestTimeoutThen camel jms will throw an ExchangeTimedOutException regardless of the fact that the reply was truly received in time I m surprised this bug has gone unnoticed until now  as it s been present since mid      Example unit test   Test public void testTimeoutNotTriggered   throws Exception   getMockEndpoint  mock exception   expectedMessageCount     template requestBody  activemq test     lt hello   gt     assertMockEndpointsSatisfied       Override protected RouteBuilder createRouteBuilder   throws Exception   return new RouteBuilder      Override public void configure   throws Exception   onException ExchangeTimedOutException class   handled true   to  mock exception    from  activemq test    inOut  activemq test requestTimeout        delay constant         from  activemq test    log  test             ',0
'Simple language   bean function   issue when parameter value has comma    See nabblehttp   camel        n  nabble com Prolems with parametrized bean method call via simple tp        html   ',0
'NPE when using the imap mail component with quartz or the timer and pollEnrich    There is a NPE when using the imap mail component with quartz or the timer and pollEnrich as dicussed here http   camel        n  nabble com Schedule file mail endpoint td        html a       I reproduced it on version        and        with  lt route id  myTest  gt   lt from uri  timer   foo fixedRate true amp period         gt   lt pollEnrich uri  imap   userName hostName password       gt    lt to uri  log testroute showAll true amp level INFO   gt   lt  route gt We need to use it with the quartz component  so we can use a cron expression   but get the same error  lt route id  myTest  gt   lt from uri  quartz   testTimer cron       gt   lt pollEnrich uri  imap   userName hostName password       gt    lt to uri  log testroute showAll true amp level INFO   gt   lt  route gt                          DefaultQuartzScheduler context Worker        ERROR org apache camel processor DefaultErrorHandler   Failed delivery for  MessageId  ID W                                 on ExchangeId  ID W                                   Exhausted after delivery attempt    caught  org apache camel CamelExchangeException  Error occurred during aggregation  Exchange Message       Body is null        Caused by   org apache camel RuntimeCamelException   Failed to extract body due to  null  Exchange  Exchange     MailMessage  com sun mail imap IMAPMessage    a fe        Message  com sun mail imap IMAPMessage    a fe  org apache camel CamelExchangeException  Error occurred during aggregation  Exchange Message       Body is null        Caused by   org apache camel RuntimeCamelException   Failed to extract body due to  null  Exchange  Exchange     MailMessage  com sun mail imap IMAPMessage    a fe        Message  com sun mail imap IMAPMessage    a fe   at org apache camel processor PollEnricher process PollEnricher java          camel core        jar             at org apache camel util AsyncProcessorConverterHelper ProcessorToAsyncProcessorBridge process AsyncProcessorConverterHelper java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel management InstrumentationProcessor process InstrumentationProcessor java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java          camel core        jar             at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java          camel core        jar             at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel processor interceptor DefaultChannel process DefaultChannel java          camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor Pipeline process Pipeline java          camel core        jar             at org apache camel processor Pipeline process Pipeline java         camel core        jar             at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java          camel core        jar             at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java          camel core        jar             at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java         camel core        jar             at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java         camel core        jar             at org apache camel management InstrumentationProcessor process InstrumentationProcessor java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor loadbalancer QueueLoadBalancer process QueueLoadBalancer java         camel core        jar             at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java         camel core        jar             at org apache camel processor loadbalancer QueueLoadBalancer process QueueLoadBalancer java         camel core        jar             at org apache camel component quartz QuartzEndpoint onJobExecute QuartzEndpoint java          camel quartz        jar             at org apache camel component quartz CamelJob execute CamelJob java         camel quartz        jar             at org quartz core JobRunShell run JobRunShell java          quartz       jar       at org quartz simpl SimpleThreadPool WorkerThread run SimpleThreadPool java          quartz       jar         ',0
'Camel stream producer never close the stream of file    When I was working on CAMEL       I found the file stream is never closed  even it met the close condition    ',0
'SQL component will not look for parameters in header when no body in message    Line    in SqlProducer checks if the body is null  This will cause any parameters in header fields not to be populated into the prepared statement  Sample scenario is with a camel jetty enriching a response using camel sql    ',0
'Aggregate EIP   Completion from batch consumer should trigger first    See nabblehttp   camel        n  nabble com Issue Aggregator  BatchCompletion disturbed by other completions and fails to happen when it probabl tp        html   ',0
'camel http   When bridging endpoints then there may be double parameter values if client sends uri parameters    If you have a jetty http bridge endpoint  and the caller sends in a parameter with a value that has url encodings  then you may have double values when calling the bridge eg callinghttp   localhost       jettyTestRouteA param    B            And having a jetty   gt  http bridge  you can end up with double values Caused by  java lang AssertionError  expected  lt               gt  but was  lt                                gt    ',0
'http  component should default to charset based on content type    HttpProducer determines the charset of an outgoing StringEntity based on an Exchange property  Exchange CHARSET NAME   using null if that property is not set  It also sets the content type based on the content type of the camel message  this may also contain a character encoding   If these two don t match the receiver of the http request will probably not be able to parse the message  It would be better if the charset of the StringEntity would by default match the charset specified in the content type  Matching these two is done when receiving response messages  in HttpProducer extractResponseBody      Suggested fix  in HttpProducer createRequestEntity     you could of course also do something like org apache camel component http  helper HttpHelper setCharsetFromContentType   but my approach uses org apache http entity ContentType and java nio charset Charset instead of trying to determine the correct charset itself     be a bit careful with String as any type can most likely be converted to String   so we only do an instanceof check and accept String if the body is really a String   do not fallback to use the default charset as it can influence the request    for example application x www form urlencoded forms being sent String charset   IOHelper getCharsetName exchange  false  if  charset    null  amp  amp  contentType    null   ContentType ct   ContentType parse contentType   if  ct    null    Charset cs   ct getCharset    if  cs    null    charset   cs name        StringEntity entity   new StringEntity  String  data  charset  entity setContentType contentType  answer   entity    ',0
'TransferExchage InOut ActiveMQ Exception    The scnearios are   when using the transferExchange option only on the producer  I don t get the body back  but not the header  When I use the transferExchange option on both producer and consumer  I get the headers back  but not the body  And instead I get the following exception ryQueueReplyManager temporary   TemporaryQueueReplyManager WARN Execution of JMS message listener failed  Caused by   java lang NullPointerException   null java lang NullPointerException at org apache camel impl DefaultExchangeHolder unmarshal DefaultExchangeHolder java      at org apache camel component jms JmsBinding extractBodyFromJms JmsBinding java      at org apache camel component jms JmsMessage createBody JmsMessage java      at org apache camel impl MessageSupport getBody MessageSupport java     at org apache camel component jms reply ReplyManagerSupport processReply ReplyManagerSupport java      at org apache camel component jms reply TemporaryQueueReplyHandler onReply TemporaryQueueReplyHandler java     at org apache camel component jms reply TemporaryQueueReplyManager handleReplyMessage TemporaryQueueReplyManager java     at org apache camel component jms reply ReplyManagerSupport onMessage ReplyManagerSupport java      at org springframework jms listener AbstractMessageListenerContainer doInvokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer invokeListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractMessageListenerContainer doExecuteListener AbstractMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer doReceiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener AbstractPollingMessageListenerContainer receiveAndExecute AbstractPollingMessageListenerContainer java      at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker invokeListener DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker executeOngoingLoop DefaultMessageListenerContainer java       at org springframework jms listener DefaultMessageListenerContainer AsyncMessageListenerInvoker run DefaultMessageListenerContainer java      at java lang Thread run Thread java        ',0
'camel bindy   Multiple models in the same package lead to unpredictable results    BindyCsvDataFormat only holds one model  When multiple models are defined in the same package or field positions overlap  only one  DataField is kept  the last one  overwriting the previous mapping  This leads to unpredictable behavior  from the wrong field value being populated  to format mismatch exceptions for fields of different types This behavior is by design  as camel supports deep models  spread over multiple files  see AnnotationModelLoader loadModels   implementation where whole packages are scanned  The documentation is rather vague  but I believe supporting multiple models in the same package is not really feasible  and overkill at best  Therefore my preference would be to keep the functionality as is and document the limitation Currently the BindyCVSFieldEndingWithSeparatorIssueTest fails due to a conflict between MyCsvRecord class and BindyDoubleQuotesCsvUnmarshallTest Order class defined in the same package  Moving MyCsvRecord to a different package is a trivial fix  I will look into adding some model validation as well to WARN if the model is inconsistent  i e  has overlaps or gaps     ',0
'camel run in blueprint is broken    Due the Aries blueprint upgrade then the blueprint extenders may run    due classpath issues    ',0
'camel aws   Possible concurrent modification exception    Noticed this from CI test serversStacktracejava util ConcurrentModificationException at java util ArrayList Itr checkForComodification ArrayList java      at java util ArrayList Itr next ArrayList java      at org apache camel component aws sqs SqsExtendMessageVisibilityTest longReceiveExtendsMessageVisibility SqsExtendMessageVisibilityTest java     at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org junit runners model FrameworkMethod   runReflectiveCall FrameworkMethod java     at org junit internal runners model ReflectiveCallable run ReflectiveCallable java     at org junit runners model FrameworkMethod invokeExplosively FrameworkMethod java     at org junit internal runners statements InvokeMethod evaluate InvokeMethod java     at org junit internal runners statements RunBefores evaluate RunBefores java     at org junit internal runners statements RunAfters evaluate RunAfters java     at org junit rules TestWatcher   evaluate TestWatcher java     at org junit rules RunRules evaluate RunRules java     at org junit runners ParentRunner runLeaf ParentRunner java      at org junit runners BlockJUnit ClassRunner runChild BlockJUnit ClassRunner java     at org junit runners BlockJUnit ClassRunner runChild BlockJUnit ClassRunner java     at org junit runners ParentRunner   run ParentRunner java      at org junit runners ParentRunner   schedule ParentRunner java     at org junit runners ParentRunner runChildren ParentRunner java      at org junit runners ParentRunner access     ParentRunner java     at org junit runners ParentRunner   evaluate ParentRunner java      at org junit internal runners statements RunAfters evaluate RunAfters java     at org junit runners ParentRunner run ParentRunner java      at org apache maven surefire junit  JUnit TestSet execute JUnit TestSet java     at org apache maven surefire junit  JUnit Provider executeTestSet JUnit Provider java      at org apache maven surefire junit  JUnit Provider invoke JUnit Provider java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org apache maven surefire booter ProviderFactory ClassLoaderProxy invoke ProviderFactory java      at com sun proxy  Proxy  invoke Unknown Source  at org apache maven surefire booter SurefireStarter invokeProvider SurefireStarter java      at org apache maven surefire booter SurefireStarter runSuitesInProcess SurefireStarter java     at org apache maven surefire booter ForkedBooter main ForkedBooter java    Standard Output SLTests run     Failures     Errors     Skipped     Time elapsed        sec SLRunning org apache camel component aws sqs SqsExtendMessageVisibilityTest   ',0
'Scheduled thread pools is not removed from JMX when shutting down    For example if a route use the aggragate eip with a completion timeout  then the scheduled thread pool is enlisted in JMX  But not removed when the route is removed  Though as fail safe we always remove the JMX when camel is stopping But for people doing dynamic add remove routes this can become a problem    ',0
'Simple ognl expression   Possible NPE when using String replaceFirst and replacing with an empty string    See nabblehttp   camel        n  nabble com      NPE with replaceFirst tp        html   ',0
'org apache camel support ServiceSupport  InputStream not being explicitly closed    In method getVersion   of ServiceSupport there is an InputStream opened around line     InputStream is   getClass   getResourceAsStream   META INF maven org apache camel camel core pom properties   This stream is not closed explicitly If you undeploy an application from a container like GlassFish you get a warning like this              T                  WARNING glassfish      javax enterprise system core classloading com sun enterprise loader  ThreadID      ThreadName Thread    Input stream has been finalized or forced closed without being explicitly closed  stream instantiation reported in following stack tracejava lang Throwable at com sun enterprise loader ASURLClassLoader SentinelInputStream  lt init gt  ASURLClassLoader java       at com sun enterprise loader ASURLClassLoader InternalJarURLConnection getInputStream ASURLClassLoader java       at java net URLClassLoader getResourceAsStream URLClassLoader java      at com sun enterprise loader ASURLClassLoader getResourceAsStream ASURLClassLoader java      at java lang Class getResourceAsStream Class java       at org apache camel support ServiceSupport getVersion ServiceSupport java      at org apache camel impl DefaultCamelContext start DefaultCamelContext java       at org apache camel cdi CdiCamelContext start CdiCamelContext java     at sun reflect NativeMethodAccessorImpl invoke  Native Method              These were similar issues  XBEAN      JCR        ',0
'camel cxfrs blueprint configure could not be installed if there are some subelement settings    Got the OOM Exception when blueprint want to parser the setting like this  lt camelcxf rsClient id  rsClient  address  http   localhost      rest  serviceClass  org apache camel itest osgi cxf jaxrs testbean CustomerService  gt   lt camelcxf features gt   lt bean class  org apache cxf feature LoggingFeature   gt   lt  camelcxf features gt   lt  camelcxf rsClient gt    ',0
'StringQuoteHelper   Should ignore whitespace between quoted parameters    Need to merge to      branch when created    ',0
'camel example reportincident failed                             main   ERROR ContextLoader   Context initialization failedorg apache camel RuntimeCamelException  org apache camel FailedToCreateRouteException  Failed to create route route   Route route    From cxf  incident bus  cxf amp serviceClass org     because of Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework web context ContextLoader configureAndRefreshWebApplicationContext ContextLoader java      at org springframework web context ContextLoader initWebApplicationContext ContextLoader java      at org springframework web context ContextLoaderListener contextInitialized ContextLoaderListener java      at org eclipse jetty server handler ContextHandler startContext ContextHandler java      at org eclipse jetty servlet ServletContextHandler startContext ServletContextHandler java      at org eclipse jetty webapp WebAppContext startContext WebAppContext java       at org eclipse jetty server handler ContextHandler doStart ContextHandler java      at org eclipse jetty webapp WebAppContext doStart WebAppContext java      at org mortbay jetty plugin JettyWebAppContext doStart JettyWebAppContext java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty server handler ContextHandlerCollection doStart ContextHandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerWrapper doStart HandlerWrapper java     at org eclipse jetty server Server doStart Server java      at org mortbay jetty plugin JettyServer doStart JettyServer java     at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org mortbay jetty plugin AbstractJettyMojo startJetty AbstractJettyMojo java      at org mortbay jetty plugin AbstractJettyMojo execute AbstractJettyMojo java      at org mortbay jetty plugin JettyRunMojo execute JettyRunMojo java      at org apache maven plugin DefaultBuildPluginManager executeMojo DefaultBuildPluginManager java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleStarter singleThreadedBuild LifecycleStarter java      at org apache maven lifecycle internal LifecycleStarter execute LifecycleStarter java      at org apache maven DefaultMaven doExecute DefaultMaven java      at org apache maven DefaultMaven execute DefaultMaven java      at org apache maven cli MavenCli execute MavenCli java      at org apache maven cli MavenCli doMain MavenCli java      at org apache maven cli MavenCli main MavenCli java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org codehaus plexus classworlds launcher Launcher launchEnhanced Launcher java      at org codehaus plexus classworlds launcher Launcher launch Launcher java      at org codehaus plexus classworlds launcher Launcher mainWithExitCode Launcher java      at org codehaus plexus classworlds launcher Launcher main Launcher java     Caused by  org apache camel FailedToCreateRouteException  Failed to create route route   Route route    From cxf  incident bus  cxf amp serviceClass org     because of Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java      at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext start DefaultCamelContext java       at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java      at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java             moreCaused by  org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      at org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java     at org apache camel model RouteDefinition resolveEndpoint RouteDefinition java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel model FromDefinition resolveEndpoint FromDefinition java     at org apache camel impl DefaultRouteContext getEndpoint DefaultRouteContext java     at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel model RouteDefinition addRoutes RouteDefinition java             moreCaused by  java lang IllegalArgumentException  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel util IntrospectionSupport setProperty IntrospectionSupport java      at org apache camel util IntrospectionSupport setProperty IntrospectionSupport java      at org apache camel util IntrospectionSupport setProperties IntrospectionSupport java      at org apache camel util EndpointHelper setProperties EndpointHelper java      at org apache camel impl DefaultComponent setProperties DefaultComponent java      at org apache camel component cxf CxfComponent createEndpoint CxfComponent java     at org apache camel impl DefaultComponent createEndpoint DefaultComponent java      at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java             more                        WARN oejw WebAppContext Failed startup of context o m j p JettyWebAppContext   file  Users cmueller workspaceRelease camel examples camel example reportincident src main webapp   file  Users cmueller workspaceRelease camel examples camel example reportincident src main webapp org apache camel RuntimeCamelException  org apache camel FailedToCreateRouteException  Failed to create route route   Route route    From cxf  incident bus  cxf amp serviceClass org     because of Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel util ObjectHelper wrapRuntimeCamelException ObjectHelper java       at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework web context ContextLoader configureAndRefreshWebApplicationContext ContextLoader java      at org springframework web context ContextLoader initWebApplicationContext ContextLoader java      at org springframework web context ContextLoaderListener contextInitialized ContextLoaderListener java      at org eclipse jetty server handler ContextHandler startContext ContextHandler java      at org eclipse jetty servlet ServletContextHandler startContext ServletContextHandler java      at org eclipse jetty webapp WebAppContext startContext WebAppContext java       at org eclipse jetty server handler ContextHandler doStart ContextHandler java      at org eclipse jetty webapp WebAppContext doStart WebAppContext java      at org mortbay jetty plugin JettyWebAppContext doStart JettyWebAppContext java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty server handler ContextHandlerCollection doStart ContextHandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerWrapper doStart HandlerWrapper java     at org eclipse jetty server Server doStart Server java      at org mortbay jetty plugin JettyServer doStart JettyServer java     at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org mortbay jetty plugin AbstractJettyMojo startJetty AbstractJettyMojo java      at org mortbay jetty plugin AbstractJettyMojo execute AbstractJettyMojo java      at org mortbay jetty plugin JettyRunMojo execute JettyRunMojo java      at org apache maven plugin DefaultBuildPluginManager executeMojo DefaultBuildPluginManager java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleStarter singleThreadedBuild LifecycleStarter java      at org apache maven lifecycle internal LifecycleStarter execute LifecycleStarter java      at org apache maven DefaultMaven doExecute DefaultMaven java      at org apache maven DefaultMaven execute DefaultMaven java      at org apache maven cli MavenCli execute MavenCli java      at org apache maven cli MavenCli doMain MavenCli java      at org apache maven cli MavenCli main MavenCli java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org codehaus plexus classworlds launcher Launcher launchEnhanced Launcher java      at org codehaus plexus classworlds launcher Launcher launch Launcher java      at org codehaus plexus classworlds launcher Launcher mainWithExitCode Launcher java      at org codehaus plexus classworlds launcher Launcher main Launcher java     Caused by org apache camel FailedToCreateRouteException  Failed to create route route   Route route    From cxf  incident bus  cxf amp serviceClass org     because of Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java      at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext start DefaultCamelContext java       at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java      at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework web context ContextLoader configureAndRefreshWebApplicationContext ContextLoader java      at org springframework web context ContextLoader initWebApplicationContext ContextLoader java      at org springframework web context ContextLoaderListener contextInitialized ContextLoaderListener java      at org eclipse jetty server handler ContextHandler startContext ContextHandler java      at org eclipse jetty servlet ServletContextHandler startContext ServletContextHandler java      at org eclipse jetty webapp WebAppContext startContext WebAppContext java       at org eclipse jetty server handler ContextHandler doStart ContextHandler java      at org eclipse jetty webapp WebAppContext doStart WebAppContext java      at org mortbay jetty plugin JettyWebAppContext doStart JettyWebAppContext java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty server handler ContextHandlerCollection doStart ContextHandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerWrapper doStart HandlerWrapper java     at org eclipse jetty server Server doStart Server java      at org mortbay jetty plugin JettyServer doStart JettyServer java     at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org mortbay jetty plugin AbstractJettyMojo startJetty AbstractJettyMojo java      at org mortbay jetty plugin AbstractJettyMojo execute AbstractJettyMojo java      at org mortbay jetty plugin JettyRunMojo execute JettyRunMojo java      at org apache maven plugin DefaultBuildPluginManager executeMojo DefaultBuildPluginManager java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleStarter singleThreadedBuild LifecycleStarter java      at org apache maven lifecycle internal LifecycleStarter execute LifecycleStarter java      at org apache maven DefaultMaven doExecute DefaultMaven java      at org apache maven DefaultMaven execute DefaultMaven java      at org apache maven cli MavenCli execute MavenCli java      at org apache maven cli MavenCli doMain MavenCli java      at org apache maven cli MavenCli main MavenCli java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org codehaus plexus classworlds launcher Launcher launchEnhanced Launcher java      at org codehaus plexus classworlds launcher Launcher launch Launcher java      at org codehaus plexus classworlds launcher Launcher mainWithExitCode Launcher java      at org codehaus plexus classworlds launcher Launcher main Launcher java     Caused by org apache camel ResolveEndpointFailedException  Failed to resolve endpoint  cxf    incident bus    cxf amp serviceClass org apache camel example reportincident ReportIncidentEndpoint amp wsdlURL etc  Freport incident wsdl due to  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      at org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java     at org apache camel model RouteDefinition resolveEndpoint RouteDefinition java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel model FromDefinition resolveEndpoint FromDefinition java     at org apache camel impl DefaultRouteContext getEndpoint DefaultRouteContext java     at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java      at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext start DefaultCamelContext java       at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java      at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework web context ContextLoader configureAndRefreshWebApplicationContext ContextLoader java      at org springframework web context ContextLoader initWebApplicationContext ContextLoader java      at org springframework web context ContextLoaderListener contextInitialized ContextLoaderListener java      at org eclipse jetty server handler ContextHandler startContext ContextHandler java      at org eclipse jetty servlet ServletContextHandler startContext ServletContextHandler java      at org eclipse jetty webapp WebAppContext startContext WebAppContext java       at org eclipse jetty server handler ContextHandler doStart ContextHandler java      at org eclipse jetty webapp WebAppContext doStart WebAppContext java      at org mortbay jetty plugin JettyWebAppContext doStart JettyWebAppContext java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty server handler ContextHandlerCollection doStart ContextHandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerWrapper doStart HandlerWrapper java     at org eclipse jetty server Server doStart Server java      at org mortbay jetty plugin JettyServer doStart JettyServer java     at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org mortbay jetty plugin AbstractJettyMojo startJetty AbstractJettyMojo java      at org mortbay jetty plugin AbstractJettyMojo execute AbstractJettyMojo java      at org mortbay jetty plugin JettyRunMojo execute JettyRunMojo java      at org apache maven plugin DefaultBuildPluginManager executeMojo DefaultBuildPluginManager java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleStarter singleThreadedBuild LifecycleStarter java      at org apache maven lifecycle internal LifecycleStarter execute LifecycleStarter java      at org apache maven DefaultMaven doExecute DefaultMaven java      at org apache maven DefaultMaven execute DefaultMaven java      at org apache maven cli MavenCli execute MavenCli java      at org apache maven cli MavenCli doMain MavenCli java      at org apache maven cli MavenCli main MavenCli java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org codehaus plexus classworlds launcher Launcher launchEnhanced Launcher java      at org codehaus plexus classworlds launcher Launcher launch Launcher java      at org codehaus plexus classworlds launcher Launcher mainWithExitCode Launcher java      at org codehaus plexus classworlds launcher Launcher main Launcher java     Caused by java lang IllegalArgumentException  Could not find a suitable setter for property  bus as there isn t a setter method with same type  java lang String nor type conversion possible  No type converter available to convert from type  java lang String to the required type  org apache cxf Bus with value  cxf at org apache camel util IntrospectionSupport setProperty IntrospectionSupport java      at org apache camel util IntrospectionSupport setProperty IntrospectionSupport java      at org apache camel util IntrospectionSupport setProperties IntrospectionSupport java      at org apache camel util EndpointHelper setProperties EndpointHelper java      at org apache camel impl DefaultComponent setProperties DefaultComponent java      at org apache camel component cxf CxfComponent createEndpoint CxfComponent java     at org apache camel impl DefaultComponent createEndpoint DefaultComponent java      at org apache camel impl DefaultCamelContext getEndpoint DefaultCamelContext java      at org apache camel util CamelContextHelper getMandatoryEndpoint CamelContextHelper java     at org apache camel model RouteDefinition resolveEndpoint RouteDefinition java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel impl DefaultRouteContext resolveEndpoint DefaultRouteContext java      at org apache camel model FromDefinition resolveEndpoint FromDefinition java     at org apache camel impl DefaultRouteContext getEndpoint DefaultRouteContext java     at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel model RouteDefinition addRoutes RouteDefinition java      at org apache camel impl DefaultCamelContext startRoute DefaultCamelContext java      at org apache camel impl DefaultCamelContext startRouteDefinitions DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStartCamel DefaultCamelContext java       at org apache camel impl DefaultCamelContext doStart DefaultCamelContext java       at org apache camel spring SpringCamelContext doStart SpringCamelContext java      at org apache camel support ServiceSupport start ServiceSupport java     at org apache camel impl DefaultCamelContext start DefaultCamelContext java       at org apache camel spring SpringCamelContext maybeStart SpringCamelContext java      at org apache camel spring SpringCamelContext onApplicationEvent SpringCamelContext java      at org apache camel spring CamelContextFactoryBean onApplicationEvent CamelContextFactoryBean java      at org springframework context event SimpleApplicationEventMulticaster multicastEvent SimpleApplicationEventMulticaster java     at org springframework context support AbstractApplicationContext publishEvent AbstractApplicationContext java      at org springframework context support AbstractApplicationContext finishRefresh AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework web context ContextLoader configureAndRefreshWebApplicationContext ContextLoader java      at org springframework web context ContextLoader initWebApplicationContext ContextLoader java      at org springframework web context ContextLoaderListener contextInitialized ContextLoaderListener java      at org eclipse jetty server handler ContextHandler startContext ContextHandler java      at org eclipse jetty servlet ServletContextHandler startContext ServletContextHandler java      at org eclipse jetty webapp WebAppContext startContext WebAppContext java       at org eclipse jetty server handler ContextHandler doStart ContextHandler java      at org eclipse jetty webapp WebAppContext doStart WebAppContext java      at org mortbay jetty plugin JettyWebAppContext doStart JettyWebAppContext java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty server handler ContextHandlerCollection doStart ContextHandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerCollection doStart HandlerCollection java      at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org eclipse jetty server handler HandlerWrapper doStart HandlerWrapper java     at org eclipse jetty server Server doStart Server java      at org mortbay jetty plugin JettyServer doStart JettyServer java     at org eclipse jetty util component AbstractLifeCycle start AbstractLifeCycle java     at org mortbay jetty plugin AbstractJettyMojo startJetty AbstractJettyMojo java      at org mortbay jetty plugin AbstractJettyMojo execute AbstractJettyMojo java      at org mortbay jetty plugin JettyRunMojo execute JettyRunMojo java      at org apache maven plugin DefaultBuildPluginManager executeMojo DefaultBuildPluginManager java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal MojoExecutor execute MojoExecutor java      at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleModuleBuilder buildProject LifecycleModuleBuilder java     at org apache maven lifecycle internal LifecycleStarter singleThreadedBuild LifecycleStarter java      at org apache maven lifecycle internal LifecycleStarter execute LifecycleStarter java      at org apache maven DefaultMaven doExecute DefaultMaven java      at org apache maven DefaultMaven execute DefaultMaven java      at org apache maven cli MavenCli execute MavenCli java      at org apache maven cli MavenCli doMain MavenCli java      at org apache maven cli MavenCli main MavenCli java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org codehaus plexus classworlds launcher Launcher launchEnhanced Launcher java      at org codehaus plexus classworlds launcher Launcher launch Launcher java      at org codehaus plexus classworlds launcher Launcher mainWithExitCode Launcher java      at org codehaus plexus classworlds launcher Launcher main Launcher java                             INFO oejs AbstractConnector Started SelectChannelConnector                ',0
'camel example cxf tomcat failed    By accessing  http   localhost      camel example cxf tomcat webservices incident wsdl  I get the following exception Apr                  PM org apache catalina core StandardWrapperValve invokeSEVERE  Allocate exception for servlet CXFServletorg springframework beans factory NoSuchBeanDefinitionException  No bean named  cxf  is defined at org springframework beans factory support DefaultListableBeanFactory getBeanDefinition DefaultListableBeanFactory java      at org springframework beans factory support AbstractBeanFactory getMergedLocalBeanDefinition AbstractBeanFactory java       at org springframework beans factory support AbstractBeanFactory doGetBean AbstractBeanFactory java      at org springframework beans factory support AbstractBeanFactory getBean AbstractBeanFactory java      at org springframework context support AbstractApplicationContext getBean AbstractApplicationContext java       at org apache cxf transport servlet CXFServlet loadBus CXFServlet java     at org apache cxf transport servlet CXFNonSpringServlet init CXFNonSpringServlet java     at org apache catalina core StandardWrapper initServlet StandardWrapper java       at org apache catalina core StandardWrapper loadServlet StandardWrapper java       at org apache catalina core StandardWrapper allocate StandardWrapper java      at org apache catalina core StandardWrapperValve invoke StandardWrapperValve java      at org apache catalina core StandardContextValve invoke StandardContextValve java      at org apache catalina authenticator AuthenticatorBase invoke AuthenticatorBase java      at org apache catalina core StandardHostValve invoke StandardHostValve java      at org apache catalina valves ErrorReportValve invoke ErrorReportValve java     at org apache catalina valves AccessLogValve invoke AccessLogValve java      at org apache catalina core StandardEngineValve invoke StandardEngineValve java      at org apache catalina connector CoyoteAdapter service CoyoteAdapter java      at org apache coyote http   AbstractHttp  Processor process AbstractHttp  Processor java       at org apache coyote AbstractProtocol AbstractConnectionHandler process AbstractProtocol java      at org apache tomcat util net JIoEndpoint SocketProcessor run JIoEndpoint java      at java util concurrent ThreadPoolExecutor Worker runTask ThreadPoolExecutor java      at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java      at java lang Thread run Thread java        ',0
'Restarting routes using sql aggregation repository may lead to Class loading issues    Its the code in ClassLoadingAwareObjectInputStream in camel sql that has the bug    ',0
'AdviceWith doesn t work with doTry    I have the following route definition  from  direct billing     operation   routeId getRouteId operation    errorHandler noErrorHandler       propagate exceptions to the parent route  validate body   isInstanceOf  com cleverlance cleverbss integration modules in customer model Customer class    beanRef BILLING CUSTOMER ROUTE BEAN   createRequestFor    WordUtils capitalize operation      SetCustomer   gt  XML  marshal jaxbIn   doTry    to uri     messageSender  billingSender   id  toURI    doCatch AlreadyExistsException class   setProperty exPropertyName  property Exchange EXCEPTION CAUGHT    end    choice    when property exPropertyName  isNull       XML   gt  SetCustomerResponse  unmarshal jaxbOut   endChoice   And I would like to replace TO in the tests  getCamelContext   getRouteDefinition BillingCustomerRoutes ROUTE ID UPDATE CUSTOMER   adviceWith getCamelContext    new AdviceWithRouteBuilder      Override public void configure   throws Exception   weaveByType ToDefinition class  replace   process new Processor      Override public void process Exchange exchange  throws Exception   throw new AlreadyExistsException  msg   new AlreadyExists                When I use weaveById  toURI   or weaveByToString    it doesn t work neither    ',0
'Mina UDP default codec should keep the data as byte      The MinaUdpProtocolCodecFactory on the consumer side decodes data from an udp datagram to a byte    byte   bytes   context getTypeConverter   convertTo byte   class  in  On the provider side where it gets back to the wire it gets converted to a string  String value   context getTypeConverter   convertTo String class  message  and then set to the ByteBuffer with the given charset The result is that the original datagram is not valid anymore  The default codec should the data convert to a byte array or keep the data as byte array    ',0
'debugBefore   and debugAfter   not called if unit test extends CamelBlueprintTestSupport    A test that extends CamelBlueprintTestSupport does not get its debugBefore   and debugAfter   methods called    ',0
'Property placeholder optimization broke placeholders in Spring camelContext configuration    We are upgrading from        to         and are getting an error on startup Example Spring configuration  lt camelContext id  camel  handleFault  true  autoStartup    autoStartup    xmlns  http   camel apache org schema spring  gt   lt contextScan   gt   lt jmxAgent id  camelAgent  createConnector  true  registryPort    jmxPort      gt  lt  camelContext gt  lt bean id  properties  class  org apache camel component properties PropertiesComponent  gt   lt property name  location  value  classpath foo properties   gt  lt  bean gt As you can see  we use the Camel properties component to configure Camel auto startup  JMX port  etc This is the error we re getting on startup org springframework beans factory BeanCreationException  Error creating bean with name  properties  defined in class path resource  org apache camel component properties SpringPropertiesComponentTest xml   Initialization of bean failed  nested exception is org springframework beans factory BeanCreationException  Error creating bean with name  camel     Invocation of init method failed  nested exception is java lang IllegalArgumentException  PropertiesComponent with name properties must be defined in CamelContext to support property placeholders  at org springframework beans factory support AbstractAutowireCapableBeanFactory doCreateBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractAutowireCapableBeanFactory createBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractBeanFactory   getObject AbstractBeanFactory java      at org springframework beans factory support DefaultSingletonBeanRegistry getSingleton DefaultSingletonBeanRegistry java      at org springframework beans factory support AbstractBeanFactory doGetBean AbstractBeanFactory java      at org springframework beans factory support AbstractBeanFactory getBean AbstractBeanFactory java      at org springframework beans factory support DefaultListableBeanFactory preInstantiateSingletons DefaultListableBeanFactory java      at org springframework context support AbstractApplicationContext finishBeanFactoryInitialization AbstractApplicationContext java      at org springframework context support AbstractApplicationContext refresh AbstractApplicationContext java      at org springframework context support ClassPathXmlApplicationContext  lt init gt  ClassPathXmlApplicationContext java      at org springframework context support ClassPathXmlApplicationContext  lt init gt  ClassPathXmlApplicationContext java     at org apache camel component properties SpringPropertiesComponentTest createApplicationContext SpringPropertiesComponentTest java     at org apache camel spring SpringTestSupport setUp SpringTestSupport java     at junit framework TestCase runBare TestCase java      at org apache camel TestSupport runBare TestSupport java     at junit framework TestResult   protect TestResult java      at junit framework TestResult runProtected TestResult java      at junit framework TestResult run TestResult java      at junit framework TestCase run TestCase java      at junit framework TestSuite runTest TestSuite java      at junit framework TestSuite run TestSuite java      at org junit internal runners JUnit  ClassRunner run JUnit  ClassRunner java     at org eclipse jdt internal junit  runner JUnit TestReference run JUnit TestReference java     at org eclipse jdt internal junit runner TestExecution run TestExecution java     at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner runTests RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner run RemoteTestRunner java      at org eclipse jdt internal junit runner RemoteTestRunner main RemoteTestRunner java     Caused by  org springframework beans factory BeanCreationException  Error creating bean with name  camel     Invocation of init method failed  nested exception is java lang IllegalArgumentException  PropertiesComponent with name properties must be defined in CamelContext to support property placeholders  at org springframework beans factory support AbstractAutowireCapableBeanFactory initializeBean AbstractAutowireCapableBeanFactory java       at org springframework beans factory support AbstractAutowireCapableBeanFactory doCreateBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractAutowireCapableBeanFactory createBean AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractBeanFactory   getObject AbstractBeanFactory java      at org springframework beans factory support DefaultSingletonBeanRegistry getSingleton DefaultSingletonBeanRegistry java      at org springframework beans factory support AbstractBeanFactory doGetBean AbstractBeanFactory java      at org springframework beans factory support AbstractBeanFactory getBean AbstractBeanFactory java      at org springframework context support AbstractApplicationContext getBean AbstractApplicationContext java       at org apache camel spring CamelBeanPostProcessor   getOrLookupCamelContext CamelBeanPostProcessor java     at org apache camel impl DefaultCamelBeanPostProcessor postProcessBeforeInitialization DefaultCamelBeanPostProcessor java     at org apache camel spring CamelBeanPostProcessor postProcessBeforeInitialization CamelBeanPostProcessor java      at org springframework beans factory support AbstractAutowireCapableBeanFactory applyBeanPostProcessorsBeforeInitialization AbstractAutowireCapableBeanFactory java      at org springframework beans factory support AbstractAutowireCapableBeanFactory initializeBean AbstractAutowireCapableBeanFactory java       at org springframework beans factory support AbstractAutowireCapableBeanFactory doCreateBean AbstractAutowireCapableBeanFactory java             moreCaused by  java lang IllegalArgumentException  PropertiesComponent with name properties must be defined in CamelContext to support property placeholders  at org apache camel impl DefaultCamelContext resolvePropertyPlaceholders DefaultCamelContext java       at org apache camel util CamelContextHelper parseBoolean CamelContextHelper java      at org apache camel core xml AbstractCamelContextFactoryBean initCamelContext AbstractCamelContextFactoryBean java      at org apache camel core xml AbstractCamelContextFactoryBean afterPropertiesSet AbstractCamelContextFactoryBean java      at org springframework beans factory support AbstractAutowireCapableBeanFactory invokeInitMethods AbstractAutowireCapableBeanFactory java       at org springframework beans factory support AbstractAutowireCapableBeanFactory initializeBean AbstractAutowireCapableBeanFactory java              moreI believe this is a side effect of the optimization introduced in CAMEL       which was incorporated into        and        I ll attach a small patch that modifies one of the unit tests in the camel spring component to reproduce the issue    ',0
'Camel validator not able to resolve schema when using useSharedSchema false    This one works   lt to uri  validator META INF xsd fundscheckmaintainavailablebalance xsd    gt This one doesn t   lt to uri  validator META INF xsd fundscheckmaintainavailablebalance xsd useSharedSchema false    gt it fails with org xml sax SAXParseException  schema reference    Failed to read schema document  null   because    could not find the document     the document could not be read     the root element of the document is not  lt xsd schema gt  The streamsource object in the validator is populated  but the buffered inputstream object has no content   ',0
'DefaultShutdownStrategy shutdown timeout of   will never timeout and go in negative time    A timeout of   won t timeout in the instant  the time will go negative  camelcontext stopRoute routeId     TimeUnit SECONDS  false        org apache camel impl DefaultShutdownStrategy        Waiting as there are still   inflight and pending exchanges to complete  timeout in    seconds      org apache camel impl DefaultShutdownStrategy        Waiting as there are still   inflight and pending exchanges to complete  timeout in    seconds      org apache camel impl DefaultShutdownStrategy        Waiting as there are still   inflight and pending exchanges to complete  timeout in    seconds  Found a post related to it there   http   camel        n  nabble com Forcefully shutting down routes td        html   ',0
'vm component   Stopping a route when using multipleConsumers should not stop MP if there is other routes using it    See nabblehttp   camel        n  nabble com Removing route stops other routes from the same producer tp        html   ',0
'Headers are not set correctly in some situation    If I define a route like this  from   lt MyUrl gt  test    setHeader Exchange HTTP RESPONSE CODE  simple          my http client get a     response code  If a add something else on the route like  from   lt MyUrl gt  test    setHeader Exchange HTTP RESPONSE CODE  simple          log        my http client get a     response code as expected  forum  http   camel        n  nabble com route http code td        html   ',0
'New restlet endpoints don t work if route is created after restlet server is started     If a route with restlet endponit is created after restlet server is started  restlet can t handle the endpoint correctly  because restlet translate all URI pattern of routes at server starting  but don t it for later attached routes  So we must translate the URI pattern before attach it to restlet after restlet server is started  See http   restlet tigris org issues show bug cgi id        ',0
'Route with suspended SedaConsumer can t be stopped correctly    Route with suspended SedaConsumer can t be stopped correctly  Here is test   Test public void testOriginalSedaShutdownSuspended   throws Exception   SedaEndpoint endpoint   context   getEndpoint  seda test   SedaEndpoint class   context   addRouteDefinition new RouteDefinition    id  testRoute    from endpoint   to  log body      Set lt SedaConsumer gt  consumers   endpoint getConsumers    Assert assertFalse consumers isEmpty     for  SedaConsumer sedaConsumer  consumers    sedaConsumer suspend      Assert assertTrue context   stopRoute  testRoute      TimeUnit SECONDS  true        ',0
'File consumer   Race condition for markerFile read lock strategy    See nabblehttp   camel        n  nabble com File markerFile strategy race condition tp        htmlWe should delete the  camelLock file last  as currently we move the processed file first  And there is a very tiny tiny window where another process could potential see the file and pickup it    ',0
'baseResource of Jetty ServletContextHandler does not work when project deployed as a bundle    If we package a camel websocket route   websocket                newsTopic sendToAll true amp staticResources classpath webapp   as a bundle and set the staticResources as parameter  classpath webapp   then the pages cannot be accessed from the browserCode should be  if  resources    equals  classpath      URL url   this getCamelContext   getClassResolver   loadResourceAsURL resources      context setBaseResource Resource newResource url      else if  resources    equals  file      context setBaseResource Resource newResource resources           ',0
'endChoice   has no effect in nested choice definition    I just upgraded from        to        and noticed that nested choice definitions started acting strangely  For example   choice    when header Exchange EXCEPTION CAUGHT  isNotNull          setBody exceptionMessage   append SystemUtils LINE SEPARATOR  append exceptionStackTrace      choice    when header HEADER CONTROLLER ID  isNotNull        a  setHeader Exchange FILE NAME  simple AUDIT CONTROLLER FAILED FILENAME     error log     to ENDPOINT AUDIT DIR   otherwise       b  setHeader Exchange FILE NAME  simple AUDIT FAILED FILENAME     error log     to ENDPOINT AUDIT DIR     INSERTING  end   here solves the issue  endChoice    log LoggingLevel WARN   DLQ written    in header CamelExceptionCaught    otherwise         log LoggingLevel WARN   DLQ written    MESSAGE LOG FORMAT   end  I have a test that is supposed to go through   and  a  However it now passes through   and   It looks like the endChoice   in  b has no effect and the otherwise   in   is executed instead of  b  Inserting and end   statement as shown seems to solve the issue  but it looks suspicious It s probably a regression introduced by the fix for CAMEL       but I m not      sure    ',0
'camel quartz   Stateful job   Redeploying bundle war and having changed endpoint uri issue    Seehttp   camel        n  nabble com In came quartz route after bundle update jobs are not triggred tp        htmlIn these situations we should use job name to name the job unique so when you change the endpoint uri and redeploy the apps bundles  then camel quartz can find the old job in the quartz persistent store There may be logic needed to lookup using job name as the unique name in these situations  and then allow endpoint uri options to change over time  such as the cron trigger etc  Which should be adjusted accordingly as well    ',0
'connectionTimeout property is ignored by JavaMail    JavaMail ignores the timeout values set via the connectionTimeout property  Within MailConfiguration  createJavaMailProperties the mail  lt protocol gt  timeout and mail  lt protocol gt  connectionTimeout parameters are set as long values In com sun mail util PropUtil  getInt  line      the property is ignored since it is a long valueChanging the type of connectionTimeout from long to int would be the cleanest solution   another suggestion would be to downcast the connectionTimeout in MailConfiguration  createJavaMailProperties   ',0
'NULL values are not supported in named parameters    Due to the bug in the DefaultSqlPrepareStatementStrategy there no ability to use NULL values Following query will be failed  if we try to use NULL as a parameter value select a  b from foo where    param  IS NOT NULL AND a  gt       OR    param  IS NOT NULL AND b  gt     We ll get an error  Caused by  java sql SQLException  Number of parameters mismatch  Expected     was  at org apache camel component sql DefaultSqlPrepareStatementStrategy populateStatement DefaultSqlPrepareStatementStrategy java            camel sql        jar             at org apache camel component sql SqlProducer   doInPreparedStatement SqlProducer java           camel sql        jar             at org apache camel component sql SqlProducer   doInPreparedStatement SqlProducer java           camel sql        jar             at org springframework jdbc core JdbcTemplate execute JdbcTemplate java            spring jdbc       RELEASE jar       RELEASE     Fix is quite simple  iterator implementation  returned by DefaultSqlPrepareStatementStrategy createPopulateIterator    should be changed as follows  return new Iterator lt Object gt      private NamedQueryParser parser   new NamedQueryParser query   private String nextParam  private boolean done   Override public boolean hasNext     if  done    return false    if  nextParam    null    nextParam   parser next    if  nextParam    null    done   true      return nextParam    null     Override public Object next     if  hasNext     throw new NoSuchElementException      boolean contains   bodyMap    null   bodyMap containsKey nextParam    false  contains    headerMap    null   headerMap containsKey nextParam    false  if   contains    throw new RuntimeExchangeException  Cannot find key      nextParam      in message body or headers to use when setting named parameter in query      query        exchange        get from body before header Object next   bodyMap    null   bodyMap get nextParam    null  if  next    null    next   headerMap    null   headerMap get nextParam    null    nextParam   null  return next     Override public void remove        noop        ',0
'org apache camel main Main doStop   throws java lang IndexOutOfBoundsException    When calling a Camel application with parameter  h all parameters are printed an the program exits But it is no clean exit  it throws an java lang IndexOutOfBoundsException The reason for this is the expression in doStop    getCamelContexts   get    stop   get    returns null  if no context is initialized yet See camel users mailinglist  thread  Bug in org apache camel main Main doStop        ',0
'SFTP  NPE if no private key file is supplied    Hi a NPE is thrown if no private key file is supplied in the configuration for SFTP  The error isCaused by  java lang NullPointerException  while trying to get the length of an array loaded from local variable  foo at com jcraft jsch Buffer putString Buffer java    I have analysed the code a bit and found that the problem is causedby the class SftpOperations  The method createSession sets the userInfo for the seesion by an inline class  Here the method promptKeyboardInteractive does not work correctly if no private key file is supplied  In that case JSCH switches to user pw authorization and this method is called  But since there is no password maintained the configation object returns NULL  The present implementation adds it to the string array causing the error in JSCH  JSCH either wants a NULL string array or an empty string array  I have tested both   So the code should look e g  as follows  public String   promptKeyboardInteractive String destination  String name  String instruction  String   prompt  boolean   echo    String password   configuration getPassword    if  password    null    return new String       else   return new String     password       With that change JSCH returnsCaused by  java io FileNotFoundException    data ssh id rsa  No such file or directory  at java io FileInputStream open Native Method and that is the real cause of the error Best Regards J rg   ',0
'Routing slip EIP   Does not send ExchangeSentEvent notifications    When using routing slip eip  then we only get the ExchangeSendingEvent  what we miss is the ExchangSentEvent    ',0
'camel netty   unable to consume on UDP multicast addresses    When using a route to listen to UDP multicast address   no messages seem to get consumed  No exceptions are observed  Multicast address is defined as addresses in the range of           through                  http   en wikipedia org wiki Multicast address Input was simple string  e g   Test String  Example Route  lt route gt   lt from uri  netty udp                  allowDefaultCodec false amp sync false amp broadcast true   gt  lt  route gt Found an old topic in the user discussion forum that seems related  Did not find any unit tests in the Camel source code exercising this behavior   http   camel        n  nabble com camel netty and multicast tt        html    ',0
'Wrong InputStream reference is used in method storeFile of class ScpOperations    In method storeFile String name  Exchange exchange  of class org apache camel component jsch ScpOperations the wrong reference of the required input stream is used  line       Should be write channel  file  is  cfg   instead of write channel  file  exchange getIn   getMandatoryBody InputStream class   cfg     ',0
'camel cxf should shutdown the bus when the endpoint is stopped     If the bus is create by cxfEndpoint itself  cxfEndpoint should shutdown it when the endpoint is stopped    ',0
'JMX   browsable endpoints such as seda has some attributes listed as unavaiable    See screenshotThe problem is related to extending a ManagedEndpoint then some options is shown as unavaiable in JMX consoles    ',0
'Predicates from java dsl are not dumped to xml correctly    Predicates defined in the java dsl are not dumped to xml when using jmx Eg  this java dsl route from  seda a   choice   when header  test   isNotNull    log  not null   end   to  mock a   Will be dumped as this  lt  xml version       encoding  UTF    standalone  yes   gt  lt route group  com example TestRoute  id  route   xmlns  http   camel apache org schema spring  gt   lt from uri  seda a   gt   lt choice id  choice    gt   lt when id  when    gt   lt expressionDefinition  gt   lt log message  not null  id  log     gt   lt  when gt   lt  choice gt   lt to uri  mock a  id  to     gt  lt  route gt The  lt expressionDefinition gt  element should contain the expression This seems similar to CAMEL         ',0
'camel cmis component  test packages have the wrong name    Unit tests for camel cmis are under package org apache camel componenet instead of org apache camel componentActions    Rename folder src test java org apache camel componenet to src test java org apache camel component    Fix the package name in each unit testAffected version       SNAPSHOT and before   ',0
'camel cxf ClassCastException when use cxf FailoverFeature    With PAYLOAD data format used  the first element in argument is casted to a CxfPayload instance and the argument is changed into a List lt DOMSource gt  instance by the method  setParameters  in class org apache camel component cxf CxfEndpoint Then FailoverFeature calls retry  the class cast action throws a ClassCastException btw   message remove DataFormat class   at the end of the method  setParameters  dosn t work  The method  remove  is inherited from Map  and a new message with data format PAYLOAD is created when retry    ',0
'SJMS component throws class cast error when used with IBM Webshpere MQ    When using the IBM MQ JMS classes and pub sub over a TOPIC the JmsObjectFactory createMessageConsumer method throws a cast class exception  The session is being cast to a TopicSession which for MQ it is not Using pure jms this cast is not required as the session class is aware of the destination type    ',0
'camel dozer   Does not work well in OSGi Blueprint    Dozer doesnt work to well in OSGi  It seems to work with spring  but fails with OSGi blueprint                           ERROR   l Console Thread   BlueprintContainerImpl   container BlueprintContainerImpl           org apache aries blueprint core           Unable to start blueprint container for bundle blueorg osgi service blueprint container ComponentDefinitionException  Error when instantiating bean dozerMapper of class class org dozer DozerBeanMapper at org apache aries blueprint container BeanRecipe getInstance BeanRecipe java        org apache aries blueprint core        at org apache aries blueprint container BeanRecipe internalCreate  BeanRecipe java        org apache aries blueprint core        at org apache aries blueprint container BeanRecipe internalCreate BeanRecipe java        org apache aries blueprint core        at org apache aries blueprint di AbstractRecipe   call AbstractRecipe java       org apache aries blueprint core        at java util concurrent FutureTask Sync innerRun FutureTask java                 at java util concurrent FutureTask run FutureTask java                 at org apache aries blueprint di AbstractRecipe create AbstractRecipe java       org apache aries blueprint core        at org apache aries blueprint container BlueprintRepository createInstances BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint container BlueprintRepository createAll BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint container BlueprintContainerImpl instantiateEagerComponents BlueprintContainerImpl java        org apache aries blueprint core        at org apache aries blueprint container BlueprintContainerImpl doRun BlueprintContainerImpl java        org apache aries blueprint core        at org apache aries blueprint container BlueprintContainerImpl run BlueprintContainerImpl java        org apache aries blueprint core        at org apache aries blueprint container BlueprintExtender createContainer BlueprintExtender java        org apache aries blueprint core        at org apache aries blueprint container BlueprintExtender modifiedBundle BlueprintExtender java        org apache aries blueprint core        at org apache aries util tracker hook BundleHookBundleTracker Tracked customizerModified BundleHookBundleTracker java         org apache aries util        at org apache aries util tracker hook BundleHookBundleTracker Tracked customizerModified BundleHookBundleTracker java         org apache aries util        at org apache aries util tracker hook BundleHookBundleTracker AbstractTracked track BundleHookBundleTracker java         org apache aries util        at org apache aries util tracker hook BundleHookBundleTracker Tracked bundleChanged BundleHookBundleTracker java         org apache aries util        at org apache aries util tracker hook BundleHookBundleTracker BundleEventHook event BundleHookBundleTracker java         org apache aries util        at org apache felix framework util SecureAction invokeBundleEventHook SecureAction java       org apache felix framework       jar   at org apache felix framework util EventDispatcher createWhitelistFromHooks EventDispatcher java      org apache felix framework       jar   at org apache felix framework util EventDispatcher fireBundleEvent EventDispatcher java      org apache felix framework       jar   at org apache felix framework Felix fireBundleEvent Felix java       org apache felix framework       jar   at org apache felix framework Felix startBundle Felix java       org apache felix framework       jar   at org apache felix framework Felix updateBundle Felix java       org apache felix framework       jar   at org apache felix framework BundleImpl update BundleImpl java      org apache felix framework       jar   at org apache felix framework BundleImpl update BundleImpl java      org apache felix framework       jar   at org apache karaf shell osgi UpdateBundle doExecute UpdateBundle java        org apache karaf shell osgi        at org apache karaf shell osgi BundleCommand doExecute BundleCommand java        org apache karaf shell osgi        at org apache karaf shell console OsgiCommandSupport execute OsgiCommandSupport java        org apache karaf shell console        at org apache felix gogo commands basic AbstractCommand execute AbstractCommand java        org apache karaf shell console        at org apache felix gogo runtime CommandProxy execute CommandProxy java        org apache karaf shell console        at org apache felix gogo runtime Closure executeCmd Closure java         org apache karaf shell console        at org apache felix gogo runtime Closure executeStatement Closure java         org apache karaf shell console        at org apache felix gogo runtime Pipe run Pipe java         org apache karaf shell console        at org apache felix gogo runtime Closure execute Closure java         org apache karaf shell console        at org apache felix gogo runtime Closure execute Closure java         org apache karaf shell console        at org apache felix gogo runtime CommandSessionImpl execute CommandSessionImpl java        org apache karaf shell console        at org apache karaf shell console jline Console run Console java         org apache karaf shell console        at java lang Thread run Thread java                Caused by  org dozer MappingException  java lang ClassNotFoundException  org dozer util DefaultClassLoader at org dozer util MappingUtils throwMappingException MappingUtils java     at org dozer util DefaultClassLoader loadClass DefaultClassLoader java     at org dozer DozerInitializer loadBeanType DozerInitializer java      at org dozer DozerInitializer initialize DozerInitializer java     at org dozer DozerInitializer init DozerInitializer java     at org dozer DozerBeanMapper init DozerBeanMapper java      at org dozer DozerBeanMapper  lt init gt  DozerBeanMapper java     at org dozer DozerBeanMapper  lt init gt  DozerBeanMapper java     at sun reflect NativeConstructorAccessorImpl newInstance  Native Method             at sun reflect NativeConstructorAccessorImpl newInstance NativeConstructorAccessorImpl java                at sun reflect DelegatingConstructorAccessorImpl newInstance DelegatingConstructorAccessorImpl java                at java lang reflect Constructor newInstance Constructor java                 at org apache aries blueprint utils ReflectionUtils newInstance ReflectionUtils java        org apache aries blueprint core        at org apache aries blueprint container BeanRecipe newInstance BeanRecipe java        org apache aries blueprint core        at org apache aries blueprint container BeanRecipe getInstance BeanRecipe java        org apache aries blueprint core               moreCaused by  java lang ClassNotFoundException  org dozer util DefaultClassLoader at java net URLClassLoader   run URLClassLoader java                 at java net URLClassLoader   run URLClassLoader java                 at java security AccessController doPrivileged Native Method             at java net URLClassLoader findClass URLClassLoader java                 at java lang ClassLoader loadClass ClassLoader java                 at sun misc Launcher AppClassLoader loadClass Launcher java                 at java lang ClassLoader loadClass ClassLoader java                 at java lang Class forName  Native Method             at java lang Class forName Class java                 at org apache commons lang  ClassUtils getClass ClassUtils java      at org apache commons lang  ClassUtils getClass ClassUtils java      at org apache commons lang  ClassUtils getClass ClassUtils java      at org dozer util DefaultClassLoader loadClass DefaultClassLoader java            more   ',0
'Using simple language OGNL expressions doesn t work for Bean Binding when a field is null    The following functionality doesn t work  when one of the fields is null  http   camel apache org bean binding htmlYou can also use the OGNL support of the Simple expression language  Now suppose the message body is an object which has a method named asXml  To invoke the asXml method we can do as follows  bean OrderService class   doSomething   body asXml     header high    Instead of using  bean as shown in the examples above  you may want to use  to instead as shown  to  bean orderService method doSomething   body asXml     header high    A test case is provided  Instead of getting values of fields  foo  and  bar  respectively  the first parameter  which should be null  receives value of pojo toString    while the second parameter receives the correct value    ',0
'Memory leak SoapOutInterceptor writeSoapEnvelopeStart with security headers    When proxying the WS Security request through camel route with CXF MESSAGE data format  we will get the endless loop that eat up the memory  qtp               prio    tid  x     f de        nid  x c f runnable   x     f d d        java lang Thread State  RUNNABLE at org apache cxf staxutils W CDOMStreamWriter writeCharacters W CDOMStreamWriter java      at org apache cxf staxutils DelegatingXMLStreamWriter writeCharacters DelegatingXMLStreamWriter java     at org apache cxf staxutils StaxUtils copy StaxUtils java      at org apache cxf staxutils StaxUtils copy StaxUtils java      at org apache cxf staxutils StaxUtils copy StaxUtils java      at org apache cxf binding soap interceptor SoapOutInterceptor writeSoapEnvelopeStart SoapOutInterceptor java      at org apache cxf binding soap interceptor SoapOutInterceptor handleMessage SoapOutInterceptor java     at org apache cxf binding soap interceptor SoapOutInterceptor handleMessage SoapOutInterceptor java     at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java        locked  lt  x        e  af a  gt   a org apache cxf phase PhaseInterceptorChain  at org apache cxf endpoint ClientImpl doInvoke ClientImpl java      at org apache cxf endpoint ClientImpl invoke ClientImpl java      at org apache camel component cxf CxfProducer process CxfProducer java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor SendProcessor   doInAsyncProducer SendProcessor java      at org apache camel impl ProducerCache doInAsyncProducer ProducerCache java      at org apache camel processor SendProcessor process SendProcessor java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor TraceInterceptor process TraceInterceptor java     at org apache camel processor interceptor HandleFaultInterceptor process HandleFaultInterceptor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel fabric FabricTraceProcessor process FabricTraceProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor RedeliveryErrorHandler processErrorHandler RedeliveryErrorHandler java      at org apache camel processor RedeliveryErrorHandler process RedeliveryErrorHandler java      at org apache camel processor interceptor StreamCachingInterceptor process StreamCachingInterceptor java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor interceptor DefaultChannel process DefaultChannel java      at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor Pipeline process Pipeline java      at org apache camel processor Pipeline process Pipeline java     at org apache camel processor RouteContextProcessor processNext RouteContextProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel processor UnitOfWorkProcessor processAsync UnitOfWorkProcessor java      at org apache camel processor UnitOfWorkProcessor process UnitOfWorkProcessor java      at org apache camel processor RouteInflightRepositoryProcessor processNext RouteInflightRepositoryProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel util AsyncProcessorHelper process AsyncProcessorHelper java     at org apache camel processor DelegateAsyncProcessor processNext DelegateAsyncProcessor java     at org apache camel processor DelegateAsyncProcessor process DelegateAsyncProcessor java     at org apache camel management InstrumentationProcessor process InstrumentationProcessor java     at org apache camel component cxf CxfConsumer   asyncInvoke CxfConsumer java       locked  lt  x        e    d   gt   a org apache cxf transport http jetty continuations JettyContinuationWrapper  at org apache camel component cxf CxfConsumer   invoke CxfConsumer java     at org apache cxf interceptor ServiceInvokerInterceptor   run ServiceInvokerInterceptor java     at java util concurrent Executors RunnableAdapter call Executors java      at java util concurrent FutureTask Sync innerRun FutureTask java      at java util concurrent FutureTask run FutureTask java      at org apache cxf workqueue SynchronousExecutor execute SynchronousExecutor java     at org apache cxf interceptor ServiceInvokerInterceptor handleMessage ServiceInvokerInterceptor java        locked  lt  x        e  af    gt   a org apache cxf interceptor ServiceInvokerInterceptor    at org apache cxf phase PhaseInterceptorChain doIntercept PhaseInterceptorChain java        locked  lt  x        e  edb   gt   a org apache cxf phase PhaseInterceptorChain  at org apache cxf transport ChainInitiationObserver onMessage ChainInitiationObserver java      at org apache cxf transport http AbstractHTTPDestination invoke AbstractHTTPDestination java      at org apache cxf transport servlet ServletController invokeDestination ServletController java      at org apache cxf transport servlet ServletController invoke ServletController java      at org apache cxf transport servlet CXFNonSpringServlet invoke CXFNonSpringServlet java      at org apache cxf transport servlet AbstractHTTPServlet handleRequest AbstractHTTPServlet java      at org apache cxf transport servlet AbstractHTTPServlet doPost AbstractHTTPServlet java      at javax servlet http HttpServlet service HttpServlet java      at org apache cxf transport servlet AbstractHTTPServlet service AbstractHTTPServlet java      at sun reflect NativeMethodAccessorImpl invoke  Native Method  at sun reflect NativeMethodAccessorImpl invoke NativeMethodAccessorImpl java     at sun reflect DelegatingMethodAccessorImpl invoke DelegatingMethodAccessorImpl java     at java lang reflect Method invoke Method java      at org ops j pax web service internal HttpServiceStarted   invoke HttpServiceStarted java      at org ops j pax web service internal  Proxy  service Unknown Source  at org eclipse jetty servlet ServletHolder handle ServletHolder java      at org eclipse jetty servlet ServletHandler doHandle ServletHandler java      at org ops j pax web service jetty internal HttpServiceServletHandler doHandle HttpServiceServletHandler java     at org eclipse jetty server handler ScopedHandler handle ScopedHandler java      at org eclipse jetty security SecurityHandler handle SecurityHandler java      at org eclipse jetty server session SessionHandler doHandle SessionHandler java      at org eclipse jetty server handler ContextHandler doHandle ContextHandler java       at org ops j pax web service jetty internal HttpServiceContext doHandle HttpServiceContext java      at org eclipse jetty servlet ServletHandler doScope ServletHandler java      at org eclipse jetty server session SessionHandler doScope SessionHandler java      at org eclipse jetty server handler ContextHandler doScope ContextHandler java      at org eclipse jetty server handler ScopedHandler handle ScopedHandler java      at org ops j pax web service jetty internal JettyServerHandlerCollection handle JettyServerHandlerCollection java     at org eclipse jetty server handler HandlerWrapper handle HandlerWrapper java      at org eclipse jetty server Server handle Server java      at org eclipse jetty server AbstractHttpConnection handleRequest AbstractHttpConnection java      at org eclipse jetty server AbstractHttpConnection content AbstractHttpConnection java      at org eclipse jetty server AbstractHttpConnection RequestHandler content AbstractHttpConnection java      at org eclipse jetty http HttpParser parseNext HttpParser java      at org eclipse jetty http HttpParser parseAvailable HttpParser java      at org eclipse jetty server AsyncHttpConnection handle AsyncHttpConnection java     at org eclipse jetty io nio SelectChannelEndPoint handle SelectChannelEndPoint java      at org eclipse jetty io nio SelectChannelEndPoint   run SelectChannelEndPoint java     at org eclipse jetty util thread QueuedThreadPool runJob QueuedThreadPool java      at org eclipse jetty util thread QueuedThreadPool   run QueuedThreadPool java      at java lang Thread run Thread java        ',0
'seda   queue size compare should use equals    See nabblehttp   camel        n  nabble com Camel        SedaComponent issues with Queue size tp        html   ',0
'mbeansRegistered in DefaultManagementAgent isn t ThreadSafe    This is more or less a  corner case  I stumbled upon  thoughthe HashSet HashMap           camel versions  in the DefaultManagementAgent containing the registered Mbean mbeansRegistered isn t Thread Safe  This has been an issue for us while using the ProducerTemplate in a wrongful way  by instantiating the ProducerTemplate during every Route run  As this might be a common mistake by users I d suggest to improve the mbeansRegistered by using a Synchronized Map    ',0
'camel blueprint   Using  and referrring to SSLContextParameters with property placeholders can lead to CircularDependencyException    Configuring a blueprint xml file with  lt endpoint id  myNettyServer  uri  netty http http             port   foo ssl true amp amp sslContextParameters  mySsl   gt Can lead to ciruclar exceptionsCaused by  org apache aries blueprint di CircularDependencyException   BeanRecipe name  mySsl    BeanRecipe name   camelBlueprint factory mySsl    BeanRecipe name  camel      BeanRecipe name  myNettyServer    BeanRecipe name  mySsl    at org apache aries blueprint container BlueprintRepository push BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint di AbstractRecipe create AbstractRecipe java       org apache aries blueprint core        at org apache aries blueprint container BlueprintRepository createInstances BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint container BlueprintRepository createInstance BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint container BlueprintRepository create BlueprintRepository java        org apache aries blueprint core        at org apache aries blueprint container BlueprintContainerImpl getComponentInstance BlueprintContainerImpl java        org apache aries blueprint core        at org apache camel blueprint BlueprintContainerRegistry lookupByNameAndType BlueprintContainerRegistry java     at org apache camel impl CompositeRegistry lookupByNameAndType CompositeRegistry java             more   ',0
'camel yammer   Endpoint yammer current throwns JsonMappingException exception    Getting org codehaus jackson map JsonMappingException  Can not deserialize instance of java util ArrayList out of START OBJECT tokenwhen trying to return the current user using yammer current  Workaround is to just add  useJson true and do marshaling manually  Fixing on master shortly    ',0
'Installation of camel stomp feature fails    Christians MacBook Pro bin cmueller    karaf clean                                             lt                                                                             Apache Karaf        Hit   lt tab gt   for a list of available commandsand   cmd    help  for help on a specific command Hit   lt ctrl d gt   or type  osgi shutdown  or  logout  to shutdown Karaf karaf root gt  features chooseurl camel       adding feature url mvn org apache camel karaf apache camel        xml featureskaraf root gt  features install camel stompError executing command  Could not start bundle mvn org apache geronimo specs geronimo jms     spec       in feature s  spring jms       RELEASE  camel spring ws         spring jms       RELEASE  spring jms       RELEASE  camel jms         camel bam         camel stomp         camel sjms         camel jpa         Unresolved constraint in bundle org apache geronimo specs geronimo jms     spec       Unable to resolve       missing requirement        osgi wiring package   osgi wiring package javax transaction xa    ',0
'Camel Redis  Serializer passed through URI is used only on consumer    Please add camel redis componentThe serializer passed through URI is used only on consumer and not on producer  Beside been unexpected and undocumented I think it can cause problems on interacting with the Redis DB if the same serializer is not used in both ways You can find the example and discussion of this problem on this thread on the forum http   camel        n  nabble com camel redis strings serialization td        htmlI put as minor because from the discussion it looks like it is possible to have a workaround using a RedisTemplate    ',0
'XML Signature Component  Stream not closed in XmlSignerHelper getXslTransform String path     Component camel xmlsecurity  InputStream is not closed after it is read in method XmlSignerHelper getXslTransform String path    ',0
'Bean binding to covariant methods throws AmbiguousMethodCallException    Attached is a patch and test case for an issue in the bean binding code which prevents binding to an overloaded method with a covariant return type from the base class  The fix is to check for method covariance at the last moment before throwing AmbiguousMethodCallException  If all methods remaining are covariant  any one of them can be called  Unfortunately this happens in   places in the code  if we pre filtered the list of methods then we could lose annotations on either of the method signature which could be problematic depending on the resolution type    ',0
'scp task does not respect StrictHostKeyChecking option    The SCP component does not currently do anything with the StrictHostKeyChecking option  as documented  The attached patch fixes this  no test case I m afraid     ',0
'Null Pointer exception when removing SjmsComponent    NullPointer exception in SjmsComponent when trying to remove it from camel context                              WARN      org apache camel impl DefaultCamelContext removeComponent DefaultCamelContext java      org apache camel spring SpringCamelContext  Error stopping component org apache camel component sjms SjmsComponent       ec  This exception will be ignored java lang NullPointerException at org apache camel component sjms SjmsComponent doStop SjmsComponent java      at org apache camel support ServiceSupport stop ServiceSupport java      at org apache camel util ServiceHelper stopService ServiceHelper java      at org apache camel impl DefaultCamelContext stopServices DefaultCamelContext java       at org apache camel impl DefaultCamelContext removeComponent DefaultCamelContext java        ',0
'HttpConnectionManagerParams doesn t take effect when it is set to HttpComponent    Here is the user complain It is caused by the patch of CAMEL      which override the setting of HttpConnectionManagerParams    ',0
'rabbitmq component sends basic ack after channel closed when endpoint is set to autoAck    Consuming from a rabbitmq endpoint uri that is configured to autoAck generates errors and fails Example URI  rabbitmq   localhost      test autoAck true amp queue test amp autoDelete false amp username guest amp password guestHere s the relevant log output                osis ht TRACE o a c c rabbitmq RabbitMQConsumer   Acknowleding receipt      delivery tag                       osis ht WARN o a c c rabbitmq RabbitMQConsumer   Error processing exchange  Exchange     Message  WTF                       Caused by       com rabbitmq client AlreadyClosedException   clean connection shutdown  reason  Attempt to use closed channel     com rabbitmq client AlreadyClosedException  clean connection shutdown  reason  Attempt to use closed channel at com rabbitmq client impl AMQChannel ensureIsOpen AMQChannel java            amqp client       jar na      at com rabbitmq client impl AMQChannel transmit AMQChannel java            amqp client       jar na      at com rabbitmq client impl AMQChannel transmit AMQChannel java            amqp client       jar na      at com rabbitmq client impl ChannelN basicAck ChannelN java            amqp client       jar na      at org apache camel component rabbitmq RabbitMQConsumer RabbitConsumer handleDelivery RabbitMQConsumer java            camel rabbitmq        jar             at com rabbitmq client impl ConsumerDispatcher   run ConsumerDispatcher java           amqp client       jar na      at com rabbitmq client impl ConsumerWorkService WorkPoolRunnable run ConsumerWorkService java          amqp client       jar na      at java util concurrent ThreadPoolExecutor runWorker ThreadPoolExecutor java            na               at java util concurrent ThreadPoolExecutor Worker run ThreadPoolExecutor java           na               at java lang Thread run Thread java           na              ',0
